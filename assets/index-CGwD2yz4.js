var ca=Object.defineProperty;var Co=ar=>{throw TypeError(ar)};var ua=(ar,or,lr)=>or in ar?ca(ar,or,{enumerable:!0,configurable:!0,writable:!0,value:lr}):ar[or]=lr;var ii=(ar,or,lr)=>ua(ar,typeof or!="symbol"?or+"":or,lr),ji=(ar,or,lr)=>or.has(ar)||Co("Cannot "+lr);var Or=(ar,or,lr)=>(ji(ar,or,"read from private field"),lr?lr.call(ar):or.get(ar)),_s=(ar,or,lr)=>or.has(ar)?Co("Cannot add the same private member more than once"):or instanceof WeakSet?or.add(ar):or.set(ar,lr),Ms=(ar,or,lr,cr)=>(ji(ar,or,"write to private field"),cr?cr.call(ar,lr):or.set(ar,lr),lr),Es=(ar,or,lr)=>(ji(ar,or,"access private method"),lr);var bi=(ar,or,lr,cr)=>({set _(ur){Ms(ar,or,ur,lr)},get _(){return Or(ar,or,cr)}});(function(){const or=document.createElement("link").relList;if(or&&or.supports&&or.supports("modulepreload"))return;for(const ur of document.querySelectorAll('link[rel="modulepreload"]'))cr(ur);new MutationObserver(ur=>{for(const dr of ur)if(dr.type==="childList")for(const hr of dr.addedNodes)hr.tagName==="LINK"&&hr.rel==="modulepreload"&&cr(hr)}).observe(document,{childList:!0,subtree:!0});function lr(ur){const dr={};return ur.integrity&&(dr.integrity=ur.integrity),ur.referrerPolicy&&(dr.referrerPolicy=ur.referrerPolicy),ur.crossOrigin==="use-credentials"?dr.credentials="include":ur.crossOrigin==="anonymous"?dr.credentials="omit":dr.credentials="same-origin",dr}function cr(ur){if(ur.ep)return;ur.ep=!0;const dr=lr(ur);fetch(ur.href,dr)}})();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(ar){const or=Object.create(null);for(const lr of ar.split(","))or[lr]=1;return lr=>lr in or}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=ar=>ar.charCodeAt(0)===111&&ar.charCodeAt(1)===110&&(ar.charCodeAt(2)>122||ar.charCodeAt(2)<97),isModelListener=ar=>ar.startsWith("onUpdate:"),extend$1=Object.assign,remove=(ar,or)=>{const lr=ar.indexOf(or);lr>-1&&ar.splice(lr,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(ar,or)=>hasOwnProperty$1.call(ar,or),isArray$1=Array.isArray,isMap=ar=>toTypeString(ar)==="[object Map]",isSet=ar=>toTypeString(ar)==="[object Set]",isDate$1=ar=>toTypeString(ar)==="[object Date]",isRegExp$1=ar=>toTypeString(ar)==="[object RegExp]",isFunction$1=ar=>typeof ar=="function",isString=ar=>typeof ar=="string",isSymbol=ar=>typeof ar=="symbol",isObject=ar=>ar!==null&&typeof ar=="object",isPromise=ar=>(isObject(ar)||isFunction$1(ar))&&isFunction$1(ar.then)&&isFunction$1(ar.catch),objectToString=Object.prototype.toString,toTypeString=ar=>objectToString.call(ar),toRawType=ar=>toTypeString(ar).slice(8,-1),isPlainObject$2=ar=>toTypeString(ar)==="[object Object]",isIntegerKey=ar=>isString(ar)&&ar!=="NaN"&&ar[0]!=="-"&&""+parseInt(ar,10)===ar,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=ar=>{const or=Object.create(null);return lr=>or[lr]||(or[lr]=ar(lr))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(ar=>ar.replace(camelizeRE,(or,lr)=>lr?lr.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(ar=>ar.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(ar=>ar.charAt(0).toUpperCase()+ar.slice(1)),toHandlerKey=cacheStringFunction(ar=>ar?`on${capitalize(ar)}`:""),hasChanged=(ar,or)=>!Object.is(ar,or),invokeArrayFns=(ar,...or)=>{for(let lr=0;lr<ar.length;lr++)ar[lr](...or)},def=(ar,or,lr,cr=!1)=>{Object.defineProperty(ar,or,{configurable:!0,enumerable:!1,writable:cr,value:lr})},looseToNumber=ar=>{const or=parseFloat(ar);return isNaN(or)?ar:or},toNumber=ar=>{const or=isString(ar)?Number(ar):NaN;return isNaN(or)?ar:or};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_ALLOWED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",isGloballyAllowed=makeMap(GLOBALS_ALLOWED);function normalizeStyle(ar){if(isArray$1(ar)){const or={};for(let lr=0;lr<ar.length;lr++){const cr=ar[lr],ur=isString(cr)?parseStringStyle(cr):normalizeStyle(cr);if(ur)for(const dr in ur)or[dr]=ur[dr]}return or}else if(isString(ar)||isObject(ar))return ar}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(ar){const or={};return ar.replace(styleCommentRE,"").split(listDelimiterRE).forEach(lr=>{if(lr){const cr=lr.split(propertyDelimiterRE);cr.length>1&&(or[cr[0].trim()]=cr[1].trim())}}),or}function normalizeClass(ar){let or="";if(isString(ar))or=ar;else if(isArray$1(ar))for(let lr=0;lr<ar.length;lr++){const cr=normalizeClass(ar[lr]);cr&&(or+=cr+" ")}else if(isObject(ar))for(const lr in ar)ar[lr]&&(or+=lr+" ");return or.trim()}function normalizeProps(ar){if(!ar)return null;let{class:or,style:lr}=ar;return or&&!isString(or)&&(ar.class=normalizeClass(or)),lr&&(ar.style=normalizeStyle(lr)),ar}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(ar){return!!ar||ar===""}function looseCompareArrays(ar,or){if(ar.length!==or.length)return!1;let lr=!0;for(let cr=0;lr&&cr<ar.length;cr++)lr=looseEqual(ar[cr],or[cr]);return lr}function looseEqual(ar,or){if(ar===or)return!0;let lr=isDate$1(ar),cr=isDate$1(or);if(lr||cr)return lr&&cr?ar.getTime()===or.getTime():!1;if(lr=isSymbol(ar),cr=isSymbol(or),lr||cr)return ar===or;if(lr=isArray$1(ar),cr=isArray$1(or),lr||cr)return lr&&cr?looseCompareArrays(ar,or):!1;if(lr=isObject(ar),cr=isObject(or),lr||cr){if(!lr||!cr)return!1;const ur=Object.keys(ar).length,dr=Object.keys(or).length;if(ur!==dr)return!1;for(const hr in ar){const fr=ar.hasOwnProperty(hr),pr=or.hasOwnProperty(hr);if(fr&&!pr||!fr&&pr||!looseEqual(ar[hr],or[hr]))return!1}}return String(ar)===String(or)}function looseIndexOf(ar,or){return ar.findIndex(lr=>looseEqual(lr,or))}const isRef$1=ar=>!!(ar&&ar.__v_isRef===!0),toDisplayString=ar=>isString(ar)?ar:ar==null?"":isArray$1(ar)||isObject(ar)&&(ar.toString===objectToString||!isFunction$1(ar.toString))?isRef$1(ar)?toDisplayString(ar.value):JSON.stringify(ar,replacer,2):String(ar),replacer=(ar,or)=>isRef$1(or)?replacer(ar,or.value):isMap(or)?{[`Map(${or.size})`]:[...or.entries()].reduce((lr,[cr,ur],dr)=>(lr[stringifySymbol(cr,dr)+" =>"]=ur,lr),{})}:isSet(or)?{[`Set(${or.size})`]:[...or.values()].map(lr=>stringifySymbol(lr))}:isSymbol(or)?stringifySymbol(or):isObject(or)&&!isArray$1(or)&&!isPlainObject$2(or)?String(or):or,stringifySymbol=(ar,or="")=>{var lr;return isSymbol(ar)?`Symbol(${(lr=ar.description)!=null?lr:or})`:ar};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(or=!1){this.detached=or,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!or&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let or,lr;if(this.scopes)for(or=0,lr=this.scopes.length;or<lr;or++)this.scopes[or].pause();for(or=0,lr=this.effects.length;or<lr;or++)this.effects[or].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let or,lr;if(this.scopes)for(or=0,lr=this.scopes.length;or<lr;or++)this.scopes[or].resume();for(or=0,lr=this.effects.length;or<lr;or++)this.effects[or].resume()}}run(or){if(this._active){const lr=activeEffectScope;try{return activeEffectScope=this,or()}finally{activeEffectScope=lr}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(or){if(this._active){this._active=!1;let lr,cr;for(lr=0,cr=this.effects.length;lr<cr;lr++)this.effects[lr].stop();for(this.effects.length=0,lr=0,cr=this.cleanups.length;lr<cr;lr++)this.cleanups[lr]();if(this.cleanups.length=0,this.scopes){for(lr=0,cr=this.scopes.length;lr<cr;lr++)this.scopes[lr].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!or){const ur=this.parent.scopes.pop();ur&&ur!==this&&(this.parent.scopes[this.index]=ur,ur.index=this.index)}this.parent=void 0}}}function effectScope(ar){return new EffectScope(ar)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(ar,or=!1){activeEffectScope&&activeEffectScope.cleanups.push(ar)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(or){this.fn=or,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const or=activeSub,lr=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=or,shouldTrack=lr,this.flags&=-3}}stop(){if(this.flags&1){for(let or=this.deps;or;or=or.nextDep)removeSub(or);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(ar,or=!1){if(ar.flags|=8,or){ar.next=batchedComputed,batchedComputed=ar;return}ar.next=batchedSub,batchedSub=ar}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let or=batchedComputed;for(batchedComputed=void 0;or;){const lr=or.next;or.next=void 0,or.flags&=-9,or=lr}}let ar;for(;batchedSub;){let or=batchedSub;for(batchedSub=void 0;or;){const lr=or.next;if(or.next=void 0,or.flags&=-9,or.flags&1)try{or.trigger()}catch(cr){ar||(ar=cr)}or=lr}}if(ar)throw ar}function prepareDeps(ar){for(let or=ar.deps;or;or=or.nextDep)or.version=-1,or.prevActiveLink=or.dep.activeLink,or.dep.activeLink=or}function cleanupDeps(ar){let or,lr=ar.depsTail,cr=lr;for(;cr;){const ur=cr.prevDep;cr.version===-1?(cr===lr&&(lr=ur),removeSub(cr),removeDep(cr)):or=cr,cr.dep.activeLink=cr.prevActiveLink,cr.prevActiveLink=void 0,cr=ur}ar.deps=or,ar.depsTail=lr}function isDirty(ar){for(let or=ar.deps;or;or=or.nextDep)if(or.dep.version!==or.version||or.dep.computed&&(refreshComputed(or.dep.computed)||or.dep.version!==or.version))return!0;return!!ar._dirty}function refreshComputed(ar){if(ar.flags&4&&!(ar.flags&16)||(ar.flags&=-17,ar.globalVersion===globalVersion)||(ar.globalVersion=globalVersion,!ar.isSSR&&ar.flags&128&&(!ar.deps&&!ar._dirty||!isDirty(ar))))return;ar.flags|=2;const or=ar.dep,lr=activeSub,cr=shouldTrack;activeSub=ar,shouldTrack=!0;try{prepareDeps(ar);const ur=ar.fn(ar._value);(or.version===0||hasChanged(ur,ar._value))&&(ar.flags|=128,ar._value=ur,or.version++)}catch(ur){throw or.version++,ur}finally{activeSub=lr,shouldTrack=cr,cleanupDeps(ar),ar.flags&=-3}}function removeSub(ar,or=!1){const{dep:lr,prevSub:cr,nextSub:ur}=ar;if(cr&&(cr.nextSub=ur,ar.prevSub=void 0),ur&&(ur.prevSub=cr,ar.nextSub=void 0),lr.subs===ar&&(lr.subs=cr,!cr&&lr.computed)){lr.computed.flags&=-5;for(let dr=lr.computed.deps;dr;dr=dr.nextDep)removeSub(dr,!0)}!or&&!--lr.sc&&lr.map&&lr.map.delete(lr.key)}function removeDep(ar){const{prevDep:or,nextDep:lr}=ar;or&&(or.nextDep=lr,ar.prevDep=void 0),lr&&(lr.prevDep=or,ar.nextDep=void 0)}function effect(ar,or){ar.effect instanceof ReactiveEffect&&(ar=ar.effect.fn);const lr=new ReactiveEffect(ar);or&&extend$1(lr,or);try{lr.run()}catch(ur){throw lr.stop(),ur}const cr=lr.run.bind(lr);return cr.effect=lr,cr}function stop(ar){ar.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const ar=trackStack.pop();shouldTrack=ar===void 0?!0:ar}function cleanupEffect(ar){const{cleanup:or}=ar;if(ar.cleanup=void 0,or){const lr=activeSub;activeSub=void 0;try{or()}finally{activeSub=lr}}}let globalVersion=0,Link$1=class{constructor(or,lr){this.sub=or,this.dep=lr,this.version=lr.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Dep{constructor(or){this.computed=or,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(or){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let lr=this.activeLink;if(lr===void 0||lr.sub!==activeSub)lr=this.activeLink=new Link$1(activeSub,this),activeSub.deps?(lr.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=lr,activeSub.depsTail=lr):activeSub.deps=activeSub.depsTail=lr,addSub(lr);else if(lr.version===-1&&(lr.version=this.version,lr.nextDep)){const cr=lr.nextDep;cr.prevDep=lr.prevDep,lr.prevDep&&(lr.prevDep.nextDep=cr),lr.prevDep=activeSub.depsTail,lr.nextDep=void 0,activeSub.depsTail.nextDep=lr,activeSub.depsTail=lr,activeSub.deps===lr&&(activeSub.deps=cr)}return lr}trigger(or){this.version++,globalVersion++,this.notify(or)}notify(or){startBatch();try{for(let lr=this.subs;lr;lr=lr.prevSub)lr.sub.notify()&&lr.sub.dep.notify()}finally{endBatch()}}}function addSub(ar){if(ar.dep.sc++,ar.sub.flags&4){const or=ar.dep.computed;if(or&&!ar.dep.subs){or.flags|=20;for(let cr=or.deps;cr;cr=cr.nextDep)addSub(cr)}const lr=ar.dep.subs;lr!==ar&&(ar.prevSub=lr,lr&&(lr.nextSub=ar)),ar.dep.subs=ar}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(ar,or,lr){if(shouldTrack&&activeSub){let cr=targetMap.get(ar);cr||targetMap.set(ar,cr=new Map);let ur=cr.get(lr);ur||(cr.set(lr,ur=new Dep),ur.map=cr,ur.key=lr),ur.track()}}function trigger(ar,or,lr,cr,ur,dr){const hr=targetMap.get(ar);if(!hr){globalVersion++;return}const fr=pr=>{pr&&pr.trigger()};if(startBatch(),or==="clear")hr.forEach(fr);else{const pr=isArray$1(ar),mr=pr&&isIntegerKey(lr);if(pr&&lr==="length"){const gr=Number(cr);hr.forEach((yr,vr)=>{(vr==="length"||vr===ARRAY_ITERATE_KEY||!isSymbol(vr)&&vr>=gr)&&fr(yr)})}else switch((lr!==void 0||hr.has(void 0))&&fr(hr.get(lr)),mr&&fr(hr.get(ARRAY_ITERATE_KEY)),or){case"add":pr?mr&&fr(hr.get("length")):(fr(hr.get(ITERATE_KEY)),isMap(ar)&&fr(hr.get(MAP_KEY_ITERATE_KEY)));break;case"delete":pr||(fr(hr.get(ITERATE_KEY)),isMap(ar)&&fr(hr.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(ar)&&fr(hr.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(ar,or){const lr=targetMap.get(ar);return lr&&lr.get(or)}function reactiveReadArray(ar){const or=toRaw(ar);return or===ar?or:(track(or,"iterate",ARRAY_ITERATE_KEY),isShallow(ar)?or:or.map(toReactive))}function shallowReadArray(ar){return track(ar=toRaw(ar),"iterate",ARRAY_ITERATE_KEY),ar}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...ar){return reactiveReadArray(this).concat(...ar.map(or=>isArray$1(or)?reactiveReadArray(or):or))},entries(){return iterator(this,"entries",ar=>(ar[1]=toReactive(ar[1]),ar))},every(ar,or){return apply$1(this,"every",ar,or,void 0,arguments)},filter(ar,or){return apply$1(this,"filter",ar,or,lr=>lr.map(toReactive),arguments)},find(ar,or){return apply$1(this,"find",ar,or,toReactive,arguments)},findIndex(ar,or){return apply$1(this,"findIndex",ar,or,void 0,arguments)},findLast(ar,or){return apply$1(this,"findLast",ar,or,toReactive,arguments)},findLastIndex(ar,or){return apply$1(this,"findLastIndex",ar,or,void 0,arguments)},forEach(ar,or){return apply$1(this,"forEach",ar,or,void 0,arguments)},includes(...ar){return searchProxy(this,"includes",ar)},indexOf(...ar){return searchProxy(this,"indexOf",ar)},join(ar){return reactiveReadArray(this).join(ar)},lastIndexOf(...ar){return searchProxy(this,"lastIndexOf",ar)},map(ar,or){return apply$1(this,"map",ar,or,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...ar){return noTracking(this,"push",ar)},reduce(ar,...or){return reduce(this,"reduce",ar,or)},reduceRight(ar,...or){return reduce(this,"reduceRight",ar,or)},shift(){return noTracking(this,"shift")},some(ar,or){return apply$1(this,"some",ar,or,void 0,arguments)},splice(...ar){return noTracking(this,"splice",ar)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(ar){return reactiveReadArray(this).toSorted(ar)},toSpliced(...ar){return reactiveReadArray(this).toSpliced(...ar)},unshift(...ar){return noTracking(this,"unshift",ar)},values(){return iterator(this,"values",toReactive)}};function iterator(ar,or,lr){const cr=shallowReadArray(ar),ur=cr[or]();return cr!==ar&&!isShallow(ar)&&(ur._next=ur.next,ur.next=()=>{const dr=ur._next();return dr.value&&(dr.value=lr(dr.value)),dr}),ur}const arrayProto=Array.prototype;function apply$1(ar,or,lr,cr,ur,dr){const hr=shallowReadArray(ar),fr=hr!==ar&&!isShallow(ar),pr=hr[or];if(pr!==arrayProto[or]){const yr=pr.apply(ar,dr);return fr?toReactive(yr):yr}let mr=lr;hr!==ar&&(fr?mr=function(yr,vr){return lr.call(this,toReactive(yr),vr,ar)}:lr.length>2&&(mr=function(yr,vr){return lr.call(this,yr,vr,ar)}));const gr=pr.call(hr,mr,cr);return fr&&ur?ur(gr):gr}function reduce(ar,or,lr,cr){const ur=shallowReadArray(ar);let dr=lr;return ur!==ar&&(isShallow(ar)?lr.length>3&&(dr=function(hr,fr,pr){return lr.call(this,hr,fr,pr,ar)}):dr=function(hr,fr,pr){return lr.call(this,hr,toReactive(fr),pr,ar)}),ur[or](dr,...cr)}function searchProxy(ar,or,lr){const cr=toRaw(ar);track(cr,"iterate",ARRAY_ITERATE_KEY);const ur=cr[or](...lr);return(ur===-1||ur===!1)&&isProxy(lr[0])?(lr[0]=toRaw(lr[0]),cr[or](...lr)):ur}function noTracking(ar,or,lr=[]){pauseTracking(),startBatch();const cr=toRaw(ar)[or].apply(ar,lr);return endBatch(),resetTracking(),cr}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(ar=>ar!=="arguments"&&ar!=="caller").map(ar=>Symbol[ar]).filter(isSymbol));function hasOwnProperty(ar){isSymbol(ar)||(ar=String(ar));const or=toRaw(this);return track(or,"has",ar),or.hasOwnProperty(ar)}class BaseReactiveHandler{constructor(or=!1,lr=!1){this._isReadonly=or,this._isShallow=lr}get(or,lr,cr){if(lr==="__v_skip")return or.__v_skip;const ur=this._isReadonly,dr=this._isShallow;if(lr==="__v_isReactive")return!ur;if(lr==="__v_isReadonly")return ur;if(lr==="__v_isShallow")return dr;if(lr==="__v_raw")return cr===(ur?dr?shallowReadonlyMap:readonlyMap:dr?shallowReactiveMap:reactiveMap).get(or)||Object.getPrototypeOf(or)===Object.getPrototypeOf(cr)?or:void 0;const hr=isArray$1(or);if(!ur){let pr;if(hr&&(pr=arrayInstrumentations[lr]))return pr;if(lr==="hasOwnProperty")return hasOwnProperty}const fr=Reflect.get(or,lr,isRef(or)?or:cr);return(isSymbol(lr)?builtInSymbols.has(lr):isNonTrackableKeys(lr))||(ur||track(or,"get",lr),dr)?fr:isRef(fr)?hr&&isIntegerKey(lr)?fr:fr.value:isObject(fr)?ur?readonly(fr):reactive(fr):fr}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(or=!1){super(!1,or)}set(or,lr,cr,ur){let dr=or[lr];if(!this._isShallow){const pr=isReadonly(dr);if(!isShallow(cr)&&!isReadonly(cr)&&(dr=toRaw(dr),cr=toRaw(cr)),!isArray$1(or)&&isRef(dr)&&!isRef(cr))return pr?!1:(dr.value=cr,!0)}const hr=isArray$1(or)&&isIntegerKey(lr)?Number(lr)<or.length:hasOwn(or,lr),fr=Reflect.set(or,lr,cr,isRef(or)?or:ur);return or===toRaw(ur)&&(hr?hasChanged(cr,dr)&&trigger(or,"set",lr,cr):trigger(or,"add",lr,cr)),fr}deleteProperty(or,lr){const cr=hasOwn(or,lr);or[lr];const ur=Reflect.deleteProperty(or,lr);return ur&&cr&&trigger(or,"delete",lr,void 0),ur}has(or,lr){const cr=Reflect.has(or,lr);return(!isSymbol(lr)||!builtInSymbols.has(lr))&&track(or,"has",lr),cr}ownKeys(or){return track(or,"iterate",isArray$1(or)?"length":ITERATE_KEY),Reflect.ownKeys(or)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(or=!1){super(!0,or)}set(or,lr){return!0}deleteProperty(or,lr){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=ar=>ar,getProto=ar=>Reflect.getPrototypeOf(ar);function createIterableMethod(ar,or,lr){return function(...cr){const ur=this.__v_raw,dr=toRaw(ur),hr=isMap(dr),fr=ar==="entries"||ar===Symbol.iterator&&hr,pr=ar==="keys"&&hr,mr=ur[ar](...cr),gr=lr?toShallow:or?toReadonly:toReactive;return!or&&track(dr,"iterate",pr?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:yr,done:vr}=mr.next();return vr?{value:yr,done:vr}:{value:fr?[gr(yr[0]),gr(yr[1])]:gr(yr),done:vr}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(ar){return function(...or){return ar==="delete"?!1:ar==="clear"?void 0:this}}function createInstrumentations(ar,or){const lr={get(ur){const dr=this.__v_raw,hr=toRaw(dr),fr=toRaw(ur);ar||(hasChanged(ur,fr)&&track(hr,"get",ur),track(hr,"get",fr));const{has:pr}=getProto(hr),mr=or?toShallow:ar?toReadonly:toReactive;if(pr.call(hr,ur))return mr(dr.get(ur));if(pr.call(hr,fr))return mr(dr.get(fr));dr!==hr&&dr.get(ur)},get size(){const ur=this.__v_raw;return!ar&&track(toRaw(ur),"iterate",ITERATE_KEY),Reflect.get(ur,"size",ur)},has(ur){const dr=this.__v_raw,hr=toRaw(dr),fr=toRaw(ur);return ar||(hasChanged(ur,fr)&&track(hr,"has",ur),track(hr,"has",fr)),ur===fr?dr.has(ur):dr.has(ur)||dr.has(fr)},forEach(ur,dr){const hr=this,fr=hr.__v_raw,pr=toRaw(fr),mr=or?toShallow:ar?toReadonly:toReactive;return!ar&&track(pr,"iterate",ITERATE_KEY),fr.forEach((gr,yr)=>ur.call(dr,mr(gr),mr(yr),hr))}};return extend$1(lr,ar?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(ur){!or&&!isShallow(ur)&&!isReadonly(ur)&&(ur=toRaw(ur));const dr=toRaw(this);return getProto(dr).has.call(dr,ur)||(dr.add(ur),trigger(dr,"add",ur,ur)),this},set(ur,dr){!or&&!isShallow(dr)&&!isReadonly(dr)&&(dr=toRaw(dr));const hr=toRaw(this),{has:fr,get:pr}=getProto(hr);let mr=fr.call(hr,ur);mr||(ur=toRaw(ur),mr=fr.call(hr,ur));const gr=pr.call(hr,ur);return hr.set(ur,dr),mr?hasChanged(dr,gr)&&trigger(hr,"set",ur,dr):trigger(hr,"add",ur,dr),this},delete(ur){const dr=toRaw(this),{has:hr,get:fr}=getProto(dr);let pr=hr.call(dr,ur);pr||(ur=toRaw(ur),pr=hr.call(dr,ur)),fr&&fr.call(dr,ur);const mr=dr.delete(ur);return pr&&trigger(dr,"delete",ur,void 0),mr},clear(){const ur=toRaw(this),dr=ur.size!==0,hr=ur.clear();return dr&&trigger(ur,"clear",void 0,void 0),hr}}),["keys","values","entries",Symbol.iterator].forEach(ur=>{lr[ur]=createIterableMethod(ur,ar,or)}),lr}function createInstrumentationGetter(ar,or){const lr=createInstrumentations(ar,or);return(cr,ur,dr)=>ur==="__v_isReactive"?!ar:ur==="__v_isReadonly"?ar:ur==="__v_raw"?cr:Reflect.get(hasOwn(lr,ur)&&ur in cr?lr:cr,ur,dr)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(ar){switch(ar){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(ar){return ar.__v_skip||!Object.isExtensible(ar)?0:targetTypeMap(toRawType(ar))}function reactive(ar){return isReadonly(ar)?ar:createReactiveObject(ar,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(ar){return createReactiveObject(ar,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(ar){return createReactiveObject(ar,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(ar){return createReactiveObject(ar,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(ar,or,lr,cr,ur){if(!isObject(ar)||ar.__v_raw&&!(or&&ar.__v_isReactive))return ar;const dr=getTargetType(ar);if(dr===0)return ar;const hr=ur.get(ar);if(hr)return hr;const fr=new Proxy(ar,dr===2?cr:lr);return ur.set(ar,fr),fr}function isReactive(ar){return isReadonly(ar)?isReactive(ar.__v_raw):!!(ar&&ar.__v_isReactive)}function isReadonly(ar){return!!(ar&&ar.__v_isReadonly)}function isShallow(ar){return!!(ar&&ar.__v_isShallow)}function isProxy(ar){return ar?!!ar.__v_raw:!1}function toRaw(ar){const or=ar&&ar.__v_raw;return or?toRaw(or):ar}function markRaw(ar){return!hasOwn(ar,"__v_skip")&&Object.isExtensible(ar)&&def(ar,"__v_skip",!0),ar}const toReactive=ar=>isObject(ar)?reactive(ar):ar,toReadonly=ar=>isObject(ar)?readonly(ar):ar;function isRef(ar){return ar?ar.__v_isRef===!0:!1}function ref(ar){return createRef(ar,!1)}function shallowRef(ar){return createRef(ar,!0)}function createRef(ar,or){return isRef(ar)?ar:new RefImpl(ar,or)}class RefImpl{constructor(or,lr){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=lr?or:toRaw(or),this._value=lr?or:toReactive(or),this.__v_isShallow=lr}get value(){return this.dep.track(),this._value}set value(or){const lr=this._rawValue,cr=this.__v_isShallow||isShallow(or)||isReadonly(or);or=cr?or:toRaw(or),hasChanged(or,lr)&&(this._rawValue=or,this._value=cr?or:toReactive(or),this.dep.trigger())}}function triggerRef(ar){ar.dep&&ar.dep.trigger()}function unref(ar){return isRef(ar)?ar.value:ar}function toValue(ar){return isFunction$1(ar)?ar():unref(ar)}const shallowUnwrapHandlers={get:(ar,or,lr)=>or==="__v_raw"?ar:unref(Reflect.get(ar,or,lr)),set:(ar,or,lr,cr)=>{const ur=ar[or];return isRef(ur)&&!isRef(lr)?(ur.value=lr,!0):Reflect.set(ar,or,lr,cr)}};function proxyRefs(ar){return isReactive(ar)?ar:new Proxy(ar,shallowUnwrapHandlers)}class CustomRefImpl{constructor(or){this.__v_isRef=!0,this._value=void 0;const lr=this.dep=new Dep,{get:cr,set:ur}=or(lr.track.bind(lr),lr.trigger.bind(lr));this._get=cr,this._set=ur}get value(){return this._value=this._get()}set value(or){this._set(or)}}function customRef(ar){return new CustomRefImpl(ar)}function toRefs(ar){const or=isArray$1(ar)?new Array(ar.length):{};for(const lr in ar)or[lr]=propertyToRef(ar,lr);return or}class ObjectRefImpl{constructor(or,lr,cr){this._object=or,this._key=lr,this._defaultValue=cr,this.__v_isRef=!0,this._value=void 0}get value(){const or=this._object[this._key];return this._value=or===void 0?this._defaultValue:or}set value(or){this._object[this._key]=or}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(or){this._getter=or,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(ar,or,lr){return isRef(ar)?ar:isFunction$1(ar)?new GetterRefImpl(ar):isObject(ar)&&arguments.length>1?propertyToRef(ar,or,lr):ref(ar)}function propertyToRef(ar,or,lr){const cr=ar[or];return isRef(cr)?cr:new ObjectRefImpl(ar,or,lr)}class ComputedRefImpl{constructor(or,lr,cr){this.fn=or,this.setter=lr,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!lr,this.isSSR=cr}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const or=this.dep.track();return refreshComputed(this),or&&(or.version=this.dep.version),this._value}set value(or){this.setter&&this.setter(or)}}function computed$1(ar,or,lr=!1){let cr,ur;return isFunction$1(ar)?cr=ar:(cr=ar.get,ur=ar.set),new ComputedRefImpl(cr,ur,lr)}const TrackOpTypes={GET:"get",HAS:"has",ITERATE:"iterate"},TriggerOpTypes={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function getCurrentWatcher(){return activeWatcher}function onWatcherCleanup(ar,or=!1,lr=activeWatcher){if(lr){let cr=cleanupMap.get(lr);cr||cleanupMap.set(lr,cr=[]),cr.push(ar)}}function watch$1(ar,or,lr=EMPTY_OBJ){const{immediate:cr,deep:ur,once:dr,scheduler:hr,augmentJob:fr,call:pr}=lr,mr=Cr=>ur?Cr:isShallow(Cr)||ur===!1||ur===0?traverse(Cr,1):traverse(Cr);let gr,yr,vr,br,Sr=!1,xr=!1;if(isRef(ar)?(yr=()=>ar.value,Sr=isShallow(ar)):isReactive(ar)?(yr=()=>mr(ar),Sr=!0):isArray$1(ar)?(xr=!0,Sr=ar.some(Cr=>isReactive(Cr)||isShallow(Cr)),yr=()=>ar.map(Cr=>{if(isRef(Cr))return Cr.value;if(isReactive(Cr))return mr(Cr);if(isFunction$1(Cr))return pr?pr(Cr,2):Cr()})):isFunction$1(ar)?or?yr=pr?()=>pr(ar,2):ar:yr=()=>{if(vr){pauseTracking();try{vr()}finally{resetTracking()}}const Cr=activeWatcher;activeWatcher=gr;try{return pr?pr(ar,3,[br]):ar(br)}finally{activeWatcher=Cr}}:yr=NOOP,or&&ur){const Cr=yr,kr=ur===!0?1/0:ur;yr=()=>traverse(Cr(),kr)}const Er=getCurrentScope(),wr=()=>{gr.stop(),Er&&Er.active&&remove(Er.effects,gr)};if(dr&&or){const Cr=or;or=(...kr)=>{Cr(...kr),wr()}}let Ar=xr?new Array(ar.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const Tr=Cr=>{if(!(!(gr.flags&1)||!gr.dirty&&!Cr))if(or){const kr=gr.run();if(ur||Sr||(xr?kr.some((Mr,Rr)=>hasChanged(Mr,Ar[Rr])):hasChanged(kr,Ar))){vr&&vr();const Mr=activeWatcher;activeWatcher=gr;try{const Rr=[kr,Ar===INITIAL_WATCHER_VALUE?void 0:xr&&Ar[0]===INITIAL_WATCHER_VALUE?[]:Ar,br];pr?pr(or,3,Rr):or(...Rr),Ar=kr}finally{activeWatcher=Mr}}}else gr.run()};return fr&&fr(Tr),gr=new ReactiveEffect(yr),gr.scheduler=hr?()=>hr(Tr,!1):Tr,br=Cr=>onWatcherCleanup(Cr,!1,gr),vr=gr.onStop=()=>{const Cr=cleanupMap.get(gr);if(Cr){if(pr)pr(Cr,4);else for(const kr of Cr)kr();cleanupMap.delete(gr)}},or?cr?Tr(!0):Ar=gr.run():hr?hr(Tr.bind(null,!0),!0):gr.run(),wr.pause=gr.pause.bind(gr),wr.resume=gr.resume.bind(gr),wr.stop=wr,wr}function traverse(ar,or=1/0,lr){if(or<=0||!isObject(ar)||ar.__v_skip||(lr=lr||new Set,lr.has(ar)))return ar;if(lr.add(ar),or--,isRef(ar))traverse(ar.value,or,lr);else if(isArray$1(ar))for(let cr=0;cr<ar.length;cr++)traverse(ar[cr],or,lr);else if(isSet(ar)||isMap(ar))ar.forEach(cr=>{traverse(cr,or,lr)});else if(isPlainObject$2(ar)){for(const cr in ar)traverse(ar[cr],or,lr);for(const cr of Object.getOwnPropertySymbols(ar))Object.prototype.propertyIsEnumerable.call(ar,cr)&&traverse(ar[cr],or,lr)}return ar}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function pushWarningContext(ar){stack.push(ar)}function popWarningContext(){stack.pop()}let isWarning=!1;function warn$1(ar,...or){if(isWarning)return;isWarning=!0,pauseTracking();const lr=stack.length?stack[stack.length-1].component:null,cr=lr&&lr.appContext.config.warnHandler,ur=getComponentTrace();if(cr)callWithErrorHandling(cr,lr,11,[ar+or.map(dr=>{var hr,fr;return(fr=(hr=dr.toString)==null?void 0:hr.call(dr))!=null?fr:JSON.stringify(dr)}).join(""),lr&&lr.proxy,ur.map(({vnode:dr})=>`at <${formatComponentName(lr,dr.type)}>`).join(`
`),ur]);else{const dr=[`[Vue warn]: ${ar}`,...or];ur.length&&dr.push(`
`,...formatTrace(ur)),console.warn(...dr)}resetTracking(),isWarning=!1}function getComponentTrace(){let ar=stack[stack.length-1];if(!ar)return[];const or=[];for(;ar;){const lr=or[0];lr&&lr.vnode===ar?lr.recurseCount++:or.push({vnode:ar,recurseCount:0});const cr=ar.component&&ar.component.parent;ar=cr&&cr.vnode}return or}function formatTrace(ar){const or=[];return ar.forEach((lr,cr)=>{or.push(...cr===0?[]:[`
`],...formatTraceEntry(lr))}),or}function formatTraceEntry({vnode:ar,recurseCount:or}){const lr=or>0?`... (${or} recursive calls)`:"",cr=ar.component?ar.component.parent==null:!1,ur=` at <${formatComponentName(ar.component,ar.type,cr)}`,dr=">"+lr;return ar.props?[ur,...formatProps(ar.props),dr]:[ur+dr]}function formatProps(ar){const or=[],lr=Object.keys(ar);return lr.slice(0,3).forEach(cr=>{or.push(...formatProp(cr,ar[cr]))}),lr.length>3&&or.push(" ..."),or}function formatProp(ar,or,lr){return isString(or)?(or=JSON.stringify(or),lr?or:[`${ar}=${or}`]):typeof or=="number"||typeof or=="boolean"||or==null?lr?or:[`${ar}=${or}`]:isRef(or)?(or=formatProp(ar,toRaw(or.value),!0),lr?or:[`${ar}=Ref<`,or,">"]):isFunction$1(or)?[`${ar}=fn${or.name?`<${or.name}>`:""}`]:(or=toRaw(or),lr?or:[`${ar}=`,or])}function assertNumber(ar,or){}const ErrorCodes={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(ar,or,lr,cr){try{return cr?ar(...cr):ar()}catch(ur){handleError(ur,or,lr)}}function callWithAsyncErrorHandling(ar,or,lr,cr){if(isFunction$1(ar)){const ur=callWithErrorHandling(ar,or,lr,cr);return ur&&isPromise(ur)&&ur.catch(dr=>{handleError(dr,or,lr)}),ur}if(isArray$1(ar)){const ur=[];for(let dr=0;dr<ar.length;dr++)ur.push(callWithAsyncErrorHandling(ar[dr],or,lr,cr));return ur}}function handleError(ar,or,lr,cr=!0){const ur=or?or.vnode:null,{errorHandler:dr,throwUnhandledErrorInProduction:hr}=or&&or.appContext.config||EMPTY_OBJ;if(or){let fr=or.parent;const pr=or.proxy,mr=`https://vuejs.org/error-reference/#runtime-${lr}`;for(;fr;){const gr=fr.ec;if(gr){for(let yr=0;yr<gr.length;yr++)if(gr[yr](ar,pr,mr)===!1)return}fr=fr.parent}if(dr){pauseTracking(),callWithErrorHandling(dr,null,10,[ar,pr,mr]),resetTracking();return}}logError(ar,lr,ur,cr,hr)}function logError(ar,or,lr,cr=!0,ur=!1){if(ur)throw ar;console.error(ar)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(ar){const or=currentFlushPromise||resolvedPromise;return ar?or.then(this?ar.bind(this):ar):or}function findInsertionIndex$1(ar){let or=flushIndex+1,lr=queue.length;for(;or<lr;){const cr=or+lr>>>1,ur=queue[cr],dr=getId(ur);dr<ar||dr===ar&&ur.flags&2?or=cr+1:lr=cr}return or}function queueJob(ar){if(!(ar.flags&1)){const or=getId(ar),lr=queue[queue.length-1];!lr||!(ar.flags&2)&&or>=getId(lr)?queue.push(ar):queue.splice(findInsertionIndex$1(or),0,ar),ar.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(ar){isArray$1(ar)?pendingPostFlushCbs.push(...ar):activePostFlushCbs&&ar.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,ar):ar.flags&1||(pendingPostFlushCbs.push(ar),ar.flags|=1),queueFlush()}function flushPreFlushCbs(ar,or,lr=flushIndex+1){for(;lr<queue.length;lr++){const cr=queue[lr];if(cr&&cr.flags&2){if(ar&&cr.id!==ar.uid)continue;queue.splice(lr,1),lr--,cr.flags&4&&(cr.flags&=-2),cr(),cr.flags&4||(cr.flags&=-2)}}}function flushPostFlushCbs(ar){if(pendingPostFlushCbs.length){const or=[...new Set(pendingPostFlushCbs)].sort((lr,cr)=>getId(lr)-getId(cr));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...or);return}for(activePostFlushCbs=or,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const lr=activePostFlushCbs[postFlushIndex];lr.flags&4&&(lr.flags&=-2),lr.flags&8||lr(),lr.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=ar=>ar.id==null?ar.flags&2?-1:1/0:ar.id;function flushJobs(ar){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const or=queue[flushIndex];or&&!(or.flags&8)&&(or.flags&4&&(or.flags&=-2),callWithErrorHandling(or,or.i,or.i?15:14),or.flags&4||(or.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const or=queue[flushIndex];or&&(or.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools$1,buffer=[];function setDevtoolsHook$1(ar,or){var lr,cr;devtools$1=ar,devtools$1?(devtools$1.enabled=!0,buffer.forEach(({event:ur,args:dr})=>devtools$1.emit(ur,...dr)),buffer=[]):typeof window<"u"&&window.HTMLElement&&!((cr=(lr=window.navigator)==null?void 0:lr.userAgent)!=null&&cr.includes("jsdom"))?((or.__VUE_DEVTOOLS_HOOK_REPLAY__=or.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(dr=>{setDevtoolsHook$1(dr,or)}),setTimeout(()=>{devtools$1||(or.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer=[])},3e3)):buffer=[]}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(ar){const or=currentRenderingInstance;return currentRenderingInstance=ar,currentScopeId=ar&&ar.type.__scopeId||null,or}function pushScopeId(ar){currentScopeId=ar}function popScopeId(){currentScopeId=null}const withScopeId=ar=>withCtx;function withCtx(ar,or=currentRenderingInstance,lr){if(!or||ar._n)return ar;const cr=(...ur)=>{cr._d&&setBlockTracking(-1);const dr=setCurrentRenderingInstance(or);let hr;try{hr=ar(...ur)}finally{setCurrentRenderingInstance(dr),cr._d&&setBlockTracking(1)}return hr};return cr._n=!0,cr._c=!0,cr._d=!0,cr}function withDirectives(ar,or){if(currentRenderingInstance===null)return ar;const lr=getComponentPublicInstance(currentRenderingInstance),cr=ar.dirs||(ar.dirs=[]);for(let ur=0;ur<or.length;ur++){let[dr,hr,fr,pr=EMPTY_OBJ]=or[ur];dr&&(isFunction$1(dr)&&(dr={mounted:dr,updated:dr}),dr.deep&&traverse(hr),cr.push({dir:dr,instance:lr,value:hr,oldValue:void 0,arg:fr,modifiers:pr}))}return ar}function invokeDirectiveHook(ar,or,lr,cr){const ur=ar.dirs,dr=or&&or.dirs;for(let hr=0;hr<ur.length;hr++){const fr=ur[hr];dr&&(fr.oldValue=dr[hr].value);let pr=fr.dir[cr];pr&&(pauseTracking(),callWithAsyncErrorHandling(pr,lr,8,[ar.el,fr,ar,or]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=ar=>ar.__isTeleport,isTeleportDisabled=ar=>ar&&(ar.disabled||ar.disabled===""),isTeleportDeferred=ar=>ar&&(ar.defer||ar.defer===""),isTargetSVG=ar=>typeof SVGElement<"u"&&ar instanceof SVGElement,isTargetMathML=ar=>typeof MathMLElement=="function"&&ar instanceof MathMLElement,resolveTarget=(ar,or)=>{const lr=ar&&ar.to;return isString(lr)?or?or(lr):null:lr},TeleportImpl={name:"Teleport",__isTeleport:!0,process(ar,or,lr,cr,ur,dr,hr,fr,pr,mr){const{mc:gr,pc:yr,pbc:vr,o:{insert:br,querySelector:Sr,createText:xr,createComment:Er}}=mr,wr=isTeleportDisabled(or.props);let{shapeFlag:Ar,children:Tr,dynamicChildren:Cr}=or;if(ar==null){const kr=or.el=xr(""),Mr=or.anchor=xr("");br(kr,lr,cr),br(Mr,lr,cr);const Rr=(_r,Dr)=>{Ar&16&&(ur&&ur.isCE&&(ur.ce._teleportTarget=_r),gr(Tr,_r,Dr,ur,dr,hr,fr,pr))},Nr=()=>{const _r=or.target=resolveTarget(or.props,Sr),Dr=prepareAnchor(_r,or,xr,br);_r&&(hr!=="svg"&&isTargetSVG(_r)?hr="svg":hr!=="mathml"&&isTargetMathML(_r)&&(hr="mathml"),wr||(Rr(_r,Dr),updateCssVars(or,!1)))};wr&&(Rr(lr,Mr),updateCssVars(or,!0)),isTeleportDeferred(or.props)?queuePostRenderEffect(()=>{Nr(),or.el.__isMounted=!0},dr):Nr()}else{if(isTeleportDeferred(or.props)&&!ar.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(ar,or,lr,cr,ur,dr,hr,fr,pr,mr),delete ar.el.__isMounted},dr);return}or.el=ar.el,or.targetStart=ar.targetStart;const kr=or.anchor=ar.anchor,Mr=or.target=ar.target,Rr=or.targetAnchor=ar.targetAnchor,Nr=isTeleportDisabled(ar.props),_r=Nr?lr:Mr,Dr=Nr?kr:Rr;if(hr==="svg"||isTargetSVG(Mr)?hr="svg":(hr==="mathml"||isTargetMathML(Mr))&&(hr="mathml"),Cr?(vr(ar.dynamicChildren,Cr,_r,ur,dr,hr,fr),traverseStaticChildren(ar,or,!0)):pr||yr(ar,or,_r,Dr,ur,dr,hr,fr,!1),wr)Nr?or.props&&ar.props&&or.props.to!==ar.props.to&&(or.props.to=ar.props.to):moveTeleport(or,lr,kr,mr,1);else if((or.props&&or.props.to)!==(ar.props&&ar.props.to)){const Pr=or.target=resolveTarget(or.props,Sr);Pr&&moveTeleport(or,Pr,null,mr,0)}else Nr&&moveTeleport(or,Mr,Rr,mr,1);updateCssVars(or,wr)}},remove(ar,or,lr,{um:cr,o:{remove:ur}},dr){const{shapeFlag:hr,children:fr,anchor:pr,targetStart:mr,targetAnchor:gr,target:yr,props:vr}=ar;if(yr&&(ur(mr),ur(gr)),dr&&ur(pr),hr&16){const br=dr||!isTeleportDisabled(vr);for(let Sr=0;Sr<fr.length;Sr++){const xr=fr[Sr];cr(xr,or,lr,br,!!xr.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(ar,or,lr,{o:{insert:cr},m:ur},dr=2){dr===0&&cr(ar.targetAnchor,or,lr);const{el:hr,anchor:fr,shapeFlag:pr,children:mr,props:gr}=ar,yr=dr===2;if(yr&&cr(hr,or,lr),(!yr||isTeleportDisabled(gr))&&pr&16)for(let vr=0;vr<mr.length;vr++)ur(mr[vr],or,lr,2);yr&&cr(fr,or,lr)}function hydrateTeleport(ar,or,lr,cr,ur,dr,{o:{nextSibling:hr,parentNode:fr,querySelector:pr,insert:mr,createText:gr}},yr){const vr=or.target=resolveTarget(or.props,pr);if(vr){const br=isTeleportDisabled(or.props),Sr=vr._lpa||vr.firstChild;if(or.shapeFlag&16)if(br)or.anchor=yr(hr(ar),or,fr(ar),lr,cr,ur,dr),or.targetStart=Sr,or.targetAnchor=Sr&&hr(Sr);else{or.anchor=hr(ar);let xr=Sr;for(;xr;){if(xr&&xr.nodeType===8){if(xr.data==="teleport start anchor")or.targetStart=xr;else if(xr.data==="teleport anchor"){or.targetAnchor=xr,vr._lpa=or.targetAnchor&&hr(or.targetAnchor);break}}xr=hr(xr)}or.targetAnchor||prepareAnchor(vr,or,gr,mr),yr(Sr&&hr(Sr),or,vr,lr,cr,ur,dr)}updateCssVars(or,br)}return or.anchor&&hr(or.anchor)}const Teleport=TeleportImpl;function updateCssVars(ar,or){const lr=ar.ctx;if(lr&&lr.ut){let cr,ur;for(or?(cr=ar.el,ur=ar.anchor):(cr=ar.targetStart,ur=ar.targetAnchor);cr&&cr!==ur;)cr.nodeType===1&&cr.setAttribute("data-v-owner",lr.uid),cr=cr.nextSibling;lr.ut()}}function prepareAnchor(ar,or,lr,cr){const ur=or.targetStart=lr(""),dr=or.targetAnchor=lr("");return ur[TeleportEndKey]=dr,ar&&(cr(ur,ar),cr(dr,ar)),dr}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const ar={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{ar.isMounted=!0}),onBeforeUnmount(()=>{ar.isUnmounting=!0}),ar}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=ar=>{const or=ar.subTree;return or.component?recursiveGetSubtree(or.component):or},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(ar,{slots:or}){const lr=getCurrentInstance(),cr=useTransitionState();return()=>{const ur=or.default&&getTransitionRawChildren(or.default(),!0);if(!ur||!ur.length)return;const dr=findNonCommentChild(ur),hr=toRaw(ar),{mode:fr}=hr;if(cr.isLeaving)return emptyPlaceholder(dr);const pr=getInnerChild$1(dr);if(!pr)return emptyPlaceholder(dr);let mr=resolveTransitionHooks(pr,hr,cr,lr,yr=>mr=yr);pr.type!==Comment&&setTransitionHooks(pr,mr);let gr=lr.subTree&&getInnerChild$1(lr.subTree);if(gr&&gr.type!==Comment&&!isSameVNodeType(pr,gr)&&recursiveGetSubtree(lr).type!==Comment){let yr=resolveTransitionHooks(gr,hr,cr,lr);if(setTransitionHooks(gr,yr),fr==="out-in"&&pr.type!==Comment)return cr.isLeaving=!0,yr.afterLeave=()=>{cr.isLeaving=!1,lr.job.flags&8||lr.update(),delete yr.afterLeave,gr=void 0},emptyPlaceholder(dr);fr==="in-out"&&pr.type!==Comment?yr.delayLeave=(vr,br,Sr)=>{const xr=getLeavingNodesForType(cr,gr);xr[String(gr.key)]=gr,vr[leaveCbKey]=()=>{br(),vr[leaveCbKey]=void 0,delete mr.delayedLeave,gr=void 0},mr.delayedLeave=()=>{Sr(),delete mr.delayedLeave,gr=void 0}}:gr=void 0}else gr&&(gr=void 0);return dr}}};function findNonCommentChild(ar){let or=ar[0];if(ar.length>1){for(const lr of ar)if(lr.type!==Comment){or=lr;break}}return or}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(ar,or){const{leavingVNodes:lr}=ar;let cr=lr.get(or.type);return cr||(cr=Object.create(null),lr.set(or.type,cr)),cr}function resolveTransitionHooks(ar,or,lr,cr,ur){const{appear:dr,mode:hr,persisted:fr=!1,onBeforeEnter:pr,onEnter:mr,onAfterEnter:gr,onEnterCancelled:yr,onBeforeLeave:vr,onLeave:br,onAfterLeave:Sr,onLeaveCancelled:xr,onBeforeAppear:Er,onAppear:wr,onAfterAppear:Ar,onAppearCancelled:Tr}=or,Cr=String(ar.key),kr=getLeavingNodesForType(lr,ar),Mr=(_r,Dr)=>{_r&&callWithAsyncErrorHandling(_r,cr,9,Dr)},Rr=(_r,Dr)=>{const Pr=Dr[1];Mr(_r,Dr),isArray$1(_r)?_r.every(Ir=>Ir.length<=1)&&Pr():_r.length<=1&&Pr()},Nr={mode:hr,persisted:fr,beforeEnter(_r){let Dr=pr;if(!lr.isMounted)if(dr)Dr=Er||pr;else return;_r[leaveCbKey]&&_r[leaveCbKey](!0);const Pr=kr[Cr];Pr&&isSameVNodeType(ar,Pr)&&Pr.el[leaveCbKey]&&Pr.el[leaveCbKey](),Mr(Dr,[_r])},enter(_r){let Dr=mr,Pr=gr,Ir=yr;if(!lr.isMounted)if(dr)Dr=wr||mr,Pr=Ar||gr,Ir=Tr||yr;else return;let $r=!1;const Zr=_r[enterCbKey$1]=rs=>{$r||($r=!0,rs?Mr(Ir,[_r]):Mr(Pr,[_r]),Nr.delayedLeave&&Nr.delayedLeave(),_r[enterCbKey$1]=void 0)};Dr?Rr(Dr,[_r,Zr]):Zr()},leave(_r,Dr){const Pr=String(ar.key);if(_r[enterCbKey$1]&&_r[enterCbKey$1](!0),lr.isUnmounting)return Dr();Mr(vr,[_r]);let Ir=!1;const $r=_r[leaveCbKey]=Zr=>{Ir||(Ir=!0,Dr(),Zr?Mr(xr,[_r]):Mr(Sr,[_r]),_r[leaveCbKey]=void 0,kr[Pr]===ar&&delete kr[Pr])};kr[Pr]=ar,br?Rr(br,[_r,$r]):$r()},clone(_r){const Dr=resolveTransitionHooks(_r,or,lr,cr,ur);return ur&&ur(Dr),Dr}};return Nr}function emptyPlaceholder(ar){if(isKeepAlive(ar))return ar=cloneVNode(ar),ar.children=null,ar}function getInnerChild$1(ar){if(!isKeepAlive(ar))return isTeleport(ar.type)&&ar.children?findNonCommentChild(ar.children):ar;if(ar.component)return ar.component.subTree;const{shapeFlag:or,children:lr}=ar;if(lr){if(or&16)return lr[0];if(or&32&&isFunction$1(lr.default))return lr.default()}}function setTransitionHooks(ar,or){ar.shapeFlag&6&&ar.component?(ar.transition=or,setTransitionHooks(ar.component.subTree,or)):ar.shapeFlag&128?(ar.ssContent.transition=or.clone(ar.ssContent),ar.ssFallback.transition=or.clone(ar.ssFallback)):ar.transition=or}function getTransitionRawChildren(ar,or=!1,lr){let cr=[],ur=0;for(let dr=0;dr<ar.length;dr++){let hr=ar[dr];const fr=lr==null?hr.key:String(lr)+String(hr.key!=null?hr.key:dr);hr.type===Fragment$1?(hr.patchFlag&128&&ur++,cr=cr.concat(getTransitionRawChildren(hr.children,or,fr))):(or||hr.type!==Comment)&&cr.push(fr!=null?cloneVNode(hr,{key:fr}):hr)}if(ur>1)for(let dr=0;dr<cr.length;dr++)cr[dr].patchFlag=-2;return cr}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(ar,or){return isFunction$1(ar)?extend$1({name:ar.name},or,{setup:ar}):ar}function useId(){const ar=getCurrentInstance();return ar?(ar.appContext.config.idPrefix||"v")+"-"+ar.ids[0]+ar.ids[1]++:""}function markAsyncBoundary(ar){ar.ids=[ar.ids[0]+ar.ids[2]+++"-",0,0]}function useTemplateRef(ar){const or=getCurrentInstance(),lr=shallowRef(null);if(or){const ur=or.refs===EMPTY_OBJ?or.refs={}:or.refs;Object.defineProperty(ur,ar,{enumerable:!0,get:()=>lr.value,set:dr=>lr.value=dr})}return lr}function setRef(ar,or,lr,cr,ur=!1){if(isArray$1(ar)){ar.forEach((Sr,xr)=>setRef(Sr,or&&(isArray$1(or)?or[xr]:or),lr,cr,ur));return}if(isAsyncWrapper(cr)&&!ur){cr.shapeFlag&512&&cr.type.__asyncResolved&&cr.component.subTree.component&&setRef(ar,or,lr,cr.component.subTree);return}const dr=cr.shapeFlag&4?getComponentPublicInstance(cr.component):cr.el,hr=ur?null:dr,{i:fr,r:pr}=ar,mr=or&&or.r,gr=fr.refs===EMPTY_OBJ?fr.refs={}:fr.refs,yr=fr.setupState,vr=toRaw(yr),br=yr===EMPTY_OBJ?()=>!1:Sr=>hasOwn(vr,Sr);if(mr!=null&&mr!==pr&&(isString(mr)?(gr[mr]=null,br(mr)&&(yr[mr]=null)):isRef(mr)&&(mr.value=null)),isFunction$1(pr))callWithErrorHandling(pr,fr,12,[hr,gr]);else{const Sr=isString(pr),xr=isRef(pr);if(Sr||xr){const Er=()=>{if(ar.f){const wr=Sr?br(pr)?yr[pr]:gr[pr]:pr.value;ur?isArray$1(wr)&&remove(wr,dr):isArray$1(wr)?wr.includes(dr)||wr.push(dr):Sr?(gr[pr]=[dr],br(pr)&&(yr[pr]=gr[pr])):(pr.value=[dr],ar.k&&(gr[ar.k]=pr.value))}else Sr?(gr[pr]=hr,br(pr)&&(yr[pr]=hr)):xr&&(pr.value=hr,ar.k&&(gr[ar.k]=hr))};hr?(Er.id=-1,queuePostRenderEffect(Er,lr)):Er()}}}let hasLoggedMismatchError=!1;const logMismatchError=()=>{hasLoggedMismatchError||(console.error("Hydration completed but contains mismatches."),hasLoggedMismatchError=!0)},isSVGContainer=ar=>ar.namespaceURI.includes("svg")&&ar.tagName!=="foreignObject",isMathMLContainer=ar=>ar.namespaceURI.includes("MathML"),getContainerType=ar=>{if(ar.nodeType===1){if(isSVGContainer(ar))return"svg";if(isMathMLContainer(ar))return"mathml"}},isComment=ar=>ar.nodeType===8;function createHydrationFunctions(ar){const{mt:or,p:lr,o:{patchProp:cr,createText:ur,nextSibling:dr,parentNode:hr,remove:fr,insert:pr,createComment:mr}}=ar,gr=(Tr,Cr)=>{if(!Cr.hasChildNodes()){lr(null,Tr,Cr),flushPostFlushCbs(),Cr._vnode=Tr;return}yr(Cr.firstChild,Tr,null,null,null),flushPostFlushCbs(),Cr._vnode=Tr},yr=(Tr,Cr,kr,Mr,Rr,Nr=!1)=>{Nr=Nr||!!Cr.dynamicChildren;const _r=isComment(Tr)&&Tr.data==="[",Dr=()=>xr(Tr,Cr,kr,Mr,Rr,_r),{type:Pr,ref:Ir,shapeFlag:$r,patchFlag:Zr}=Cr;let rs=Tr.nodeType;Cr.el=Tr,Zr===-2&&(Nr=!1,Cr.dynamicChildren=null);let qr=null;switch(Pr){case Text$2:rs!==3?Cr.children===""?(pr(Cr.el=ur(""),hr(Tr),Tr),qr=Tr):qr=Dr():(Tr.data!==Cr.children&&(logMismatchError(),Tr.data=Cr.children),qr=dr(Tr));break;case Comment:Ar(Tr)?(qr=dr(Tr),wr(Cr.el=Tr.content.firstChild,Tr,kr)):rs!==8||_r?qr=Dr():qr=dr(Tr);break;case Static:if(_r&&(Tr=dr(Tr),rs=Tr.nodeType),rs===1||rs===3){qr=Tr;const zr=!Cr.children.length;for(let Jr=0;Jr<Cr.staticCount;Jr++)zr&&(Cr.children+=qr.nodeType===1?qr.outerHTML:qr.data),Jr===Cr.staticCount-1&&(Cr.anchor=qr),qr=dr(qr);return _r?dr(qr):qr}else Dr();break;case Fragment$1:_r?qr=Sr(Tr,Cr,kr,Mr,Rr,Nr):qr=Dr();break;default:if($r&1)(rs!==1||Cr.type.toLowerCase()!==Tr.tagName.toLowerCase())&&!Ar(Tr)?qr=Dr():qr=vr(Tr,Cr,kr,Mr,Rr,Nr);else if($r&6){Cr.slotScopeIds=Rr;const zr=hr(Tr);if(_r?qr=Er(Tr):isComment(Tr)&&Tr.data==="teleport start"?qr=Er(Tr,Tr.data,"teleport end"):qr=dr(Tr),or(Cr,zr,null,kr,Mr,getContainerType(zr),Nr),isAsyncWrapper(Cr)&&!Cr.type.__asyncResolved){let Jr;_r?(Jr=createVNode(Fragment$1),Jr.anchor=qr?qr.previousSibling:zr.lastChild):Jr=Tr.nodeType===3?createTextVNode(""):createVNode("div"),Jr.el=Tr,Cr.component.subTree=Jr}}else $r&64?rs!==8?qr=Dr():qr=Cr.type.hydrate(Tr,Cr,kr,Mr,Rr,Nr,ar,br):$r&128&&(qr=Cr.type.hydrate(Tr,Cr,kr,Mr,getContainerType(hr(Tr)),Rr,Nr,ar,yr))}return Ir!=null&&setRef(Ir,null,Mr,Cr),qr},vr=(Tr,Cr,kr,Mr,Rr,Nr)=>{Nr=Nr||!!Cr.dynamicChildren;const{type:_r,props:Dr,patchFlag:Pr,shapeFlag:Ir,dirs:$r,transition:Zr}=Cr,rs=_r==="input"||_r==="option";if(rs||Pr!==-1){$r&&invokeDirectiveHook(Cr,null,kr,"created");let qr=!1;if(Ar(Tr)){qr=needTransition(null,Zr)&&kr&&kr.vnode.props&&kr.vnode.props.appear;const Jr=Tr.content.firstChild;qr&&Zr.beforeEnter(Jr),wr(Jr,Tr,kr),Cr.el=Tr=Jr}if(Ir&16&&!(Dr&&(Dr.innerHTML||Dr.textContent))){let Jr=br(Tr.firstChild,Cr,Tr,kr,Mr,Rr,Nr);for(;Jr;){isMismatchAllowed(Tr,1)||logMismatchError();const Hr=Jr;Jr=Jr.nextSibling,fr(Hr)}}else if(Ir&8){let Jr=Cr.children;Jr[0]===`
`&&(Tr.tagName==="PRE"||Tr.tagName==="TEXTAREA")&&(Jr=Jr.slice(1)),Tr.textContent!==Jr&&(isMismatchAllowed(Tr,0)||logMismatchError(),Tr.textContent=Cr.children)}if(Dr){if(rs||!Nr||Pr&48){const Jr=Tr.tagName.includes("-");for(const Hr in Dr)(rs&&(Hr.endsWith("value")||Hr==="indeterminate")||isOn(Hr)&&!isReservedProp(Hr)||Hr[0]==="."||Jr)&&cr(Tr,Hr,null,Dr[Hr],void 0,kr)}else if(Dr.onClick)cr(Tr,"onClick",null,Dr.onClick,void 0,kr);else if(Pr&4&&isReactive(Dr.style))for(const Jr in Dr.style)Dr.style[Jr]}let zr;(zr=Dr&&Dr.onVnodeBeforeMount)&&invokeVNodeHook(zr,kr,Cr),$r&&invokeDirectiveHook(Cr,null,kr,"beforeMount"),((zr=Dr&&Dr.onVnodeMounted)||$r||qr)&&queueEffectWithSuspense(()=>{zr&&invokeVNodeHook(zr,kr,Cr),qr&&Zr.enter(Tr),$r&&invokeDirectiveHook(Cr,null,kr,"mounted")},Mr)}return Tr.nextSibling},br=(Tr,Cr,kr,Mr,Rr,Nr,_r)=>{_r=_r||!!Cr.dynamicChildren;const Dr=Cr.children,Pr=Dr.length;for(let Ir=0;Ir<Pr;Ir++){const $r=_r?Dr[Ir]:Dr[Ir]=normalizeVNode(Dr[Ir]),Zr=$r.type===Text$2;Tr?(Zr&&!_r&&Ir+1<Pr&&normalizeVNode(Dr[Ir+1]).type===Text$2&&(pr(ur(Tr.data.slice($r.children.length)),kr,dr(Tr)),Tr.data=$r.children),Tr=yr(Tr,$r,Mr,Rr,Nr,_r)):Zr&&!$r.children?pr($r.el=ur(""),kr):(isMismatchAllowed(kr,1)||logMismatchError(),lr(null,$r,kr,null,Mr,Rr,getContainerType(kr),Nr))}return Tr},Sr=(Tr,Cr,kr,Mr,Rr,Nr)=>{const{slotScopeIds:_r}=Cr;_r&&(Rr=Rr?Rr.concat(_r):_r);const Dr=hr(Tr),Pr=br(dr(Tr),Cr,Dr,kr,Mr,Rr,Nr);return Pr&&isComment(Pr)&&Pr.data==="]"?dr(Cr.anchor=Pr):(logMismatchError(),pr(Cr.anchor=mr("]"),Dr,Pr),Pr)},xr=(Tr,Cr,kr,Mr,Rr,Nr)=>{if(isMismatchAllowed(Tr.parentElement,1)||logMismatchError(),Cr.el=null,Nr){const Pr=Er(Tr);for(;;){const Ir=dr(Tr);if(Ir&&Ir!==Pr)fr(Ir);else break}}const _r=dr(Tr),Dr=hr(Tr);return fr(Tr),lr(null,Cr,Dr,_r,kr,Mr,getContainerType(Dr),Rr),kr&&(kr.vnode.el=Cr.el,updateHOCHostEl(kr,Cr.el)),_r},Er=(Tr,Cr="[",kr="]")=>{let Mr=0;for(;Tr;)if(Tr=dr(Tr),Tr&&isComment(Tr)&&(Tr.data===Cr&&Mr++,Tr.data===kr)){if(Mr===0)return dr(Tr);Mr--}return Tr},wr=(Tr,Cr,kr)=>{const Mr=Cr.parentNode;Mr&&Mr.replaceChild(Tr,Cr);let Rr=kr;for(;Rr;)Rr.vnode.el===Cr&&(Rr.vnode.el=Rr.subTree.el=Tr),Rr=Rr.parent},Ar=Tr=>Tr.nodeType===1&&Tr.tagName==="TEMPLATE";return[gr,yr]}const allowMismatchAttr="data-allow-mismatch",MismatchTypeString={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function isMismatchAllowed(ar,or){if(or===0||or===1)for(;ar&&!ar.hasAttribute(allowMismatchAttr);)ar=ar.parentElement;const lr=ar&&ar.getAttribute(allowMismatchAttr);if(lr==null)return!1;if(lr==="")return!0;{const cr=lr.split(",");return or===0&&cr.includes("children")?!0:lr.split(",").includes(MismatchTypeString[or])}}const requestIdleCallback=getGlobalThis().requestIdleCallback||(ar=>setTimeout(ar,1)),cancelIdleCallback=getGlobalThis().cancelIdleCallback||(ar=>clearTimeout(ar)),hydrateOnIdle=(ar=1e4)=>or=>{const lr=requestIdleCallback(or,{timeout:ar});return()=>cancelIdleCallback(lr)};function elementIsVisibleInViewport(ar){const{top:or,left:lr,bottom:cr,right:ur}=ar.getBoundingClientRect(),{innerHeight:dr,innerWidth:hr}=window;return(or>0&&or<dr||cr>0&&cr<dr)&&(lr>0&&lr<hr||ur>0&&ur<hr)}const hydrateOnVisible=ar=>(or,lr)=>{const cr=new IntersectionObserver(ur=>{for(const dr of ur)if(dr.isIntersecting){cr.disconnect(),or();break}},ar);return lr(ur=>{if(ur instanceof Element){if(elementIsVisibleInViewport(ur))return or(),cr.disconnect(),!1;cr.observe(ur)}}),()=>cr.disconnect()},hydrateOnMediaQuery=ar=>or=>{if(ar){const lr=matchMedia(ar);if(lr.matches)or();else return lr.addEventListener("change",or,{once:!0}),()=>lr.removeEventListener("change",or)}},hydrateOnInteraction=(ar=[])=>(or,lr)=>{isString(ar)&&(ar=[ar]);let cr=!1;const ur=hr=>{cr||(cr=!0,dr(),or(),hr.target.dispatchEvent(new hr.constructor(hr.type,hr)))},dr=()=>{lr(hr=>{for(const fr of ar)hr.removeEventListener(fr,ur)})};return lr(hr=>{for(const fr of ar)hr.addEventListener(fr,ur,{once:!0})}),dr};function forEachElement(ar,or){if(isComment(ar)&&ar.data==="["){let lr=1,cr=ar.nextSibling;for(;cr;){if(cr.nodeType===1){if(or(cr)===!1)break}else if(isComment(cr))if(cr.data==="]"){if(--lr===0)break}else cr.data==="["&&lr++;cr=cr.nextSibling}}else or(ar)}const isAsyncWrapper=ar=>!!ar.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(ar){isFunction$1(ar)&&(ar={loader:ar});const{loader:or,loadingComponent:lr,errorComponent:cr,delay:ur=200,hydrate:dr,timeout:hr,suspensible:fr=!0,onError:pr}=ar;let mr=null,gr,yr=0;const vr=()=>(yr++,mr=null,br()),br=()=>{let Sr;return mr||(Sr=mr=or().catch(xr=>{if(xr=xr instanceof Error?xr:new Error(String(xr)),pr)return new Promise((Er,wr)=>{pr(xr,()=>Er(vr()),()=>wr(xr),yr+1)});throw xr}).then(xr=>Sr!==mr&&mr?mr:(xr&&(xr.__esModule||xr[Symbol.toStringTag]==="Module")&&(xr=xr.default),gr=xr,xr)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:br,__asyncHydrate(Sr,xr,Er){const wr=dr?()=>{const Ar=dr(Er,Tr=>forEachElement(Sr,Tr));Ar&&(xr.bum||(xr.bum=[])).push(Ar)}:Er;gr?wr():br().then(()=>!xr.isUnmounted&&wr())},get __asyncResolved(){return gr},setup(){const Sr=currentInstance;if(markAsyncBoundary(Sr),gr)return()=>createInnerComp(gr,Sr);const xr=Tr=>{mr=null,handleError(Tr,Sr,13,!cr)};if(fr&&Sr.suspense||isInSSRComponentSetup)return br().then(Tr=>()=>createInnerComp(Tr,Sr)).catch(Tr=>(xr(Tr),()=>cr?createVNode(cr,{error:Tr}):null));const Er=ref(!1),wr=ref(),Ar=ref(!!ur);return ur&&setTimeout(()=>{Ar.value=!1},ur),hr!=null&&setTimeout(()=>{if(!Er.value&&!wr.value){const Tr=new Error(`Async component timed out after ${hr}ms.`);xr(Tr),wr.value=Tr}},hr),br().then(()=>{Er.value=!0,Sr.parent&&isKeepAlive(Sr.parent.vnode)&&Sr.parent.update()}).catch(Tr=>{xr(Tr),wr.value=Tr}),()=>{if(Er.value&&gr)return createInnerComp(gr,Sr);if(wr.value&&cr)return createVNode(cr,{error:wr.value});if(lr&&!Ar.value)return createVNode(lr)}}})}function createInnerComp(ar,or){const{ref:lr,props:cr,children:ur,ce:dr}=or.vnode,hr=createVNode(ar,cr,ur);return hr.ref=lr,hr.ce=dr,delete or.vnode.ce,hr}const isKeepAlive=ar=>ar.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(ar,{slots:or}){const lr=getCurrentInstance(),cr=lr.ctx;if(!cr.renderer)return()=>{const Ar=or.default&&or.default();return Ar&&Ar.length===1?Ar[0]:Ar};const ur=new Map,dr=new Set;let hr=null;const fr=lr.suspense,{renderer:{p:pr,m:mr,um:gr,o:{createElement:yr}}}=cr,vr=yr("div");cr.activate=(Ar,Tr,Cr,kr,Mr)=>{const Rr=Ar.component;mr(Ar,Tr,Cr,0,fr),pr(Rr.vnode,Ar,Tr,Cr,Rr,fr,kr,Ar.slotScopeIds,Mr),queuePostRenderEffect(()=>{Rr.isDeactivated=!1,Rr.a&&invokeArrayFns(Rr.a);const Nr=Ar.props&&Ar.props.onVnodeMounted;Nr&&invokeVNodeHook(Nr,Rr.parent,Ar)},fr)},cr.deactivate=Ar=>{const Tr=Ar.component;invalidateMount(Tr.m),invalidateMount(Tr.a),mr(Ar,vr,null,1,fr),queuePostRenderEffect(()=>{Tr.da&&invokeArrayFns(Tr.da);const Cr=Ar.props&&Ar.props.onVnodeUnmounted;Cr&&invokeVNodeHook(Cr,Tr.parent,Ar),Tr.isDeactivated=!0},fr)};function br(Ar){resetShapeFlag(Ar),gr(Ar,lr,fr,!0)}function Sr(Ar){ur.forEach((Tr,Cr)=>{const kr=getComponentName(Tr.type);kr&&!Ar(kr)&&xr(Cr)})}function xr(Ar){const Tr=ur.get(Ar);Tr&&(!hr||!isSameVNodeType(Tr,hr))?br(Tr):hr&&resetShapeFlag(hr),ur.delete(Ar),dr.delete(Ar)}watch(()=>[ar.include,ar.exclude],([Ar,Tr])=>{Ar&&Sr(Cr=>matches$2(Ar,Cr)),Tr&&Sr(Cr=>!matches$2(Tr,Cr))},{flush:"post",deep:!0});let Er=null;const wr=()=>{Er!=null&&(isSuspense(lr.subTree.type)?queuePostRenderEffect(()=>{ur.set(Er,getInnerChild(lr.subTree))},lr.subTree.suspense):ur.set(Er,getInnerChild(lr.subTree)))};return onMounted(wr),onUpdated(wr),onBeforeUnmount(()=>{ur.forEach(Ar=>{const{subTree:Tr,suspense:Cr}=lr,kr=getInnerChild(Tr);if(Ar.type===kr.type&&Ar.key===kr.key){resetShapeFlag(kr);const Mr=kr.component.da;Mr&&queuePostRenderEffect(Mr,Cr);return}br(Ar)})}),()=>{if(Er=null,!or.default)return hr=null;const Ar=or.default(),Tr=Ar[0];if(Ar.length>1)return hr=null,Ar;if(!isVNode(Tr)||!(Tr.shapeFlag&4)&&!(Tr.shapeFlag&128))return hr=null,Tr;let Cr=getInnerChild(Tr);if(Cr.type===Comment)return hr=null,Cr;const kr=Cr.type,Mr=getComponentName(isAsyncWrapper(Cr)?Cr.type.__asyncResolved||{}:kr),{include:Rr,exclude:Nr,max:_r}=ar;if(Rr&&(!Mr||!matches$2(Rr,Mr))||Nr&&Mr&&matches$2(Nr,Mr))return Cr.shapeFlag&=-257,hr=Cr,Tr;const Dr=Cr.key==null?kr:Cr.key,Pr=ur.get(Dr);return Cr.el&&(Cr=cloneVNode(Cr),Tr.shapeFlag&128&&(Tr.ssContent=Cr)),Er=Dr,Pr?(Cr.el=Pr.el,Cr.component=Pr.component,Cr.transition&&setTransitionHooks(Cr,Cr.transition),Cr.shapeFlag|=512,dr.delete(Dr),dr.add(Dr)):(dr.add(Dr),_r&&dr.size>parseInt(_r,10)&&xr(dr.values().next().value)),Cr.shapeFlag|=256,hr=Cr,isSuspense(Tr.type)?Tr:Cr}}},KeepAlive=KeepAliveImpl;function matches$2(ar,or){return isArray$1(ar)?ar.some(lr=>matches$2(lr,or)):isString(ar)?ar.split(",").includes(or):isRegExp$1(ar)?(ar.lastIndex=0,ar.test(or)):!1}function onActivated(ar,or){registerKeepAliveHook(ar,"a",or)}function onDeactivated(ar,or){registerKeepAliveHook(ar,"da",or)}function registerKeepAliveHook(ar,or,lr=currentInstance){const cr=ar.__wdc||(ar.__wdc=()=>{let ur=lr;for(;ur;){if(ur.isDeactivated)return;ur=ur.parent}return ar()});if(injectHook(or,cr,lr),lr){let ur=lr.parent;for(;ur&&ur.parent;)isKeepAlive(ur.parent.vnode)&&injectToKeepAliveRoot(cr,or,lr,ur),ur=ur.parent}}function injectToKeepAliveRoot(ar,or,lr,cr){const ur=injectHook(or,ar,cr,!0);onUnmounted(()=>{remove(cr[or],ur)},lr)}function resetShapeFlag(ar){ar.shapeFlag&=-257,ar.shapeFlag&=-513}function getInnerChild(ar){return ar.shapeFlag&128?ar.ssContent:ar}function injectHook(ar,or,lr=currentInstance,cr=!1){if(lr){const ur=lr[ar]||(lr[ar]=[]),dr=or.__weh||(or.__weh=(...hr)=>{pauseTracking();const fr=setCurrentInstance(lr),pr=callWithAsyncErrorHandling(or,lr,ar,hr);return fr(),resetTracking(),pr});return cr?ur.unshift(dr):ur.push(dr),dr}}const createHook=ar=>(or,lr=currentInstance)=>{(!isInSSRComponentSetup||ar==="sp")&&injectHook(ar,(...cr)=>or(...cr),lr)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(ar,or=currentInstance){injectHook("ec",ar,or)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(ar,or){return resolveAsset(COMPONENTS,ar,!0,or)||ar}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(ar){return isString(ar)?resolveAsset(COMPONENTS,ar,!1)||ar:ar||NULL_DYNAMIC_COMPONENT}function resolveDirective(ar){return resolveAsset(DIRECTIVES,ar)}function resolveAsset(ar,or,lr=!0,cr=!1){const ur=currentRenderingInstance||currentInstance;if(ur){const dr=ur.type;if(ar===COMPONENTS){const fr=getComponentName(dr,!1);if(fr&&(fr===or||fr===camelize(or)||fr===capitalize(camelize(or))))return dr}const hr=resolve(ur[ar]||dr[ar],or)||resolve(ur.appContext[ar],or);return!hr&&cr?dr:hr}}function resolve(ar,or){return ar&&(ar[or]||ar[camelize(or)]||ar[capitalize(camelize(or))])}function renderList(ar,or,lr,cr){let ur;const dr=lr&&lr[cr],hr=isArray$1(ar);if(hr||isString(ar)){const fr=hr&&isReactive(ar);let pr=!1,mr=!1;fr&&(pr=!isShallow(ar),mr=isReadonly(ar),ar=shallowReadArray(ar)),ur=new Array(ar.length);for(let gr=0,yr=ar.length;gr<yr;gr++)ur[gr]=or(pr?mr?toReadonly(toReactive(ar[gr])):toReactive(ar[gr]):ar[gr],gr,void 0,dr&&dr[gr])}else if(typeof ar=="number"){ur=new Array(ar);for(let fr=0;fr<ar;fr++)ur[fr]=or(fr+1,fr,void 0,dr&&dr[fr])}else if(isObject(ar))if(ar[Symbol.iterator])ur=Array.from(ar,(fr,pr)=>or(fr,pr,void 0,dr&&dr[pr]));else{const fr=Object.keys(ar);ur=new Array(fr.length);for(let pr=0,mr=fr.length;pr<mr;pr++){const gr=fr[pr];ur[pr]=or(ar[gr],gr,pr,dr&&dr[pr])}}else ur=[];return lr&&(lr[cr]=ur),ur}function createSlots(ar,or){for(let lr=0;lr<or.length;lr++){const cr=or[lr];if(isArray$1(cr))for(let ur=0;ur<cr.length;ur++)ar[cr[ur].name]=cr[ur].fn;else cr&&(ar[cr.name]=cr.key?(...ur)=>{const dr=cr.fn(...ur);return dr&&(dr.key=cr.key),dr}:cr.fn)}return ar}function renderSlot(ar,or,lr={},cr,ur){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return or!=="default"&&(lr.name=or),openBlock(),createBlock(Fragment$1,null,[createVNode("slot",lr,cr&&cr())],64);let dr=ar[or];dr&&dr._c&&(dr._d=!1),openBlock();const hr=dr&&ensureValidVNode(dr(lr)),fr=lr.key||hr&&hr.key,pr=createBlock(Fragment$1,{key:(fr&&!isSymbol(fr)?fr:`_${or}`)+(!hr&&cr?"_fb":"")},hr||(cr?cr():[]),hr&&ar._===1?64:-2);return!ur&&pr.scopeId&&(pr.slotScopeIds=[pr.scopeId+"-s"]),dr&&dr._c&&(dr._d=!0),pr}function ensureValidVNode(ar){return ar.some(or=>isVNode(or)?!(or.type===Comment||or.type===Fragment$1&&!ensureValidVNode(or.children)):!0)?ar:null}function toHandlers(ar,or){const lr={};for(const cr in ar)lr[or&&/[A-Z]/.test(cr)?`on:${cr}`:toHandlerKey(cr)]=ar[cr];return lr}const getPublicInstance=ar=>ar?isStatefulComponent(ar)?getComponentPublicInstance(ar):getPublicInstance(ar.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:ar=>ar,$el:ar=>ar.vnode.el,$data:ar=>ar.data,$props:ar=>ar.props,$attrs:ar=>ar.attrs,$slots:ar=>ar.slots,$refs:ar=>ar.refs,$parent:ar=>getPublicInstance(ar.parent),$root:ar=>getPublicInstance(ar.root),$host:ar=>ar.ce,$emit:ar=>ar.emit,$options:ar=>resolveMergedOptions(ar),$forceUpdate:ar=>ar.f||(ar.f=()=>{queueJob(ar.update)}),$nextTick:ar=>ar.n||(ar.n=nextTick.bind(ar.proxy)),$watch:ar=>instanceWatch.bind(ar)}),hasSetupBinding=(ar,or)=>ar!==EMPTY_OBJ&&!ar.__isScriptSetup&&hasOwn(ar,or),PublicInstanceProxyHandlers={get({_:ar},or){if(or==="__v_skip")return!0;const{ctx:lr,setupState:cr,data:ur,props:dr,accessCache:hr,type:fr,appContext:pr}=ar;let mr;if(or[0]!=="$"){const br=hr[or];if(br!==void 0)switch(br){case 1:return cr[or];case 2:return ur[or];case 4:return lr[or];case 3:return dr[or]}else{if(hasSetupBinding(cr,or))return hr[or]=1,cr[or];if(ur!==EMPTY_OBJ&&hasOwn(ur,or))return hr[or]=2,ur[or];if((mr=ar.propsOptions[0])&&hasOwn(mr,or))return hr[or]=3,dr[or];if(lr!==EMPTY_OBJ&&hasOwn(lr,or))return hr[or]=4,lr[or];shouldCacheAccess&&(hr[or]=0)}}const gr=publicPropertiesMap[or];let yr,vr;if(gr)return or==="$attrs"&&track(ar.attrs,"get",""),gr(ar);if((yr=fr.__cssModules)&&(yr=yr[or]))return yr;if(lr!==EMPTY_OBJ&&hasOwn(lr,or))return hr[or]=4,lr[or];if(vr=pr.config.globalProperties,hasOwn(vr,or))return vr[or]},set({_:ar},or,lr){const{data:cr,setupState:ur,ctx:dr}=ar;return hasSetupBinding(ur,or)?(ur[or]=lr,!0):cr!==EMPTY_OBJ&&hasOwn(cr,or)?(cr[or]=lr,!0):hasOwn(ar.props,or)||or[0]==="$"&&or.slice(1)in ar?!1:(dr[or]=lr,!0)},has({_:{data:ar,setupState:or,accessCache:lr,ctx:cr,appContext:ur,propsOptions:dr}},hr){let fr;return!!lr[hr]||ar!==EMPTY_OBJ&&hasOwn(ar,hr)||hasSetupBinding(or,hr)||(fr=dr[0])&&hasOwn(fr,hr)||hasOwn(cr,hr)||hasOwn(publicPropertiesMap,hr)||hasOwn(ur.config.globalProperties,hr)},defineProperty(ar,or,lr){return lr.get!=null?ar._.accessCache[or]=0:hasOwn(lr,"value")&&this.set(ar,or,lr.value,null),Reflect.defineProperty(ar,or,lr)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$1({},PublicInstanceProxyHandlers,{get(ar,or){if(or!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(ar,or,ar)},has(ar,or){return or[0]!=="_"&&!isGloballyAllowed(or)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(ar){}function defineOptions(ar){}function defineSlots(){return null}function defineModel(){}function withDefaults(ar,or){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const ar=getCurrentInstance();return ar.setupContext||(ar.setupContext=createSetupContext(ar))}function normalizePropsOrEmits(ar){return isArray$1(ar)?ar.reduce((or,lr)=>(or[lr]=null,or),{}):ar}function mergeDefaults(ar,or){const lr=normalizePropsOrEmits(ar);for(const cr in or){if(cr.startsWith("__skip"))continue;let ur=lr[cr];ur?isArray$1(ur)||isFunction$1(ur)?ur=lr[cr]={type:ur,default:or[cr]}:ur.default=or[cr]:ur===null&&(ur=lr[cr]={default:or[cr]}),ur&&or[`__skip_${cr}`]&&(ur.skipFactory=!0)}return lr}function mergeModels(ar,or){return!ar||!or?ar||or:isArray$1(ar)&&isArray$1(or)?ar.concat(or):extend$1({},normalizePropsOrEmits(ar),normalizePropsOrEmits(or))}function createPropsRestProxy(ar,or){const lr={};for(const cr in ar)or.includes(cr)||Object.defineProperty(lr,cr,{enumerable:!0,get:()=>ar[cr]});return lr}function withAsyncContext(ar){const or=getCurrentInstance();let lr=ar();return unsetCurrentInstance(),isPromise(lr)&&(lr=lr.catch(cr=>{throw setCurrentInstance(or),cr})),[lr,()=>setCurrentInstance(or)]}let shouldCacheAccess=!0;function applyOptions(ar){const or=resolveMergedOptions(ar),lr=ar.proxy,cr=ar.ctx;shouldCacheAccess=!1,or.beforeCreate&&callHook$1(or.beforeCreate,ar,"bc");const{data:ur,computed:dr,methods:hr,watch:fr,provide:pr,inject:mr,created:gr,beforeMount:yr,mounted:vr,beforeUpdate:br,updated:Sr,activated:xr,deactivated:Er,beforeDestroy:wr,beforeUnmount:Ar,destroyed:Tr,unmounted:Cr,render:kr,renderTracked:Mr,renderTriggered:Rr,errorCaptured:Nr,serverPrefetch:_r,expose:Dr,inheritAttrs:Pr,components:Ir,directives:$r,filters:Zr}=or;if(mr&&resolveInjections(mr,cr,null),hr)for(const zr in hr){const Jr=hr[zr];isFunction$1(Jr)&&(cr[zr]=Jr.bind(lr))}if(ur){const zr=ur.call(lr,lr);isObject(zr)&&(ar.data=reactive(zr))}if(shouldCacheAccess=!0,dr)for(const zr in dr){const Jr=dr[zr],Hr=isFunction$1(Jr)?Jr.bind(lr,lr):isFunction$1(Jr.get)?Jr.get.bind(lr,lr):NOOP,Kr=!isFunction$1(Jr)&&isFunction$1(Jr.set)?Jr.set.bind(lr):NOOP,ys=computed({get:Hr,set:Kr});Object.defineProperty(cr,zr,{enumerable:!0,configurable:!0,get:()=>ys.value,set:Yr=>ys.value=Yr})}if(fr)for(const zr in fr)createWatcher(fr[zr],cr,lr,zr);if(pr){const zr=isFunction$1(pr)?pr.call(lr):pr;Reflect.ownKeys(zr).forEach(Jr=>{provide(Jr,zr[Jr])})}gr&&callHook$1(gr,ar,"c");function qr(zr,Jr){isArray$1(Jr)?Jr.forEach(Hr=>zr(Hr.bind(lr))):Jr&&zr(Jr.bind(lr))}if(qr(onBeforeMount,yr),qr(onMounted,vr),qr(onBeforeUpdate,br),qr(onUpdated,Sr),qr(onActivated,xr),qr(onDeactivated,Er),qr(onErrorCaptured,Nr),qr(onRenderTracked,Mr),qr(onRenderTriggered,Rr),qr(onBeforeUnmount,Ar),qr(onUnmounted,Cr),qr(onServerPrefetch,_r),isArray$1(Dr))if(Dr.length){const zr=ar.exposed||(ar.exposed={});Dr.forEach(Jr=>{Object.defineProperty(zr,Jr,{get:()=>lr[Jr],set:Hr=>lr[Jr]=Hr})})}else ar.exposed||(ar.exposed={});kr&&ar.render===NOOP&&(ar.render=kr),Pr!=null&&(ar.inheritAttrs=Pr),Ir&&(ar.components=Ir),$r&&(ar.directives=$r),_r&&markAsyncBoundary(ar)}function resolveInjections(ar,or,lr=NOOP){isArray$1(ar)&&(ar=normalizeInject(ar));for(const cr in ar){const ur=ar[cr];let dr;isObject(ur)?"default"in ur?dr=inject(ur.from||cr,ur.default,!0):dr=inject(ur.from||cr):dr=inject(ur),isRef(dr)?Object.defineProperty(or,cr,{enumerable:!0,configurable:!0,get:()=>dr.value,set:hr=>dr.value=hr}):or[cr]=dr}}function callHook$1(ar,or,lr){callWithAsyncErrorHandling(isArray$1(ar)?ar.map(cr=>cr.bind(or.proxy)):ar.bind(or.proxy),or,lr)}function createWatcher(ar,or,lr,cr){let ur=cr.includes(".")?createPathGetter(lr,cr):()=>lr[cr];if(isString(ar)){const dr=or[ar];isFunction$1(dr)&&watch(ur,dr)}else if(isFunction$1(ar))watch(ur,ar.bind(lr));else if(isObject(ar))if(isArray$1(ar))ar.forEach(dr=>createWatcher(dr,or,lr,cr));else{const dr=isFunction$1(ar.handler)?ar.handler.bind(lr):or[ar.handler];isFunction$1(dr)&&watch(ur,dr,ar)}}function resolveMergedOptions(ar){const or=ar.type,{mixins:lr,extends:cr}=or,{mixins:ur,optionsCache:dr,config:{optionMergeStrategies:hr}}=ar.appContext,fr=dr.get(or);let pr;return fr?pr=fr:!ur.length&&!lr&&!cr?pr=or:(pr={},ur.length&&ur.forEach(mr=>mergeOptions$1(pr,mr,hr,!0)),mergeOptions$1(pr,or,hr)),isObject(or)&&dr.set(or,pr),pr}function mergeOptions$1(ar,or,lr,cr=!1){const{mixins:ur,extends:dr}=or;dr&&mergeOptions$1(ar,dr,lr,!0),ur&&ur.forEach(hr=>mergeOptions$1(ar,hr,lr,!0));for(const hr in or)if(!(cr&&hr==="expose")){const fr=internalOptionMergeStrats[hr]||lr&&lr[hr];ar[hr]=fr?fr(ar[hr],or[hr]):or[hr]}return ar}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(ar,or){return or?ar?function(){return extend$1(isFunction$1(ar)?ar.call(this,this):ar,isFunction$1(or)?or.call(this,this):or)}:or:ar}function mergeInject(ar,or){return mergeObjectOptions(normalizeInject(ar),normalizeInject(or))}function normalizeInject(ar){if(isArray$1(ar)){const or={};for(let lr=0;lr<ar.length;lr++)or[ar[lr]]=ar[lr];return or}return ar}function mergeAsArray(ar,or){return ar?[...new Set([].concat(ar,or))]:or}function mergeObjectOptions(ar,or){return ar?extend$1(Object.create(null),ar,or):or}function mergeEmitsOrPropsOptions(ar,or){return ar?isArray$1(ar)&&isArray$1(or)?[...new Set([...ar,...or])]:extend$1(Object.create(null),normalizePropsOrEmits(ar),normalizePropsOrEmits(or??{})):or}function mergeWatchOptions(ar,or){if(!ar)return or;if(!or)return ar;const lr=extend$1(Object.create(null),ar);for(const cr in or)lr[cr]=mergeAsArray(ar[cr],or[cr]);return lr}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(ar,or){return function(cr,ur=null){isFunction$1(cr)||(cr=extend$1({},cr)),ur!=null&&!isObject(ur)&&(ur=null);const dr=createAppContext(),hr=new WeakSet,fr=[];let pr=!1;const mr=dr.app={_uid:uid$1++,_component:cr,_props:ur,_container:null,_context:dr,_instance:null,version:version$1,get config(){return dr.config},set config(gr){},use(gr,...yr){return hr.has(gr)||(gr&&isFunction$1(gr.install)?(hr.add(gr),gr.install(mr,...yr)):isFunction$1(gr)&&(hr.add(gr),gr(mr,...yr))),mr},mixin(gr){return dr.mixins.includes(gr)||dr.mixins.push(gr),mr},component(gr,yr){return yr?(dr.components[gr]=yr,mr):dr.components[gr]},directive(gr,yr){return yr?(dr.directives[gr]=yr,mr):dr.directives[gr]},mount(gr,yr,vr){if(!pr){const br=mr._ceVNode||createVNode(cr,ur);return br.appContext=dr,vr===!0?vr="svg":vr===!1&&(vr=void 0),yr&&or?or(br,gr):ar(br,gr,vr),pr=!0,mr._container=gr,gr.__vue_app__=mr,getComponentPublicInstance(br.component)}},onUnmount(gr){fr.push(gr)},unmount(){pr&&(callWithAsyncErrorHandling(fr,mr._instance,16),ar(null,mr._container),delete mr._container.__vue_app__)},provide(gr,yr){return dr.provides[gr]=yr,mr},runWithContext(gr){const yr=currentApp;currentApp=mr;try{return gr()}finally{currentApp=yr}}};return mr}}let currentApp=null;function provide(ar,or){if(currentInstance){let lr=currentInstance.provides;const cr=currentInstance.parent&&currentInstance.parent.provides;cr===lr&&(lr=currentInstance.provides=Object.create(cr)),lr[ar]=or}}function inject(ar,or,lr=!1){const cr=currentInstance||currentRenderingInstance;if(cr||currentApp){const ur=currentApp?currentApp._context.provides:cr?cr.parent==null?cr.vnode.appContext&&cr.vnode.appContext.provides:cr.parent.provides:void 0;if(ur&&ar in ur)return ur[ar];if(arguments.length>1)return lr&&isFunction$1(or)?or.call(cr&&cr.proxy):or}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=ar=>Object.getPrototypeOf(ar)===internalObjectProto;function initProps(ar,or,lr,cr=!1){const ur={},dr=createInternalObject();ar.propsDefaults=Object.create(null),setFullProps(ar,or,ur,dr);for(const hr in ar.propsOptions[0])hr in ur||(ur[hr]=void 0);lr?ar.props=cr?ur:shallowReactive(ur):ar.type.props?ar.props=ur:ar.props=dr,ar.attrs=dr}function updateProps(ar,or,lr,cr){const{props:ur,attrs:dr,vnode:{patchFlag:hr}}=ar,fr=toRaw(ur),[pr]=ar.propsOptions;let mr=!1;if((cr||hr>0)&&!(hr&16)){if(hr&8){const gr=ar.vnode.dynamicProps;for(let yr=0;yr<gr.length;yr++){let vr=gr[yr];if(isEmitListener(ar.emitsOptions,vr))continue;const br=or[vr];if(pr)if(hasOwn(dr,vr))br!==dr[vr]&&(dr[vr]=br,mr=!0);else{const Sr=camelize(vr);ur[Sr]=resolvePropValue(pr,fr,Sr,br,ar,!1)}else br!==dr[vr]&&(dr[vr]=br,mr=!0)}}}else{setFullProps(ar,or,ur,dr)&&(mr=!0);let gr;for(const yr in fr)(!or||!hasOwn(or,yr)&&((gr=hyphenate(yr))===yr||!hasOwn(or,gr)))&&(pr?lr&&(lr[yr]!==void 0||lr[gr]!==void 0)&&(ur[yr]=resolvePropValue(pr,fr,yr,void 0,ar,!0)):delete ur[yr]);if(dr!==fr)for(const yr in dr)(!or||!hasOwn(or,yr))&&(delete dr[yr],mr=!0)}mr&&trigger(ar.attrs,"set","")}function setFullProps(ar,or,lr,cr){const[ur,dr]=ar.propsOptions;let hr=!1,fr;if(or)for(let pr in or){if(isReservedProp(pr))continue;const mr=or[pr];let gr;ur&&hasOwn(ur,gr=camelize(pr))?!dr||!dr.includes(gr)?lr[gr]=mr:(fr||(fr={}))[gr]=mr:isEmitListener(ar.emitsOptions,pr)||(!(pr in cr)||mr!==cr[pr])&&(cr[pr]=mr,hr=!0)}if(dr){const pr=toRaw(lr),mr=fr||EMPTY_OBJ;for(let gr=0;gr<dr.length;gr++){const yr=dr[gr];lr[yr]=resolvePropValue(ur,pr,yr,mr[yr],ar,!hasOwn(mr,yr))}}return hr}function resolvePropValue(ar,or,lr,cr,ur,dr){const hr=ar[lr];if(hr!=null){const fr=hasOwn(hr,"default");if(fr&&cr===void 0){const pr=hr.default;if(hr.type!==Function&&!hr.skipFactory&&isFunction$1(pr)){const{propsDefaults:mr}=ur;if(lr in mr)cr=mr[lr];else{const gr=setCurrentInstance(ur);cr=mr[lr]=pr.call(null,or),gr()}}else cr=pr;ur.ce&&ur.ce._setProp(lr,cr)}hr[0]&&(dr&&!fr?cr=!1:hr[1]&&(cr===""||cr===hyphenate(lr))&&(cr=!0))}return cr}const mixinPropsCache=new WeakMap;function normalizePropsOptions(ar,or,lr=!1){const cr=lr?mixinPropsCache:or.propsCache,ur=cr.get(ar);if(ur)return ur;const dr=ar.props,hr={},fr=[];let pr=!1;if(!isFunction$1(ar)){const gr=yr=>{pr=!0;const[vr,br]=normalizePropsOptions(yr,or,!0);extend$1(hr,vr),br&&fr.push(...br)};!lr&&or.mixins.length&&or.mixins.forEach(gr),ar.extends&&gr(ar.extends),ar.mixins&&ar.mixins.forEach(gr)}if(!dr&&!pr)return isObject(ar)&&cr.set(ar,EMPTY_ARR),EMPTY_ARR;if(isArray$1(dr))for(let gr=0;gr<dr.length;gr++){const yr=camelize(dr[gr]);validatePropName(yr)&&(hr[yr]=EMPTY_OBJ)}else if(dr)for(const gr in dr){const yr=camelize(gr);if(validatePropName(yr)){const vr=dr[gr],br=hr[yr]=isArray$1(vr)||isFunction$1(vr)?{type:vr}:extend$1({},vr),Sr=br.type;let xr=!1,Er=!0;if(isArray$1(Sr))for(let wr=0;wr<Sr.length;++wr){const Ar=Sr[wr],Tr=isFunction$1(Ar)&&Ar.name;if(Tr==="Boolean"){xr=!0;break}else Tr==="String"&&(Er=!1)}else xr=isFunction$1(Sr)&&Sr.name==="Boolean";br[0]=xr,br[1]=Er,(xr||hasOwn(br,"default"))&&fr.push(yr)}}const mr=[hr,fr];return isObject(ar)&&cr.set(ar,mr),mr}function validatePropName(ar){return ar[0]!=="$"&&!isReservedProp(ar)}const isInternalKey=ar=>ar[0]==="_"||ar==="$stable",normalizeSlotValue=ar=>isArray$1(ar)?ar.map(normalizeVNode):[normalizeVNode(ar)],normalizeSlot$1=(ar,or,lr)=>{if(or._n)return or;const cr=withCtx((...ur)=>normalizeSlotValue(or(...ur)),lr);return cr._c=!1,cr},normalizeObjectSlots=(ar,or,lr)=>{const cr=ar._ctx;for(const ur in ar){if(isInternalKey(ur))continue;const dr=ar[ur];if(isFunction$1(dr))or[ur]=normalizeSlot$1(ur,dr,cr);else if(dr!=null){const hr=normalizeSlotValue(dr);or[ur]=()=>hr}}},normalizeVNodeSlots=(ar,or)=>{const lr=normalizeSlotValue(or);ar.slots.default=()=>lr},assignSlots=(ar,or,lr)=>{for(const cr in or)(lr||!isInternalKey(cr))&&(ar[cr]=or[cr])},initSlots=(ar,or,lr)=>{const cr=ar.slots=createInternalObject();if(ar.vnode.shapeFlag&32){const ur=or._;ur?(assignSlots(cr,or,lr),lr&&def(cr,"_",ur,!0)):normalizeObjectSlots(or,cr)}else or&&normalizeVNodeSlots(ar,or)},updateSlots=(ar,or,lr)=>{const{vnode:cr,slots:ur}=ar;let dr=!0,hr=EMPTY_OBJ;if(cr.shapeFlag&32){const fr=or._;fr?lr&&fr===1?dr=!1:assignSlots(ur,or,lr):(dr=!or.$stable,normalizeObjectSlots(or,ur)),hr=or}else or&&(normalizeVNodeSlots(ar,or),hr={default:1});if(dr)for(const fr in ur)!isInternalKey(fr)&&hr[fr]==null&&delete ur[fr]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(ar){return baseCreateRenderer(ar)}function createHydrationRenderer(ar){return baseCreateRenderer(ar,createHydrationFunctions)}function baseCreateRenderer(ar,or){const lr=getGlobalThis();lr.__VUE__=!0;const{insert:cr,remove:ur,patchProp:dr,createElement:hr,createText:fr,createComment:pr,setText:mr,setElementText:gr,parentNode:yr,nextSibling:vr,setScopeId:br=NOOP,insertStaticContent:Sr}=ar,xr=(jr,Wr,ds,ls=null,ss=null,Lr=null,Xr=void 0,cs=null,hs=!!Wr.dynamicChildren)=>{if(jr===Wr)return;jr&&!isSameVNodeType(jr,Wr)&&(ls=Vr(jr),Yr(jr,ss,Lr,!0),jr=null),Wr.patchFlag===-2&&(hs=!1,Wr.dynamicChildren=null);const{type:ms,ref:Ts,shapeFlag:ks}=Wr;switch(ms){case Text$2:Er(jr,Wr,ds,ls);break;case Comment:wr(jr,Wr,ds,ls);break;case Static:jr==null&&Ar(Wr,ds,ls,Xr);break;case Fragment$1:Ir(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs);break;default:ks&1?kr(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs):ks&6?$r(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs):(ks&64||ks&128)&&ms.process(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs,ps)}Ts!=null&&ss&&setRef(Ts,jr&&jr.ref,Lr,Wr||jr,!Wr)},Er=(jr,Wr,ds,ls)=>{if(jr==null)cr(Wr.el=fr(Wr.children),ds,ls);else{const ss=Wr.el=jr.el;Wr.children!==jr.children&&mr(ss,Wr.children)}},wr=(jr,Wr,ds,ls)=>{jr==null?cr(Wr.el=pr(Wr.children||""),ds,ls):Wr.el=jr.el},Ar=(jr,Wr,ds,ls)=>{[jr.el,jr.anchor]=Sr(jr.children,Wr,ds,ls,jr.el,jr.anchor)},Tr=({el:jr,anchor:Wr},ds,ls)=>{let ss;for(;jr&&jr!==Wr;)ss=vr(jr),cr(jr,ds,ls),jr=ss;cr(Wr,ds,ls)},Cr=({el:jr,anchor:Wr})=>{let ds;for(;jr&&jr!==Wr;)ds=vr(jr),ur(jr),jr=ds;ur(Wr)},kr=(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs)=>{Wr.type==="svg"?Xr="svg":Wr.type==="math"&&(Xr="mathml"),jr==null?Mr(Wr,ds,ls,ss,Lr,Xr,cs,hs):_r(jr,Wr,ss,Lr,Xr,cs,hs)},Mr=(jr,Wr,ds,ls,ss,Lr,Xr,cs)=>{let hs,ms;const{props:Ts,shapeFlag:ks,transition:fs,dirs:Is}=jr;if(hs=jr.el=hr(jr.type,Lr,Ts&&Ts.is,Ts),ks&8?gr(hs,jr.children):ks&16&&Nr(jr.children,hs,null,ls,ss,resolveChildrenNamespace(jr,Lr),Xr,cs),Is&&invokeDirectiveHook(jr,null,ls,"created"),Rr(hs,jr,jr.scopeId,Xr,ls),Ts){for(const Gs in Ts)Gs!=="value"&&!isReservedProp(Gs)&&dr(hs,Gs,null,Ts[Gs],Lr,ls);"value"in Ts&&dr(hs,"value",null,Ts.value,Lr),(ms=Ts.onVnodeBeforeMount)&&invokeVNodeHook(ms,ls,jr)}Is&&invokeDirectiveHook(jr,null,ls,"beforeMount");const Fs=needTransition(ss,fs);Fs&&fs.beforeEnter(hs),cr(hs,Wr,ds),((ms=Ts&&Ts.onVnodeMounted)||Fs||Is)&&queuePostRenderEffect(()=>{ms&&invokeVNodeHook(ms,ls,jr),Fs&&fs.enter(hs),Is&&invokeDirectiveHook(jr,null,ls,"mounted")},ss)},Rr=(jr,Wr,ds,ls,ss)=>{if(ds&&br(jr,ds),ls)for(let Lr=0;Lr<ls.length;Lr++)br(jr,ls[Lr]);if(ss){let Lr=ss.subTree;if(Wr===Lr||isSuspense(Lr.type)&&(Lr.ssContent===Wr||Lr.ssFallback===Wr)){const Xr=ss.vnode;Rr(jr,Xr,Xr.scopeId,Xr.slotScopeIds,ss.parent)}}},Nr=(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs=0)=>{for(let ms=hs;ms<jr.length;ms++){const Ts=jr[ms]=cs?cloneIfMounted(jr[ms]):normalizeVNode(jr[ms]);xr(null,Ts,Wr,ds,ls,ss,Lr,Xr,cs)}},_r=(jr,Wr,ds,ls,ss,Lr,Xr)=>{const cs=Wr.el=jr.el;let{patchFlag:hs,dynamicChildren:ms,dirs:Ts}=Wr;hs|=jr.patchFlag&16;const ks=jr.props||EMPTY_OBJ,fs=Wr.props||EMPTY_OBJ;let Is;if(ds&&toggleRecurse(ds,!1),(Is=fs.onVnodeBeforeUpdate)&&invokeVNodeHook(Is,ds,Wr,jr),Ts&&invokeDirectiveHook(Wr,jr,ds,"beforeUpdate"),ds&&toggleRecurse(ds,!0),(ks.innerHTML&&fs.innerHTML==null||ks.textContent&&fs.textContent==null)&&gr(cs,""),ms?Dr(jr.dynamicChildren,ms,cs,ds,ls,resolveChildrenNamespace(Wr,ss),Lr):Xr||Jr(jr,Wr,cs,null,ds,ls,resolveChildrenNamespace(Wr,ss),Lr,!1),hs>0){if(hs&16)Pr(cs,ks,fs,ds,ss);else if(hs&2&&ks.class!==fs.class&&dr(cs,"class",null,fs.class,ss),hs&4&&dr(cs,"style",ks.style,fs.style,ss),hs&8){const Fs=Wr.dynamicProps;for(let Gs=0;Gs<Fs.length;Gs++){const gs=Fs[Gs],xs=ks[gs],Ss=fs[gs];(Ss!==xs||gs==="value")&&dr(cs,gs,xs,Ss,ss,ds)}}hs&1&&jr.children!==Wr.children&&gr(cs,Wr.children)}else!Xr&&ms==null&&Pr(cs,ks,fs,ds,ss);((Is=fs.onVnodeUpdated)||Ts)&&queuePostRenderEffect(()=>{Is&&invokeVNodeHook(Is,ds,Wr,jr),Ts&&invokeDirectiveHook(Wr,jr,ds,"updated")},ls)},Dr=(jr,Wr,ds,ls,ss,Lr,Xr)=>{for(let cs=0;cs<Wr.length;cs++){const hs=jr[cs],ms=Wr[cs],Ts=hs.el&&(hs.type===Fragment$1||!isSameVNodeType(hs,ms)||hs.shapeFlag&70)?yr(hs.el):ds;xr(hs,ms,Ts,null,ls,ss,Lr,Xr,!0)}},Pr=(jr,Wr,ds,ls,ss)=>{if(Wr!==ds){if(Wr!==EMPTY_OBJ)for(const Lr in Wr)!isReservedProp(Lr)&&!(Lr in ds)&&dr(jr,Lr,Wr[Lr],null,ss,ls);for(const Lr in ds){if(isReservedProp(Lr))continue;const Xr=ds[Lr],cs=Wr[Lr];Xr!==cs&&Lr!=="value"&&dr(jr,Lr,cs,Xr,ss,ls)}"value"in ds&&dr(jr,"value",Wr.value,ds.value,ss)}},Ir=(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs)=>{const ms=Wr.el=jr?jr.el:fr(""),Ts=Wr.anchor=jr?jr.anchor:fr("");let{patchFlag:ks,dynamicChildren:fs,slotScopeIds:Is}=Wr;Is&&(cs=cs?cs.concat(Is):Is),jr==null?(cr(ms,ds,ls),cr(Ts,ds,ls),Nr(Wr.children||[],ds,Ts,ss,Lr,Xr,cs,hs)):ks>0&&ks&64&&fs&&jr.dynamicChildren?(Dr(jr.dynamicChildren,fs,ds,ss,Lr,Xr,cs),(Wr.key!=null||ss&&Wr===ss.subTree)&&traverseStaticChildren(jr,Wr,!0)):Jr(jr,Wr,ds,Ts,ss,Lr,Xr,cs,hs)},$r=(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs)=>{Wr.slotScopeIds=cs,jr==null?Wr.shapeFlag&512?ss.ctx.activate(Wr,ds,ls,Xr,hs):Zr(Wr,ds,ls,ss,Lr,Xr,hs):rs(jr,Wr,hs)},Zr=(jr,Wr,ds,ls,ss,Lr,Xr)=>{const cs=jr.component=createComponentInstance(jr,ls,ss);if(isKeepAlive(jr)&&(cs.ctx.renderer=ps),setupComponent(cs,!1,Xr),cs.asyncDep){if(ss&&ss.registerDep(cs,qr,Xr),!jr.el){const hs=cs.subTree=createVNode(Comment);wr(null,hs,Wr,ds)}}else qr(cs,jr,Wr,ds,ss,Lr,Xr)},rs=(jr,Wr,ds)=>{const ls=Wr.component=jr.component;if(shouldUpdateComponent(jr,Wr,ds))if(ls.asyncDep&&!ls.asyncResolved){zr(ls,Wr,ds);return}else ls.next=Wr,ls.update();else Wr.el=jr.el,ls.vnode=Wr},qr=(jr,Wr,ds,ls,ss,Lr,Xr)=>{const cs=()=>{if(jr.isMounted){let{next:ks,bu:fs,u:Is,parent:Fs,vnode:Gs}=jr;{const $s=locateNonHydratedAsyncRoot(jr);if($s){ks&&(ks.el=Gs.el,zr(jr,ks,Xr)),$s.asyncDep.then(()=>{jr.isUnmounted||cs()});return}}let gs=ks,xs;toggleRecurse(jr,!1),ks?(ks.el=Gs.el,zr(jr,ks,Xr)):ks=Gs,fs&&invokeArrayFns(fs),(xs=ks.props&&ks.props.onVnodeBeforeUpdate)&&invokeVNodeHook(xs,Fs,ks,Gs),toggleRecurse(jr,!0);const Ss=renderComponentRoot(jr),Ps=jr.subTree;jr.subTree=Ss,xr(Ps,Ss,yr(Ps.el),Vr(Ps),jr,ss,Lr),ks.el=Ss.el,gs===null&&updateHOCHostEl(jr,Ss.el),Is&&queuePostRenderEffect(Is,ss),(xs=ks.props&&ks.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(xs,Fs,ks,Gs),ss)}else{let ks;const{el:fs,props:Is}=Wr,{bm:Fs,m:Gs,parent:gs,root:xs,type:Ss}=jr,Ps=isAsyncWrapper(Wr);if(toggleRecurse(jr,!1),Fs&&invokeArrayFns(Fs),!Ps&&(ks=Is&&Is.onVnodeBeforeMount)&&invokeVNodeHook(ks,gs,Wr),toggleRecurse(jr,!0),fs&&Cs){const $s=()=>{jr.subTree=renderComponentRoot(jr),Cs(fs,jr.subTree,jr,ss,null)};Ps&&Ss.__asyncHydrate?Ss.__asyncHydrate(fs,jr,$s):$s()}else{xs.ce&&xs.ce._injectChildStyle(Ss);const $s=jr.subTree=renderComponentRoot(jr);xr(null,$s,ds,ls,jr,ss,Lr),Wr.el=$s.el}if(Gs&&queuePostRenderEffect(Gs,ss),!Ps&&(ks=Is&&Is.onVnodeMounted)){const $s=Wr;queuePostRenderEffect(()=>invokeVNodeHook(ks,gs,$s),ss)}(Wr.shapeFlag&256||gs&&isAsyncWrapper(gs.vnode)&&gs.vnode.shapeFlag&256)&&jr.a&&queuePostRenderEffect(jr.a,ss),jr.isMounted=!0,Wr=ds=ls=null}};jr.scope.on();const hs=jr.effect=new ReactiveEffect(cs);jr.scope.off();const ms=jr.update=hs.run.bind(hs),Ts=jr.job=hs.runIfDirty.bind(hs);Ts.i=jr,Ts.id=jr.uid,hs.scheduler=()=>queueJob(Ts),toggleRecurse(jr,!0),ms()},zr=(jr,Wr,ds)=>{Wr.component=jr;const ls=jr.vnode.props;jr.vnode=Wr,jr.next=null,updateProps(jr,Wr.props,ls,ds),updateSlots(jr,Wr.children,ds),pauseTracking(),flushPreFlushCbs(jr),resetTracking()},Jr=(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs=!1)=>{const ms=jr&&jr.children,Ts=jr?jr.shapeFlag:0,ks=Wr.children,{patchFlag:fs,shapeFlag:Is}=Wr;if(fs>0){if(fs&128){Kr(ms,ks,ds,ls,ss,Lr,Xr,cs,hs);return}else if(fs&256){Hr(ms,ks,ds,ls,ss,Lr,Xr,cs,hs);return}}Is&8?(Ts&16&&Qr(ms,ss,Lr),ks!==ms&&gr(ds,ks)):Ts&16?Is&16?Kr(ms,ks,ds,ls,ss,Lr,Xr,cs,hs):Qr(ms,ss,Lr,!0):(Ts&8&&gr(ds,""),Is&16&&Nr(ks,ds,ls,ss,Lr,Xr,cs,hs))},Hr=(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs)=>{jr=jr||EMPTY_ARR,Wr=Wr||EMPTY_ARR;const ms=jr.length,Ts=Wr.length,ks=Math.min(ms,Ts);let fs;for(fs=0;fs<ks;fs++){const Is=Wr[fs]=hs?cloneIfMounted(Wr[fs]):normalizeVNode(Wr[fs]);xr(jr[fs],Is,ds,null,ss,Lr,Xr,cs,hs)}ms>Ts?Qr(jr,ss,Lr,!0,!1,ks):Nr(Wr,ds,ls,ss,Lr,Xr,cs,hs,ks)},Kr=(jr,Wr,ds,ls,ss,Lr,Xr,cs,hs)=>{let ms=0;const Ts=Wr.length;let ks=jr.length-1,fs=Ts-1;for(;ms<=ks&&ms<=fs;){const Is=jr[ms],Fs=Wr[ms]=hs?cloneIfMounted(Wr[ms]):normalizeVNode(Wr[ms]);if(isSameVNodeType(Is,Fs))xr(Is,Fs,ds,null,ss,Lr,Xr,cs,hs);else break;ms++}for(;ms<=ks&&ms<=fs;){const Is=jr[ks],Fs=Wr[fs]=hs?cloneIfMounted(Wr[fs]):normalizeVNode(Wr[fs]);if(isSameVNodeType(Is,Fs))xr(Is,Fs,ds,null,ss,Lr,Xr,cs,hs);else break;ks--,fs--}if(ms>ks){if(ms<=fs){const Is=fs+1,Fs=Is<Ts?Wr[Is].el:ls;for(;ms<=fs;)xr(null,Wr[ms]=hs?cloneIfMounted(Wr[ms]):normalizeVNode(Wr[ms]),ds,Fs,ss,Lr,Xr,cs,hs),ms++}}else if(ms>fs)for(;ms<=ks;)Yr(jr[ms],ss,Lr,!0),ms++;else{const Is=ms,Fs=ms,Gs=new Map;for(ms=Fs;ms<=fs;ms++){const vs=Wr[ms]=hs?cloneIfMounted(Wr[ms]):normalizeVNode(Wr[ms]);vs.key!=null&&Gs.set(vs.key,ms)}let gs,xs=0;const Ss=fs-Fs+1;let Ps=!1,$s=0;const Ws=new Array(Ss);for(ms=0;ms<Ss;ms++)Ws[ms]=0;for(ms=Is;ms<=ks;ms++){const vs=jr[ms];if(xs>=Ss){Yr(vs,ss,Lr,!0);continue}let ws;if(vs.key!=null)ws=Gs.get(vs.key);else for(gs=Fs;gs<=fs;gs++)if(Ws[gs-Fs]===0&&isSameVNodeType(vs,Wr[gs])){ws=gs;break}ws===void 0?Yr(vs,ss,Lr,!0):(Ws[ws-Fs]=ms+1,ws>=$s?$s=ws:Ps=!0,xr(vs,Wr[ws],ds,null,ss,Lr,Xr,cs,hs),xs++)}const Ns=Ps?getSequence(Ws):EMPTY_ARR;for(gs=Ns.length-1,ms=Ss-1;ms>=0;ms--){const vs=Fs+ms,ws=Wr[vs],Ls=vs+1<Ts?Wr[vs+1].el:ls;Ws[ms]===0?xr(null,ws,ds,Ls,ss,Lr,Xr,cs,hs):Ps&&(gs<0||ms!==Ns[gs]?ys(ws,ds,Ls,2):gs--)}}},ys=(jr,Wr,ds,ls,ss=null)=>{const{el:Lr,type:Xr,transition:cs,children:hs,shapeFlag:ms}=jr;if(ms&6){ys(jr.component.subTree,Wr,ds,ls);return}if(ms&128){jr.suspense.move(Wr,ds,ls);return}if(ms&64){Xr.move(jr,Wr,ds,ps);return}if(Xr===Fragment$1){cr(Lr,Wr,ds);for(let ks=0;ks<hs.length;ks++)ys(hs[ks],Wr,ds,ls);cr(jr.anchor,Wr,ds);return}if(Xr===Static){Tr(jr,Wr,ds);return}if(ls!==2&&ms&1&&cs)if(ls===0)cs.beforeEnter(Lr),cr(Lr,Wr,ds),queuePostRenderEffect(()=>cs.enter(Lr),ss);else{const{leave:ks,delayLeave:fs,afterLeave:Is}=cs,Fs=()=>{jr.ctx.isUnmounted?ur(Lr):cr(Lr,Wr,ds)},Gs=()=>{ks(Lr,()=>{Fs(),Is&&Is()})};fs?fs(Lr,Fs,Gs):Gs()}else cr(Lr,Wr,ds)},Yr=(jr,Wr,ds,ls=!1,ss=!1)=>{const{type:Lr,props:Xr,ref:cs,children:hs,dynamicChildren:ms,shapeFlag:Ts,patchFlag:ks,dirs:fs,cacheIndex:Is}=jr;if(ks===-2&&(ss=!1),cs!=null&&(pauseTracking(),setRef(cs,null,ds,jr,!0),resetTracking()),Is!=null&&(Wr.renderCache[Is]=void 0),Ts&256){Wr.ctx.deactivate(jr);return}const Fs=Ts&1&&fs,Gs=!isAsyncWrapper(jr);let gs;if(Gs&&(gs=Xr&&Xr.onVnodeBeforeUnmount)&&invokeVNodeHook(gs,Wr,jr),Ts&6)Ur(jr.component,ds,ls);else{if(Ts&128){jr.suspense.unmount(ds,ls);return}Fs&&invokeDirectiveHook(jr,null,Wr,"beforeUnmount"),Ts&64?jr.type.remove(jr,Wr,ds,ps,ls):ms&&!ms.hasOnce&&(Lr!==Fragment$1||ks>0&&ks&64)?Qr(ms,Wr,ds,!1,!0):(Lr===Fragment$1&&ks&384||!ss&&Ts&16)&&Qr(hs,Wr,ds),ls&&Fr(jr)}(Gs&&(gs=Xr&&Xr.onVnodeUnmounted)||Fs)&&queuePostRenderEffect(()=>{gs&&invokeVNodeHook(gs,Wr,jr),Fs&&invokeDirectiveHook(jr,null,Wr,"unmounted")},ds)},Fr=jr=>{const{type:Wr,el:ds,anchor:ls,transition:ss}=jr;if(Wr===Fragment$1){Br(ds,ls);return}if(Wr===Static){Cr(jr);return}const Lr=()=>{ur(ds),ss&&!ss.persisted&&ss.afterLeave&&ss.afterLeave()};if(jr.shapeFlag&1&&ss&&!ss.persisted){const{leave:Xr,delayLeave:cs}=ss,hs=()=>Xr(ds,Lr);cs?cs(jr.el,Lr,hs):hs()}else Lr()},Br=(jr,Wr)=>{let ds;for(;jr!==Wr;)ds=vr(jr),ur(jr),jr=ds;ur(Wr)},Ur=(jr,Wr,ds)=>{const{bum:ls,scope:ss,job:Lr,subTree:Xr,um:cs,m:hs,a:ms,parent:Ts,slots:{__:ks}}=jr;invalidateMount(hs),invalidateMount(ms),ls&&invokeArrayFns(ls),Ts&&isArray$1(ks)&&ks.forEach(fs=>{Ts.renderCache[fs]=void 0}),ss.stop(),Lr&&(Lr.flags|=8,Yr(Xr,jr,Wr,ds)),cs&&queuePostRenderEffect(cs,Wr),queuePostRenderEffect(()=>{jr.isUnmounted=!0},Wr),Wr&&Wr.pendingBranch&&!Wr.isUnmounted&&jr.asyncDep&&!jr.asyncResolved&&jr.suspenseId===Wr.pendingId&&(Wr.deps--,Wr.deps===0&&Wr.resolve())},Qr=(jr,Wr,ds,ls=!1,ss=!1,Lr=0)=>{for(let Xr=Lr;Xr<jr.length;Xr++)Yr(jr[Xr],Wr,ds,ls,ss)},Vr=jr=>{if(jr.shapeFlag&6)return Vr(jr.component.subTree);if(jr.shapeFlag&128)return jr.suspense.next();const Wr=vr(jr.anchor||jr.el),ds=Wr&&Wr[TeleportEndKey];return ds?vr(ds):Wr};let Gr=!1;const is=(jr,Wr,ds)=>{jr==null?Wr._vnode&&Yr(Wr._vnode,null,null,!0):xr(Wr._vnode||null,jr,Wr,null,null,null,ds),Wr._vnode=jr,Gr||(Gr=!0,flushPreFlushCbs(),flushPostFlushCbs(),Gr=!1)},ps={p:xr,um:Yr,m:ys,r:Fr,mt:Zr,mc:Nr,pc:Jr,pbc:Dr,n:Vr,o:ar};let As,Cs;return or&&([As,Cs]=or(ps)),{render:is,hydrate:As,createApp:createAppAPI(is,As)}}function resolveChildrenNamespace({type:ar,props:or},lr){return lr==="svg"&&ar==="foreignObject"||lr==="mathml"&&ar==="annotation-xml"&&or&&or.encoding&&or.encoding.includes("html")?void 0:lr}function toggleRecurse({effect:ar,job:or},lr){lr?(ar.flags|=32,or.flags|=4):(ar.flags&=-33,or.flags&=-5)}function needTransition(ar,or){return(!ar||ar&&!ar.pendingBranch)&&or&&!or.persisted}function traverseStaticChildren(ar,or,lr=!1){const cr=ar.children,ur=or.children;if(isArray$1(cr)&&isArray$1(ur))for(let dr=0;dr<cr.length;dr++){const hr=cr[dr];let fr=ur[dr];fr.shapeFlag&1&&!fr.dynamicChildren&&((fr.patchFlag<=0||fr.patchFlag===32)&&(fr=ur[dr]=cloneIfMounted(ur[dr]),fr.el=hr.el),!lr&&fr.patchFlag!==-2&&traverseStaticChildren(hr,fr)),fr.type===Text$2&&(fr.el=hr.el),fr.type===Comment&&!fr.el&&(fr.el=hr.el)}}function getSequence(ar){const or=ar.slice(),lr=[0];let cr,ur,dr,hr,fr;const pr=ar.length;for(cr=0;cr<pr;cr++){const mr=ar[cr];if(mr!==0){if(ur=lr[lr.length-1],ar[ur]<mr){or[cr]=ur,lr.push(cr);continue}for(dr=0,hr=lr.length-1;dr<hr;)fr=dr+hr>>1,ar[lr[fr]]<mr?dr=fr+1:hr=fr;mr<ar[lr[dr]]&&(dr>0&&(or[cr]=lr[dr-1]),lr[dr]=cr)}}for(dr=lr.length,hr=lr[dr-1];dr-- >0;)lr[dr]=hr,hr=or[hr];return lr}function locateNonHydratedAsyncRoot(ar){const or=ar.subTree.component;if(or)return or.asyncDep&&!or.asyncResolved?or:locateNonHydratedAsyncRoot(or)}function invalidateMount(ar){if(ar)for(let or=0;or<ar.length;or++)ar[or].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(ar,or){return doWatch(ar,null,or)}function watchPostEffect(ar,or){return doWatch(ar,null,{flush:"post"})}function watchSyncEffect(ar,or){return doWatch(ar,null,{flush:"sync"})}function watch(ar,or,lr){return doWatch(ar,or,lr)}function doWatch(ar,or,lr=EMPTY_OBJ){const{immediate:cr,deep:ur,flush:dr,once:hr}=lr,fr=extend$1({},lr),pr=or&&cr||!or&&dr!=="post";let mr;if(isInSSRComponentSetup){if(dr==="sync"){const br=useSSRContext();mr=br.__watcherHandles||(br.__watcherHandles=[])}else if(!pr){const br=()=>{};return br.stop=NOOP,br.resume=NOOP,br.pause=NOOP,br}}const gr=currentInstance;fr.call=(br,Sr,xr)=>callWithAsyncErrorHandling(br,gr,Sr,xr);let yr=!1;dr==="post"?fr.scheduler=br=>{queuePostRenderEffect(br,gr&&gr.suspense)}:dr!=="sync"&&(yr=!0,fr.scheduler=(br,Sr)=>{Sr?br():queueJob(br)}),fr.augmentJob=br=>{or&&(br.flags|=4),yr&&(br.flags|=2,gr&&(br.id=gr.uid,br.i=gr))};const vr=watch$1(ar,or,fr);return isInSSRComponentSetup&&(mr?mr.push(vr):pr&&vr()),vr}function instanceWatch(ar,or,lr){const cr=this.proxy,ur=isString(ar)?ar.includes(".")?createPathGetter(cr,ar):()=>cr[ar]:ar.bind(cr,cr);let dr;isFunction$1(or)?dr=or:(dr=or.handler,lr=or);const hr=setCurrentInstance(this),fr=doWatch(ur,dr.bind(cr),lr);return hr(),fr}function createPathGetter(ar,or){const lr=or.split(".");return()=>{let cr=ar;for(let ur=0;ur<lr.length&&cr;ur++)cr=cr[lr[ur]];return cr}}function useModel(ar,or,lr=EMPTY_OBJ){const cr=getCurrentInstance(),ur=camelize(or),dr=hyphenate(or),hr=getModelModifiers(ar,ur),fr=customRef((pr,mr)=>{let gr,yr=EMPTY_OBJ,vr;return watchSyncEffect(()=>{const br=ar[ur];hasChanged(gr,br)&&(gr=br,mr())}),{get(){return pr(),lr.get?lr.get(gr):gr},set(br){const Sr=lr.set?lr.set(br):br;if(!hasChanged(Sr,gr)&&!(yr!==EMPTY_OBJ&&hasChanged(br,yr)))return;const xr=cr.vnode.props;xr&&(or in xr||ur in xr||dr in xr)&&(`onUpdate:${or}`in xr||`onUpdate:${ur}`in xr||`onUpdate:${dr}`in xr)||(gr=br,mr()),cr.emit(`update:${or}`,Sr),hasChanged(br,Sr)&&hasChanged(br,yr)&&!hasChanged(Sr,vr)&&mr(),yr=br,vr=Sr}}});return fr[Symbol.iterator]=()=>{let pr=0;return{next(){return pr<2?{value:pr++?hr||EMPTY_OBJ:fr,done:!1}:{done:!0}}}},fr}const getModelModifiers=(ar,or)=>or==="modelValue"||or==="model-value"?ar.modelModifiers:ar[`${or}Modifiers`]||ar[`${camelize(or)}Modifiers`]||ar[`${hyphenate(or)}Modifiers`];function emit(ar,or,...lr){if(ar.isUnmounted)return;const cr=ar.vnode.props||EMPTY_OBJ;let ur=lr;const dr=or.startsWith("update:"),hr=dr&&getModelModifiers(cr,or.slice(7));hr&&(hr.trim&&(ur=lr.map(gr=>isString(gr)?gr.trim():gr)),hr.number&&(ur=lr.map(looseToNumber)));let fr,pr=cr[fr=toHandlerKey(or)]||cr[fr=toHandlerKey(camelize(or))];!pr&&dr&&(pr=cr[fr=toHandlerKey(hyphenate(or))]),pr&&callWithAsyncErrorHandling(pr,ar,6,ur);const mr=cr[fr+"Once"];if(mr){if(!ar.emitted)ar.emitted={};else if(ar.emitted[fr])return;ar.emitted[fr]=!0,callWithAsyncErrorHandling(mr,ar,6,ur)}}function normalizeEmitsOptions(ar,or,lr=!1){const cr=or.emitsCache,ur=cr.get(ar);if(ur!==void 0)return ur;const dr=ar.emits;let hr={},fr=!1;if(!isFunction$1(ar)){const pr=mr=>{const gr=normalizeEmitsOptions(mr,or,!0);gr&&(fr=!0,extend$1(hr,gr))};!lr&&or.mixins.length&&or.mixins.forEach(pr),ar.extends&&pr(ar.extends),ar.mixins&&ar.mixins.forEach(pr)}return!dr&&!fr?(isObject(ar)&&cr.set(ar,null),null):(isArray$1(dr)?dr.forEach(pr=>hr[pr]=null):extend$1(hr,dr),isObject(ar)&&cr.set(ar,hr),hr)}function isEmitListener(ar,or){return!ar||!isOn(or)?!1:(or=or.slice(2).replace(/Once$/,""),hasOwn(ar,or[0].toLowerCase()+or.slice(1))||hasOwn(ar,hyphenate(or))||hasOwn(ar,or))}function markAttrsAccessed(){}function renderComponentRoot(ar){const{type:or,vnode:lr,proxy:cr,withProxy:ur,propsOptions:[dr],slots:hr,attrs:fr,emit:pr,render:mr,renderCache:gr,props:yr,data:vr,setupState:br,ctx:Sr,inheritAttrs:xr}=ar,Er=setCurrentRenderingInstance(ar);let wr,Ar;try{if(lr.shapeFlag&4){const Cr=ur||cr,kr=Cr;wr=normalizeVNode(mr.call(kr,Cr,gr,yr,br,vr,Sr)),Ar=fr}else{const Cr=or;wr=normalizeVNode(Cr.length>1?Cr(yr,{attrs:fr,slots:hr,emit:pr}):Cr(yr,null)),Ar=or.props?fr:getFunctionalFallthrough(fr)}}catch(Cr){blockStack.length=0,handleError(Cr,ar,1),wr=createVNode(Comment)}let Tr=wr;if(Ar&&xr!==!1){const Cr=Object.keys(Ar),{shapeFlag:kr}=Tr;Cr.length&&kr&7&&(dr&&Cr.some(isModelListener)&&(Ar=filterModelListeners(Ar,dr)),Tr=cloneVNode(Tr,Ar,!1,!0))}return lr.dirs&&(Tr=cloneVNode(Tr,null,!1,!0),Tr.dirs=Tr.dirs?Tr.dirs.concat(lr.dirs):lr.dirs),lr.transition&&setTransitionHooks(Tr,lr.transition),wr=Tr,setCurrentRenderingInstance(Er),wr}function filterSingleRoot(ar,or=!0){let lr;for(let cr=0;cr<ar.length;cr++){const ur=ar[cr];if(isVNode(ur)){if(ur.type!==Comment||ur.children==="v-if"){if(lr)return;lr=ur}}else return}return lr}const getFunctionalFallthrough=ar=>{let or;for(const lr in ar)(lr==="class"||lr==="style"||isOn(lr))&&((or||(or={}))[lr]=ar[lr]);return or},filterModelListeners=(ar,or)=>{const lr={};for(const cr in ar)(!isModelListener(cr)||!(cr.slice(9)in or))&&(lr[cr]=ar[cr]);return lr};function shouldUpdateComponent(ar,or,lr){const{props:cr,children:ur,component:dr}=ar,{props:hr,children:fr,patchFlag:pr}=or,mr=dr.emitsOptions;if(or.dirs||or.transition)return!0;if(lr&&pr>=0){if(pr&1024)return!0;if(pr&16)return cr?hasPropsChanged(cr,hr,mr):!!hr;if(pr&8){const gr=or.dynamicProps;for(let yr=0;yr<gr.length;yr++){const vr=gr[yr];if(hr[vr]!==cr[vr]&&!isEmitListener(mr,vr))return!0}}}else return(ur||fr)&&(!fr||!fr.$stable)?!0:cr===hr?!1:cr?hr?hasPropsChanged(cr,hr,mr):!0:!!hr;return!1}function hasPropsChanged(ar,or,lr){const cr=Object.keys(or);if(cr.length!==Object.keys(ar).length)return!0;for(let ur=0;ur<cr.length;ur++){const dr=cr[ur];if(or[dr]!==ar[dr]&&!isEmitListener(lr,dr))return!0}return!1}function updateHOCHostEl({vnode:ar,parent:or},lr){for(;or;){const cr=or.subTree;if(cr.suspense&&cr.suspense.activeBranch===ar&&(cr.el=ar.el),cr===ar)(ar=or.vnode).el=lr,or=or.parent;else break}}const isSuspense=ar=>ar.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process(ar,or,lr,cr,ur,dr,hr,fr,pr,mr){if(ar==null)mountSuspense(or,lr,cr,ur,dr,hr,fr,pr,mr);else{if(dr&&dr.deps>0&&!ar.suspense.isInFallback){or.suspense=ar.suspense,or.suspense.vnode=or,or.el=ar.el;return}patchSuspense(ar,or,lr,cr,ur,hr,fr,pr,mr)}},hydrate:hydrateSuspense,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(ar,or){const lr=ar.props&&ar.props[or];isFunction$1(lr)&&lr()}function mountSuspense(ar,or,lr,cr,ur,dr,hr,fr,pr){const{p:mr,o:{createElement:gr}}=pr,yr=gr("div"),vr=ar.suspense=createSuspenseBoundary(ar,ur,cr,or,yr,lr,dr,hr,fr,pr);mr(null,vr.pendingBranch=ar.ssContent,yr,null,cr,vr,dr,hr),vr.deps>0?(triggerEvent(ar,"onPending"),triggerEvent(ar,"onFallback"),mr(null,ar.ssFallback,or,lr,cr,null,dr,hr),setActiveBranch(vr,ar.ssFallback)):vr.resolve(!1,!0)}function patchSuspense(ar,or,lr,cr,ur,dr,hr,fr,{p:pr,um:mr,o:{createElement:gr}}){const yr=or.suspense=ar.suspense;yr.vnode=or,or.el=ar.el;const vr=or.ssContent,br=or.ssFallback,{activeBranch:Sr,pendingBranch:xr,isInFallback:Er,isHydrating:wr}=yr;if(xr)yr.pendingBranch=vr,isSameVNodeType(vr,xr)?(pr(xr,vr,yr.hiddenContainer,null,ur,yr,dr,hr,fr),yr.deps<=0?yr.resolve():Er&&(wr||(pr(Sr,br,lr,cr,ur,null,dr,hr,fr),setActiveBranch(yr,br)))):(yr.pendingId=suspenseId++,wr?(yr.isHydrating=!1,yr.activeBranch=xr):mr(xr,ur,yr),yr.deps=0,yr.effects.length=0,yr.hiddenContainer=gr("div"),Er?(pr(null,vr,yr.hiddenContainer,null,ur,yr,dr,hr,fr),yr.deps<=0?yr.resolve():(pr(Sr,br,lr,cr,ur,null,dr,hr,fr),setActiveBranch(yr,br))):Sr&&isSameVNodeType(vr,Sr)?(pr(Sr,vr,lr,cr,ur,yr,dr,hr,fr),yr.resolve(!0)):(pr(null,vr,yr.hiddenContainer,null,ur,yr,dr,hr,fr),yr.deps<=0&&yr.resolve()));else if(Sr&&isSameVNodeType(vr,Sr))pr(Sr,vr,lr,cr,ur,yr,dr,hr,fr),setActiveBranch(yr,vr);else if(triggerEvent(or,"onPending"),yr.pendingBranch=vr,vr.shapeFlag&512?yr.pendingId=vr.component.suspenseId:yr.pendingId=suspenseId++,pr(null,vr,yr.hiddenContainer,null,ur,yr,dr,hr,fr),yr.deps<=0)yr.resolve();else{const{timeout:Ar,pendingId:Tr}=yr;Ar>0?setTimeout(()=>{yr.pendingId===Tr&&yr.fallback(br)},Ar):Ar===0&&yr.fallback(br)}}function createSuspenseBoundary(ar,or,lr,cr,ur,dr,hr,fr,pr,mr,gr=!1){const{p:yr,m:vr,um:br,n:Sr,o:{parentNode:xr,remove:Er}}=mr;let wr;const Ar=isVNodeSuspensible(ar);Ar&&or&&or.pendingBranch&&(wr=or.pendingId,or.deps++);const Tr=ar.props?toNumber(ar.props.timeout):void 0,Cr=dr,kr={vnode:ar,parent:or,parentComponent:lr,namespace:hr,container:cr,hiddenContainer:ur,deps:0,pendingId:suspenseId++,timeout:typeof Tr=="number"?Tr:-1,activeBranch:null,pendingBranch:null,isInFallback:!gr,isHydrating:gr,isUnmounted:!1,effects:[],resolve(Mr=!1,Rr=!1){const{vnode:Nr,activeBranch:_r,pendingBranch:Dr,pendingId:Pr,effects:Ir,parentComponent:$r,container:Zr}=kr;let rs=!1;kr.isHydrating?kr.isHydrating=!1:Mr||(rs=_r&&Dr.transition&&Dr.transition.mode==="out-in",rs&&(_r.transition.afterLeave=()=>{Pr===kr.pendingId&&(vr(Dr,Zr,dr===Cr?Sr(_r):dr,0),queuePostFlushCb(Ir))}),_r&&(xr(_r.el)===Zr&&(dr=Sr(_r)),br(_r,$r,kr,!0)),rs||vr(Dr,Zr,dr,0)),setActiveBranch(kr,Dr),kr.pendingBranch=null,kr.isInFallback=!1;let qr=kr.parent,zr=!1;for(;qr;){if(qr.pendingBranch){qr.effects.push(...Ir),zr=!0;break}qr=qr.parent}!zr&&!rs&&queuePostFlushCb(Ir),kr.effects=[],Ar&&or&&or.pendingBranch&&wr===or.pendingId&&(or.deps--,or.deps===0&&!Rr&&or.resolve()),triggerEvent(Nr,"onResolve")},fallback(Mr){if(!kr.pendingBranch)return;const{vnode:Rr,activeBranch:Nr,parentComponent:_r,container:Dr,namespace:Pr}=kr;triggerEvent(Rr,"onFallback");const Ir=Sr(Nr),$r=()=>{kr.isInFallback&&(yr(null,Mr,Dr,Ir,_r,null,Pr,fr,pr),setActiveBranch(kr,Mr))},Zr=Mr.transition&&Mr.transition.mode==="out-in";Zr&&(Nr.transition.afterLeave=$r),kr.isInFallback=!0,br(Nr,_r,null,!0),Zr||$r()},move(Mr,Rr,Nr){kr.activeBranch&&vr(kr.activeBranch,Mr,Rr,Nr),kr.container=Mr},next(){return kr.activeBranch&&Sr(kr.activeBranch)},registerDep(Mr,Rr,Nr){const _r=!!kr.pendingBranch;_r&&kr.deps++;const Dr=Mr.vnode.el;Mr.asyncDep.catch(Pr=>{handleError(Pr,Mr,0)}).then(Pr=>{if(Mr.isUnmounted||kr.isUnmounted||kr.pendingId!==Mr.suspenseId)return;Mr.asyncResolved=!0;const{vnode:Ir}=Mr;handleSetupResult(Mr,Pr,!1),Dr&&(Ir.el=Dr);const $r=!Dr&&Mr.subTree.el;Rr(Mr,Ir,xr(Dr||Mr.subTree.el),Dr?null:Sr(Mr.subTree),kr,hr,Nr),$r&&Er($r),updateHOCHostEl(Mr,Ir.el),_r&&--kr.deps===0&&kr.resolve()})},unmount(Mr,Rr){kr.isUnmounted=!0,kr.activeBranch&&br(kr.activeBranch,lr,Mr,Rr),kr.pendingBranch&&br(kr.pendingBranch,lr,Mr,Rr)}};return kr}function hydrateSuspense(ar,or,lr,cr,ur,dr,hr,fr,pr){const mr=or.suspense=createSuspenseBoundary(or,cr,lr,ar.parentNode,document.createElement("div"),null,ur,dr,hr,fr,!0),gr=pr(ar,mr.pendingBranch=or.ssContent,lr,mr,dr,hr);return mr.deps===0&&mr.resolve(!1,!0),gr}function normalizeSuspenseChildren(ar){const{shapeFlag:or,children:lr}=ar,cr=or&32;ar.ssContent=normalizeSuspenseSlot(cr?lr.default:lr),ar.ssFallback=cr?normalizeSuspenseSlot(lr.fallback):createVNode(Comment)}function normalizeSuspenseSlot(ar){let or;if(isFunction$1(ar)){const lr=isBlockTreeEnabled&&ar._c;lr&&(ar._d=!1,openBlock()),ar=ar(),lr&&(ar._d=!0,or=currentBlock,closeBlock())}return isArray$1(ar)&&(ar=filterSingleRoot(ar)),ar=normalizeVNode(ar),or&&!ar.dynamicChildren&&(ar.dynamicChildren=or.filter(lr=>lr!==ar)),ar}function queueEffectWithSuspense(ar,or){or&&or.pendingBranch?isArray$1(ar)?or.effects.push(...ar):or.effects.push(ar):queuePostFlushCb(ar)}function setActiveBranch(ar,or){ar.activeBranch=or;const{vnode:lr,parentComponent:cr}=ar;let ur=or.el;for(;!ur&&or.component;)or=or.component.subTree,ur=or.el;lr.el=ur,cr&&cr.subTree===lr&&(cr.vnode.el=ur,updateHOCHostEl(cr,ur))}function isVNodeSuspensible(ar){const or=ar.props&&ar.props.suspensible;return or!=null&&or!==!1}const Fragment$1=Symbol.for("v-fgt"),Text$2=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(ar=!1){blockStack.push(currentBlock=ar?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(ar,or=!1){isBlockTreeEnabled+=ar,ar<0&&currentBlock&&or&&(currentBlock.hasOnce=!0)}function setupBlock(ar){return ar.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(ar),ar}function createElementBlock(ar,or,lr,cr,ur,dr){return setupBlock(createBaseVNode(ar,or,lr,cr,ur,dr,!0))}function createBlock(ar,or,lr,cr,ur){return setupBlock(createVNode(ar,or,lr,cr,ur,!0))}function isVNode(ar){return ar?ar.__v_isVNode===!0:!1}function isSameVNodeType(ar,or){return ar.type===or.type&&ar.key===or.key}function transformVNodeArgs(ar){}const normalizeKey=({key:ar})=>ar??null,normalizeRef=({ref:ar,ref_key:or,ref_for:lr})=>(typeof ar=="number"&&(ar=""+ar),ar!=null?isString(ar)||isRef(ar)||isFunction$1(ar)?{i:currentRenderingInstance,r:ar,k:or,f:!!lr}:ar:null);function createBaseVNode(ar,or=null,lr=null,cr=0,ur=null,dr=ar===Fragment$1?0:1,hr=!1,fr=!1){const pr={__v_isVNode:!0,__v_skip:!0,type:ar,props:or,key:or&&normalizeKey(or),ref:or&&normalizeRef(or),scopeId:currentScopeId,slotScopeIds:null,children:lr,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:dr,patchFlag:cr,dynamicProps:ur,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return fr?(normalizeChildren(pr,lr),dr&128&&ar.normalize(pr)):lr&&(pr.shapeFlag|=isString(lr)?8:16),isBlockTreeEnabled>0&&!hr&&currentBlock&&(pr.patchFlag>0||dr&6)&&pr.patchFlag!==32&&currentBlock.push(pr),pr}const createVNode=_createVNode;function _createVNode(ar,or=null,lr=null,cr=0,ur=null,dr=!1){if((!ar||ar===NULL_DYNAMIC_COMPONENT)&&(ar=Comment),isVNode(ar)){const fr=cloneVNode(ar,or,!0);return lr&&normalizeChildren(fr,lr),isBlockTreeEnabled>0&&!dr&&currentBlock&&(fr.shapeFlag&6?currentBlock[currentBlock.indexOf(ar)]=fr:currentBlock.push(fr)),fr.patchFlag=-2,fr}if(isClassComponent(ar)&&(ar=ar.__vccOpts),or){or=guardReactiveProps(or);let{class:fr,style:pr}=or;fr&&!isString(fr)&&(or.class=normalizeClass(fr)),isObject(pr)&&(isProxy(pr)&&!isArray$1(pr)&&(pr=extend$1({},pr)),or.style=normalizeStyle(pr))}const hr=isString(ar)?1:isSuspense(ar)?128:isTeleport(ar)?64:isObject(ar)?4:isFunction$1(ar)?2:0;return createBaseVNode(ar,or,lr,cr,ur,hr,dr,!0)}function guardReactiveProps(ar){return ar?isProxy(ar)||isInternalObject(ar)?extend$1({},ar):ar:null}function cloneVNode(ar,or,lr=!1,cr=!1){const{props:ur,ref:dr,patchFlag:hr,children:fr,transition:pr}=ar,mr=or?mergeProps(ur||{},or):ur,gr={__v_isVNode:!0,__v_skip:!0,type:ar.type,props:mr,key:mr&&normalizeKey(mr),ref:or&&or.ref?lr&&dr?isArray$1(dr)?dr.concat(normalizeRef(or)):[dr,normalizeRef(or)]:normalizeRef(or):dr,scopeId:ar.scopeId,slotScopeIds:ar.slotScopeIds,children:fr,target:ar.target,targetStart:ar.targetStart,targetAnchor:ar.targetAnchor,staticCount:ar.staticCount,shapeFlag:ar.shapeFlag,patchFlag:or&&ar.type!==Fragment$1?hr===-1?16:hr|16:hr,dynamicProps:ar.dynamicProps,dynamicChildren:ar.dynamicChildren,appContext:ar.appContext,dirs:ar.dirs,transition:pr,component:ar.component,suspense:ar.suspense,ssContent:ar.ssContent&&cloneVNode(ar.ssContent),ssFallback:ar.ssFallback&&cloneVNode(ar.ssFallback),el:ar.el,anchor:ar.anchor,ctx:ar.ctx,ce:ar.ce};return pr&&cr&&setTransitionHooks(gr,pr.clone(gr)),gr}function createTextVNode(ar=" ",or=0){return createVNode(Text$2,null,ar,or)}function createStaticVNode(ar,or){const lr=createVNode(Static,null,ar);return lr.staticCount=or,lr}function createCommentVNode(ar="",or=!1){return or?(openBlock(),createBlock(Comment,null,ar)):createVNode(Comment,null,ar)}function normalizeVNode(ar){return ar==null||typeof ar=="boolean"?createVNode(Comment):isArray$1(ar)?createVNode(Fragment$1,null,ar.slice()):isVNode(ar)?cloneIfMounted(ar):createVNode(Text$2,null,String(ar))}function cloneIfMounted(ar){return ar.el===null&&ar.patchFlag!==-1||ar.memo?ar:cloneVNode(ar)}function normalizeChildren(ar,or){let lr=0;const{shapeFlag:cr}=ar;if(or==null)or=null;else if(isArray$1(or))lr=16;else if(typeof or=="object")if(cr&65){const ur=or.default;ur&&(ur._c&&(ur._d=!1),normalizeChildren(ar,ur()),ur._c&&(ur._d=!0));return}else{lr=32;const ur=or._;!ur&&!isInternalObject(or)?or._ctx=currentRenderingInstance:ur===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?or._=1:(or._=2,ar.patchFlag|=1024))}else isFunction$1(or)?(or={default:or,_ctx:currentRenderingInstance},lr=32):(or=String(or),cr&64?(lr=16,or=[createTextVNode(or)]):lr=8);ar.children=or,ar.shapeFlag|=lr}function mergeProps(...ar){const or={};for(let lr=0;lr<ar.length;lr++){const cr=ar[lr];for(const ur in cr)if(ur==="class")or.class!==cr.class&&(or.class=normalizeClass([or.class,cr.class]));else if(ur==="style")or.style=normalizeStyle([or.style,cr.style]);else if(isOn(ur)){const dr=or[ur],hr=cr[ur];hr&&dr!==hr&&!(isArray$1(dr)&&dr.includes(hr))&&(or[ur]=dr?[].concat(dr,hr):hr)}else ur!==""&&(or[ur]=cr[ur])}return or}function invokeVNodeHook(ar,or,lr,cr=null){callWithAsyncErrorHandling(ar,or,7,[lr,cr])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(ar,or,lr){const cr=ar.type,ur=(or?or.appContext:ar.appContext)||emptyAppContext,dr={uid:uid++,vnode:ar,type:cr,parent:or,appContext:ur,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:or?or.provides:Object.create(ur.provides),ids:or?or.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(cr,ur),emitsOptions:normalizeEmitsOptions(cr,ur),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:cr.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:lr,suspenseId:lr?lr.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return dr.ctx={_:dr},dr.root=or?or.root:dr,dr.emit=emit.bind(null,dr),ar.ce&&ar.ce(dr),dr}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const ar=getGlobalThis(),or=(lr,cr)=>{let ur;return(ur=ar[lr])||(ur=ar[lr]=[]),ur.push(cr),dr=>{ur.length>1?ur.forEach(hr=>hr(dr)):ur[0](dr)}};internalSetCurrentInstance=or("__VUE_INSTANCE_SETTERS__",lr=>currentInstance=lr),setInSSRSetupState=or("__VUE_SSR_SETTERS__",lr=>isInSSRComponentSetup=lr)}const setCurrentInstance=ar=>{const or=currentInstance;return internalSetCurrentInstance(ar),ar.scope.on(),()=>{ar.scope.off(),internalSetCurrentInstance(or)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(ar){return ar.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(ar,or=!1,lr=!1){or&&setInSSRSetupState(or);const{props:cr,children:ur}=ar.vnode,dr=isStatefulComponent(ar);initProps(ar,cr,dr,or),initSlots(ar,ur,lr||or);const hr=dr?setupStatefulComponent(ar,or):void 0;return or&&setInSSRSetupState(!1),hr}function setupStatefulComponent(ar,or){const lr=ar.type;ar.accessCache=Object.create(null),ar.proxy=new Proxy(ar.ctx,PublicInstanceProxyHandlers);const{setup:cr}=lr;if(cr){pauseTracking();const ur=ar.setupContext=cr.length>1?createSetupContext(ar):null,dr=setCurrentInstance(ar),hr=callWithErrorHandling(cr,ar,0,[ar.props,ur]),fr=isPromise(hr);if(resetTracking(),dr(),(fr||ar.sp)&&!isAsyncWrapper(ar)&&markAsyncBoundary(ar),fr){if(hr.then(unsetCurrentInstance,unsetCurrentInstance),or)return hr.then(pr=>{handleSetupResult(ar,pr,or)}).catch(pr=>{handleError(pr,ar,0)});ar.asyncDep=hr}else handleSetupResult(ar,hr,or)}else finishComponentSetup(ar,or)}function handleSetupResult(ar,or,lr){isFunction$1(or)?ar.type.__ssrInlineRender?ar.ssrRender=or:ar.render=or:isObject(or)&&(ar.setupState=proxyRefs(or)),finishComponentSetup(ar,lr)}let compile$1,installWithProxy;function registerRuntimeCompiler(ar){compile$1=ar,installWithProxy=or=>{or.render._rc&&(or.withProxy=new Proxy(or.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(ar,or,lr){const cr=ar.type;if(!ar.render){if(!or&&compile$1&&!cr.render){const ur=cr.template||resolveMergedOptions(ar).template;if(ur){const{isCustomElement:dr,compilerOptions:hr}=ar.appContext.config,{delimiters:fr,compilerOptions:pr}=cr,mr=extend$1(extend$1({isCustomElement:dr,delimiters:fr},hr),pr);cr.render=compile$1(ur,mr)}}ar.render=cr.render||NOOP,installWithProxy&&installWithProxy(ar)}{const ur=setCurrentInstance(ar);pauseTracking();try{applyOptions(ar)}finally{resetTracking(),ur()}}}const attrsProxyHandlers={get(ar,or){return track(ar,"get",""),ar[or]}};function createSetupContext(ar){const or=lr=>{ar.exposed=lr||{}};return{attrs:new Proxy(ar.attrs,attrsProxyHandlers),slots:ar.slots,emit:ar.emit,expose:or}}function getComponentPublicInstance(ar){return ar.exposed?ar.exposeProxy||(ar.exposeProxy=new Proxy(proxyRefs(markRaw(ar.exposed)),{get(or,lr){if(lr in or)return or[lr];if(lr in publicPropertiesMap)return publicPropertiesMap[lr](ar)},has(or,lr){return lr in or||lr in publicPropertiesMap}})):ar.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=ar=>ar.replace(classifyRE,or=>or.toUpperCase()).replace(/[-_]/g,"");function getComponentName(ar,or=!0){return isFunction$1(ar)?ar.displayName||ar.name:ar.name||or&&ar.__name}function formatComponentName(ar,or,lr=!1){let cr=getComponentName(or);if(!cr&&or.__file){const ur=or.__file.match(/([^/\\]+)\.\w+$/);ur&&(cr=ur[1])}if(!cr&&ar&&ar.parent){const ur=dr=>{for(const hr in dr)if(dr[hr]===or)return hr};cr=ur(ar.components||ar.parent.type.components)||ur(ar.appContext.components)}return cr?classify(cr):lr?"App":"Anonymous"}function isClassComponent(ar){return isFunction$1(ar)&&"__vccOpts"in ar}const computed=(ar,or)=>computed$1(ar,or,isInSSRComponentSetup);function h$1(ar,or,lr){const cr=arguments.length;return cr===2?isObject(or)&&!isArray$1(or)?isVNode(or)?createVNode(ar,null,[or]):createVNode(ar,or):createVNode(ar,null,or):(cr>3?lr=Array.prototype.slice.call(arguments,2):cr===3&&isVNode(lr)&&(lr=[lr]),createVNode(ar,or,lr))}function initCustomFormatter(){}function withMemo(ar,or,lr,cr){const ur=lr[cr];if(ur&&isMemoSame(ur,ar))return ur;const dr=or();return dr.memo=ar.slice(),dr.cacheIndex=cr,lr[cr]=dr}function isMemoSame(ar,or){const lr=ar.memo;if(lr.length!=or.length)return!1;for(let cr=0;cr<lr.length;cr++)if(hasChanged(lr[cr],or[cr]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(ar),!0}const version$1="3.5.14",warn$2=NOOP,ErrorTypeStrings=ErrorTypeStrings$1,devtools=devtools$1,setDevtoolsHook=setDevtoolsHook$1,_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode,getComponentPublicInstance,ensureValidVNode,pushWarningContext,popWarningContext},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,DeprecationTypes=null;/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$2=typeof window<"u"&&window.trustedTypes;if(tt$2)try{policy=tt$2.createPolicy("vue",{createHTML:ar=>ar})}catch{}const unsafeToTrustedHTML=policy?ar=>policy.createHTML(ar):ar=>ar,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc$2=typeof document<"u"?document:null,templateContainer=doc$2&&doc$2.createElement("template"),nodeOps={insert:(ar,or,lr)=>{or.insertBefore(ar,lr||null)},remove:ar=>{const or=ar.parentNode;or&&or.removeChild(ar)},createElement:(ar,or,lr,cr)=>{const ur=or==="svg"?doc$2.createElementNS(svgNS,ar):or==="mathml"?doc$2.createElementNS(mathmlNS,ar):lr?doc$2.createElement(ar,{is:lr}):doc$2.createElement(ar);return ar==="select"&&cr&&cr.multiple!=null&&ur.setAttribute("multiple",cr.multiple),ur},createText:ar=>doc$2.createTextNode(ar),createComment:ar=>doc$2.createComment(ar),setText:(ar,or)=>{ar.nodeValue=or},setElementText:(ar,or)=>{ar.textContent=or},parentNode:ar=>ar.parentNode,nextSibling:ar=>ar.nextSibling,querySelector:ar=>doc$2.querySelector(ar),setScopeId(ar,or){ar.setAttribute(or,"")},insertStaticContent(ar,or,lr,cr,ur,dr){const hr=lr?lr.previousSibling:or.lastChild;if(ur&&(ur===dr||ur.nextSibling))for(;or.insertBefore(ur.cloneNode(!0),lr),!(ur===dr||!(ur=ur.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(cr==="svg"?`<svg>${ar}</svg>`:cr==="mathml"?`<math>${ar}</math>`:ar);const fr=templateContainer.content;if(cr==="svg"||cr==="mathml"){const pr=fr.firstChild;for(;pr.firstChild;)fr.appendChild(pr.firstChild);fr.removeChild(pr)}or.insertBefore(fr,lr)}return[hr?hr.nextSibling:or.firstChild,lr?lr.previousSibling:or.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=ar=>(ar.displayName="Transition",ar.props=TransitionPropsValidators,ar),Transition=decorate$1((ar,{slots:or})=>h$1(BaseTransition,resolveTransitionProps(ar),or)),callHook=(ar,or=[])=>{isArray$1(ar)?ar.forEach(lr=>lr(...or)):ar&&ar(...or)},hasExplicitCallback=ar=>ar?isArray$1(ar)?ar.some(or=>or.length>1):ar.length>1:!1;function resolveTransitionProps(ar){const or={};for(const Ir in ar)Ir in DOMTransitionPropsValidators||(or[Ir]=ar[Ir]);if(ar.css===!1)return or;const{name:lr="v",type:cr,duration:ur,enterFromClass:dr=`${lr}-enter-from`,enterActiveClass:hr=`${lr}-enter-active`,enterToClass:fr=`${lr}-enter-to`,appearFromClass:pr=dr,appearActiveClass:mr=hr,appearToClass:gr=fr,leaveFromClass:yr=`${lr}-leave-from`,leaveActiveClass:vr=`${lr}-leave-active`,leaveToClass:br=`${lr}-leave-to`}=ar,Sr=normalizeDuration(ur),xr=Sr&&Sr[0],Er=Sr&&Sr[1],{onBeforeEnter:wr,onEnter:Ar,onEnterCancelled:Tr,onLeave:Cr,onLeaveCancelled:kr,onBeforeAppear:Mr=wr,onAppear:Rr=Ar,onAppearCancelled:Nr=Tr}=or,_r=(Ir,$r,Zr,rs)=>{Ir._enterCancelled=rs,removeTransitionClass(Ir,$r?gr:fr),removeTransitionClass(Ir,$r?mr:hr),Zr&&Zr()},Dr=(Ir,$r)=>{Ir._isLeaving=!1,removeTransitionClass(Ir,yr),removeTransitionClass(Ir,br),removeTransitionClass(Ir,vr),$r&&$r()},Pr=Ir=>($r,Zr)=>{const rs=Ir?Rr:Ar,qr=()=>_r($r,Ir,Zr);callHook(rs,[$r,qr]),nextFrame(()=>{removeTransitionClass($r,Ir?pr:dr),addTransitionClass($r,Ir?gr:fr),hasExplicitCallback(rs)||whenTransitionEnds($r,cr,xr,qr)})};return extend$1(or,{onBeforeEnter(Ir){callHook(wr,[Ir]),addTransitionClass(Ir,dr),addTransitionClass(Ir,hr)},onBeforeAppear(Ir){callHook(Mr,[Ir]),addTransitionClass(Ir,pr),addTransitionClass(Ir,mr)},onEnter:Pr(!1),onAppear:Pr(!0),onLeave(Ir,$r){Ir._isLeaving=!0;const Zr=()=>Dr(Ir,$r);addTransitionClass(Ir,yr),Ir._enterCancelled?(addTransitionClass(Ir,vr),forceReflow()):(forceReflow(),addTransitionClass(Ir,vr)),nextFrame(()=>{Ir._isLeaving&&(removeTransitionClass(Ir,yr),addTransitionClass(Ir,br),hasExplicitCallback(Cr)||whenTransitionEnds(Ir,cr,Er,Zr))}),callHook(Cr,[Ir,Zr])},onEnterCancelled(Ir){_r(Ir,!1,void 0,!0),callHook(Tr,[Ir])},onAppearCancelled(Ir){_r(Ir,!0,void 0,!0),callHook(Nr,[Ir])},onLeaveCancelled(Ir){Dr(Ir),callHook(kr,[Ir])}})}function normalizeDuration(ar){if(ar==null)return null;if(isObject(ar))return[NumberOf(ar.enter),NumberOf(ar.leave)];{const or=NumberOf(ar);return[or,or]}}function NumberOf(ar){return toNumber(ar)}function addTransitionClass(ar,or){or.split(/\s+/).forEach(lr=>lr&&ar.classList.add(lr)),(ar[vtcKey]||(ar[vtcKey]=new Set)).add(or)}function removeTransitionClass(ar,or){or.split(/\s+/).forEach(cr=>cr&&ar.classList.remove(cr));const lr=ar[vtcKey];lr&&(lr.delete(or),lr.size||(ar[vtcKey]=void 0))}function nextFrame(ar){requestAnimationFrame(()=>{requestAnimationFrame(ar)})}let endId=0;function whenTransitionEnds(ar,or,lr,cr){const ur=ar._endId=++endId,dr=()=>{ur===ar._endId&&cr()};if(lr!=null)return setTimeout(dr,lr);const{type:hr,timeout:fr,propCount:pr}=getTransitionInfo(ar,or);if(!hr)return cr();const mr=hr+"end";let gr=0;const yr=()=>{ar.removeEventListener(mr,vr),dr()},vr=br=>{br.target===ar&&++gr>=pr&&yr()};setTimeout(()=>{gr<pr&&yr()},fr+1),ar.addEventListener(mr,vr)}function getTransitionInfo(ar,or){const lr=window.getComputedStyle(ar),cr=Sr=>(lr[Sr]||"").split(", "),ur=cr(`${TRANSITION}Delay`),dr=cr(`${TRANSITION}Duration`),hr=getTimeout(ur,dr),fr=cr(`${ANIMATION}Delay`),pr=cr(`${ANIMATION}Duration`),mr=getTimeout(fr,pr);let gr=null,yr=0,vr=0;or===TRANSITION?hr>0&&(gr=TRANSITION,yr=hr,vr=dr.length):or===ANIMATION?mr>0&&(gr=ANIMATION,yr=mr,vr=pr.length):(yr=Math.max(hr,mr),gr=yr>0?hr>mr?TRANSITION:ANIMATION:null,vr=gr?gr===TRANSITION?dr.length:pr.length:0);const br=gr===TRANSITION&&/\b(transform|all)(,|$)/.test(cr(`${TRANSITION}Property`).toString());return{type:gr,timeout:yr,propCount:vr,hasTransform:br}}function getTimeout(ar,or){for(;ar.length<or.length;)ar=ar.concat(ar);return Math.max(...or.map((lr,cr)=>toMs(lr)+toMs(ar[cr])))}function toMs(ar){return ar==="auto"?0:Number(ar.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(ar,or,lr){const cr=ar[vtcKey];cr&&(or=(or?[or,...cr]:[...cr]).join(" ")),or==null?ar.removeAttribute("class"):lr?ar.setAttribute("class",or):ar.className=or}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(ar,{value:or},{transition:lr}){ar[vShowOriginalDisplay]=ar.style.display==="none"?"":ar.style.display,lr&&or?lr.beforeEnter(ar):setDisplay(ar,or)},mounted(ar,{value:or},{transition:lr}){lr&&or&&lr.enter(ar)},updated(ar,{value:or,oldValue:lr},{transition:cr}){!or!=!lr&&(cr?or?(cr.beforeEnter(ar),setDisplay(ar,!0),cr.enter(ar)):cr.leave(ar,()=>{setDisplay(ar,!1)}):setDisplay(ar,or))},beforeUnmount(ar,{value:or}){setDisplay(ar,or)}};function setDisplay(ar,or){ar.style.display=or?ar[vShowOriginalDisplay]:"none",ar[vShowHidden]=!or}function initVShowForSSR(){vShow.getSSRProps=({value:ar})=>{if(!ar)return{style:{display:"none"}}}}const CSS_VAR_TEXT=Symbol("");function useCssVars(ar){const or=getCurrentInstance();if(!or)return;const lr=or.ut=(ur=ar(or.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${or.uid}"]`)).forEach(dr=>setVarsOnNode(dr,ur))},cr=()=>{const ur=ar(or.proxy);or.ce?setVarsOnNode(or.ce,ur):setVarsOnVNode(or.subTree,ur),lr(ur)};onBeforeUpdate(()=>{queuePostFlushCb(cr)}),onMounted(()=>{watch(cr,NOOP,{flush:"post"});const ur=new MutationObserver(cr);ur.observe(or.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>ur.disconnect())})}function setVarsOnVNode(ar,or){if(ar.shapeFlag&128){const lr=ar.suspense;ar=lr.activeBranch,lr.pendingBranch&&!lr.isHydrating&&lr.effects.push(()=>{setVarsOnVNode(lr.activeBranch,or)})}for(;ar.component;)ar=ar.component.subTree;if(ar.shapeFlag&1&&ar.el)setVarsOnNode(ar.el,or);else if(ar.type===Fragment$1)ar.children.forEach(lr=>setVarsOnVNode(lr,or));else if(ar.type===Static){let{el:lr,anchor:cr}=ar;for(;lr&&(setVarsOnNode(lr,or),lr!==cr);)lr=lr.nextSibling}}function setVarsOnNode(ar,or){if(ar.nodeType===1){const lr=ar.style;let cr="";for(const ur in or)lr.setProperty(`--${ur}`,or[ur]),cr+=`--${ur}: ${or[ur]};`;lr[CSS_VAR_TEXT]=cr}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(ar,or,lr){const cr=ar.style,ur=isString(lr);let dr=!1;if(lr&&!ur){if(or)if(isString(or))for(const hr of or.split(";")){const fr=hr.slice(0,hr.indexOf(":")).trim();lr[fr]==null&&setStyle(cr,fr,"")}else for(const hr in or)lr[hr]==null&&setStyle(cr,hr,"");for(const hr in lr)hr==="display"&&(dr=!0),setStyle(cr,hr,lr[hr])}else if(ur){if(or!==lr){const hr=cr[CSS_VAR_TEXT];hr&&(lr+=";"+hr),cr.cssText=lr,dr=displayRE.test(lr)}}else or&&ar.removeAttribute("style");vShowOriginalDisplay in ar&&(ar[vShowOriginalDisplay]=dr?cr.display:"",ar[vShowHidden]&&(cr.display="none"))}const importantRE=/\s*!important$/;function setStyle(ar,or,lr){if(isArray$1(lr))lr.forEach(cr=>setStyle(ar,or,cr));else if(lr==null&&(lr=""),or.startsWith("--"))ar.setProperty(or,lr);else{const cr=autoPrefix(ar,or);importantRE.test(lr)?ar.setProperty(hyphenate(cr),lr.replace(importantRE,""),"important"):ar[cr]=lr}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(ar,or){const lr=prefixCache[or];if(lr)return lr;let cr=camelize(or);if(cr!=="filter"&&cr in ar)return prefixCache[or]=cr;cr=capitalize(cr);for(let ur=0;ur<prefixes.length;ur++){const dr=prefixes[ur]+cr;if(dr in ar)return prefixCache[or]=dr}return or}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(ar,or,lr,cr,ur,dr=isSpecialBooleanAttr(or)){cr&&or.startsWith("xlink:")?lr==null?ar.removeAttributeNS(xlinkNS,or.slice(6,or.length)):ar.setAttributeNS(xlinkNS,or,lr):lr==null||dr&&!includeBooleanAttr(lr)?ar.removeAttribute(or):ar.setAttribute(or,dr?"":isSymbol(lr)?String(lr):lr)}function patchDOMProp(ar,or,lr,cr,ur){if(or==="innerHTML"||or==="textContent"){lr!=null&&(ar[or]=or==="innerHTML"?unsafeToTrustedHTML(lr):lr);return}const dr=ar.tagName;if(or==="value"&&dr!=="PROGRESS"&&!dr.includes("-")){const fr=dr==="OPTION"?ar.getAttribute("value")||"":ar.value,pr=lr==null?ar.type==="checkbox"?"on":"":String(lr);(fr!==pr||!("_value"in ar))&&(ar.value=pr),lr==null&&ar.removeAttribute(or),ar._value=lr;return}let hr=!1;if(lr===""||lr==null){const fr=typeof ar[or];fr==="boolean"?lr=includeBooleanAttr(lr):lr==null&&fr==="string"?(lr="",hr=!0):fr==="number"&&(lr=0,hr=!0)}try{ar[or]=lr}catch{}hr&&ar.removeAttribute(ur||or)}function addEventListener$1(ar,or,lr,cr){ar.addEventListener(or,lr,cr)}function removeEventListener(ar,or,lr,cr){ar.removeEventListener(or,lr,cr)}const veiKey=Symbol("_vei");function patchEvent(ar,or,lr,cr,ur=null){const dr=ar[veiKey]||(ar[veiKey]={}),hr=dr[or];if(cr&&hr)hr.value=cr;else{const[fr,pr]=parseName(or);if(cr){const mr=dr[or]=createInvoker(cr,ur);addEventListener$1(ar,fr,mr,pr)}else hr&&(removeEventListener(ar,fr,hr,pr),dr[or]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(ar){let or;if(optionsModifierRE.test(ar)){or={};let cr;for(;cr=ar.match(optionsModifierRE);)ar=ar.slice(0,ar.length-cr[0].length),or[cr[0].toLowerCase()]=!0}return[ar[2]===":"?ar.slice(3):hyphenate(ar.slice(2)),or]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(ar,or){const lr=cr=>{if(!cr._vts)cr._vts=Date.now();else if(cr._vts<=lr.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(cr,lr.value),or,5,[cr])};return lr.value=ar,lr.attached=getNow(),lr}function patchStopImmediatePropagation(ar,or){if(isArray$1(or)){const lr=ar.stopImmediatePropagation;return ar.stopImmediatePropagation=()=>{lr.call(ar),ar._stopped=!0},or.map(cr=>ur=>!ur._stopped&&cr&&cr(ur))}else return or}const isNativeOn=ar=>ar.charCodeAt(0)===111&&ar.charCodeAt(1)===110&&ar.charCodeAt(2)>96&&ar.charCodeAt(2)<123,patchProp=(ar,or,lr,cr,ur,dr)=>{const hr=ur==="svg";or==="class"?patchClass(ar,cr,hr):or==="style"?patchStyle(ar,lr,cr):isOn(or)?isModelListener(or)||patchEvent(ar,or,lr,cr,dr):(or[0]==="."?(or=or.slice(1),!0):or[0]==="^"?(or=or.slice(1),!1):shouldSetAsProp(ar,or,cr,hr))?(patchDOMProp(ar,or,cr),!ar.tagName.includes("-")&&(or==="value"||or==="checked"||or==="selected")&&patchAttr(ar,or,cr,hr,dr,or!=="value")):ar._isVueCE&&(/[A-Z]/.test(or)||!isString(cr))?patchDOMProp(ar,camelize(or),cr,dr,or):(or==="true-value"?ar._trueValue=cr:or==="false-value"&&(ar._falseValue=cr),patchAttr(ar,or,cr,hr))};function shouldSetAsProp(ar,or,lr,cr){if(cr)return!!(or==="innerHTML"||or==="textContent"||or in ar&&isNativeOn(or)&&isFunction$1(lr));if(or==="spellcheck"||or==="draggable"||or==="translate"||or==="autocorrect"||or==="form"||or==="list"&&ar.tagName==="INPUT"||or==="type"&&ar.tagName==="TEXTAREA")return!1;if(or==="width"||or==="height"){const ur=ar.tagName;if(ur==="IMG"||ur==="VIDEO"||ur==="CANVAS"||ur==="SOURCE")return!1}return isNativeOn(or)&&isString(lr)?!1:or in ar}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(ar,or,lr){const cr=defineComponent(ar,or);isPlainObject$2(cr)&&extend$1(cr,or);class ur extends VueElement{constructor(hr){super(cr,hr,lr)}}return ur.def=cr,ur}/*! #__NO_SIDE_EFFECTS__ */const defineSSRCustomElement=(ar,or)=>defineCustomElement(ar,or,createSSRApp),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(or,lr={},cr=createApp){super(),this._def=or,this._props=lr,this._createApp=cr,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&cr!==createApp?this._root=this.shadowRoot:or.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let or=this;for(;or=or&&(or.parentNode||or.host);)if(or instanceof VueElement){this._parent=or;break}this._instance||(this._resolved?(this._setParent(),this._update()):or&&or._pendingResolve?this._pendingResolve=or._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(or=this._parent){or&&(this._instance.parent=or._instance,this._instance.provides=or._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let cr=0;cr<this.attributes.length;cr++)this._setAttr(this.attributes[cr].name);this._ob=new MutationObserver(cr=>{for(const ur of cr)this._setAttr(ur.attributeName)}),this._ob.observe(this,{attributes:!0});const or=(cr,ur=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:dr,styles:hr}=cr;let fr;if(dr&&!isArray$1(dr))for(const pr in dr){const mr=dr[pr];(mr===Number||mr&&mr.type===Number)&&(pr in this._props&&(this._props[pr]=toNumber(this._props[pr])),(fr||(fr=Object.create(null)))[camelize(pr)]=!0)}this._numberProps=fr,ur&&this._resolveProps(cr),this.shadowRoot&&this._applyStyles(hr),this._mount(cr)},lr=this._def.__asyncLoader;lr?this._pendingResolve=lr().then(cr=>or(this._def=cr,!0)):or(this._def)}_mount(or){this._app=this._createApp(or),or.configureApp&&or.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const lr=this._instance&&this._instance.exposed;if(lr)for(const cr in lr)hasOwn(this,cr)||Object.defineProperty(this,cr,{get:()=>unref(lr[cr])})}_resolveProps(or){const{props:lr}=or,cr=isArray$1(lr)?lr:Object.keys(lr||{});for(const ur of Object.keys(this))ur[0]!=="_"&&cr.includes(ur)&&this._setProp(ur,this[ur]);for(const ur of cr.map(camelize))Object.defineProperty(this,ur,{get(){return this._getProp(ur)},set(dr){this._setProp(ur,dr,!0,!0)}})}_setAttr(or){if(or.startsWith("data-v-"))return;const lr=this.hasAttribute(or);let cr=lr?this.getAttribute(or):REMOVAL;const ur=camelize(or);lr&&this._numberProps&&this._numberProps[ur]&&(cr=toNumber(cr)),this._setProp(ur,cr,!1,!0)}_getProp(or){return this._props[or]}_setProp(or,lr,cr=!0,ur=!1){if(lr!==this._props[or]&&(lr===REMOVAL?delete this._props[or]:(this._props[or]=lr,or==="key"&&this._app&&(this._app._ceVNode.key=lr)),ur&&this._instance&&this._update(),cr)){const dr=this._ob;dr&&dr.disconnect(),lr===!0?this.setAttribute(hyphenate(or),""):typeof lr=="string"||typeof lr=="number"?this.setAttribute(hyphenate(or),lr+""):lr||this.removeAttribute(hyphenate(or)),dr&&dr.observe(this,{attributes:!0})}}_update(){render(this._createVNode(),this._root)}_createVNode(){const or={};this.shadowRoot||(or.onVnodeMounted=or.onVnodeUpdated=this._renderSlots.bind(this));const lr=createVNode(this._def,extend$1(or,this._props));return this._instance||(lr.ce=cr=>{this._instance=cr,cr.ce=this,cr.isCE=!0;const ur=(dr,hr)=>{this.dispatchEvent(new CustomEvent(dr,isPlainObject$2(hr[0])?extend$1({detail:hr},hr[0]):{detail:hr}))};cr.emit=(dr,...hr)=>{ur(dr,hr),hyphenate(dr)!==dr&&ur(hyphenate(dr),hr)},this._setParent()}),lr}_applyStyles(or,lr){if(!or)return;if(lr){if(lr===this._def||this._styleChildren.has(lr))return;this._styleChildren.add(lr)}const cr=this._nonce;for(let ur=or.length-1;ur>=0;ur--){const dr=document.createElement("style");cr&&dr.setAttribute("nonce",cr),dr.textContent=or[ur],this.shadowRoot.prepend(dr)}}_parseSlots(){const or=this._slots={};let lr;for(;lr=this.firstChild;){const cr=lr.nodeType===1&&lr.getAttribute("slot")||"default";(or[cr]||(or[cr]=[])).push(lr),this.removeChild(lr)}}_renderSlots(){const or=(this._teleportTarget||this).querySelectorAll("slot"),lr=this._instance.type.__scopeId;for(let cr=0;cr<or.length;cr++){const ur=or[cr],dr=ur.getAttribute("name")||"default",hr=this._slots[dr],fr=ur.parentNode;if(hr)for(const pr of hr){if(lr&&pr.nodeType===1){const mr=lr+"-s",gr=document.createTreeWalker(pr,1);pr.setAttribute(mr,"");let yr;for(;yr=gr.nextNode();)yr.setAttribute(mr,"")}fr.insertBefore(pr,ur)}else for(;ur.firstChild;)fr.insertBefore(ur.firstChild,ur);fr.removeChild(ur)}}_injectChildStyle(or){this._applyStyles(or.styles,or)}_removeChildStyle(or){}}function useHost(ar){const or=getCurrentInstance(),lr=or&&or.ce;return lr||null}function useShadowRoot(){const ar=useHost();return ar&&ar.shadowRoot}function useCssModule(ar="$style"){{const or=getCurrentInstance();if(!or)return EMPTY_OBJ;const lr=or.type.__cssModules;if(!lr)return EMPTY_OBJ;const cr=lr[ar];return cr||EMPTY_OBJ}}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=ar=>(delete ar.props.mode,ar),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(ar,{slots:or}){const lr=getCurrentInstance(),cr=useTransitionState();let ur,dr;return onUpdated(()=>{if(!ur.length)return;const hr=ar.moveClass||`${ar.name||"v"}-move`;if(!hasCSSTransform(ur[0].el,lr.vnode.el,hr)){ur=[];return}ur.forEach(callPendingCbs),ur.forEach(recordPosition);const fr=ur.filter(applyTranslation);forceReflow(),fr.forEach(pr=>{const mr=pr.el,gr=mr.style;addTransitionClass(mr,hr),gr.transform=gr.webkitTransform=gr.transitionDuration="";const yr=mr[moveCbKey]=vr=>{vr&&vr.target!==mr||(!vr||/transform$/.test(vr.propertyName))&&(mr.removeEventListener("transitionend",yr),mr[moveCbKey]=null,removeTransitionClass(mr,hr))};mr.addEventListener("transitionend",yr)}),ur=[]}),()=>{const hr=toRaw(ar),fr=resolveTransitionProps(hr);let pr=hr.tag||Fragment$1;if(ur=[],dr)for(let mr=0;mr<dr.length;mr++){const gr=dr[mr];gr.el&&gr.el instanceof Element&&(ur.push(gr),setTransitionHooks(gr,resolveTransitionHooks(gr,fr,cr,lr)),positionMap.set(gr,gr.el.getBoundingClientRect()))}dr=or.default?getTransitionRawChildren(or.default()):[];for(let mr=0;mr<dr.length;mr++){const gr=dr[mr];gr.key!=null&&setTransitionHooks(gr,resolveTransitionHooks(gr,fr,cr,lr))}return createVNode(pr,null,dr)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(ar){const or=ar.el;or[moveCbKey]&&or[moveCbKey](),or[enterCbKey]&&or[enterCbKey]()}function recordPosition(ar){newPositionMap.set(ar,ar.el.getBoundingClientRect())}function applyTranslation(ar){const or=positionMap.get(ar),lr=newPositionMap.get(ar),cr=or.left-lr.left,ur=or.top-lr.top;if(cr||ur){const dr=ar.el.style;return dr.transform=dr.webkitTransform=`translate(${cr}px,${ur}px)`,dr.transitionDuration="0s",ar}}function hasCSSTransform(ar,or,lr){const cr=ar.cloneNode(),ur=ar[vtcKey];ur&&ur.forEach(fr=>{fr.split(/\s+/).forEach(pr=>pr&&cr.classList.remove(pr))}),lr.split(/\s+/).forEach(fr=>fr&&cr.classList.add(fr)),cr.style.display="none";const dr=or.nodeType===1?or:or.parentNode;dr.appendChild(cr);const{hasTransform:hr}=getTransitionInfo(cr);return dr.removeChild(cr),hr}const getModelAssigner=ar=>{const or=ar.props["onUpdate:modelValue"]||!1;return isArray$1(or)?lr=>invokeArrayFns(or,lr):or};function onCompositionStart(ar){ar.target.composing=!0}function onCompositionEnd(ar){const or=ar.target;or.composing&&(or.composing=!1,or.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(ar,{modifiers:{lazy:or,trim:lr,number:cr}},ur){ar[assignKey]=getModelAssigner(ur);const dr=cr||ur.props&&ur.props.type==="number";addEventListener$1(ar,or?"change":"input",hr=>{if(hr.target.composing)return;let fr=ar.value;lr&&(fr=fr.trim()),dr&&(fr=looseToNumber(fr)),ar[assignKey](fr)}),lr&&addEventListener$1(ar,"change",()=>{ar.value=ar.value.trim()}),or||(addEventListener$1(ar,"compositionstart",onCompositionStart),addEventListener$1(ar,"compositionend",onCompositionEnd),addEventListener$1(ar,"change",onCompositionEnd))},mounted(ar,{value:or}){ar.value=or??""},beforeUpdate(ar,{value:or,oldValue:lr,modifiers:{lazy:cr,trim:ur,number:dr}},hr){if(ar[assignKey]=getModelAssigner(hr),ar.composing)return;const fr=(dr||ar.type==="number")&&!/^0\d/.test(ar.value)?looseToNumber(ar.value):ar.value,pr=or??"";fr!==pr&&(document.activeElement===ar&&ar.type!=="range"&&(cr&&or===lr||ur&&ar.value.trim()===pr)||(ar.value=pr))}},vModelCheckbox={deep:!0,created(ar,or,lr){ar[assignKey]=getModelAssigner(lr),addEventListener$1(ar,"change",()=>{const cr=ar._modelValue,ur=getValue(ar),dr=ar.checked,hr=ar[assignKey];if(isArray$1(cr)){const fr=looseIndexOf(cr,ur),pr=fr!==-1;if(dr&&!pr)hr(cr.concat(ur));else if(!dr&&pr){const mr=[...cr];mr.splice(fr,1),hr(mr)}}else if(isSet(cr)){const fr=new Set(cr);dr?fr.add(ur):fr.delete(ur),hr(fr)}else hr(getCheckboxValue(ar,dr))})},mounted:setChecked,beforeUpdate(ar,or,lr){ar[assignKey]=getModelAssigner(lr),setChecked(ar,or,lr)}};function setChecked(ar,{value:or,oldValue:lr},cr){ar._modelValue=or;let ur;if(isArray$1(or))ur=looseIndexOf(or,cr.props.value)>-1;else if(isSet(or))ur=or.has(cr.props.value);else{if(or===lr)return;ur=looseEqual(or,getCheckboxValue(ar,!0))}ar.checked!==ur&&(ar.checked=ur)}const vModelRadio={created(ar,{value:or},lr){ar.checked=looseEqual(or,lr.props.value),ar[assignKey]=getModelAssigner(lr),addEventListener$1(ar,"change",()=>{ar[assignKey](getValue(ar))})},beforeUpdate(ar,{value:or,oldValue:lr},cr){ar[assignKey]=getModelAssigner(cr),or!==lr&&(ar.checked=looseEqual(or,cr.props.value))}},vModelSelect={deep:!0,created(ar,{value:or,modifiers:{number:lr}},cr){const ur=isSet(or);addEventListener$1(ar,"change",()=>{const dr=Array.prototype.filter.call(ar.options,hr=>hr.selected).map(hr=>lr?looseToNumber(getValue(hr)):getValue(hr));ar[assignKey](ar.multiple?ur?new Set(dr):dr:dr[0]),ar._assigning=!0,nextTick(()=>{ar._assigning=!1})}),ar[assignKey]=getModelAssigner(cr)},mounted(ar,{value:or}){setSelected(ar,or)},beforeUpdate(ar,or,lr){ar[assignKey]=getModelAssigner(lr)},updated(ar,{value:or}){ar._assigning||setSelected(ar,or)}};function setSelected(ar,or){const lr=ar.multiple,cr=isArray$1(or);if(!(lr&&!cr&&!isSet(or))){for(let ur=0,dr=ar.options.length;ur<dr;ur++){const hr=ar.options[ur],fr=getValue(hr);if(lr)if(cr){const pr=typeof fr;pr==="string"||pr==="number"?hr.selected=or.some(mr=>String(mr)===String(fr)):hr.selected=looseIndexOf(or,fr)>-1}else hr.selected=or.has(fr);else if(looseEqual(getValue(hr),or)){ar.selectedIndex!==ur&&(ar.selectedIndex=ur);return}}!lr&&ar.selectedIndex!==-1&&(ar.selectedIndex=-1)}}function getValue(ar){return"_value"in ar?ar._value:ar.value}function getCheckboxValue(ar,or){const lr=or?"_trueValue":"_falseValue";return lr in ar?ar[lr]:or}const vModelDynamic={created(ar,or,lr){callModelHook(ar,or,lr,null,"created")},mounted(ar,or,lr){callModelHook(ar,or,lr,null,"mounted")},beforeUpdate(ar,or,lr,cr){callModelHook(ar,or,lr,cr,"beforeUpdate")},updated(ar,or,lr,cr){callModelHook(ar,or,lr,cr,"updated")}};function resolveDynamicModel(ar,or){switch(ar){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(or){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(ar,or,lr,cr,ur){const hr=resolveDynamicModel(ar.tagName,lr.props&&lr.props.type)[ur];hr&&hr(ar,or,lr,cr)}function initVModelForSSR(){vModelText.getSSRProps=({value:ar})=>({value:ar}),vModelRadio.getSSRProps=({value:ar},or)=>{if(or.props&&looseEqual(or.props.value,ar))return{checked:!0}},vModelCheckbox.getSSRProps=({value:ar},or)=>{if(isArray$1(ar)){if(or.props&&looseIndexOf(ar,or.props.value)>-1)return{checked:!0}}else if(isSet(ar)){if(or.props&&ar.has(or.props.value))return{checked:!0}}else if(ar)return{checked:!0}},vModelDynamic.getSSRProps=(ar,or)=>{if(typeof or.type!="string")return;const lr=resolveDynamicModel(or.type.toUpperCase(),or.props&&or.props.type);if(lr.getSSRProps)return lr.getSSRProps(ar,or)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:ar=>ar.stopPropagation(),prevent:ar=>ar.preventDefault(),self:ar=>ar.target!==ar.currentTarget,ctrl:ar=>!ar.ctrlKey,shift:ar=>!ar.shiftKey,alt:ar=>!ar.altKey,meta:ar=>!ar.metaKey,left:ar=>"button"in ar&&ar.button!==0,middle:ar=>"button"in ar&&ar.button!==1,right:ar=>"button"in ar&&ar.button!==2,exact:(ar,or)=>systemModifiers.some(lr=>ar[`${lr}Key`]&&!or.includes(lr))},withModifiers=(ar,or)=>{const lr=ar._withMods||(ar._withMods={}),cr=or.join(".");return lr[cr]||(lr[cr]=(ur,...dr)=>{for(let hr=0;hr<or.length;hr++){const fr=modifierGuards[or[hr]];if(fr&&fr(ur,or))return}return ar(ur,...dr)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(ar,or)=>{const lr=ar._withKeys||(ar._withKeys={}),cr=or.join(".");return lr[cr]||(lr[cr]=ur=>{if(!("key"in ur))return;const dr=hyphenate(ur.key);if(or.some(hr=>hr===dr||keyNames[hr]===dr))return ar(ur)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render=(...ar)=>{ensureRenderer().render(...ar)},hydrate=(...ar)=>{ensureHydrationRenderer().hydrate(...ar)},createApp=(...ar)=>{const or=ensureRenderer().createApp(...ar),{mount:lr}=or;return or.mount=cr=>{const ur=normalizeContainer(cr);if(!ur)return;const dr=or._component;!isFunction$1(dr)&&!dr.render&&!dr.template&&(dr.template=ur.innerHTML),ur.nodeType===1&&(ur.textContent="");const hr=lr(ur,!1,resolveRootNamespace(ur));return ur instanceof Element&&(ur.removeAttribute("v-cloak"),ur.setAttribute("data-v-app","")),hr},or},createSSRApp=(...ar)=>{const or=ensureHydrationRenderer().createApp(...ar),{mount:lr}=or;return or.mount=cr=>{const ur=normalizeContainer(cr);if(ur)return lr(ur,!0,resolveRootNamespace(ur))},or};function resolveRootNamespace(ar){if(ar instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&ar instanceof MathMLElement)return"mathml"}function normalizeContainer(ar){return isString(ar)?document.querySelector(ar):ar}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};/**
* vue v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment:Fragment$1,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$2,TrackOpTypes,Transition,TransitionGroup,TriggerOpTypes,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$1,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$1,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=ar=>activePinia=ar,piniaSymbol=Symbol();function isPlainObject$1(ar){return ar&&typeof ar=="object"&&Object.prototype.toString.call(ar)==="[object Object]"&&typeof ar.toJSON!="function"}var MutationType;(function(ar){ar.direct="direct",ar.patchObject="patch object",ar.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const ar=effectScope(!0),or=ar.run(()=>ref({}));let lr=[],cr=[];const ur=markRaw({install(dr){setActivePinia(ur),ur._a=dr,dr.provide(piniaSymbol,ur),dr.config.globalProperties.$pinia=ur,cr.forEach(hr=>lr.push(hr)),cr=[]},use(dr){return this._a?lr.push(dr):cr.push(dr),this},_p:lr,_a:null,_e:ar,_s:new Map,state:or});return ur}const noop$2=()=>{};function addSubscription(ar,or,lr,cr=noop$2){ar.push(or);const ur=()=>{const dr=ar.indexOf(or);dr>-1&&(ar.splice(dr,1),cr())};return!lr&&getCurrentScope()&&onScopeDispose(ur),ur}function triggerSubscriptions(ar,...or){ar.slice().forEach(lr=>{lr(...or)})}const fallbackRunWithContext=ar=>ar(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(ar,or){ar instanceof Map&&or instanceof Map?or.forEach((lr,cr)=>ar.set(cr,lr)):ar instanceof Set&&or instanceof Set&&or.forEach(ar.add,ar);for(const lr in or){if(!or.hasOwnProperty(lr))continue;const cr=or[lr],ur=ar[lr];isPlainObject$1(ur)&&isPlainObject$1(cr)&&ar.hasOwnProperty(lr)&&!isRef(cr)&&!isReactive(cr)?ar[lr]=mergeReactiveObjects(ur,cr):ar[lr]=cr}return ar}const skipHydrateSymbol=Symbol();function shouldHydrate(ar){return!isPlainObject$1(ar)||!ar.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$2}=Object;function isComputed(ar){return!!(isRef(ar)&&ar.effect)}function createOptionsStore(ar,or,lr,cr){const{state:ur,actions:dr,getters:hr}=or,fr=lr.state.value[ar];let pr;function mr(){fr||(lr.state.value[ar]=ur?ur():{});const gr=toRefs(lr.state.value[ar]);return assign$2(gr,dr,Object.keys(hr||{}).reduce((yr,vr)=>(yr[vr]=markRaw(computed(()=>{setActivePinia(lr);const br=lr._s.get(ar);return hr[vr].call(br,br)})),yr),{}))}return pr=createSetupStore(ar,mr,or,lr,cr,!0),pr}function createSetupStore(ar,or,lr={},cr,ur,dr){let hr;const fr=assign$2({actions:{}},lr),pr={deep:!0};let mr,gr,yr=[],vr=[],br;const Sr=cr.state.value[ar];!dr&&!Sr&&(cr.state.value[ar]={}),ref({});let xr;function Er(Nr){let _r;mr=gr=!1,typeof Nr=="function"?(Nr(cr.state.value[ar]),_r={type:MutationType.patchFunction,storeId:ar,events:br}):(mergeReactiveObjects(cr.state.value[ar],Nr),_r={type:MutationType.patchObject,payload:Nr,storeId:ar,events:br});const Dr=xr=Symbol();nextTick().then(()=>{xr===Dr&&(mr=!0)}),gr=!0,triggerSubscriptions(yr,_r,cr.state.value[ar])}const wr=dr?function(){const{state:_r}=lr,Dr=_r?_r():{};this.$patch(Pr=>{assign$2(Pr,Dr)})}:noop$2;function Ar(){hr.stop(),yr=[],vr=[],cr._s.delete(ar)}const Tr=(Nr,_r="")=>{if(ACTION_MARKER in Nr)return Nr[ACTION_NAME]=_r,Nr;const Dr=function(){setActivePinia(cr);const Pr=Array.from(arguments),Ir=[],$r=[];function Zr(zr){Ir.push(zr)}function rs(zr){$r.push(zr)}triggerSubscriptions(vr,{args:Pr,name:Dr[ACTION_NAME],store:kr,after:Zr,onError:rs});let qr;try{qr=Nr.apply(this&&this.$id===ar?this:kr,Pr)}catch(zr){throw triggerSubscriptions($r,zr),zr}return qr instanceof Promise?qr.then(zr=>(triggerSubscriptions(Ir,zr),zr)).catch(zr=>(triggerSubscriptions($r,zr),Promise.reject(zr))):(triggerSubscriptions(Ir,qr),qr)};return Dr[ACTION_MARKER]=!0,Dr[ACTION_NAME]=_r,Dr},Cr={_p:cr,$id:ar,$onAction:addSubscription.bind(null,vr),$patch:Er,$reset:wr,$subscribe(Nr,_r={}){const Dr=addSubscription(yr,Nr,_r.detached,()=>Pr()),Pr=hr.run(()=>watch(()=>cr.state.value[ar],Ir=>{(_r.flush==="sync"?gr:mr)&&Nr({storeId:ar,type:MutationType.direct,events:br},Ir)},assign$2({},pr,_r)));return Dr},$dispose:Ar},kr=reactive(Cr);cr._s.set(ar,kr);const Rr=(cr._a&&cr._a.runWithContext||fallbackRunWithContext)(()=>cr._e.run(()=>(hr=effectScope()).run(()=>or({action:Tr}))));for(const Nr in Rr){const _r=Rr[Nr];if(isRef(_r)&&!isComputed(_r)||isReactive(_r))dr||(Sr&&shouldHydrate(_r)&&(isRef(_r)?_r.value=Sr[Nr]:mergeReactiveObjects(_r,Sr[Nr])),cr.state.value[ar][Nr]=_r);else if(typeof _r=="function"){const Dr=Tr(_r,Nr);Rr[Nr]=Dr,fr.actions[Nr]=_r}}return assign$2(kr,Rr),assign$2(toRaw(kr),Rr),Object.defineProperty(kr,"$state",{get:()=>cr.state.value[ar],set:Nr=>{Er(_r=>{assign$2(_r,Nr)})}}),cr._p.forEach(Nr=>{assign$2(kr,hr.run(()=>Nr({store:kr,app:cr._a,pinia:cr,options:fr})))}),Sr&&dr&&lr.hydrate&&lr.hydrate(kr.$state,Sr),mr=!0,gr=!0,kr}/*! #__NO_SIDE_EFFECTS__ */function defineStore(ar,or,lr){let cr,ur;const dr=typeof or=="function";typeof ar=="string"?(cr=ar,ur=dr?lr:or):(ur=ar,cr=ar.id);function hr(fr,pr){const mr=hasInjectionContext();return fr=fr||(mr?inject(piniaSymbol,null):null),fr&&setActivePinia(fr),fr=activePinia,fr._s.has(cr)||(dr?createSetupStore(cr,or,ur,fr):createOptionsStore(cr,ur,fr)),fr._s.get(cr)}return hr.$id=cr,hr}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(ar){return typeof ar=="object"||"displayName"in ar||"props"in ar||"__vccOpts"in ar}function isESModule(ar){return ar.__esModule||ar[Symbol.toStringTag]==="Module"||ar.default&&isRouteComponent(ar.default)}const assign$1=Object.assign;function applyToParams(ar,or){const lr={};for(const cr in or){const ur=or[cr];lr[cr]=isArray(ur)?ur.map(ar):ar(ur)}return lr}const noop$1=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(ar){return encodeURI(""+ar).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(ar){return commonEncode(ar).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(ar){return commonEncode(ar).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(ar){return encodeQueryValue(ar).replace(EQUAL_RE,"%3D")}function encodePath(ar){return commonEncode(ar).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(ar){return ar==null?"":encodePath(ar).replace(SLASH_RE,"%2F")}function decode(ar){try{return decodeURIComponent(""+ar)}catch{}return""+ar}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=ar=>ar.replace(TRAILING_SLASH_RE,"");function parseURL(ar,or,lr="/"){let cr,ur={},dr="",hr="";const fr=or.indexOf("#");let pr=or.indexOf("?");return fr<pr&&fr>=0&&(pr=-1),pr>-1&&(cr=or.slice(0,pr),dr=or.slice(pr+1,fr>-1?fr:or.length),ur=ar(dr)),fr>-1&&(cr=cr||or.slice(0,fr),hr=or.slice(fr,or.length)),cr=resolveRelativePath(cr??or,lr),{fullPath:cr+(dr&&"?")+dr+hr,path:cr,query:ur,hash:decode(hr)}}function stringifyURL(ar,or){const lr=or.query?ar(or.query):"";return or.path+(lr&&"?")+lr+(or.hash||"")}function stripBase(ar,or){return!or||!ar.toLowerCase().startsWith(or.toLowerCase())?ar:ar.slice(or.length)||"/"}function isSameRouteLocation(ar,or,lr){const cr=or.matched.length-1,ur=lr.matched.length-1;return cr>-1&&cr===ur&&isSameRouteRecord(or.matched[cr],lr.matched[ur])&&isSameRouteLocationParams(or.params,lr.params)&&ar(or.query)===ar(lr.query)&&or.hash===lr.hash}function isSameRouteRecord(ar,or){return(ar.aliasOf||ar)===(or.aliasOf||or)}function isSameRouteLocationParams(ar,or){if(Object.keys(ar).length!==Object.keys(or).length)return!1;for(const lr in ar)if(!isSameRouteLocationParamsValue(ar[lr],or[lr]))return!1;return!0}function isSameRouteLocationParamsValue(ar,or){return isArray(ar)?isEquivalentArray(ar,or):isArray(or)?isEquivalentArray(or,ar):ar===or}function isEquivalentArray(ar,or){return isArray(or)?ar.length===or.length&&ar.every((lr,cr)=>lr===or[cr]):ar.length===1&&ar[0]===or}function resolveRelativePath(ar,or){if(ar.startsWith("/"))return ar;if(!ar)return or;const lr=or.split("/"),cr=ar.split("/"),ur=cr[cr.length-1];(ur===".."||ur===".")&&cr.push("");let dr=lr.length-1,hr,fr;for(hr=0;hr<cr.length;hr++)if(fr=cr[hr],fr!==".")if(fr==="..")dr>1&&dr--;else break;return lr.slice(0,dr).join("/")+"/"+cr.slice(hr).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(ar){ar.pop="pop",ar.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(ar){ar.back="back",ar.forward="forward",ar.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(ar){if(!ar)if(isBrowser){const or=document.querySelector("base");ar=or&&or.getAttribute("href")||"/",ar=ar.replace(/^\w+:\/\/[^\/]+/,"")}else ar="/";return ar[0]!=="/"&&ar[0]!=="#"&&(ar="/"+ar),removeTrailingSlash(ar)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(ar,or){return ar.replace(BEFORE_HASH_RE,"#")+or}function getElementPosition(ar,or){const lr=document.documentElement.getBoundingClientRect(),cr=ar.getBoundingClientRect();return{behavior:or.behavior,left:cr.left-lr.left-(or.left||0),top:cr.top-lr.top-(or.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(ar){let or;if("el"in ar){const lr=ar.el,cr=typeof lr=="string"&&lr.startsWith("#"),ur=typeof lr=="string"?cr?document.getElementById(lr.slice(1)):document.querySelector(lr):lr;if(!ur)return;or=getElementPosition(ur,ar)}else or=ar;"scrollBehavior"in document.documentElement.style?window.scrollTo(or):window.scrollTo(or.left!=null?or.left:window.scrollX,or.top!=null?or.top:window.scrollY)}function getScrollKey(ar,or){return(history.state?history.state.position-or:-1)+ar}const scrollPositions=new Map;function saveScrollPosition(ar,or){scrollPositions.set(ar,or)}function getSavedScrollPosition(ar){const or=scrollPositions.get(ar);return scrollPositions.delete(ar),or}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(ar,or){const{pathname:lr,search:cr,hash:ur}=or,dr=ar.indexOf("#");if(dr>-1){let fr=ur.includes(ar.slice(dr))?ar.slice(dr).length:1,pr=ur.slice(fr);return pr[0]!=="/"&&(pr="/"+pr),stripBase(pr,"")}return stripBase(lr,ar)+cr+ur}function useHistoryListeners(ar,or,lr,cr){let ur=[],dr=[],hr=null;const fr=({state:vr})=>{const br=createCurrentLocation(ar,location),Sr=lr.value,xr=or.value;let Er=0;if(vr){if(lr.value=br,or.value=vr,hr&&hr===Sr){hr=null;return}Er=xr?vr.position-xr.position:0}else cr(br);ur.forEach(wr=>{wr(lr.value,Sr,{delta:Er,type:NavigationType.pop,direction:Er?Er>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function pr(){hr=lr.value}function mr(vr){ur.push(vr);const br=()=>{const Sr=ur.indexOf(vr);Sr>-1&&ur.splice(Sr,1)};return dr.push(br),br}function gr(){const{history:vr}=window;vr.state&&vr.replaceState(assign$1({},vr.state,{scroll:computeScrollPosition()}),"")}function yr(){for(const vr of dr)vr();dr=[],window.removeEventListener("popstate",fr),window.removeEventListener("beforeunload",gr)}return window.addEventListener("popstate",fr),window.addEventListener("beforeunload",gr,{passive:!0}),{pauseListeners:pr,listen:mr,destroy:yr}}function buildState(ar,or,lr,cr=!1,ur=!1){return{back:ar,current:or,forward:lr,replaced:cr,position:window.history.length,scroll:ur?computeScrollPosition():null}}function useHistoryStateNavigation(ar){const{history:or,location:lr}=window,cr={value:createCurrentLocation(ar,lr)},ur={value:or.state};ur.value||dr(cr.value,{back:null,current:cr.value,forward:null,position:or.length-1,replaced:!0,scroll:null},!0);function dr(pr,mr,gr){const yr=ar.indexOf("#"),vr=yr>-1?(lr.host&&document.querySelector("base")?ar:ar.slice(yr))+pr:createBaseLocation()+ar+pr;try{or[gr?"replaceState":"pushState"](mr,"",vr),ur.value=mr}catch(br){console.error(br),lr[gr?"replace":"assign"](vr)}}function hr(pr,mr){const gr=assign$1({},or.state,buildState(ur.value.back,pr,ur.value.forward,!0),mr,{position:ur.value.position});dr(pr,gr,!0),cr.value=pr}function fr(pr,mr){const gr=assign$1({},ur.value,or.state,{forward:pr,scroll:computeScrollPosition()});dr(gr.current,gr,!0);const yr=assign$1({},buildState(cr.value,pr,null),{position:gr.position+1},mr);dr(pr,yr,!1),cr.value=pr}return{location:cr,state:ur,push:fr,replace:hr}}function createWebHistory(ar){ar=normalizeBase(ar);const or=useHistoryStateNavigation(ar),lr=useHistoryListeners(ar,or.state,or.location,or.replace);function cr(dr,hr=!0){hr||lr.pauseListeners(),history.go(dr)}const ur=assign$1({location:"",base:ar,go:cr,createHref:createHref.bind(null,ar)},or,lr);return Object.defineProperty(ur,"location",{enumerable:!0,get:()=>or.location.value}),Object.defineProperty(ur,"state",{enumerable:!0,get:()=>or.state.value}),ur}function isRouteLocation(ar){return typeof ar=="string"||ar&&typeof ar=="object"}function isRouteName(ar){return typeof ar=="string"||typeof ar=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(ar){ar[ar.aborted=4]="aborted",ar[ar.cancelled=8]="cancelled",ar[ar.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(ar,or){return assign$1(new Error,{type:ar,[NavigationFailureSymbol]:!0},or)}function isNavigationFailure(ar,or){return ar instanceof Error&&NavigationFailureSymbol in ar&&(or==null||!!(ar.type&or))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(ar,or){const lr=assign$1({},BASE_PATH_PARSER_OPTIONS,or),cr=[];let ur=lr.start?"^":"";const dr=[];for(const mr of ar){const gr=mr.length?[]:[90];lr.strict&&!mr.length&&(ur+="/");for(let yr=0;yr<mr.length;yr++){const vr=mr[yr];let br=40+(lr.sensitive?.25:0);if(vr.type===0)yr||(ur+="/"),ur+=vr.value.replace(REGEX_CHARS_RE,"\\$&"),br+=40;else if(vr.type===1){const{value:Sr,repeatable:xr,optional:Er,regexp:wr}=vr;dr.push({name:Sr,repeatable:xr,optional:Er});const Ar=wr||BASE_PARAM_PATTERN;if(Ar!==BASE_PARAM_PATTERN){br+=10;try{new RegExp(`(${Ar})`)}catch(Cr){throw new Error(`Invalid custom RegExp for param "${Sr}" (${Ar}): `+Cr.message)}}let Tr=xr?`((?:${Ar})(?:/(?:${Ar}))*)`:`(${Ar})`;yr||(Tr=Er&&mr.length<2?`(?:/${Tr})`:"/"+Tr),Er&&(Tr+="?"),ur+=Tr,br+=20,Er&&(br+=-8),xr&&(br+=-20),Ar===".*"&&(br+=-50)}gr.push(br)}cr.push(gr)}if(lr.strict&&lr.end){const mr=cr.length-1;cr[mr][cr[mr].length-1]+=.7000000000000001}lr.strict||(ur+="/?"),lr.end?ur+="$":lr.strict&&!ur.endsWith("/")&&(ur+="(?:/|$)");const hr=new RegExp(ur,lr.sensitive?"":"i");function fr(mr){const gr=mr.match(hr),yr={};if(!gr)return null;for(let vr=1;vr<gr.length;vr++){const br=gr[vr]||"",Sr=dr[vr-1];yr[Sr.name]=br&&Sr.repeatable?br.split("/"):br}return yr}function pr(mr){let gr="",yr=!1;for(const vr of ar){(!yr||!gr.endsWith("/"))&&(gr+="/"),yr=!1;for(const br of vr)if(br.type===0)gr+=br.value;else if(br.type===1){const{value:Sr,repeatable:xr,optional:Er}=br,wr=Sr in mr?mr[Sr]:"";if(isArray(wr)&&!xr)throw new Error(`Provided param "${Sr}" is an array but it is not repeatable (* or + modifiers)`);const Ar=isArray(wr)?wr.join("/"):wr;if(!Ar)if(Er)vr.length<2&&(gr.endsWith("/")?gr=gr.slice(0,-1):yr=!0);else throw new Error(`Missing required param "${Sr}"`);gr+=Ar}}return gr||"/"}return{re:hr,score:cr,keys:dr,parse:fr,stringify:pr}}function compareScoreArray(ar,or){let lr=0;for(;lr<ar.length&&lr<or.length;){const cr=or[lr]-ar[lr];if(cr)return cr;lr++}return ar.length<or.length?ar.length===1&&ar[0]===80?-1:1:ar.length>or.length?or.length===1&&or[0]===80?1:-1:0}function comparePathParserScore(ar,or){let lr=0;const cr=ar.score,ur=or.score;for(;lr<cr.length&&lr<ur.length;){const dr=compareScoreArray(cr[lr],ur[lr]);if(dr)return dr;lr++}if(Math.abs(ur.length-cr.length)===1){if(isLastScoreNegative(cr))return 1;if(isLastScoreNegative(ur))return-1}return ur.length-cr.length}function isLastScoreNegative(ar){const or=ar[ar.length-1];return ar.length>0&&or[or.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(ar){if(!ar)return[[]];if(ar==="/")return[[ROOT_TOKEN]];if(!ar.startsWith("/"))throw new Error(`Invalid path "${ar}"`);function or(br){throw new Error(`ERR (${lr})/"${mr}": ${br}`)}let lr=0,cr=lr;const ur=[];let dr;function hr(){dr&&ur.push(dr),dr=[]}let fr=0,pr,mr="",gr="";function yr(){mr&&(lr===0?dr.push({type:0,value:mr}):lr===1||lr===2||lr===3?(dr.length>1&&(pr==="*"||pr==="+")&&or(`A repeatable param (${mr}) must be alone in its segment. eg: '/:ids+.`),dr.push({type:1,value:mr,regexp:gr,repeatable:pr==="*"||pr==="+",optional:pr==="*"||pr==="?"})):or("Invalid state to consume buffer"),mr="")}function vr(){mr+=pr}for(;fr<ar.length;){if(pr=ar[fr++],pr==="\\"&&lr!==2){cr=lr,lr=4;continue}switch(lr){case 0:pr==="/"?(mr&&yr(),hr()):pr===":"?(yr(),lr=1):vr();break;case 4:vr(),lr=cr;break;case 1:pr==="("?lr=2:VALID_PARAM_RE.test(pr)?vr():(yr(),lr=0,pr!=="*"&&pr!=="?"&&pr!=="+"&&fr--);break;case 2:pr===")"?gr[gr.length-1]=="\\"?gr=gr.slice(0,-1)+pr:lr=3:gr+=pr;break;case 3:yr(),lr=0,pr!=="*"&&pr!=="?"&&pr!=="+"&&fr--,gr="";break;default:or("Unknown state");break}}return lr===2&&or(`Unfinished custom RegExp for param "${mr}"`),yr(),hr(),ur}function createRouteRecordMatcher(ar,or,lr){const cr=tokensToParser(tokenizePath(ar.path),lr),ur=assign$1(cr,{record:ar,parent:or,children:[],alias:[]});return or&&!ur.record.aliasOf==!or.record.aliasOf&&or.children.push(ur),ur}function createRouterMatcher(ar,or){const lr=[],cr=new Map;or=mergeOptions({strict:!1,end:!0,sensitive:!1},or);function ur(yr){return cr.get(yr)}function dr(yr,vr,br){const Sr=!br,xr=normalizeRouteRecord(yr);xr.aliasOf=br&&br.record;const Er=mergeOptions(or,yr),wr=[xr];if("alias"in yr){const Cr=typeof yr.alias=="string"?[yr.alias]:yr.alias;for(const kr of Cr)wr.push(normalizeRouteRecord(assign$1({},xr,{components:br?br.record.components:xr.components,path:kr,aliasOf:br?br.record:xr})))}let Ar,Tr;for(const Cr of wr){const{path:kr}=Cr;if(vr&&kr[0]!=="/"){const Mr=vr.record.path,Rr=Mr[Mr.length-1]==="/"?"":"/";Cr.path=vr.record.path+(kr&&Rr+kr)}if(Ar=createRouteRecordMatcher(Cr,vr,Er),br?br.alias.push(Ar):(Tr=Tr||Ar,Tr!==Ar&&Tr.alias.push(Ar),Sr&&yr.name&&!isAliasRecord(Ar)&&hr(yr.name)),isMatchable(Ar)&&pr(Ar),xr.children){const Mr=xr.children;for(let Rr=0;Rr<Mr.length;Rr++)dr(Mr[Rr],Ar,br&&br.children[Rr])}br=br||Ar}return Tr?()=>{hr(Tr)}:noop$1}function hr(yr){if(isRouteName(yr)){const vr=cr.get(yr);vr&&(cr.delete(yr),lr.splice(lr.indexOf(vr),1),vr.children.forEach(hr),vr.alias.forEach(hr))}else{const vr=lr.indexOf(yr);vr>-1&&(lr.splice(vr,1),yr.record.name&&cr.delete(yr.record.name),yr.children.forEach(hr),yr.alias.forEach(hr))}}function fr(){return lr}function pr(yr){const vr=findInsertionIndex(yr,lr);lr.splice(vr,0,yr),yr.record.name&&!isAliasRecord(yr)&&cr.set(yr.record.name,yr)}function mr(yr,vr){let br,Sr={},xr,Er;if("name"in yr&&yr.name){if(br=cr.get(yr.name),!br)throw createRouterError(1,{location:yr});Er=br.record.name,Sr=assign$1(paramsFromLocation(vr.params,br.keys.filter(Tr=>!Tr.optional).concat(br.parent?br.parent.keys.filter(Tr=>Tr.optional):[]).map(Tr=>Tr.name)),yr.params&&paramsFromLocation(yr.params,br.keys.map(Tr=>Tr.name))),xr=br.stringify(Sr)}else if(yr.path!=null)xr=yr.path,br=lr.find(Tr=>Tr.re.test(xr)),br&&(Sr=br.parse(xr),Er=br.record.name);else{if(br=vr.name?cr.get(vr.name):lr.find(Tr=>Tr.re.test(vr.path)),!br)throw createRouterError(1,{location:yr,currentLocation:vr});Er=br.record.name,Sr=assign$1({},vr.params,yr.params),xr=br.stringify(Sr)}const wr=[];let Ar=br;for(;Ar;)wr.unshift(Ar.record),Ar=Ar.parent;return{name:Er,path:xr,params:Sr,matched:wr,meta:mergeMetaFields(wr)}}ar.forEach(yr=>dr(yr));function gr(){lr.length=0,cr.clear()}return{addRoute:dr,resolve:mr,removeRoute:hr,clearRoutes:gr,getRoutes:fr,getRecordMatcher:ur}}function paramsFromLocation(ar,or){const lr={};for(const cr of or)cr in ar&&(lr[cr]=ar[cr]);return lr}function normalizeRouteRecord(ar){const or={path:ar.path,redirect:ar.redirect,name:ar.name,meta:ar.meta||{},aliasOf:ar.aliasOf,beforeEnter:ar.beforeEnter,props:normalizeRecordProps(ar),children:ar.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in ar?ar.components||null:ar.component&&{default:ar.component}};return Object.defineProperty(or,"mods",{value:{}}),or}function normalizeRecordProps(ar){const or={},lr=ar.props||!1;if("component"in ar)or.default=lr;else for(const cr in ar.components)or[cr]=typeof lr=="object"?lr[cr]:lr;return or}function isAliasRecord(ar){for(;ar;){if(ar.record.aliasOf)return!0;ar=ar.parent}return!1}function mergeMetaFields(ar){return ar.reduce((or,lr)=>assign$1(or,lr.meta),{})}function mergeOptions(ar,or){const lr={};for(const cr in ar)lr[cr]=cr in or?or[cr]:ar[cr];return lr}function findInsertionIndex(ar,or){let lr=0,cr=or.length;for(;lr!==cr;){const dr=lr+cr>>1;comparePathParserScore(ar,or[dr])<0?cr=dr:lr=dr+1}const ur=getInsertionAncestor(ar);return ur&&(cr=or.lastIndexOf(ur,cr-1)),cr}function getInsertionAncestor(ar){let or=ar;for(;or=or.parent;)if(isMatchable(or)&&comparePathParserScore(ar,or)===0)return or}function isMatchable({record:ar}){return!!(ar.name||ar.components&&Object.keys(ar.components).length||ar.redirect)}function parseQuery(ar){const or={};if(ar===""||ar==="?")return or;const cr=(ar[0]==="?"?ar.slice(1):ar).split("&");for(let ur=0;ur<cr.length;++ur){const dr=cr[ur].replace(PLUS_RE," "),hr=dr.indexOf("="),fr=decode(hr<0?dr:dr.slice(0,hr)),pr=hr<0?null:decode(dr.slice(hr+1));if(fr in or){let mr=or[fr];isArray(mr)||(mr=or[fr]=[mr]),mr.push(pr)}else or[fr]=pr}return or}function stringifyQuery(ar){let or="";for(let lr in ar){const cr=ar[lr];if(lr=encodeQueryKey(lr),cr==null){cr!==void 0&&(or+=(or.length?"&":"")+lr);continue}(isArray(cr)?cr.map(dr=>dr&&encodeQueryValue(dr)):[cr&&encodeQueryValue(cr)]).forEach(dr=>{dr!==void 0&&(or+=(or.length?"&":"")+lr,dr!=null&&(or+="="+dr))})}return or}function normalizeQuery(ar){const or={};for(const lr in ar){const cr=ar[lr];cr!==void 0&&(or[lr]=isArray(cr)?cr.map(ur=>ur==null?null:""+ur):cr==null?cr:""+cr)}return or}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let ar=[];function or(cr){return ar.push(cr),()=>{const ur=ar.indexOf(cr);ur>-1&&ar.splice(ur,1)}}function lr(){ar=[]}return{add:or,list:()=>ar.slice(),reset:lr}}function guardToPromiseFn(ar,or,lr,cr,ur,dr=hr=>hr()){const hr=cr&&(cr.enterCallbacks[ur]=cr.enterCallbacks[ur]||[]);return()=>new Promise((fr,pr)=>{const mr=vr=>{vr===!1?pr(createRouterError(4,{from:lr,to:or})):vr instanceof Error?pr(vr):isRouteLocation(vr)?pr(createRouterError(2,{from:or,to:vr})):(hr&&cr.enterCallbacks[ur]===hr&&typeof vr=="function"&&hr.push(vr),fr())},gr=dr(()=>ar.call(cr&&cr.instances[ur],or,lr,mr));let yr=Promise.resolve(gr);ar.length<3&&(yr=yr.then(mr)),yr.catch(vr=>pr(vr))})}function extractComponentsGuards(ar,or,lr,cr,ur=dr=>dr()){const dr=[];for(const hr of ar)for(const fr in hr.components){let pr=hr.components[fr];if(!(or!=="beforeRouteEnter"&&!hr.instances[fr]))if(isRouteComponent(pr)){const gr=(pr.__vccOpts||pr)[or];gr&&dr.push(guardToPromiseFn(gr,lr,cr,hr,fr,ur))}else{let mr=pr();dr.push(()=>mr.then(gr=>{if(!gr)throw new Error(`Couldn't resolve component "${fr}" at "${hr.path}"`);const yr=isESModule(gr)?gr.default:gr;hr.mods[fr]=gr,hr.components[fr]=yr;const br=(yr.__vccOpts||yr)[or];return br&&guardToPromiseFn(br,lr,cr,hr,fr,ur)()}))}}return dr}function useLink(ar){const or=inject(routerKey),lr=inject(routeLocationKey),cr=computed(()=>{const pr=unref(ar.to);return or.resolve(pr)}),ur=computed(()=>{const{matched:pr}=cr.value,{length:mr}=pr,gr=pr[mr-1],yr=lr.matched;if(!gr||!yr.length)return-1;const vr=yr.findIndex(isSameRouteRecord.bind(null,gr));if(vr>-1)return vr;const br=getOriginalPath(pr[mr-2]);return mr>1&&getOriginalPath(gr)===br&&yr[yr.length-1].path!==br?yr.findIndex(isSameRouteRecord.bind(null,pr[mr-2])):vr}),dr=computed(()=>ur.value>-1&&includesParams(lr.params,cr.value.params)),hr=computed(()=>ur.value>-1&&ur.value===lr.matched.length-1&&isSameRouteLocationParams(lr.params,cr.value.params));function fr(pr={}){if(guardEvent(pr)){const mr=or[unref(ar.replace)?"replace":"push"](unref(ar.to)).catch(noop$1);return ar.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>mr),mr}return Promise.resolve()}return{route:cr,href:computed(()=>cr.value.href),isActive:dr,isExactActive:hr,navigate:fr}}function preferSingleVNode(ar){return ar.length===1?ar[0]:ar}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink,setup(ar,{slots:or}){const lr=reactive(useLink(ar)),{options:cr}=inject(routerKey),ur=computed(()=>({[getLinkClass(ar.activeClass,cr.linkActiveClass,"router-link-active")]:lr.isActive,[getLinkClass(ar.exactActiveClass,cr.linkExactActiveClass,"router-link-exact-active")]:lr.isExactActive}));return()=>{const dr=or.default&&preferSingleVNode(or.default(lr));return ar.custom?dr:h$1("a",{"aria-current":lr.isExactActive?ar.ariaCurrentValue:null,href:lr.href,onClick:lr.navigate,class:ur.value},dr)}}}),RouterLink=RouterLinkImpl;function guardEvent(ar){if(!(ar.metaKey||ar.altKey||ar.ctrlKey||ar.shiftKey)&&!ar.defaultPrevented&&!(ar.button!==void 0&&ar.button!==0)){if(ar.currentTarget&&ar.currentTarget.getAttribute){const or=ar.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(or))return}return ar.preventDefault&&ar.preventDefault(),!0}}function includesParams(ar,or){for(const lr in or){const cr=or[lr],ur=ar[lr];if(typeof cr=="string"){if(cr!==ur)return!1}else if(!isArray(ur)||ur.length!==cr.length||cr.some((dr,hr)=>dr!==ur[hr]))return!1}return!0}function getOriginalPath(ar){return ar?ar.aliasOf?ar.aliasOf.path:ar.path:""}const getLinkClass=(ar,or,lr)=>ar??or??lr,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(ar,{attrs:or,slots:lr}){const cr=inject(routerViewLocationKey),ur=computed(()=>ar.route||cr.value),dr=inject(viewDepthKey,0),hr=computed(()=>{let mr=unref(dr);const{matched:gr}=ur.value;let yr;for(;(yr=gr[mr])&&!yr.components;)mr++;return mr}),fr=computed(()=>ur.value.matched[hr.value]);provide(viewDepthKey,computed(()=>hr.value+1)),provide(matchedRouteKey,fr),provide(routerViewLocationKey,ur);const pr=ref();return watch(()=>[pr.value,fr.value,ar.name],([mr,gr,yr],[vr,br,Sr])=>{gr&&(gr.instances[yr]=mr,br&&br!==gr&&mr&&mr===vr&&(gr.leaveGuards.size||(gr.leaveGuards=br.leaveGuards),gr.updateGuards.size||(gr.updateGuards=br.updateGuards))),mr&&gr&&(!br||!isSameRouteRecord(gr,br)||!vr)&&(gr.enterCallbacks[yr]||[]).forEach(xr=>xr(mr))},{flush:"post"}),()=>{const mr=ur.value,gr=ar.name,yr=fr.value,vr=yr&&yr.components[gr];if(!vr)return normalizeSlot(lr.default,{Component:vr,route:mr});const br=yr.props[gr],Sr=br?br===!0?mr.params:typeof br=="function"?br(mr):br:null,Er=h$1(vr,assign$1({},Sr,or,{onVnodeUnmounted:wr=>{wr.component.isUnmounted&&(yr.instances[gr]=null)},ref:pr}));return normalizeSlot(lr.default,{Component:Er,route:mr})||Er}}});function normalizeSlot(ar,or){if(!ar)return null;const lr=ar(or);return lr.length===1?lr[0]:lr}const RouterView=RouterViewImpl;function createRouter(ar){const or=createRouterMatcher(ar.routes,ar),lr=ar.parseQuery||parseQuery,cr=ar.stringifyQuery||stringifyQuery,ur=ar.history,dr=useCallbacks(),hr=useCallbacks(),fr=useCallbacks(),pr=shallowRef(START_LOCATION_NORMALIZED);let mr=START_LOCATION_NORMALIZED;isBrowser&&ar.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const gr=applyToParams.bind(null,Vr=>""+Vr),yr=applyToParams.bind(null,encodeParam),vr=applyToParams.bind(null,decode);function br(Vr,Gr){let is,ps;return isRouteName(Vr)?(is=or.getRecordMatcher(Vr),ps=Gr):ps=Vr,or.addRoute(ps,is)}function Sr(Vr){const Gr=or.getRecordMatcher(Vr);Gr&&or.removeRoute(Gr)}function xr(){return or.getRoutes().map(Vr=>Vr.record)}function Er(Vr){return!!or.getRecordMatcher(Vr)}function wr(Vr,Gr){if(Gr=assign$1({},Gr||pr.value),typeof Vr=="string"){const Wr=parseURL(lr,Vr,Gr.path),ds=or.resolve({path:Wr.path},Gr),ls=ur.createHref(Wr.fullPath);return assign$1(Wr,ds,{params:vr(ds.params),hash:decode(Wr.hash),redirectedFrom:void 0,href:ls})}let is;if(Vr.path!=null)is=assign$1({},Vr,{path:parseURL(lr,Vr.path,Gr.path).path});else{const Wr=assign$1({},Vr.params);for(const ds in Wr)Wr[ds]==null&&delete Wr[ds];is=assign$1({},Vr,{params:yr(Wr)}),Gr.params=yr(Gr.params)}const ps=or.resolve(is,Gr),As=Vr.hash||"";ps.params=gr(vr(ps.params));const Cs=stringifyURL(cr,assign$1({},Vr,{hash:encodeHash(As),path:ps.path})),jr=ur.createHref(Cs);return assign$1({fullPath:Cs,hash:As,query:cr===stringifyQuery?normalizeQuery(Vr.query):Vr.query||{}},ps,{redirectedFrom:void 0,href:jr})}function Ar(Vr){return typeof Vr=="string"?parseURL(lr,Vr,pr.value.path):assign$1({},Vr)}function Tr(Vr,Gr){if(mr!==Vr)return createRouterError(8,{from:Gr,to:Vr})}function Cr(Vr){return Rr(Vr)}function kr(Vr){return Cr(assign$1(Ar(Vr),{replace:!0}))}function Mr(Vr){const Gr=Vr.matched[Vr.matched.length-1];if(Gr&&Gr.redirect){const{redirect:is}=Gr;let ps=typeof is=="function"?is(Vr):is;return typeof ps=="string"&&(ps=ps.includes("?")||ps.includes("#")?ps=Ar(ps):{path:ps},ps.params={}),assign$1({query:Vr.query,hash:Vr.hash,params:ps.path!=null?{}:Vr.params},ps)}}function Rr(Vr,Gr){const is=mr=wr(Vr),ps=pr.value,As=Vr.state,Cs=Vr.force,jr=Vr.replace===!0,Wr=Mr(is);if(Wr)return Rr(assign$1(Ar(Wr),{state:typeof Wr=="object"?assign$1({},As,Wr.state):As,force:Cs,replace:jr}),Gr||is);const ds=is;ds.redirectedFrom=Gr;let ls;return!Cs&&isSameRouteLocation(cr,ps,is)&&(ls=createRouterError(16,{to:ds,from:ps}),ys(ps,ps,!0,!1)),(ls?Promise.resolve(ls):Dr(ds,ps)).catch(ss=>isNavigationFailure(ss)?isNavigationFailure(ss,2)?ss:Kr(ss):Jr(ss,ds,ps)).then(ss=>{if(ss){if(isNavigationFailure(ss,2))return Rr(assign$1({replace:jr},Ar(ss.to),{state:typeof ss.to=="object"?assign$1({},As,ss.to.state):As,force:Cs}),Gr||ds)}else ss=Ir(ds,ps,!0,jr,As);return Pr(ds,ps,ss),ss})}function Nr(Vr,Gr){const is=Tr(Vr,Gr);return is?Promise.reject(is):Promise.resolve()}function _r(Vr){const Gr=Br.values().next().value;return Gr&&typeof Gr.runWithContext=="function"?Gr.runWithContext(Vr):Vr()}function Dr(Vr,Gr){let is;const[ps,As,Cs]=extractChangingRecords(Vr,Gr);is=extractComponentsGuards(ps.reverse(),"beforeRouteLeave",Vr,Gr);for(const Wr of ps)Wr.leaveGuards.forEach(ds=>{is.push(guardToPromiseFn(ds,Vr,Gr))});const jr=Nr.bind(null,Vr,Gr);return is.push(jr),Qr(is).then(()=>{is=[];for(const Wr of dr.list())is.push(guardToPromiseFn(Wr,Vr,Gr));return is.push(jr),Qr(is)}).then(()=>{is=extractComponentsGuards(As,"beforeRouteUpdate",Vr,Gr);for(const Wr of As)Wr.updateGuards.forEach(ds=>{is.push(guardToPromiseFn(ds,Vr,Gr))});return is.push(jr),Qr(is)}).then(()=>{is=[];for(const Wr of Cs)if(Wr.beforeEnter)if(isArray(Wr.beforeEnter))for(const ds of Wr.beforeEnter)is.push(guardToPromiseFn(ds,Vr,Gr));else is.push(guardToPromiseFn(Wr.beforeEnter,Vr,Gr));return is.push(jr),Qr(is)}).then(()=>(Vr.matched.forEach(Wr=>Wr.enterCallbacks={}),is=extractComponentsGuards(Cs,"beforeRouteEnter",Vr,Gr,_r),is.push(jr),Qr(is))).then(()=>{is=[];for(const Wr of hr.list())is.push(guardToPromiseFn(Wr,Vr,Gr));return is.push(jr),Qr(is)}).catch(Wr=>isNavigationFailure(Wr,8)?Wr:Promise.reject(Wr))}function Pr(Vr,Gr,is){fr.list().forEach(ps=>_r(()=>ps(Vr,Gr,is)))}function Ir(Vr,Gr,is,ps,As){const Cs=Tr(Vr,Gr);if(Cs)return Cs;const jr=Gr===START_LOCATION_NORMALIZED,Wr=isBrowser?history.state:{};is&&(ps||jr?ur.replace(Vr.fullPath,assign$1({scroll:jr&&Wr&&Wr.scroll},As)):ur.push(Vr.fullPath,As)),pr.value=Vr,ys(Vr,Gr,is,jr),Kr()}let $r;function Zr(){$r||($r=ur.listen((Vr,Gr,is)=>{if(!Ur.listening)return;const ps=wr(Vr),As=Mr(ps);if(As){Rr(assign$1(As,{replace:!0,force:!0}),ps).catch(noop$1);return}mr=ps;const Cs=pr.value;isBrowser&&saveScrollPosition(getScrollKey(Cs.fullPath,is.delta),computeScrollPosition()),Dr(ps,Cs).catch(jr=>isNavigationFailure(jr,12)?jr:isNavigationFailure(jr,2)?(Rr(assign$1(Ar(jr.to),{force:!0}),ps).then(Wr=>{isNavigationFailure(Wr,20)&&!is.delta&&is.type===NavigationType.pop&&ur.go(-1,!1)}).catch(noop$1),Promise.reject()):(is.delta&&ur.go(-is.delta,!1),Jr(jr,ps,Cs))).then(jr=>{jr=jr||Ir(ps,Cs,!1),jr&&(is.delta&&!isNavigationFailure(jr,8)?ur.go(-is.delta,!1):is.type===NavigationType.pop&&isNavigationFailure(jr,20)&&ur.go(-1,!1)),Pr(ps,Cs,jr)}).catch(noop$1)}))}let rs=useCallbacks(),qr=useCallbacks(),zr;function Jr(Vr,Gr,is){Kr(Vr);const ps=qr.list();return ps.length?ps.forEach(As=>As(Vr,Gr,is)):console.error(Vr),Promise.reject(Vr)}function Hr(){return zr&&pr.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Vr,Gr)=>{rs.add([Vr,Gr])})}function Kr(Vr){return zr||(zr=!Vr,Zr(),rs.list().forEach(([Gr,is])=>Vr?is(Vr):Gr()),rs.reset()),Vr}function ys(Vr,Gr,is,ps){const{scrollBehavior:As}=ar;if(!isBrowser||!As)return Promise.resolve();const Cs=!is&&getSavedScrollPosition(getScrollKey(Vr.fullPath,0))||(ps||!is)&&history.state&&history.state.scroll||null;return nextTick().then(()=>As(Vr,Gr,Cs)).then(jr=>jr&&scrollToPosition(jr)).catch(jr=>Jr(jr,Vr,Gr))}const Yr=Vr=>ur.go(Vr);let Fr;const Br=new Set,Ur={currentRoute:pr,listening:!0,addRoute:br,removeRoute:Sr,clearRoutes:or.clearRoutes,hasRoute:Er,getRoutes:xr,resolve:wr,options:ar,push:Cr,replace:kr,go:Yr,back:()=>Yr(-1),forward:()=>Yr(1),beforeEach:dr.add,beforeResolve:hr.add,afterEach:fr.add,onError:qr.add,isReady:Hr,install(Vr){const Gr=this;Vr.component("RouterLink",RouterLink),Vr.component("RouterView",RouterView),Vr.config.globalProperties.$router=Gr,Object.defineProperty(Vr.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(pr)}),isBrowser&&!Fr&&pr.value===START_LOCATION_NORMALIZED&&(Fr=!0,Cr(ur.location).catch(As=>{}));const is={};for(const As in START_LOCATION_NORMALIZED)Object.defineProperty(is,As,{get:()=>pr.value[As],enumerable:!0});Vr.provide(routerKey,Gr),Vr.provide(routeLocationKey,shallowReactive(is)),Vr.provide(routerViewLocationKey,pr);const ps=Vr.unmount;Br.add(Vr),Vr.unmount=function(){Br.delete(Vr),Br.size<1&&(mr=START_LOCATION_NORMALIZED,$r&&$r(),$r=null,pr.value=START_LOCATION_NORMALIZED,Fr=!1,zr=!1),ps()}}};function Qr(Vr){return Vr.reduce((Gr,is)=>Gr.then(()=>_r(is)),Promise.resolve())}return Ur}function extractChangingRecords(ar,or){const lr=[],cr=[],ur=[],dr=Math.max(or.matched.length,ar.matched.length);for(let hr=0;hr<dr;hr++){const fr=or.matched[hr];fr&&(ar.matched.find(mr=>isSameRouteRecord(mr,fr))?cr.push(fr):lr.push(fr));const pr=ar.matched[hr];pr&&(or.matched.find(mr=>isSameRouteRecord(mr,pr))||ur.push(pr))}return[lr,cr,ur]}function useRouter(){return inject(routerKey)}function useRoute(ar){return inject(routeLocationKey)}const _imports_0="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Created%20with%20Inkscape%20(http://www.inkscape.org/)%20--%3e%3csvg%20version='1.1'%20id='svg46'%20width='461'%20height='455'%20viewBox='0%200%20461%20455'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs50'%20/%3e%3cg%20id='g52'%3e%3cpath%20style='fill:%23472cff;fill-opacity:1;stroke:%23fffffa;stroke-width:3.55745;stroke-opacity:0'%20d='m%20218.80108,367.29575%20c%20-0.93183,-1.57774%20-2.77367,-7.90541%20-4.09297,-14.0615%20-4.78355,-22.32091%20-10.35116,-24.18933%20-77.95392,-26.16048%20L%2075.750282,325.29504%20V%20206.11996%2086.944876%20l%2057.814988,-0.97751%20c%2061.45499,-1.039064%2069.97156,0.686876%2088.93043,18.022354%20l%208.00429,7.31892%208.0043,-7.31892%20c%2018.95887,-17.335478%2027.47544,-19.061418%2088.93042,-18.022354%20l%2057.81501,0.97751%20V%20206.11996%20325.29504%20l%20-61.00396,1.77873%20c%20-68.40595,1.99456%20-72.73977,3.53376%20-78.45585,27.86494%20-2.63361,11.21024%20-4.62881,13.19926%20-14.17971,14.13576%20-6.11318,0.59944%20-11.8773,-0.201%20-12.80912,-1.77872%20z%20m%20-8.68583,-228.34359%20c%20-9.8092,-20.0588%20-24.222,-25.31424%20-69.44125,-25.32077%20l%20-38.24275,-0.008%20v%2092.49409%2092.4941%20l%2050.69388,0.0545%20c%2027.88162,0.0284%2053.09516,1.57373%2056.03007,3.43061%204.67243,2.95614%205.45562,-6.1797%206.29625,-73.44786%200.84383,-67.52638%200.19815,-78.38215%20-5.3362,-89.69909%20z%20m%2098.41511,159.66189%20h%2050.03837%20v%20-92.49409%20-92.49409%20l%20-38.24276,0.008%20c%20-44.83785,0.008%20-59.57301,5.29527%20-69.36505,24.89672%20-5.34975,10.70909%20-6.22078,23.29437%20-6.22556,89.95114%20-0.007,75.52052%200.17047,77.406%206.87555,73.8174%203.80774,-2.03781%2029.22981,-3.6826%2056.91945,-3.6826%20z'%20id='path893'%20/%3e%3c/g%3e%3c/svg%3e",e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,t=Object.keys,n=Array.isArray;function r(ar,or){return typeof or!="object"||t(or).forEach(function(lr){ar[lr]=or[lr]}),ar}typeof Promise>"u"||e.Promise||(e.Promise=Promise);const s=Object.getPrototypeOf,i$1={}.hasOwnProperty;function o(ar,or){return i$1.call(ar,or)}function a(ar,or){typeof or=="function"&&(or=or(s(ar))),(typeof Reflect>"u"?t:Reflect.ownKeys)(or).forEach(lr=>{l(ar,lr,or[lr])})}const u=Object.defineProperty;function l(ar,or,lr,cr){u(ar,or,r(lr&&o(lr,"get")&&typeof lr.get=="function"?{get:lr.get,set:lr.set,configurable:!0}:{value:lr,configurable:!0,writable:!0},cr))}function c(ar){return{from:function(or){return ar.prototype=Object.create(or.prototype),l(ar.prototype,"constructor",ar),{extend:a.bind(null,ar.prototype)}}}}const h=Object.getOwnPropertyDescriptor;function d(ar,or){let lr;return h(ar,or)||(lr=s(ar))&&d(lr,or)}const f=[].slice;function p(ar,or,lr){return f.call(ar,or,lr)}function y(ar,or){return or(ar)}function m(ar){if(!ar)throw new Error("Assertion Failed")}function v(ar){e.setImmediate?setImmediate(ar):setTimeout(ar,0)}function g(ar,or){return ar.reduce((lr,cr,ur)=>{var dr=or(cr,ur);return dr&&(lr[dr[0]]=dr[1]),lr},{})}function b(ar,or){if(typeof or=="string"&&o(ar,or))return ar[or];if(!or)return ar;if(typeof or!="string"){for(var lr=[],cr=0,ur=or.length;cr<ur;++cr){var dr=b(ar,or[cr]);lr.push(dr)}return lr}var hr=or.indexOf(".");if(hr!==-1){var fr=ar[or.substr(0,hr)];return fr==null?void 0:b(fr,or.substr(hr+1))}}function _(ar,or,lr){if(ar&&or!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(ar)))if(typeof or!="string"&&"length"in or){m(typeof lr!="string"&&"length"in lr);for(var cr=0,ur=or.length;cr<ur;++cr)_(ar,or[cr],lr[cr])}else{var dr=or.indexOf(".");if(dr!==-1){var hr=or.substr(0,dr),fr=or.substr(dr+1);if(fr==="")lr===void 0?n(ar)&&!isNaN(parseInt(hr))?ar.splice(hr,1):delete ar[hr]:ar[hr]=lr;else{var pr=ar[hr];pr&&o(ar,hr)||(pr=ar[hr]={}),_(pr,fr,lr)}}else lr===void 0?n(ar)&&!isNaN(parseInt(or))?ar.splice(or,1):delete ar[or]:ar[or]=lr}}function w(ar){var or={};for(var lr in ar)o(ar,lr)&&(or[lr]=ar[lr]);return or}const x=[].concat;function k(ar){return x.apply([],ar)}const E="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(k([8,16,32,64].map(ar=>["Int","Uint","Float"].map(or=>or+ar+"Array")))).filter(ar=>e[ar]),P=E.map(ar=>e[ar]);g(E,ar=>[ar,!0]);let K=null;function O(ar){K=typeof WeakMap<"u"&&new WeakMap;const or=S(ar);return K=null,or}function S(ar){if(!ar||typeof ar!="object")return ar;let or=K&&K.get(ar);if(or)return or;if(n(ar)){or=[],K&&K.set(ar,or);for(var lr=0,cr=ar.length;lr<cr;++lr)or.push(S(ar[lr]))}else if(P.indexOf(ar.constructor)>=0)or=ar;else{const dr=s(ar);for(var ur in or=dr===Object.prototype?{}:Object.create(dr),K&&K.set(ar,or),ar)o(ar,ur)&&(or[ur]=S(ar[ur]))}return or}const{toString:A}={};function C(ar){return A.call(ar).slice(8,-1)}const j=typeof Symbol<"u"?Symbol.iterator:"@@iterator",D=typeof j=="symbol"?function(ar){var or;return ar!=null&&(or=ar[j])&&or.apply(ar)}:function(){return null},I={};function B(ar){var or,lr,cr,ur;if(arguments.length===1){if(n(ar))return ar.slice();if(this===I&&typeof ar=="string")return[ar];if(ur=D(ar)){for(lr=[];!(cr=ur.next()).done;)lr.push(cr.value);return lr}if(ar==null)return[ar];if(typeof(or=ar.length)=="number"){for(lr=new Array(or);or--;)lr[or]=ar[or];return lr}return[ar]}for(or=arguments.length,lr=new Array(or);or--;)lr[or]=arguments[or];return lr}const T=typeof Symbol<"u"?ar=>ar[Symbol.toStringTag]==="AsyncFunction":()=>!1;var R=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function F(ar,or){R=ar,M=or}var M=()=>!0;const N=!new Error("").stack;function q(){if(N)try{throw q.arguments,new Error}catch(ar){return ar}return new Error}function $(ar,or){var lr=ar.stack;return lr?(or=or||0,lr.indexOf(ar.name)===0&&(or+=(ar.name+ar.message).split(`
`).length),lr.split(`
`).slice(or).filter(M).map(cr=>`
`+cr).join("")):""}var U=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],L=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U),V={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function W(ar,or){this._e=q(),this.name=ar,this.message=or}function Y(ar,or){return ar+". Errors: "+Object.keys(or).map(lr=>or[lr].toString()).filter((lr,cr,ur)=>ur.indexOf(lr)===cr).join(`
`)}function z(ar,or,lr,cr){this._e=q(),this.failures=or,this.failedKeys=cr,this.successCount=lr,this.message=Y(ar,or)}function G(ar,or){this._e=q(),this.name="BulkError",this.failures=Object.keys(or).map(lr=>or[lr]),this.failuresByPos=or,this.message=Y(ar,or)}c(W).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+$(this._e,2))}},toString:function(){return this.name+": "+this.message}}),c(z).from(W),c(G).from(W);var H=L.reduce((ar,or)=>(ar[or]=or+"Error",ar),{});const Q=W;var X=L.reduce((ar,or)=>{var lr=or+"Error";function cr(ur,dr){this._e=q(),this.name=lr,ur?typeof ur=="string"?(this.message=`${ur}${dr?`
 `+dr:""}`,this.inner=dr||null):typeof ur=="object"&&(this.message=`${ur.name} ${ur.message}`,this.inner=ur):(this.message=V[or]||lr,this.inner=null)}return c(cr).from(Q),ar[or]=cr,ar},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var J=U.reduce((ar,or)=>(ar[or+"Error"]=X[or],ar),{}),Z=L.reduce((ar,or)=>(["Syntax","Type","Range"].indexOf(or)===-1&&(ar[or+"Error"]=X[or]),ar),{});function ee(){}function te(ar){return ar}function ne(ar,or){return ar==null||ar===te?or:function(lr){return or(ar(lr))}}function re(ar,or){return function(){ar.apply(this,arguments),or.apply(this,arguments)}}function se(ar,or){return ar===ee?or:function(){var lr=ar.apply(this,arguments);lr!==void 0&&(arguments[0]=lr);var cr=this.onsuccess,ur=this.onerror;this.onsuccess=null,this.onerror=null;var dr=or.apply(this,arguments);return cr&&(this.onsuccess=this.onsuccess?re(cr,this.onsuccess):cr),ur&&(this.onerror=this.onerror?re(ur,this.onerror):ur),dr!==void 0?dr:lr}}function ie$2(ar,or){return ar===ee?or:function(){ar.apply(this,arguments);var lr=this.onsuccess,cr=this.onerror;this.onsuccess=this.onerror=null,or.apply(this,arguments),lr&&(this.onsuccess=this.onsuccess?re(lr,this.onsuccess):lr),cr&&(this.onerror=this.onerror?re(cr,this.onerror):cr)}}function oe(ar,or){return ar===ee?or:function(lr){var cr=ar.apply(this,arguments);r(lr,cr);var ur=this.onsuccess,dr=this.onerror;this.onsuccess=null,this.onerror=null;var hr=or.apply(this,arguments);return ur&&(this.onsuccess=this.onsuccess?re(ur,this.onsuccess):ur),dr&&(this.onerror=this.onerror?re(dr,this.onerror):dr),cr===void 0?hr===void 0?void 0:hr:r(cr,hr)}}function ae(ar,or){return ar===ee?or:function(){return or.apply(this,arguments)!==!1&&ar.apply(this,arguments)}}function ue(ar,or){return ar===ee?or:function(){var lr=ar.apply(this,arguments);if(lr&&typeof lr.then=="function"){for(var cr=this,ur=arguments.length,dr=new Array(ur);ur--;)dr[ur]=arguments[ur];return lr.then(function(){return or.apply(cr,dr)})}return or.apply(this,arguments)}}Z.ModifyError=z,Z.DexieError=W,Z.BulkError=G;var le={};const ce=100,[he,de,fe]=typeof Promise>"u"?[]:(()=>{let ar=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[ar,s(ar),ar];const or=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[or,s(or),ar]})(),pe=de&&de.then,ye=he&&he.constructor,me=!!fe;var ve=!1,ge=fe?()=>{fe.then($e)}:e.setImmediate?setImmediate.bind(null,$e):e.MutationObserver?()=>{var ar=document.createElement("div");new MutationObserver(()=>{$e(),ar=null}).observe(ar,{attributes:!0}),ar.setAttribute("i","1")}:()=>{setTimeout($e,0)},be=function(ar,or){Se.push([ar,or]),we&&(ge(),we=!1)},_e=!0,we=!0,xe=[],ke=[],Ee=null,Pe=te,Ke={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:dt,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(ar=>{try{dt(ar[0],ar[1])}catch{}})}},Oe=Ke,Se=[],Ae=0,Ce=[];function je(ar){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ee,this._lib=!1;var or=this._PSD=Oe;if(R&&(this._stackHolder=q(),this._prev=null,this._numPrev=0),typeof ar!="function"){if(ar!==le)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Te(this,this._value))}this._state=null,this._value=null,++or.ref,Be(this,ar)}const De={get:function(){var ar=Oe,or=Xe;function lr(cr,ur){var dr=!ar.global&&(ar!==Oe||or!==Xe);const hr=dr&&!tt$1();var fr=new je((pr,mr)=>{Fe(this,new Ie(lt(cr,ar,dr,hr),lt(ur,ar,dr,hr),pr,mr,ar))});return R&&qe(fr,this),fr}return lr.prototype=le,lr},set:function(ar){l(this,"then",ar&&ar.prototype===le?De:{get:function(){return ar},set:De.set})}};function Ie(ar,or,lr,cr,ur){this.onFulfilled=typeof ar=="function"?ar:null,this.onRejected=typeof or=="function"?or:null,this.resolve=lr,this.reject=cr,this.psd=ur}function Be(ar,or){try{or(lr=>{if(ar._state===null){if(lr===ar)throw new TypeError("A promise cannot be resolved with itself.");var cr=ar._lib&&Ue();lr&&typeof lr.then=="function"?Be(ar,(ur,dr)=>{lr instanceof je?lr._then(ur,dr):lr.then(ur,dr)}):(ar._state=!0,ar._value=lr,Re(ar)),cr&&Le()}},Te.bind(null,ar))}catch(lr){Te(ar,lr)}}function Te(ar,or){if(ke.push(or),ar._state===null){var lr=ar._lib&&Ue();or=Pe(or),ar._state=!1,ar._value=or,R&&or!==null&&typeof or=="object"&&!or._promise&&function(cr,ur,dr){try{cr.apply(null,dr)}catch{}}(()=>{var cr=d(or,"stack");or._promise=ar,l(or,"stack",{get:()=>ve?cr&&(cr.get?cr.get.apply(or):cr.value):ar.stack})}),function(cr){xe.some(ur=>ur._value===cr._value)||xe.push(cr)}(ar),Re(ar),lr&&Le()}}function Re(ar){var or=ar._listeners;ar._listeners=[];for(var lr=0,cr=or.length;lr<cr;++lr)Fe(ar,or[lr]);var ur=ar._PSD;--ur.ref||ur.finalize(),Ae===0&&(++Ae,be(()=>{--Ae==0&&Ve()},[]))}function Fe(ar,or){if(ar._state!==null){var lr=ar._state?or.onFulfilled:or.onRejected;if(lr===null)return(ar._state?or.resolve:or.reject)(ar._value);++or.psd.ref,++Ae,be(Me,[lr,ar,or])}else ar._listeners.push(or)}function Me(ar,or,lr){try{Ee=or;var cr,ur=or._value;or._state?cr=ar(ur):(ke.length&&(ke=[]),cr=ar(ur),ke.indexOf(ur)===-1&&function(dr){for(var hr=xe.length;hr;)if(xe[--hr]._value===dr._value)return void xe.splice(hr,1)}(or)),lr.resolve(cr)}catch(dr){lr.reject(dr)}finally{Ee=null,--Ae==0&&Ve(),--lr.psd.ref||lr.psd.finalize()}}function Ne(ar,or,lr){if(or.length===lr)return or;var cr="";if(ar._state===!1){var ur,dr,hr=ar._value;hr!=null?(ur=hr.name||"Error",dr=hr.message||hr,cr=$(hr,0)):(ur=hr,dr=""),or.push(ur+(dr?": "+dr:"")+cr)}return R&&((cr=$(ar._stackHolder,2))&&or.indexOf(cr)===-1&&or.push(cr),ar._prev&&Ne(ar._prev,or,lr)),or}function qe(ar,or){var lr=or?or._numPrev+1:0;lr<100&&(ar._prev=or,ar._numPrev=lr)}function $e(){Ue()&&Le()}function Ue(){var ar=_e;return _e=!1,we=!1,ar}function Le(){var ar,or,lr;do for(;Se.length>0;)for(ar=Se,Se=[],lr=ar.length,or=0;or<lr;++or){var cr=ar[or];cr[0].apply(null,cr[1])}while(Se.length>0);_e=!0,we=!0}function Ve(){var ar=xe;xe=[],ar.forEach(cr=>{cr._PSD.onunhandled.call(null,cr._value,cr)});for(var or=Ce.slice(0),lr=or.length;lr;)or[--lr]()}function We(ar){return new je(le,!1,ar)}function Ye(ar,or){var lr=Oe;return function(){var cr=Ue(),ur=Oe;try{return it(lr,!0),ar.apply(this,arguments)}catch(dr){or&&or(dr)}finally{it(ur,!1),cr&&Le()}}}a(je.prototype,{then:De,_then:function(ar,or){Fe(this,new Ie(null,null,ar,or,Oe))},catch:function(ar){if(arguments.length===1)return this.then(null,ar);var or=arguments[0],lr=arguments[1];return typeof or=="function"?this.then(null,cr=>cr instanceof or?lr(cr):We(cr)):this.then(null,cr=>cr&&cr.name===or?lr(cr):We(cr))},finally:function(ar){return this.then(or=>(ar(),or),or=>(ar(),We(or)))},stack:{get:function(){if(this._stack)return this._stack;try{ve=!0;var ar=Ne(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=ar),ar}finally{ve=!1}}},timeout:function(ar,or){return ar<1/0?new je((lr,cr)=>{var ur=setTimeout(()=>cr(new X.Timeout(or)),ar);this.then(lr,cr).finally(clearTimeout.bind(null,ur))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&l(je.prototype,Symbol.toStringTag,"Dexie.Promise"),Ke.env=ot(),a(je,{all:function(){var ar=B.apply(null,arguments).map(nt);return new je(function(or,lr){ar.length===0&&or([]);var cr=ar.length;ar.forEach((ur,dr)=>je.resolve(ur).then(hr=>{ar[dr]=hr,--cr||or(ar)},lr))})},resolve:ar=>{if(ar instanceof je)return ar;if(ar&&typeof ar.then=="function")return new je((lr,cr)=>{ar.then(lr,cr)});var or=new je(le,!0,ar);return qe(or,Ee),or},reject:We,race:function(){var ar=B.apply(null,arguments).map(nt);return new je((or,lr)=>{ar.map(cr=>je.resolve(cr).then(or,lr))})},PSD:{get:()=>Oe,set:ar=>Oe=ar},totalEchoes:{get:()=>Xe},newPSD:Ze,usePSD:at,scheduler:{get:()=>be,set:ar=>{be=ar}},rejectionMapper:{get:()=>Pe,set:ar=>{Pe=ar}},follow:(ar,or)=>new je((lr,cr)=>Ze((ur,dr)=>{var hr=Oe;hr.unhandleds=[],hr.onunhandled=dr,hr.finalize=re(function(){(function(fr){function pr(){fr(),Ce.splice(Ce.indexOf(pr),1)}Ce.push(pr),++Ae,be(()=>{--Ae==0&&Ve()},[])})(()=>{this.unhandleds.length===0?ur():dr(this.unhandleds[0])})},hr.finalize),ar()},or,lr,cr))}),ye&&(ye.allSettled&&l(je,"allSettled",function(){const ar=B.apply(null,arguments).map(nt);return new je(or=>{ar.length===0&&or([]);let lr=ar.length;const cr=new Array(lr);ar.forEach((ur,dr)=>je.resolve(ur).then(hr=>cr[dr]={status:"fulfilled",value:hr},hr=>cr[dr]={status:"rejected",reason:hr}).then(()=>--lr||or(cr)))})}),ye.any&&typeof AggregateError<"u"&&l(je,"any",function(){const ar=B.apply(null,arguments).map(nt);return new je((or,lr)=>{ar.length===0&&lr(new AggregateError([]));let cr=ar.length;const ur=new Array(cr);ar.forEach((dr,hr)=>je.resolve(dr).then(fr=>or(fr),fr=>{ur[hr]=fr,--cr||lr(new AggregateError(ur))}))})}));const ze={awaits:0,echoes:0,id:0};var Ge=0,He=[],Qe=0,Xe=0,Je=0;function Ze(ar,or,lr,cr){var ur=Oe,dr=Object.create(ur);dr.parent=ur,dr.ref=0,dr.global=!1,dr.id=++Je;var hr=Ke.env;dr.env=me?{Promise:je,PromiseProp:{value:je,configurable:!0,writable:!0},all:je.all,race:je.race,allSettled:je.allSettled,any:je.any,resolve:je.resolve,reject:je.reject,nthen:ct(hr.nthen,dr),gthen:ct(hr.gthen,dr)}:{},or&&r(dr,or),++ur.ref,dr.finalize=function(){--this.parent.ref||this.parent.finalize()};var fr=at(dr,ar,lr,cr);return dr.ref===0&&dr.finalize(),fr}function et(){return ze.id||(ze.id=++Ge),++ze.awaits,ze.echoes+=ce,ze.id}function tt$1(){return!!ze.awaits&&(--ze.awaits==0&&(ze.id=0),ze.echoes=ze.awaits*ce,!0)}function nt(ar){return ze.echoes&&ar&&ar.constructor===ye?(et(),ar.then(or=>(tt$1(),or),or=>(tt$1(),ft(or)))):ar}function rt(ar){++Xe,ze.echoes&&--ze.echoes!=0||(ze.echoes=ze.id=0),He.push(Oe),it(ar,!0)}function st(){var ar=He[He.length-1];He.pop(),it(ar,!1)}function it(ar,or){var lr=Oe;if((or?!ze.echoes||Qe++&&ar===Oe:!Qe||--Qe&&ar===Oe)||ut(or?rt.bind(null,ar):st),ar!==Oe&&(Oe=ar,lr===Ke&&(Ke.env=ot()),me)){var cr=Ke.env.Promise,ur=ar.env;de.then=ur.nthen,cr.prototype.then=ur.gthen,(lr.global||ar.global)&&(Object.defineProperty(e,"Promise",ur.PromiseProp),cr.all=ur.all,cr.race=ur.race,cr.resolve=ur.resolve,cr.reject=ur.reject,ur.allSettled&&(cr.allSettled=ur.allSettled),ur.any&&(cr.any=ur.any))}}function ot(){var ar=e.Promise;return me?{Promise:ar,PromiseProp:Object.getOwnPropertyDescriptor(e,"Promise"),all:ar.all,race:ar.race,allSettled:ar.allSettled,any:ar.any,resolve:ar.resolve,reject:ar.reject,nthen:de.then,gthen:ar.prototype.then}:{}}function at(ar,or,lr,cr,ur){var dr=Oe;try{return it(ar,!0),or(lr,cr,ur)}finally{it(dr,!1)}}function ut(ar){pe.call(he,ar)}function lt(ar,or,lr,cr){return typeof ar!="function"?ar:function(){var ur=Oe;lr&&et(),it(or,!0);try{return ar.apply(this,arguments)}finally{it(ur,!1),cr&&ut(tt$1)}}}function ct(ar,or){return function(lr,cr){return ar.call(this,lt(lr,or),lt(cr,or))}}(""+pe).indexOf("[native code]")===-1&&(et=tt$1=ee);const ht="unhandledrejection";function dt(ar,or){var lr;try{lr=or.onuncatched(ar)}catch{}if(lr!==!1)try{var cr,ur={promise:or,reason:ar};if(e.document&&document.createEvent?((cr=document.createEvent("Event")).initEvent(ht,!0,!0),r(cr,ur)):e.CustomEvent&&r(cr=new CustomEvent(ht,{detail:ur}),ur),cr&&e.dispatchEvent&&(dispatchEvent(cr),!e.PromiseRejectionEvent&&e.onunhandledrejection))try{e.onunhandledrejection(cr)}catch{}R&&cr&&!cr.defaultPrevented&&console.warn(`Unhandled rejection: ${ar.stack||ar}`)}catch{}}var ft=je.reject;function pt(ar,or,lr,cr){if(ar.idbdb&&(ar._state.openComplete||Oe.letThrough||ar._vip)){var ur=ar._createTransaction(or,lr,ar._dbSchema);try{ur.create(),ar._state.PR1398_maxLoop=3}catch(dr){return dr.name===H.InvalidState&&ar.isOpen()&&--ar._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),ar._close(),ar.open().then(()=>pt(ar,or,lr,cr))):ft(dr)}return ur._promise(or,(dr,hr)=>Ze(()=>(Oe.trans=ur,cr(dr,hr,ur)))).then(dr=>ur._completion.then(()=>dr))}if(ar._state.openComplete)return ft(new X.DatabaseClosed(ar._state.dbOpenError));if(!ar._state.isBeingOpened){if(!ar._options.autoOpen)return ft(new X.DatabaseClosed);ar.open().catch(ee)}return ar._state.dbReadyPromise.then(()=>pt(ar,or,lr,cr))}const yt="3.2.7",mt="￿",vt=-1/0,gt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",bt="String expected.",_t=[],wt=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xt=wt,kt=wt,Et=ar=>!/(dexie\.js|dexie\.min\.js)/.test(ar),Pt="__dbnames",Kt="readonly",Ot="readwrite";function St(ar,or){return ar?or?function(){return ar.apply(this,arguments)&&or.apply(this,arguments)}:ar:or}const At={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ct(ar){return typeof ar!="string"||/\./.test(ar)?or=>or:or=>(or[ar]===void 0&&ar in or&&delete(or=O(or))[ar],or)}class jt{_trans(or,lr,cr){const ur=this._tx||Oe.trans,dr=this.name;function hr(pr,mr,gr){if(!gr.schema[dr])throw new X.NotFound("Table "+dr+" not part of transaction");return lr(gr.idbtrans,gr)}const fr=Ue();try{return ur&&ur.db===this.db?ur===Oe.trans?ur._promise(or,hr,cr):Ze(()=>ur._promise(or,hr,cr),{trans:ur,transless:Oe.transless||Oe}):pt(this.db,or,[this.name],hr)}finally{fr&&Le()}}get(or,lr){return or&&or.constructor===Object?this.where(or).first(lr):this._trans("readonly",cr=>this.core.get({trans:cr,key:or}).then(ur=>this.hook.reading.fire(ur))).then(lr)}where(or){if(typeof or=="string")return new this.db.WhereClause(this,or);if(n(or))return new this.db.WhereClause(this,`[${or.join("+")}]`);const lr=t(or);if(lr.length===1)return this.where(lr[0]).equals(or[lr[0]]);const cr=this.schema.indexes.concat(this.schema.primKey).filter(mr=>{if(mr.compound&&lr.every(gr=>mr.keyPath.indexOf(gr)>=0)){for(let gr=0;gr<lr.length;++gr)if(lr.indexOf(mr.keyPath[gr])===-1)return!1;return!0}return!1}).sort((mr,gr)=>mr.keyPath.length-gr.keyPath.length)[0];if(cr&&this.db._maxKey!==mt){const mr=cr.keyPath.slice(0,lr.length);return this.where(mr).equals(mr.map(gr=>or[gr]))}!cr&&R&&console.warn(`The query ${JSON.stringify(or)} on ${this.name} would benefit of a compound index [${lr.join("+")}]`);const{idxByName:ur}=this.schema,dr=this.db._deps.indexedDB;function hr(mr,gr){try{return dr.cmp(mr,gr)===0}catch{return!1}}const[fr,pr]=lr.reduce(([mr,gr],yr)=>{const vr=ur[yr],br=or[yr];return[mr||vr,mr||!vr?St(gr,vr&&vr.multi?Sr=>{const xr=b(Sr,yr);return n(xr)&&xr.some(Er=>hr(br,Er))}:Sr=>hr(br,b(Sr,yr))):gr]},[null,null]);return fr?this.where(fr.name).equals(or[fr.keyPath]).filter(pr):cr?this.filter(pr):this.where(lr).equals("")}filter(or){return this.toCollection().and(or)}count(or){return this.toCollection().count(or)}offset(or){return this.toCollection().offset(or)}limit(or){return this.toCollection().limit(or)}each(or){return this.toCollection().each(or)}toArray(or){return this.toCollection().toArray(or)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(or){return new this.db.Collection(new this.db.WhereClause(this,n(or)?`[${or.join("+")}]`:or))}reverse(){return this.toCollection().reverse()}mapToClass(or){this.schema.mappedClass=or;const lr=cr=>{if(!cr)return cr;const ur=Object.create(or.prototype);for(var dr in cr)if(o(cr,dr))try{ur[dr]=cr[dr]}catch{}return ur};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=lr,this.hook("reading",lr),or}defineClass(){return this.mapToClass(function(or){r(this,or)})}add(or,lr){const{auto:cr,keyPath:ur}=this.schema.primKey;let dr=or;return ur&&cr&&(dr=Ct(ur)(or)),this._trans("readwrite",hr=>this.core.mutate({trans:hr,type:"add",keys:lr!=null?[lr]:null,values:[dr]})).then(hr=>hr.numFailures?je.reject(hr.failures[0]):hr.lastResult).then(hr=>{if(ur)try{_(or,ur,hr)}catch{}return hr})}update(or,lr){if(typeof or!="object"||n(or))return this.where(":id").equals(or).modify(lr);{const cr=b(or,this.schema.primKey.keyPath);if(cr===void 0)return ft(new X.InvalidArgument("Given object does not contain its primary key"));try{typeof lr!="function"?t(lr).forEach(ur=>{_(or,ur,lr[ur])}):lr(or,{value:or,primKey:cr})}catch{}return this.where(":id").equals(cr).modify(lr)}}put(or,lr){const{auto:cr,keyPath:ur}=this.schema.primKey;let dr=or;return ur&&cr&&(dr=Ct(ur)(or)),this._trans("readwrite",hr=>this.core.mutate({trans:hr,type:"put",values:[dr],keys:lr!=null?[lr]:null})).then(hr=>hr.numFailures?je.reject(hr.failures[0]):hr.lastResult).then(hr=>{if(ur)try{_(or,ur,hr)}catch{}return hr})}delete(or){return this._trans("readwrite",lr=>this.core.mutate({trans:lr,type:"delete",keys:[or]})).then(lr=>lr.numFailures?je.reject(lr.failures[0]):void 0)}clear(){return this._trans("readwrite",or=>this.core.mutate({trans:or,type:"deleteRange",range:At})).then(or=>or.numFailures?je.reject(or.failures[0]):void 0)}bulkGet(or){return this._trans("readonly",lr=>this.core.getMany({keys:or,trans:lr}).then(cr=>cr.map(ur=>this.hook.reading.fire(ur))))}bulkAdd(or,lr,cr){const ur=Array.isArray(lr)?lr:void 0,dr=(cr=cr||(ur?void 0:lr))?cr.allKeys:void 0;return this._trans("readwrite",hr=>{const{auto:fr,keyPath:pr}=this.schema.primKey;if(pr&&ur)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(ur&&ur.length!==or.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const mr=or.length;let gr=pr&&fr?or.map(Ct(pr)):or;return this.core.mutate({trans:hr,type:"add",keys:ur,values:gr,wantResults:dr}).then(({numFailures:yr,results:vr,lastResult:br,failures:Sr})=>{if(yr===0)return dr?vr:br;throw new G(`${this.name}.bulkAdd(): ${yr} of ${mr} operations failed`,Sr)})})}bulkPut(or,lr,cr){const ur=Array.isArray(lr)?lr:void 0,dr=(cr=cr||(ur?void 0:lr))?cr.allKeys:void 0;return this._trans("readwrite",hr=>{const{auto:fr,keyPath:pr}=this.schema.primKey;if(pr&&ur)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(ur&&ur.length!==or.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");const mr=or.length;let gr=pr&&fr?or.map(Ct(pr)):or;return this.core.mutate({trans:hr,type:"put",keys:ur,values:gr,wantResults:dr}).then(({numFailures:yr,results:vr,lastResult:br,failures:Sr})=>{if(yr===0)return dr?vr:br;throw new G(`${this.name}.bulkPut(): ${yr} of ${mr} operations failed`,Sr)})})}bulkDelete(or){const lr=or.length;return this._trans("readwrite",cr=>this.core.mutate({trans:cr,type:"delete",keys:or})).then(({numFailures:cr,lastResult:ur,failures:dr})=>{if(cr===0)return ur;throw new G(`${this.name}.bulkDelete(): ${cr} of ${lr} operations failed`,dr)})}}function Dt(ar){var or={},lr=function(hr,fr){if(fr){for(var pr=arguments.length,mr=new Array(pr-1);--pr;)mr[pr-1]=arguments[pr];return or[hr].subscribe.apply(null,mr),ar}if(typeof hr=="string")return or[hr]};lr.addEventType=dr;for(var cr=1,ur=arguments.length;cr<ur;++cr)dr(arguments[cr]);return lr;function dr(hr,fr,pr){if(typeof hr!="object"){var mr;fr||(fr=ae),pr||(pr=ee);var gr={subscribers:[],fire:pr,subscribe:function(yr){gr.subscribers.indexOf(yr)===-1&&(gr.subscribers.push(yr),gr.fire=fr(gr.fire,yr))},unsubscribe:function(yr){gr.subscribers=gr.subscribers.filter(function(vr){return vr!==yr}),gr.fire=gr.subscribers.reduce(fr,pr)}};return or[hr]=lr[hr]=gr,gr}t(mr=hr).forEach(function(yr){var vr=mr[yr];if(n(vr))dr(yr,mr[yr][0],mr[yr][1]);else{if(vr!=="asap")throw new X.InvalidArgument("Invalid event config");var br=dr(yr,te,function(){for(var Sr=arguments.length,xr=new Array(Sr);Sr--;)xr[Sr]=arguments[Sr];br.subscribers.forEach(function(Er){v(function(){Er.apply(null,xr)})})})}})}}function It(ar,or){return c(or).from({prototype:ar}),or}function Bt(ar,or){return!(ar.filter||ar.algorithm||ar.or)&&(or?ar.justLimit:!ar.replayFilter)}function Tt(ar,or){ar.filter=St(ar.filter,or)}function Rt(ar,or,lr){var cr=ar.replayFilter;ar.replayFilter=cr?()=>St(cr(),or()):or,ar.justLimit=lr&&!cr}function Ft(ar,or){if(ar.isPrimKey)return or.primaryKey;const lr=or.getIndexByKeyPath(ar.index);if(!lr)throw new X.Schema("KeyPath "+ar.index+" on object store "+or.name+" is not indexed");return lr}function Mt(ar,or,lr){const cr=Ft(ar,or.schema);return or.openCursor({trans:lr,values:!ar.keysOnly,reverse:ar.dir==="prev",unique:!!ar.unique,query:{index:cr,range:ar.range}})}function Nt(ar,or,lr,cr){const ur=ar.replayFilter?St(ar.filter,ar.replayFilter()):ar.filter;if(ar.or){const dr={},hr=(fr,pr,mr)=>{if(!ur||ur(pr,mr,vr=>pr.stop(vr),vr=>pr.fail(vr))){var gr=pr.primaryKey,yr=""+gr;yr==="[object ArrayBuffer]"&&(yr=""+new Uint8Array(gr)),o(dr,yr)||(dr[yr]=!0,or(fr,pr,mr))}};return Promise.all([ar.or._iterate(hr,lr),qt(Mt(ar,cr,lr),ar.algorithm,hr,!ar.keysOnly&&ar.valueMapper)])}return qt(Mt(ar,cr,lr),St(ar.algorithm,ur),or,!ar.keysOnly&&ar.valueMapper)}function qt(ar,or,lr,cr){var ur=Ye(cr?(dr,hr,fr)=>lr(cr(dr),hr,fr):lr);return ar.then(dr=>{if(dr)return dr.start(()=>{var hr=()=>dr.continue();or&&!or(dr,fr=>hr=fr,fr=>{dr.stop(fr),hr=ee},fr=>{dr.fail(fr),hr=ee})||ur(dr.value,dr,fr=>hr=fr),hr()})})}function $t(ar,or){try{const lr=Ut(ar),cr=Ut(or);if(lr!==cr)return lr==="Array"?1:cr==="Array"?-1:lr==="binary"?1:cr==="binary"?-1:lr==="string"?1:cr==="string"?-1:lr==="Date"?1:cr!=="Date"?NaN:-1;switch(lr){case"number":case"Date":case"string":return ar>or?1:ar<or?-1:0;case"binary":return function(ur,dr){const hr=ur.length,fr=dr.length,pr=hr<fr?hr:fr;for(let mr=0;mr<pr;++mr)if(ur[mr]!==dr[mr])return ur[mr]<dr[mr]?-1:1;return hr===fr?0:hr<fr?-1:1}(Lt(ar),Lt(or));case"Array":return function(ur,dr){const hr=ur.length,fr=dr.length,pr=hr<fr?hr:fr;for(let mr=0;mr<pr;++mr){const gr=$t(ur[mr],dr[mr]);if(gr!==0)return gr}return hr===fr?0:hr<fr?-1:1}(ar,or)}}catch{}return NaN}function Ut(ar){const or=typeof ar;if(or!=="object")return or;if(ArrayBuffer.isView(ar))return"binary";const lr=C(ar);return lr==="ArrayBuffer"?"binary":lr}function Lt(ar){return ar instanceof Uint8Array?ar:ArrayBuffer.isView(ar)?new Uint8Array(ar.buffer,ar.byteOffset,ar.byteLength):new Uint8Array(ar)}class Vt{_read(or,lr){var cr=this._ctx;return cr.error?cr.table._trans(null,ft.bind(null,cr.error)):cr.table._trans("readonly",or).then(lr)}_write(or){var lr=this._ctx;return lr.error?lr.table._trans(null,ft.bind(null,lr.error)):lr.table._trans("readwrite",or,"locked")}_addAlgorithm(or){var lr=this._ctx;lr.algorithm=St(lr.algorithm,or)}_iterate(or,lr){return Nt(this._ctx,or,lr,this._ctx.table.core)}clone(or){var lr=Object.create(this.constructor.prototype),cr=Object.create(this._ctx);return or&&r(cr,or),lr._ctx=cr,lr}raw(){return this._ctx.valueMapper=null,this}each(or){var lr=this._ctx;return this._read(cr=>Nt(lr,or,cr,lr.table.core))}count(or){return this._read(lr=>{const cr=this._ctx,ur=cr.table.core;if(Bt(cr,!0))return ur.count({trans:lr,query:{index:Ft(cr,ur.schema),range:cr.range}}).then(hr=>Math.min(hr,cr.limit));var dr=0;return Nt(cr,()=>(++dr,!1),lr,ur).then(()=>dr)}).then(or)}sortBy(or,lr){const cr=or.split(".").reverse(),ur=cr[0],dr=cr.length-1;function hr(mr,gr){return gr?hr(mr[cr[gr]],gr-1):mr[ur]}var fr=this._ctx.dir==="next"?1:-1;function pr(mr,gr){var yr=hr(mr,dr),vr=hr(gr,dr);return yr<vr?-fr:yr>vr?fr:0}return this.toArray(function(mr){return mr.sort(pr)}).then(lr)}toArray(or){return this._read(lr=>{var cr=this._ctx;if(cr.dir==="next"&&Bt(cr,!0)&&cr.limit>0){const{valueMapper:ur}=cr,dr=Ft(cr,cr.table.core.schema);return cr.table.core.query({trans:lr,limit:cr.limit,values:!0,query:{index:dr,range:cr.range}}).then(({result:hr})=>ur?hr.map(ur):hr)}{const ur=[];return Nt(cr,dr=>ur.push(dr),lr,cr.table.core).then(()=>ur)}},or)}offset(or){var lr=this._ctx;return or<=0||(lr.offset+=or,Bt(lr)?Rt(lr,()=>{var cr=or;return(ur,dr)=>cr===0||(cr===1?(--cr,!1):(dr(()=>{ur.advance(cr),cr=0}),!1))}):Rt(lr,()=>{var cr=or;return()=>--cr<0})),this}limit(or){return this._ctx.limit=Math.min(this._ctx.limit,or),Rt(this._ctx,()=>{var lr=or;return function(cr,ur,dr){return--lr<=0&&ur(dr),lr>=0}},!0),this}until(or,lr){return Tt(this._ctx,function(cr,ur,dr){return!or(cr.value)||(ur(dr),lr)}),this}first(or){return this.limit(1).toArray(function(lr){return lr[0]}).then(or)}last(or){return this.reverse().first(or)}filter(or){var lr,cr;return Tt(this._ctx,function(ur){return or(ur.value)}),lr=this._ctx,cr=or,lr.isMatch=St(lr.isMatch,cr),this}and(or){return this.filter(or)}or(or){return new this.db.WhereClause(this._ctx.table,or,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(or){var lr=this._ctx;return lr.keysOnly=!lr.isMatch,this.each(function(cr,ur){or(ur.key,ur)})}eachUniqueKey(or){return this._ctx.unique="unique",this.eachKey(or)}eachPrimaryKey(or){var lr=this._ctx;return lr.keysOnly=!lr.isMatch,this.each(function(cr,ur){or(ur.primaryKey,ur)})}keys(or){var lr=this._ctx;lr.keysOnly=!lr.isMatch;var cr=[];return this.each(function(ur,dr){cr.push(dr.key)}).then(function(){return cr}).then(or)}primaryKeys(or){var lr=this._ctx;if(lr.dir==="next"&&Bt(lr,!0)&&lr.limit>0)return this._read(ur=>{var dr=Ft(lr,lr.table.core.schema);return lr.table.core.query({trans:ur,values:!1,limit:lr.limit,query:{index:dr,range:lr.range}})}).then(({result:ur})=>ur).then(or);lr.keysOnly=!lr.isMatch;var cr=[];return this.each(function(ur,dr){cr.push(dr.primaryKey)}).then(function(){return cr}).then(or)}uniqueKeys(or){return this._ctx.unique="unique",this.keys(or)}firstKey(or){return this.limit(1).keys(function(lr){return lr[0]}).then(or)}lastKey(or){return this.reverse().firstKey(or)}distinct(){var or=this._ctx,lr=or.index&&or.table.schema.idxByName[or.index];if(!lr||!lr.multi)return this;var cr={};return Tt(this._ctx,function(ur){var dr=ur.primaryKey.toString(),hr=o(cr,dr);return cr[dr]=!0,!hr}),this}modify(or){var lr=this._ctx;return this._write(cr=>{var ur;if(typeof or=="function")ur=or;else{var dr=t(or),hr=dr.length;ur=function(xr){for(var Er=!1,wr=0;wr<hr;++wr){var Ar=dr[wr],Tr=or[Ar];b(xr,Ar)!==Tr&&(_(xr,Ar,Tr),Er=!0)}return Er}}const fr=lr.table.core,{outbound:pr,extractKey:mr}=fr.schema.primaryKey,gr=this.db._options.modifyChunkSize||200,yr=[];let vr=0;const br=[],Sr=(xr,Er)=>{const{failures:wr,numFailures:Ar}=Er;vr+=xr-Ar;for(let Tr of t(wr))yr.push(wr[Tr])};return this.clone().primaryKeys().then(xr=>{const Er=wr=>{const Ar=Math.min(gr,xr.length-wr);return fr.getMany({trans:cr,keys:xr.slice(wr,wr+Ar),cache:"immutable"}).then(Tr=>{const Cr=[],kr=[],Mr=pr?[]:null,Rr=[];for(let _r=0;_r<Ar;++_r){const Dr=Tr[_r],Pr={value:O(Dr),primKey:xr[wr+_r]};ur.call(Pr,Pr.value,Pr)!==!1&&(Pr.value==null?Rr.push(xr[wr+_r]):pr||$t(mr(Dr),mr(Pr.value))===0?(kr.push(Pr.value),pr&&Mr.push(xr[wr+_r])):(Rr.push(xr[wr+_r]),Cr.push(Pr.value)))}const Nr=Bt(lr)&&lr.limit===1/0&&(typeof or!="function"||or===Wt)&&{index:lr.index,range:lr.range};return Promise.resolve(Cr.length>0&&fr.mutate({trans:cr,type:"add",values:Cr}).then(_r=>{for(let Dr in _r.failures)Rr.splice(parseInt(Dr),1);Sr(Cr.length,_r)})).then(()=>(kr.length>0||Nr&&typeof or=="object")&&fr.mutate({trans:cr,type:"put",keys:Mr,values:kr,criteria:Nr,changeSpec:typeof or!="function"&&or}).then(_r=>Sr(kr.length,_r))).then(()=>(Rr.length>0||Nr&&or===Wt)&&fr.mutate({trans:cr,type:"delete",keys:Rr,criteria:Nr}).then(_r=>Sr(Rr.length,_r))).then(()=>xr.length>wr+Ar&&Er(wr+gr))})};return Er(0).then(()=>{if(yr.length>0)throw new z("Error modifying one or more objects",yr,vr,br);return xr.length})})})}delete(){var or=this._ctx,lr=or.range;return Bt(or)&&(or.isPrimKey&&!kt||lr.type===3)?this._write(cr=>{const{primaryKey:ur}=or.table.core.schema,dr=lr;return or.table.core.count({trans:cr,query:{index:ur,range:dr}}).then(hr=>or.table.core.mutate({trans:cr,type:"deleteRange",range:dr}).then(({failures:fr,lastResult:pr,results:mr,numFailures:gr})=>{if(gr)throw new z("Could not delete some values",Object.keys(fr).map(yr=>fr[yr]),hr-gr);return hr-gr}))}):this.modify(Wt)}}const Wt=(ar,or)=>or.value=null;function Yt(ar,or){return ar<or?-1:ar===or?0:1}function zt(ar,or){return ar>or?-1:ar===or?0:1}function Gt(ar,or,lr){var cr=ar instanceof en?new ar.Collection(ar):ar;return cr._ctx.error=lr?new lr(or):new TypeError(or),cr}function Ht(ar){return new ar.Collection(ar,()=>Zt("")).limit(0)}function Qt(ar,or,lr,cr,ur,dr){for(var hr=Math.min(ar.length,cr.length),fr=-1,pr=0;pr<hr;++pr){var mr=or[pr];if(mr!==cr[pr])return ur(ar[pr],lr[pr])<0?ar.substr(0,pr)+lr[pr]+lr.substr(pr+1):ur(ar[pr],cr[pr])<0?ar.substr(0,pr)+cr[pr]+lr.substr(pr+1):fr>=0?ar.substr(0,fr)+or[fr]+lr.substr(fr+1):null;ur(ar[pr],mr)<0&&(fr=pr)}return hr<cr.length&&dr==="next"?ar+lr.substr(ar.length):hr<ar.length&&dr==="prev"?ar.substr(0,lr.length):fr<0?null:ar.substr(0,fr)+cr[fr]+lr.substr(fr+1)}function Xt(ar,or,lr,cr){var ur,dr,hr,fr,pr,mr,gr,yr=lr.length;if(!lr.every(xr=>typeof xr=="string"))return Gt(ar,bt);function vr(xr){ur=function(wr){return wr==="next"?Ar=>Ar.toUpperCase():Ar=>Ar.toLowerCase()}(xr),dr=function(wr){return wr==="next"?Ar=>Ar.toLowerCase():Ar=>Ar.toUpperCase()}(xr),hr=xr==="next"?Yt:zt;var Er=lr.map(function(wr){return{lower:dr(wr),upper:ur(wr)}}).sort(function(wr,Ar){return hr(wr.lower,Ar.lower)});fr=Er.map(function(wr){return wr.upper}),pr=Er.map(function(wr){return wr.lower}),mr=xr,gr=xr==="next"?"":cr}vr("next");var br=new ar.Collection(ar,()=>Jt(fr[0],pr[yr-1]+cr));br._ondirectionchange=function(xr){vr(xr)};var Sr=0;return br._addAlgorithm(function(xr,Er,wr){var Ar=xr.key;if(typeof Ar!="string")return!1;var Tr=dr(Ar);if(or(Tr,pr,Sr))return!0;for(var Cr=null,kr=Sr;kr<yr;++kr){var Mr=Qt(Ar,Tr,fr[kr],pr[kr],hr,mr);Mr===null&&Cr===null?Sr=kr+1:(Cr===null||hr(Cr,Mr)>0)&&(Cr=Mr)}return Er(Cr!==null?function(){xr.continue(Cr+gr)}:wr),!1}),br}function Jt(ar,or,lr,cr){return{type:2,lower:ar,upper:or,lowerOpen:lr,upperOpen:cr}}function Zt(ar){return{type:1,lower:ar,upper:ar}}class en{get Collection(){return this._ctx.table.db.Collection}between(or,lr,cr,ur){cr=cr!==!1,ur=ur===!0;try{return this._cmp(or,lr)>0||this._cmp(or,lr)===0&&(cr||ur)&&(!cr||!ur)?Ht(this):new this.Collection(this,()=>Jt(or,lr,!cr,!ur))}catch{return Gt(this,gt)}}equals(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Zt(or))}above(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Jt(or,void 0,!0))}aboveOrEqual(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Jt(or,void 0,!1))}below(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Jt(void 0,or,!1,!0))}belowOrEqual(or){return or==null?Gt(this,gt):new this.Collection(this,()=>Jt(void 0,or))}startsWith(or){return typeof or!="string"?Gt(this,bt):this.between(or,or+mt,!0,!0)}startsWithIgnoreCase(or){return or===""?this.startsWith(or):Xt(this,(lr,cr)=>lr.indexOf(cr[0])===0,[or],mt)}equalsIgnoreCase(or){return Xt(this,(lr,cr)=>lr===cr[0],[or],"")}anyOfIgnoreCase(){var or=B.apply(I,arguments);return or.length===0?Ht(this):Xt(this,(lr,cr)=>cr.indexOf(lr)!==-1,or,"")}startsWithAnyOfIgnoreCase(){var or=B.apply(I,arguments);return or.length===0?Ht(this):Xt(this,(lr,cr)=>cr.some(ur=>lr.indexOf(ur)===0),or,mt)}anyOf(){const or=B.apply(I,arguments);let lr=this._cmp;try{or.sort(lr)}catch{return Gt(this,gt)}if(or.length===0)return Ht(this);const cr=new this.Collection(this,()=>Jt(or[0],or[or.length-1]));cr._ondirectionchange=dr=>{lr=dr==="next"?this._ascending:this._descending,or.sort(lr)};let ur=0;return cr._addAlgorithm((dr,hr,fr)=>{const pr=dr.key;for(;lr(pr,or[ur])>0;)if(++ur,ur===or.length)return hr(fr),!1;return lr(pr,or[ur])===0||(hr(()=>{dr.continue(or[ur])}),!1)}),cr}notEqual(or){return this.inAnyRange([[vt,or],[or,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const or=B.apply(I,arguments);if(or.length===0)return new this.Collection(this);try{or.sort(this._ascending)}catch{return Gt(this,gt)}const lr=or.reduce((cr,ur)=>cr?cr.concat([[cr[cr.length-1][1],ur]]):[[vt,ur]],null);return lr.push([or[or.length-1],this.db._maxKey]),this.inAnyRange(lr,{includeLowers:!1,includeUppers:!1})}inAnyRange(or,lr){const cr=this._cmp,ur=this._ascending,dr=this._descending,hr=this._min,fr=this._max;if(or.length===0)return Ht(this);if(!or.every(Ar=>Ar[0]!==void 0&&Ar[1]!==void 0&&ur(Ar[0],Ar[1])<=0))return Gt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);const pr=!lr||lr.includeLowers!==!1,mr=lr&&lr.includeUppers===!0;let gr,yr=ur;function vr(Ar,Tr){return yr(Ar[0],Tr[0])}try{gr=or.reduce(function(Ar,Tr){let Cr=0,kr=Ar.length;for(;Cr<kr;++Cr){const Mr=Ar[Cr];if(cr(Tr[0],Mr[1])<0&&cr(Tr[1],Mr[0])>0){Mr[0]=hr(Mr[0],Tr[0]),Mr[1]=fr(Mr[1],Tr[1]);break}}return Cr===kr&&Ar.push(Tr),Ar},[]),gr.sort(vr)}catch{return Gt(this,gt)}let br=0;const Sr=mr?Ar=>ur(Ar,gr[br][1])>0:Ar=>ur(Ar,gr[br][1])>=0,xr=pr?Ar=>dr(Ar,gr[br][0])>0:Ar=>dr(Ar,gr[br][0])>=0;let Er=Sr;const wr=new this.Collection(this,()=>Jt(gr[0][0],gr[gr.length-1][1],!pr,!mr));return wr._ondirectionchange=Ar=>{Ar==="next"?(Er=Sr,yr=ur):(Er=xr,yr=dr),gr.sort(vr)},wr._addAlgorithm((Ar,Tr,Cr)=>{for(var kr=Ar.key;Er(kr);)if(++br,br===gr.length)return Tr(Cr),!1;return!!function(Mr){return!Sr(Mr)&&!xr(Mr)}(kr)||(this._cmp(kr,gr[br][1])===0||this._cmp(kr,gr[br][0])===0||Tr(()=>{yr===ur?Ar.continue(gr[br][0]):Ar.continue(gr[br][1])}),!1)}),wr}startsWithAnyOf(){const or=B.apply(I,arguments);return or.every(lr=>typeof lr=="string")?or.length===0?Ht(this):this.inAnyRange(or.map(lr=>[lr,lr+mt])):Gt(this,"startsWithAnyOf() only works with strings")}}function tn(ar){return Ye(function(or){return nn(or),ar(or.target.error),!1})}function nn(ar){ar.stopPropagation&&ar.stopPropagation(),ar.preventDefault&&ar.preventDefault()}const rn="storagemutated",sn="x-storagemutated-1",on$1=Dt(null,rn);class an{_lock(){return m(!Oe.global),++this._reculock,this._reculock!==1||Oe.global||(Oe.lockOwnerFor=this),this}_unlock(){if(m(!Oe.global),--this._reculock==0)for(Oe.global||(Oe.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var or=this._blockedFuncs.shift();try{at(or[1],or[0])}catch{}}return this}_locked(){return this._reculock&&Oe.lockOwnerFor!==this}create(or){if(!this.mode)return this;const lr=this.db.idbdb,cr=this.db._state.dbOpenError;if(m(!this.idbtrans),!or&&!lr)switch(cr&&cr.name){case"DatabaseClosedError":throw new X.DatabaseClosed(cr);case"MissingAPIError":throw new X.MissingAPI(cr.message,cr);default:throw new X.OpenFailed(cr)}if(!this.active)throw new X.TransactionInactive;return m(this._completion._state===null),(or=this.idbtrans=or||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):lr.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=Ye(ur=>{nn(ur),this._reject(or.error)}),or.onabort=Ye(ur=>{nn(ur),this.active&&this._reject(new X.Abort(or.error)),this.active=!1,this.on("abort").fire(ur)}),or.oncomplete=Ye(()=>{this.active=!1,this._resolve(),"mutatedParts"in or&&on$1.storagemutated.fire(or.mutatedParts)}),this}_promise(or,lr,cr){if(or==="readwrite"&&this.mode!=="readwrite")return ft(new X.ReadOnly("Transaction is readonly"));if(!this.active)return ft(new X.TransactionInactive);if(this._locked())return new je((dr,hr)=>{this._blockedFuncs.push([()=>{this._promise(or,lr,cr).then(dr,hr)},Oe])});if(cr)return Ze(()=>{var dr=new je((hr,fr)=>{this._lock();const pr=lr(hr,fr,this);pr&&pr.then&&pr.then(hr,fr)});return dr.finally(()=>this._unlock()),dr._lib=!0,dr});var ur=new je((dr,hr)=>{var fr=lr(dr,hr,this);fr&&fr.then&&fr.then(dr,hr)});return ur._lib=!0,ur}_root(){return this.parent?this.parent._root():this}waitFor(or){var lr=this._root();const cr=je.resolve(or);if(lr._waitingFor)lr._waitingFor=lr._waitingFor.then(()=>cr);else{lr._waitingFor=cr,lr._waitingQueue=[];var ur=lr.idbtrans.objectStore(lr.storeNames[0]);(function hr(){for(++lr._spinCount;lr._waitingQueue.length;)lr._waitingQueue.shift()();lr._waitingFor&&(ur.get(-1/0).onsuccess=hr)})()}var dr=lr._waitingFor;return new je((hr,fr)=>{cr.then(pr=>lr._waitingQueue.push(Ye(hr.bind(null,pr))),pr=>lr._waitingQueue.push(Ye(fr.bind(null,pr)))).finally(()=>{lr._waitingFor===dr&&(lr._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))}table(or){const lr=this._memoizedTables||(this._memoizedTables={});if(o(lr,or))return lr[or];const cr=this.schema[or];if(!cr)throw new X.NotFound("Table "+or+" not part of transaction");const ur=new this.db.Table(or,cr,this);return ur.core=this.db.core.table(or),lr[or]=ur,ur}}function un(ar,or,lr,cr,ur,dr,hr){return{name:ar,keyPath:or,unique:lr,multi:cr,auto:ur,compound:dr,src:(lr&&!hr?"&":"")+(cr?"*":"")+(ur?"++":"")+ln(or)}}function ln(ar){return typeof ar=="string"?ar:ar?"["+[].join.call(ar,"+")+"]":""}function cn(ar,or,lr){return{name:ar,primKey:or,indexes:lr,mappedClass:null,idxByName:g(lr,cr=>[cr.name,cr])}}let hn=ar=>{try{return ar.only([[]]),hn=()=>[[]],[[]]}catch{return hn=()=>mt,mt}};function dn(ar){return ar==null?()=>{}:typeof ar=="string"?function(or){return or.split(".").length===1?cr=>cr[or]:cr=>b(cr,or)}(ar):or=>b(or,ar)}function fn(ar){return[].slice.call(ar)}let pn=0;function yn(ar){return ar==null?":id":typeof ar=="string"?ar:`[${ar.join("+")}]`}function mn(ar,or,lr){function cr(pr){if(pr.type===3)return null;if(pr.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:mr,upper:gr,lowerOpen:yr,upperOpen:vr}=pr;return mr===void 0?gr===void 0?null:or.upperBound(gr,!!vr):gr===void 0?or.lowerBound(mr,!!yr):or.bound(mr,gr,!!yr,!!vr)}const{schema:ur,hasGetAll:dr}=function(pr,mr){const gr=fn(pr.objectStoreNames);return{schema:{name:pr.name,tables:gr.map(yr=>mr.objectStore(yr)).map(yr=>{const{keyPath:vr,autoIncrement:br}=yr,Sr=n(vr),xr=vr==null,Er={},wr={name:yr.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:xr,compound:Sr,keyPath:vr,autoIncrement:br,unique:!0,extractKey:dn(vr)},indexes:fn(yr.indexNames).map(Ar=>yr.index(Ar)).map(Ar=>{const{name:Tr,unique:Cr,multiEntry:kr,keyPath:Mr}=Ar,Rr={name:Tr,compound:n(Mr),keyPath:Mr,unique:Cr,multiEntry:kr,extractKey:dn(Mr)};return Er[yn(Mr)]=Rr,Rr}),getIndexByKeyPath:Ar=>Er[yn(Ar)]};return Er[":id"]=wr.primaryKey,vr!=null&&(Er[yn(vr)]=wr.primaryKey),wr})},hasGetAll:gr.length>0&&"getAll"in mr.objectStore(gr[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(ar,lr),hr=ur.tables.map(pr=>function(mr){const gr=mr.name;return{name:gr,schema:mr,mutate:function({trans:yr,type:vr,keys:br,values:Sr,range:xr}){return new Promise((Er,wr)=>{Er=Ye(Er);const Ar=yr.objectStore(gr),Tr=Ar.keyPath==null,Cr=vr==="put"||vr==="add";if(!Cr&&vr!=="delete"&&vr!=="deleteRange")throw new Error("Invalid operation type: "+vr);const{length:kr}=br||Sr||{length:1};if(br&&Sr&&br.length!==Sr.length)throw new Error("Given keys array must have same length as given values array.");if(kr===0)return Er({numFailures:0,failures:{},results:[],lastResult:void 0});let Mr;const Rr=[],Nr=[];let _r=0;const Dr=Ir=>{++_r,nn(Ir)};if(vr==="deleteRange"){if(xr.type===4)return Er({numFailures:_r,failures:Nr,results:[],lastResult:void 0});xr.type===3?Rr.push(Mr=Ar.clear()):Rr.push(Mr=Ar.delete(cr(xr)))}else{const[Ir,$r]=Cr?Tr?[Sr,br]:[Sr,null]:[br,null];if(Cr)for(let Zr=0;Zr<kr;++Zr)Rr.push(Mr=$r&&$r[Zr]!==void 0?Ar[vr](Ir[Zr],$r[Zr]):Ar[vr](Ir[Zr])),Mr.onerror=Dr;else for(let Zr=0;Zr<kr;++Zr)Rr.push(Mr=Ar[vr](Ir[Zr])),Mr.onerror=Dr}const Pr=Ir=>{const $r=Ir.target.result;Rr.forEach((Zr,rs)=>Zr.error!=null&&(Nr[rs]=Zr.error)),Er({numFailures:_r,failures:Nr,results:vr==="delete"?br:Rr.map(Zr=>Zr.result),lastResult:$r})};Mr.onerror=Ir=>{Dr(Ir),Pr(Ir)},Mr.onsuccess=Pr})},getMany:({trans:yr,keys:vr})=>new Promise((br,Sr)=>{br=Ye(br);const xr=yr.objectStore(gr),Er=vr.length,wr=new Array(Er);let Ar,Tr=0,Cr=0;const kr=Rr=>{const Nr=Rr.target;wr[Nr._pos]=Nr.result,++Cr===Tr&&br(wr)},Mr=tn(Sr);for(let Rr=0;Rr<Er;++Rr)vr[Rr]!=null&&(Ar=xr.get(vr[Rr]),Ar._pos=Rr,Ar.onsuccess=kr,Ar.onerror=Mr,++Tr);Tr===0&&br(wr)}),get:({trans:yr,key:vr})=>new Promise((br,Sr)=>{br=Ye(br);const xr=yr.objectStore(gr).get(vr);xr.onsuccess=Er=>br(Er.target.result),xr.onerror=tn(Sr)}),query:function(yr){return vr=>new Promise((br,Sr)=>{br=Ye(br);const{trans:xr,values:Er,limit:wr,query:Ar}=vr,Tr=wr===1/0?void 0:wr,{index:Cr,range:kr}=Ar,Mr=xr.objectStore(gr),Rr=Cr.isPrimaryKey?Mr:Mr.index(Cr.name),Nr=cr(kr);if(wr===0)return br({result:[]});if(yr){const _r=Er?Rr.getAll(Nr,Tr):Rr.getAllKeys(Nr,Tr);_r.onsuccess=Dr=>br({result:Dr.target.result}),_r.onerror=tn(Sr)}else{let _r=0;const Dr=Er||!("openKeyCursor"in Rr)?Rr.openCursor(Nr):Rr.openKeyCursor(Nr),Pr=[];Dr.onsuccess=Ir=>{const $r=Dr.result;return $r?(Pr.push(Er?$r.value:$r.primaryKey),++_r===wr?br({result:Pr}):void $r.continue()):br({result:Pr})},Dr.onerror=tn(Sr)}})}(dr),openCursor:function({trans:yr,values:vr,query:br,reverse:Sr,unique:xr}){return new Promise((Er,wr)=>{Er=Ye(Er);const{index:Ar,range:Tr}=br,Cr=yr.objectStore(gr),kr=Ar.isPrimaryKey?Cr:Cr.index(Ar.name),Mr=Sr?xr?"prevunique":"prev":xr?"nextunique":"next",Rr=vr||!("openKeyCursor"in kr)?kr.openCursor(cr(Tr),Mr):kr.openKeyCursor(cr(Tr),Mr);Rr.onerror=tn(wr),Rr.onsuccess=Ye(Nr=>{const _r=Rr.result;if(!_r)return void Er(null);_r.___id=++pn,_r.done=!1;const Dr=_r.continue.bind(_r);let Pr=_r.continuePrimaryKey;Pr&&(Pr=Pr.bind(_r));const Ir=_r.advance.bind(_r),$r=()=>{throw new Error("Cursor not stopped")};_r.trans=yr,_r.stop=_r.continue=_r.continuePrimaryKey=_r.advance=()=>{throw new Error("Cursor not started")},_r.fail=Ye(wr),_r.next=function(){let Zr=1;return this.start(()=>Zr--?this.continue():this.stop()).then(()=>this)},_r.start=Zr=>{const rs=new Promise((zr,Jr)=>{zr=Ye(zr),Rr.onerror=tn(Jr),_r.fail=Jr,_r.stop=Hr=>{_r.stop=_r.continue=_r.continuePrimaryKey=_r.advance=$r,zr(Hr)}}),qr=()=>{if(Rr.result)try{Zr()}catch(zr){_r.fail(zr)}else _r.done=!0,_r.start=()=>{throw new Error("Cursor behind last entry")},_r.stop()};return Rr.onsuccess=Ye(zr=>{Rr.onsuccess=qr,qr()}),_r.continue=Dr,_r.continuePrimaryKey=Pr,_r.advance=Ir,qr(),rs},Er(_r)},wr)})},count({query:yr,trans:vr}){const{index:br,range:Sr}=yr;return new Promise((xr,Er)=>{const wr=vr.objectStore(gr),Ar=br.isPrimaryKey?wr:wr.index(br.name),Tr=cr(Sr),Cr=Tr?Ar.count(Tr):Ar.count();Cr.onsuccess=Ye(kr=>xr(kr.target.result)),Cr.onerror=tn(Er)})}}}(pr)),fr={};return hr.forEach(pr=>fr[pr.name]=pr),{stack:"dbcore",transaction:ar.transaction.bind(ar),table(pr){if(!fr[pr])throw new Error(`Table '${pr}' not found`);return fr[pr]},MIN_KEY:-1/0,MAX_KEY:hn(or),schema:ur}}function vn({_novip:ar},or){const lr=or.db,cr=function(ur,dr,{IDBKeyRange:hr,indexedDB:fr},pr){return{dbcore:function(gr,yr){return yr.reduce((vr,{create:br})=>({...vr,...br(vr)}),gr)}(mn(dr,hr,pr),ur.dbcore)}}(ar._middlewares,lr,ar._deps,or);ar.core=cr.dbcore,ar.tables.forEach(ur=>{const dr=ur.name;ar.core.schema.tables.some(hr=>hr.name===dr)&&(ur.core=ar.core.table(dr),ar[dr]instanceof ar.Table&&(ar[dr].core=ur.core))})}function gn({_novip:ar},or,lr,cr){lr.forEach(ur=>{const dr=cr[ur];or.forEach(hr=>{const fr=d(hr,ur);(!fr||"value"in fr&&fr.value===void 0)&&(hr===ar.Transaction.prototype||hr instanceof ar.Transaction?l(hr,ur,{get(){return this.table(ur)},set(pr){u(this,ur,{value:pr,writable:!0,configurable:!0,enumerable:!0})}}):hr[ur]=new ar.Table(ur,dr))})})}function bn({_novip:ar},or){or.forEach(lr=>{for(let cr in lr)lr[cr]instanceof ar.Table&&delete lr[cr]})}function _n(ar,or){return ar._cfg.version-or._cfg.version}function wn(ar,or,lr,cr){const ur=ar._dbSchema,dr=ar._createTransaction("readwrite",ar._storeNames,ur);dr.create(lr),dr._completion.catch(cr);const hr=dr._reject.bind(dr),fr=Oe.transless||Oe;Ze(()=>{Oe.trans=dr,Oe.transless=fr,or===0?(t(ur).forEach(pr=>{kn(lr,pr,ur[pr].primKey,ur[pr].indexes)}),vn(ar,lr),je.follow(()=>ar.on.populate.fire(dr)).catch(hr)):function({_novip:pr},mr,gr,yr){const vr=[],br=pr._versions;let Sr=pr._dbSchema=Pn(pr,pr.idbdb,yr),xr=!1;const Er=br.filter(Ar=>Ar._cfg.version>=mr);function wr(){return vr.length?je.resolve(vr.shift()(gr.idbtrans)).then(wr):je.resolve()}return Er.forEach(Ar=>{vr.push(()=>{const Tr=Sr,Cr=Ar._cfg.dbschema;Kn(pr,Tr,yr),Kn(pr,Cr,yr),Sr=pr._dbSchema=Cr;const kr=xn(Tr,Cr);kr.add.forEach(Rr=>{kn(yr,Rr[0],Rr[1].primKey,Rr[1].indexes)}),kr.change.forEach(Rr=>{if(Rr.recreate)throw new X.Upgrade("Not yet support for changing primary key");{const Nr=yr.objectStore(Rr.name);Rr.add.forEach(_r=>En(Nr,_r)),Rr.change.forEach(_r=>{Nr.deleteIndex(_r.name),En(Nr,_r)}),Rr.del.forEach(_r=>Nr.deleteIndex(_r))}});const Mr=Ar._cfg.contentUpgrade;if(Mr&&Ar._cfg.version>mr){vn(pr,yr),gr._memoizedTables={},xr=!0;let Rr=w(Cr);kr.del.forEach(Pr=>{Rr[Pr]=Tr[Pr]}),bn(pr,[pr.Transaction.prototype]),gn(pr,[pr.Transaction.prototype],t(Rr),Rr),gr.schema=Rr;const Nr=T(Mr);let _r;Nr&&et();const Dr=je.follow(()=>{if(_r=Mr(gr),_r&&Nr){var Pr=tt$1.bind(null,null);_r.then(Pr,Pr)}});return _r&&typeof _r.then=="function"?je.resolve(_r):Dr.then(()=>_r)}}),vr.push(Tr=>{(!xr||!xt)&&function(Cr,kr){[].slice.call(kr.db.objectStoreNames).forEach(Mr=>Cr[Mr]==null&&kr.db.deleteObjectStore(Mr))}(Ar._cfg.dbschema,Tr),bn(pr,[pr.Transaction.prototype]),gn(pr,[pr.Transaction.prototype],pr._storeNames,pr._dbSchema),gr.schema=pr._dbSchema})}),wr().then(()=>{var Ar,Tr;Tr=yr,t(Ar=Sr).forEach(Cr=>{Tr.db.objectStoreNames.contains(Cr)||kn(Tr,Cr,Ar[Cr].primKey,Ar[Cr].indexes)})})}(ar,or,dr,lr).catch(hr)})}function xn(ar,or){const lr={del:[],add:[],change:[]};let cr;for(cr in ar)or[cr]||lr.del.push(cr);for(cr in or){const ur=ar[cr],dr=or[cr];if(ur){const hr={name:cr,def:dr,recreate:!1,del:[],add:[],change:[]};if(""+(ur.primKey.keyPath||"")!=""+(dr.primKey.keyPath||"")||ur.primKey.auto!==dr.primKey.auto&&!wt)hr.recreate=!0,lr.change.push(hr);else{const fr=ur.idxByName,pr=dr.idxByName;let mr;for(mr in fr)pr[mr]||hr.del.push(mr);for(mr in pr){const gr=fr[mr],yr=pr[mr];gr?gr.src!==yr.src&&hr.change.push(yr):hr.add.push(yr)}(hr.del.length>0||hr.add.length>0||hr.change.length>0)&&lr.change.push(hr)}}else lr.add.push([cr,dr])}return lr}function kn(ar,or,lr,cr){const ur=ar.db.createObjectStore(or,lr.keyPath?{keyPath:lr.keyPath,autoIncrement:lr.auto}:{autoIncrement:lr.auto});return cr.forEach(dr=>En(ur,dr)),ur}function En(ar,or){ar.createIndex(or.name,or.keyPath,{unique:or.unique,multiEntry:or.multi})}function Pn(ar,or,lr){const cr={};return p(or.objectStoreNames,0).forEach(ur=>{const dr=lr.objectStore(ur);let hr=dr.keyPath;const fr=un(ln(hr),hr||"",!1,!1,!!dr.autoIncrement,hr&&typeof hr!="string",!0),pr=[];for(let gr=0;gr<dr.indexNames.length;++gr){const yr=dr.index(dr.indexNames[gr]);hr=yr.keyPath;var mr=un(yr.name,hr,!!yr.unique,!!yr.multiEntry,!1,hr&&typeof hr!="string",!1);pr.push(mr)}cr[ur]=cn(ur,fr,pr)}),cr}function Kn({_novip:ar},or,lr){const cr=lr.db.objectStoreNames;for(let ur=0;ur<cr.length;++ur){const dr=cr[ur],hr=lr.objectStore(dr);ar._hasGetAll="getAll"in hr;for(let fr=0;fr<hr.indexNames.length;++fr){const pr=hr.indexNames[fr],mr=hr.index(pr).keyPath,gr=typeof mr=="string"?mr:"["+p(mr).join("+")+"]";if(or[dr]){const yr=or[dr].idxByName[gr];yr&&(yr.name=pr,delete or[dr].idxByName[gr],or[dr].idxByName[pr]=yr)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&e.WorkerGlobalScope&&e instanceof e.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(ar._hasGetAll=!1)}class On{_parseStoresSpec(or,lr){t(or).forEach(cr=>{if(or[cr]!==null){var ur=or[cr].split(",").map((hr,fr)=>{const pr=(hr=hr.trim()).replace(/([&*]|\+\+)/g,""),mr=/^\[/.test(pr)?pr.match(/^\[(.*)\]$/)[1].split("+"):pr;return un(pr,mr||null,/\&/.test(hr),/\*/.test(hr),/\+\+/.test(hr),n(mr),fr===0)}),dr=ur.shift();if(dr.multi)throw new X.Schema("Primary key cannot be multi-valued");ur.forEach(hr=>{if(hr.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!hr.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")}),lr[cr]=cn(cr,dr,ur)}})}stores(or){const lr=this.db;this._cfg.storesSource=this._cfg.storesSource?r(this._cfg.storesSource,or):or;const cr=lr._versions,ur={};let dr={};return cr.forEach(hr=>{r(ur,hr._cfg.storesSource),dr=hr._cfg.dbschema={},hr._parseStoresSpec(ur,dr)}),lr._dbSchema=dr,bn(lr,[lr._allTables,lr,lr.Transaction.prototype]),gn(lr,[lr._allTables,lr,lr.Transaction.prototype,this._cfg.tables],t(dr),dr),lr._storeNames=t(dr),this}upgrade(or){return this._cfg.contentUpgrade=ue(this._cfg.contentUpgrade||ee,or),this}}function Sn(ar,or){let lr=ar._dbNamesDB;return lr||(lr=ar._dbNamesDB=new Xn(Pt,{addons:[],indexedDB:ar,IDBKeyRange:or}),lr.version(1).stores({dbnames:"name"})),lr.table("dbnames")}function An(ar){return ar&&typeof ar.databases=="function"}function Cn(ar){return Ze(function(){return Oe.letThrough=!0,ar()})}function jn(){var ar;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(or){var lr=function(){return indexedDB.databases().finally(or)};ar=setInterval(lr,100),lr()}).finally(function(){return clearInterval(ar)}):Promise.resolve()}function Dn(ar){const or=ar._state,{indexedDB:lr}=ar._deps;if(or.isBeingOpened||ar.idbdb)return or.dbReadyPromise.then(()=>or.dbOpenError?ft(or.dbOpenError):ar);R&&(or.openCanceller._stackHolder=q()),or.isBeingOpened=!0,or.dbOpenError=null,or.openComplete=!1;const cr=or.openCanceller;function ur(){if(or.openCanceller!==cr)throw new X.DatabaseClosed("db.open() was cancelled")}let dr=or.dbReadyResolve,hr=null,fr=!1;const pr=()=>new je((mr,gr)=>{if(ur(),!lr)throw new X.MissingAPI;const yr=ar.name,vr=or.autoSchema?lr.open(yr):lr.open(yr,Math.round(10*ar.verno));if(!vr)throw new X.MissingAPI;vr.onerror=tn(gr),vr.onblocked=Ye(ar._fireOnBlocked),vr.onupgradeneeded=Ye(br=>{if(hr=vr.transaction,or.autoSchema&&!ar._options.allowEmptyDB){vr.onerror=nn,hr.abort(),vr.result.close();const xr=lr.deleteDatabase(yr);xr.onsuccess=xr.onerror=Ye(()=>{gr(new X.NoSuchDatabase(`Database ${yr} doesnt exist`))})}else{hr.onerror=tn(gr);var Sr=br.oldVersion>Math.pow(2,62)?0:br.oldVersion;fr=Sr<1,ar._novip.idbdb=vr.result,wn(ar,Sr/10,hr,gr)}},gr),vr.onsuccess=Ye(()=>{hr=null;const br=ar._novip.idbdb=vr.result,Sr=p(br.objectStoreNames);if(Sr.length>0)try{const Er=br.transaction((xr=Sr).length===1?xr[0]:xr,"readonly");or.autoSchema?function({_novip:wr},Ar,Tr){wr.verno=Ar.version/10;const Cr=wr._dbSchema=Pn(0,Ar,Tr);wr._storeNames=p(Ar.objectStoreNames,0),gn(wr,[wr._allTables],t(Cr),Cr)}(ar,br,Er):(Kn(ar,ar._dbSchema,Er),function(wr,Ar){const Tr=xn(Pn(0,wr.idbdb,Ar),wr._dbSchema);return!(Tr.add.length||Tr.change.some(Cr=>Cr.add.length||Cr.change.length))}(ar,Er)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),vn(ar,Er)}catch{}var xr;_t.push(ar),br.onversionchange=Ye(Er=>{or.vcFired=!0,ar.on("versionchange").fire(Er)}),br.onclose=Ye(Er=>{ar.on("close").fire(Er)}),fr&&function({indexedDB:Er,IDBKeyRange:wr},Ar){!An(Er)&&Ar!==Pt&&Sn(Er,wr).put({name:Ar}).catch(ee)}(ar._deps,yr),mr()},gr)}).catch(mr=>mr&&mr.name==="UnknownError"&&or.PR1398_maxLoop>0?(or.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),pr()):je.reject(mr));return je.race([cr,(typeof navigator>"u"?je.resolve():jn()).then(pr)]).then(()=>(ur(),or.onReadyBeingFired=[],je.resolve(Cn(()=>ar.on.ready.fire(ar.vip))).then(function mr(){if(or.onReadyBeingFired.length>0){let gr=or.onReadyBeingFired.reduce(ue,ee);return or.onReadyBeingFired=[],je.resolve(Cn(()=>gr(ar.vip))).then(mr)}}))).finally(()=>{or.onReadyBeingFired=null,or.isBeingOpened=!1}).then(()=>ar).catch(mr=>{or.dbOpenError=mr;try{hr&&hr.abort()}catch{}return cr===or.openCanceller&&ar._close(),ft(mr)}).finally(()=>{or.openComplete=!0,dr()})}function In(ar){var or=dr=>ar.next(dr),lr=ur(or),cr=ur(dr=>ar.throw(dr));function ur(dr){return hr=>{var fr=dr(hr),pr=fr.value;return fr.done?pr:pr&&typeof pr.then=="function"?pr.then(lr,cr):n(pr)?Promise.all(pr).then(lr,cr):lr(pr)}}return ur(or)()}function Bn(ar,or,lr){var cr=arguments.length;if(cr<2)throw new X.InvalidArgument("Too few arguments");for(var ur=new Array(cr-1);--cr;)ur[cr-1]=arguments[cr];return lr=ur.pop(),[ar,k(ur),lr]}function Tn(ar,or,lr,cr,ur){return je.resolve().then(()=>{const dr=Oe.transless||Oe,hr=ar._createTransaction(or,lr,ar._dbSchema,cr),fr={trans:hr,transless:dr};if(cr)hr.idbtrans=cr.idbtrans;else try{hr.create(),ar._state.PR1398_maxLoop=3}catch(yr){return yr.name===H.InvalidState&&ar.isOpen()&&--ar._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),ar._close(),ar.open().then(()=>Tn(ar,or,lr,null,ur))):ft(yr)}const pr=T(ur);let mr;pr&&et();const gr=je.follow(()=>{if(mr=ur.call(hr,hr),mr)if(pr){var yr=tt$1.bind(null,null);mr.then(yr,yr)}else typeof mr.next=="function"&&typeof mr.throw=="function"&&(mr=In(mr))},fr);return(mr&&typeof mr.then=="function"?je.resolve(mr).then(yr=>hr.active?yr:ft(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):gr.then(()=>mr)).then(yr=>(cr&&hr._resolve(),hr._completion.then(()=>yr))).catch(yr=>(hr._reject(yr),ft(yr)))})}function Rn(ar,or,lr){const cr=n(ar)?ar.slice():[ar];for(let ur=0;ur<lr;++ur)cr.push(or);return cr}const Fn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(ar){return{...ar,table(or){const lr=ar.table(or),{schema:cr}=lr,ur={},dr=[];function hr(gr,yr,vr){const br=yn(gr),Sr=ur[br]=ur[br]||[],xr=gr==null?0:typeof gr=="string"?1:gr.length,Er=yr>0,wr={...vr,isVirtual:Er,keyTail:yr,keyLength:xr,extractKey:dn(gr),unique:!Er&&vr.unique};return Sr.push(wr),wr.isPrimaryKey||dr.push(wr),xr>1&&hr(xr===2?gr[0]:gr.slice(0,xr-1),yr+1,vr),Sr.sort((Ar,Tr)=>Ar.keyTail-Tr.keyTail),wr}const fr=hr(cr.primaryKey.keyPath,0,cr.primaryKey);ur[":id"]=[fr];for(const gr of cr.indexes)hr(gr.keyPath,0,gr);function pr(gr){const yr=gr.query.index;return yr.isVirtual?{...gr,query:{index:yr,range:(vr=gr.query.range,br=yr.keyTail,{type:vr.type===1?2:vr.type,lower:Rn(vr.lower,vr.lowerOpen?ar.MAX_KEY:ar.MIN_KEY,br),lowerOpen:!0,upper:Rn(vr.upper,vr.upperOpen?ar.MIN_KEY:ar.MAX_KEY,br),upperOpen:!0})}}:gr;var vr,br}return{...lr,schema:{...cr,primaryKey:fr,indexes:dr,getIndexByKeyPath:function(gr){const yr=ur[yn(gr)];return yr&&yr[0]}},count:gr=>lr.count(pr(gr)),query:gr=>lr.query(pr(gr)),openCursor(gr){const{keyTail:yr,isVirtual:vr,keyLength:br}=gr.query.index;return vr?lr.openCursor(pr(gr)).then(Sr=>Sr&&function(xr){return Object.create(xr,{continue:{value:function(wr){wr!=null?xr.continue(Rn(wr,gr.reverse?ar.MAX_KEY:ar.MIN_KEY,yr)):gr.unique?xr.continue(xr.key.slice(0,br).concat(gr.reverse?ar.MIN_KEY:ar.MAX_KEY,yr)):xr.continue()}},continuePrimaryKey:{value(wr,Ar){xr.continuePrimaryKey(Rn(wr,ar.MAX_KEY,yr),Ar)}},primaryKey:{get:()=>xr.primaryKey},key:{get(){const wr=xr.key;return br===1?wr[0]:wr.slice(0,br)}},value:{get:()=>xr.value}})}(Sr)):lr.openCursor(gr)}}}}}};function Mn(ar,or,lr,cr){return lr=lr||{},cr=cr||"",t(ar).forEach(ur=>{if(o(or,ur)){var dr=ar[ur],hr=or[ur];if(typeof dr=="object"&&typeof hr=="object"&&dr&&hr){const fr=C(dr);fr!==C(hr)?lr[cr+ur]=or[ur]:fr==="Object"?Mn(dr,hr,lr,cr+ur+"."):dr!==hr&&(lr[cr+ur]=or[ur])}else dr!==hr&&(lr[cr+ur]=or[ur])}else lr[cr+ur]=void 0}),t(or).forEach(ur=>{o(ar,ur)||(lr[cr+ur]=or[ur])}),lr}const Nn={stack:"dbcore",name:"HooksMiddleware",level:2,create:ar=>({...ar,table(or){const lr=ar.table(or),{primaryKey:cr}=lr.schema;return{...lr,mutate(dr){const hr=Oe.trans,{deleting:fr,creating:pr,updating:mr}=hr.table(or).hook;switch(dr.type){case"add":if(pr.fire===ee)break;return hr._promise("readwrite",()=>gr(dr),!0);case"put":if(pr.fire===ee&&mr.fire===ee)break;return hr._promise("readwrite",()=>gr(dr),!0);case"delete":if(fr.fire===ee)break;return hr._promise("readwrite",()=>gr(dr),!0);case"deleteRange":if(fr.fire===ee)break;return hr._promise("readwrite",()=>function(vr){return yr(vr.trans,vr.range,1e4)}(dr),!0)}return lr.mutate(dr);function gr(vr){const br=Oe.trans,Sr=vr.keys||function(xr,Er){return Er.type==="delete"?Er.keys:Er.keys||Er.values.map(xr.extractKey)}(cr,vr);if(!Sr)throw new Error("Keys missing");return(vr=vr.type==="add"||vr.type==="put"?{...vr,keys:Sr}:{...vr}).type!=="delete"&&(vr.values=[...vr.values]),vr.keys&&(vr.keys=[...vr.keys]),function(xr,Er,wr){return Er.type==="add"?Promise.resolve([]):xr.getMany({trans:Er.trans,keys:wr,cache:"immutable"})}(lr,vr,Sr).then(xr=>{const Er=Sr.map((wr,Ar)=>{const Tr=xr[Ar],Cr={onerror:null,onsuccess:null};if(vr.type==="delete")fr.fire.call(Cr,wr,Tr,br);else if(vr.type==="add"||Tr===void 0){const kr=pr.fire.call(Cr,wr,vr.values[Ar],br);wr==null&&kr!=null&&(wr=kr,vr.keys[Ar]=wr,cr.outbound||_(vr.values[Ar],cr.keyPath,wr))}else{const kr=Mn(Tr,vr.values[Ar]),Mr=mr.fire.call(Cr,kr,wr,Tr,br);if(Mr){const Rr=vr.values[Ar];Object.keys(Mr).forEach(Nr=>{o(Rr,Nr)?Rr[Nr]=Mr[Nr]:_(Rr,Nr,Mr[Nr])})}}return Cr});return lr.mutate(vr).then(({failures:wr,results:Ar,numFailures:Tr,lastResult:Cr})=>{for(let kr=0;kr<Sr.length;++kr){const Mr=Ar?Ar[kr]:Sr[kr],Rr=Er[kr];Mr==null?Rr.onerror&&Rr.onerror(wr[kr]):Rr.onsuccess&&Rr.onsuccess(vr.type==="put"&&xr[kr]?vr.values[kr]:Mr)}return{failures:wr,results:Ar,numFailures:Tr,lastResult:Cr}}).catch(wr=>(Er.forEach(Ar=>Ar.onerror&&Ar.onerror(wr)),Promise.reject(wr)))})}function yr(vr,br,Sr){return lr.query({trans:vr,values:!1,query:{index:cr,range:br},limit:Sr}).then(({result:xr})=>gr({type:"delete",keys:xr,trans:vr}).then(Er=>Er.numFailures>0?Promise.reject(Er.failures[0]):xr.length<Sr?{failures:[],numFailures:0,lastResult:void 0}:yr(vr,{...br,lower:xr[xr.length-1],lowerOpen:!0},Sr)))}}}}})};function qn(ar,or,lr){try{if(!or||or.keys.length<ar.length)return null;const cr=[];for(let ur=0,dr=0;ur<or.keys.length&&dr<ar.length;++ur)$t(or.keys[ur],ar[dr])===0&&(cr.push(lr?O(or.values[ur]):or.values[ur]),++dr);return cr.length===ar.length?cr:null}catch{return null}}const $n={stack:"dbcore",level:-1,create:ar=>({table:or=>{const lr=ar.table(or);return{...lr,getMany:cr=>{if(!cr.cache)return lr.getMany(cr);const ur=qn(cr.keys,cr.trans._cache,cr.cache==="clone");return ur?je.resolve(ur):lr.getMany(cr).then(dr=>(cr.trans._cache={keys:cr.keys,values:cr.cache==="clone"?O(dr):dr},dr))},mutate:cr=>(cr.type!=="add"&&(cr.trans._cache=null),lr.mutate(cr))}}})};function Un(ar){return!("from"in ar)}const Ln=function(ar,or){if(!this){const lr=new Ln;return ar&&"d"in ar&&r(lr,ar),lr}r(this,arguments.length?{d:1,from:ar,to:arguments.length>1?or:ar}:{d:0})};function Vn(ar,or,lr){const cr=$t(or,lr);if(isNaN(cr))return;if(cr>0)throw RangeError();if(Un(ar))return r(ar,{from:or,to:lr,d:1});const ur=ar.l,dr=ar.r;if($t(lr,ar.from)<0)return ur?Vn(ur,or,lr):ar.l={from:or,to:lr,d:1,l:null,r:null},Gn(ar);if($t(or,ar.to)>0)return dr?Vn(dr,or,lr):ar.r={from:or,to:lr,d:1,l:null,r:null},Gn(ar);$t(or,ar.from)<0&&(ar.from=or,ar.l=null,ar.d=dr?dr.d+1:1),$t(lr,ar.to)>0&&(ar.to=lr,ar.r=null,ar.d=ar.l?ar.l.d+1:1);const hr=!ar.r;ur&&!ar.l&&Wn(ar,ur),dr&&hr&&Wn(ar,dr)}function Wn(ar,or){Un(or)||function lr(cr,{from:ur,to:dr,l:hr,r:fr}){Vn(cr,ur,dr),hr&&lr(cr,hr),fr&&lr(cr,fr)}(ar,or)}function Yn(ar,or){const lr=zn(or);let cr=lr.next();if(cr.done)return!1;let ur=cr.value;const dr=zn(ar);let hr=dr.next(ur.from),fr=hr.value;for(;!cr.done&&!hr.done;){if($t(fr.from,ur.to)<=0&&$t(fr.to,ur.from)>=0)return!0;$t(ur.from,fr.from)<0?ur=(cr=lr.next(fr.from)).value:fr=(hr=dr.next(ur.from)).value}return!1}function zn(ar){let or=Un(ar)?null:{s:0,n:ar};return{next(lr){const cr=arguments.length>0;for(;or;)switch(or.s){case 0:if(or.s=1,cr)for(;or.n.l&&$t(lr,or.n.from)<0;)or={up:or,n:or.n.l,s:1};else for(;or.n.l;)or={up:or,n:or.n.l,s:1};case 1:if(or.s=2,!cr||$t(lr,or.n.to)<=0)return{value:or.n,done:!1};case 2:if(or.n.r){or.s=3,or={up:or,n:or.n.r,s:0};continue}case 3:or=or.up}return{done:!0}}}}function Gn(ar){var or,lr;const cr=(((or=ar.r)===null||or===void 0?void 0:or.d)||0)-(((lr=ar.l)===null||lr===void 0?void 0:lr.d)||0),ur=cr>1?"r":cr<-1?"l":"";if(ur){const dr=ur==="r"?"l":"r",hr={...ar},fr=ar[ur];ar.from=fr.from,ar.to=fr.to,ar[ur]=fr[ur],hr[ur]=fr[dr],ar[dr]=hr,hr.d=Hn(hr)}ar.d=Hn(ar)}function Hn({r:ar,l:or}){return(ar?or?Math.max(ar.d,or.d):ar.d:or?or.d:0)+1}a(Ln.prototype,{add(ar){return Wn(this,ar),this},addKey(ar){return Vn(this,ar,ar),this},addKeys(ar){return ar.forEach(or=>Vn(this,or,or)),this},[j](){return zn(this)}});const Qn={stack:"dbcore",level:0,create:ar=>{const or=ar.schema.name,lr=new Ln(ar.MIN_KEY,ar.MAX_KEY);return{...ar,table:cr=>{const ur=ar.table(cr),{schema:dr}=ur,{primaryKey:hr}=dr,{extractKey:fr,outbound:pr}=hr,mr={...ur,mutate:vr=>{const br=vr.trans,Sr=br.mutatedParts||(br.mutatedParts={}),xr=Mr=>{const Rr=`idb://${or}/${cr}/${Mr}`;return Sr[Rr]||(Sr[Rr]=new Ln)},Er=xr(""),wr=xr(":dels"),{type:Ar}=vr;let[Tr,Cr]=vr.type==="deleteRange"?[vr.range]:vr.type==="delete"?[vr.keys]:vr.values.length<50?[[],vr.values]:[];const kr=vr.trans._cache;return ur.mutate(vr).then(Mr=>{if(n(Tr)){Ar!=="delete"&&(Tr=Mr.results),Er.addKeys(Tr);const Rr=qn(Tr,kr);Rr||Ar==="add"||wr.addKeys(Tr),(Rr||Cr)&&function(Nr,_r,Dr,Pr){function Ir($r){const Zr=Nr($r.name||"");function rs(zr){return zr!=null?$r.extractKey(zr):null}const qr=zr=>$r.multiEntry&&n(zr)?zr.forEach(Jr=>Zr.addKey(Jr)):Zr.addKey(zr);(Dr||Pr).forEach((zr,Jr)=>{const Hr=Dr&&rs(Dr[Jr]),Kr=Pr&&rs(Pr[Jr]);$t(Hr,Kr)!==0&&(Hr!=null&&qr(Hr),Kr!=null&&qr(Kr))})}_r.indexes.forEach(Ir)}(xr,dr,Rr,Cr)}else if(Tr){const Rr={from:Tr.lower,to:Tr.upper};wr.add(Rr),Er.add(Rr)}else Er.add(lr),wr.add(lr),dr.indexes.forEach(Rr=>xr(Rr.name).add(lr));return Mr})}},gr=({query:{index:vr,range:br}})=>{var Sr,xr;return[vr,new Ln((Sr=br.lower)!==null&&Sr!==void 0?Sr:ar.MIN_KEY,(xr=br.upper)!==null&&xr!==void 0?xr:ar.MAX_KEY)]},yr={get:vr=>[hr,new Ln(vr.key)],getMany:vr=>[hr,new Ln().addKeys(vr.keys)],count:gr,query:gr,openCursor:gr};return t(yr).forEach(vr=>{mr[vr]=function(br){const{subscr:Sr}=Oe;if(Sr){const xr=Cr=>{const kr=`idb://${or}/${cr}/${Cr}`;return Sr[kr]||(Sr[kr]=new Ln)},Er=xr(""),wr=xr(":dels"),[Ar,Tr]=yr[vr](br);if(xr(Ar.name||"").add(Tr),!Ar.isPrimaryKey){if(vr!=="count"){const Cr=vr==="query"&&pr&&br.values&&ur.query({...br,values:!1});return ur[vr].apply(this,arguments).then(kr=>{if(vr==="query"){if(pr&&br.values)return Cr.then(({result:Rr})=>(Er.addKeys(Rr),kr));const Mr=br.values?kr.result.map(fr):kr.result;br.values?Er.addKeys(Mr):wr.addKeys(Mr)}else if(vr==="openCursor"){const Mr=kr,Rr=br.values;return Mr&&Object.create(Mr,{key:{get:()=>(wr.addKey(Mr.primaryKey),Mr.key)},primaryKey:{get(){const Nr=Mr.primaryKey;return wr.addKey(Nr),Nr}},value:{get:()=>(Rr&&Er.addKey(Mr.primaryKey),Mr.value)}})}return kr})}wr.add(lr)}}return ur[vr].apply(this,arguments)}}),mr}}}};class Xn{constructor(or,lr){this._middlewares={},this.verno=0;const cr=Xn.dependencies;this._options=lr={addons:Xn.addons,autoOpen:!0,indexedDB:cr.indexedDB,IDBKeyRange:cr.IDBKeyRange,...lr},this._deps={indexedDB:lr.indexedDB,IDBKeyRange:lr.IDBKeyRange};const{addons:ur}=lr;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const dr={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ee,dbReadyPromise:null,cancelOpen:ee,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var hr;dr.dbReadyPromise=new je(fr=>{dr.dbReadyResolve=fr}),dr.openCanceller=new je((fr,pr)=>{dr.cancelOpen=pr}),this._state=dr,this.name=or,this.on=Dt(this,"populate","blocked","versionchange","close",{ready:[ue,ee]}),this.on.ready.subscribe=y(this.on.ready.subscribe,fr=>(pr,mr)=>{Xn.vip(()=>{const gr=this._state;if(gr.openComplete)gr.dbOpenError||je.resolve().then(pr),mr&&fr(pr);else if(gr.onReadyBeingFired)gr.onReadyBeingFired.push(pr),mr&&fr(pr);else{fr(pr);const yr=this;mr||fr(function vr(){yr.on.ready.unsubscribe(pr),yr.on.ready.unsubscribe(vr)})}})}),this.Collection=(hr=this,It(Vt.prototype,function(fr,pr){this.db=hr;let mr=At,gr=null;if(pr)try{mr=pr()}catch(Sr){gr=Sr}const yr=fr._ctx,vr=yr.table,br=vr.hook.reading.fire;this._ctx={table:vr,index:yr.index,isPrimKey:!yr.index||vr.schema.primKey.keyPath&&yr.index===vr.schema.primKey.name,range:mr,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:gr,or:yr.or,valueMapper:br!==te?br:null}})),this.Table=function(fr){return It(jt.prototype,function(pr,mr,gr){this.db=fr,this._tx=gr,this.name=pr,this.schema=mr,this.hook=fr._allTables[pr]?fr._allTables[pr].hook:Dt(null,{creating:[se,ee],reading:[ne,te],updating:[oe,ee],deleting:[ie$2,ee]})})}(this),this.Transaction=function(fr){return It(an.prototype,function(pr,mr,gr,yr,vr){this.db=fr,this.mode=pr,this.storeNames=mr,this.schema=gr,this.chromeTransactionDurability=yr,this.idbtrans=null,this.on=Dt(this,"complete","error","abort"),this.parent=vr||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new je((br,Sr)=>{this._resolve=br,this._reject=Sr}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},br=>{var Sr=this.active;return this.active=!1,this.on.error.fire(br),this.parent?this.parent._reject(br):Sr&&this.idbtrans&&this.idbtrans.abort(),ft(br)})})}(this),this.Version=function(fr){return It(On.prototype,function(pr){this.db=fr,this._cfg={version:pr,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(fr){return It(en.prototype,function(pr,mr,gr){this.db=fr,this._ctx={table:pr,index:mr===":id"?null:mr,or:gr};const yr=fr._deps.indexedDB;if(!yr)throw new X.MissingAPI;this._cmp=this._ascending=yr.cmp.bind(yr),this._descending=(vr,br)=>yr.cmp(br,vr),this._max=(vr,br)=>yr.cmp(vr,br)>0?vr:br,this._min=(vr,br)=>yr.cmp(vr,br)<0?vr:br,this._IDBKeyRange=fr._deps.IDBKeyRange})}(this),this.on("versionchange",fr=>{fr.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",fr=>{!fr.newVersion||fr.newVersion<fr.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${fr.oldVersion/10}`)}),this._maxKey=hn(lr.IDBKeyRange),this._createTransaction=(fr,pr,mr,gr)=>new this.Transaction(fr,pr,mr,this._options.chromeTransactionDurability,gr),this._fireOnBlocked=fr=>{this.on("blocked").fire(fr),_t.filter(pr=>pr.name===this.name&&pr!==this&&!pr._state.vcFired).map(pr=>pr.on("versionchange").fire(fr))},this.use(Fn),this.use(Nn),this.use(Qn),this.use($n),this.vip=Object.create(this,{_vip:{value:!0}}),ur.forEach(fr=>fr(this))}version(or){if(isNaN(or)||or<.1)throw new X.Type("Given version is not a positive number");if(or=Math.round(10*or)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,or);const lr=this._versions;var cr=lr.filter(ur=>ur._cfg.version===or)[0];return cr||(cr=new this.Version(or),lr.push(cr),lr.sort(_n),cr.stores({}),this._state.autoSchema=!1,cr)}_whenReady(or){return this.idbdb&&(this._state.openComplete||Oe.letThrough||this._vip)?or():new je((lr,cr)=>{if(this._state.openComplete)return cr(new X.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void cr(new X.DatabaseClosed);this.open().catch(ee)}this._state.dbReadyPromise.then(lr,cr)}).then(or)}use({stack:or,create:lr,level:cr,name:ur}){ur&&this.unuse({stack:or,name:ur});const dr=this._middlewares[or]||(this._middlewares[or]=[]);return dr.push({stack:or,create:lr,level:cr??10,name:ur}),dr.sort((hr,fr)=>hr.level-fr.level),this}unuse({stack:or,name:lr,create:cr}){return or&&this._middlewares[or]&&(this._middlewares[or]=this._middlewares[or].filter(ur=>cr?ur.create!==cr:!!lr&&ur.name!==lr)),this}open(){return Dn(this)}_close(){const or=this._state,lr=_t.indexOf(this);if(lr>=0&&_t.splice(lr,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}or.dbReadyPromise=new je(cr=>{or.dbReadyResolve=cr}),or.openCanceller=new je((cr,ur)=>{or.cancelOpen=ur})}close(){this._close();const or=this._state;this._options.autoOpen=!1,or.dbOpenError=new X.DatabaseClosed,or.isBeingOpened&&or.cancelOpen(or.dbOpenError)}delete(){const or=arguments.length>0,lr=this._state;return new je((cr,ur)=>{const dr=()=>{this.close();var hr=this._deps.indexedDB.deleteDatabase(this.name);hr.onsuccess=Ye(()=>{(function({indexedDB:fr,IDBKeyRange:pr},mr){!An(fr)&&mr!==Pt&&Sn(fr,pr).delete(mr).catch(ee)})(this._deps,this.name),cr()}),hr.onerror=tn(ur),hr.onblocked=this._fireOnBlocked};if(or)throw new X.InvalidArgument("Arguments not allowed in db.delete()");lr.isBeingOpened?lr.dbReadyPromise.then(dr):dr()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const or=this._state.dbOpenError;return or&&or.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return t(this._allTables).map(or=>this._allTables[or])}transaction(){const or=Bn.apply(this,arguments);return this._transaction.apply(this,or)}_transaction(or,lr,cr){let ur=Oe.trans;ur&&ur.db===this&&or.indexOf("!")===-1||(ur=null);const dr=or.indexOf("?")!==-1;let hr,fr;or=or.replace("!","").replace("?","");try{if(fr=lr.map(mr=>{var gr=mr instanceof this.Table?mr.name:mr;if(typeof gr!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return gr}),or=="r"||or===Kt)hr=Kt;else{if(or!="rw"&&or!=Ot)throw new X.InvalidArgument("Invalid transaction mode: "+or);hr=Ot}if(ur){if(ur.mode===Kt&&hr===Ot){if(!dr)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ur=null}ur&&fr.forEach(mr=>{if(ur&&ur.storeNames.indexOf(mr)===-1){if(!dr)throw new X.SubTransaction("Table "+mr+" not included in parent transaction.");ur=null}}),dr&&ur&&!ur.active&&(ur=null)}}catch(mr){return ur?ur._promise(null,(gr,yr)=>{yr(mr)}):ft(mr)}const pr=Tn.bind(null,this,hr,fr,ur,cr);return ur?ur._promise(hr,pr,"lock"):Oe.trans?at(Oe.transless,()=>this._whenReady(pr)):this._whenReady(pr)}table(or){if(!o(this._allTables,or))throw new X.InvalidTable(`Table ${or} does not exist`);return this._allTables[or]}}const Jn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Zn{constructor(or){this._subscribe=or}subscribe(or,lr,cr){return this._subscribe(or&&typeof or!="function"?or:{next:or,error:lr,complete:cr})}[Jn](){return this}}function er(ar,or){return t(or).forEach(lr=>{Wn(ar[lr]||(ar[lr]=new Ln),or[lr])}),ar}function tr$1(ar){let or,lr=!1;const cr=new Zn(ur=>{const dr=T(ar);let hr=!1,fr={},pr={};const mr={get closed(){return hr},unsubscribe:()=>{hr=!0,on$1.storagemutated.unsubscribe(br)}};ur.start&&ur.start(mr);let gr=!1,yr=!1;function vr(){return t(pr).some(xr=>fr[xr]&&Yn(fr[xr],pr[xr]))}const br=xr=>{er(fr,xr),vr()&&Sr()},Sr=()=>{if(gr||hr)return;fr={};const xr={},Er=function(wr){dr&&et();const Ar=()=>Ze(ar,{subscr:wr,trans:null}),Tr=Oe.trans?at(Oe.transless,Ar):Ar();return dr&&Tr.then(tt$1,tt$1),Tr}(xr);yr||(on$1(rn,br),yr=!0),gr=!0,Promise.resolve(Er).then(wr=>{lr=!0,or=wr,gr=!1,hr||(vr()?Sr():(fr={},pr=xr,ur.next&&ur.next(wr)))},wr=>{gr=!1,lr=!1,ur.error&&ur.error(wr),mr.unsubscribe()})};return Sr(),mr});return cr.hasValue=()=>lr,cr.getValue=()=>or,cr}let nr;try{nr={indexedDB:e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB,IDBKeyRange:e.IDBKeyRange||e.webkitIDBKeyRange}}catch{nr={indexedDB:null,IDBKeyRange:null}}const rr=Xn;function sr(ar){let or=ir;try{ir=!0,on$1.storagemutated.fire(ar)}finally{ir=or}}a(rr,{...Z,delete:ar=>new rr(ar,{addons:[]}).delete(),exists:ar=>new rr(ar,{addons:[]}).open().then(or=>(or.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(ar){try{return function({indexedDB:or,IDBKeyRange:lr}){return An(or)?Promise.resolve(or.databases()).then(cr=>cr.map(ur=>ur.name).filter(ur=>ur!==Pt)):Sn(or,lr).toCollection().primaryKeys()}(rr.dependencies).then(ar)}catch{return ft(new X.MissingAPI)}},defineClass:()=>function(ar){r(this,ar)},ignoreTransaction:ar=>Oe.trans?at(Oe.transless,ar):ar(),vip:Cn,async:function(ar){return function(){try{var or=In(ar.apply(this,arguments));return or&&typeof or.then=="function"?or:je.resolve(or)}catch(lr){return ft(lr)}}},spawn:function(ar,or,lr){try{var cr=In(ar.apply(lr,or||[]));return cr&&typeof cr.then=="function"?cr:je.resolve(cr)}catch(ur){return ft(ur)}},currentTransaction:{get:()=>Oe.trans||null},waitFor:function(ar,or){const lr=je.resolve(typeof ar=="function"?rr.ignoreTransaction(ar):ar).timeout(or||6e4);return Oe.trans?Oe.trans.waitFor(lr):lr},Promise:je,debug:{get:()=>R,set:ar=>{F(ar,ar==="dexie"?()=>!0:Et)}},derive:c,extend:r,props:a,override:y,Events:Dt,on:on$1,liveQuery:tr$1,extendObservabilitySet:er,getByKeyPath:b,setByKeyPath:_,delByKeyPath:function(ar,or){typeof or=="string"?_(ar,or,void 0):"length"in or&&[].map.call(or,function(lr){_(ar,lr,void 0)})},shallowClone:w,deepClone:O,getObjectDiff:Mn,cmp:$t,asap:v,minKey:vt,addons:[],connections:_t,errnames:H,dependencies:nr,semVer:yt,version:yt.split(".").map(ar=>parseInt(ar)).reduce((ar,or,lr)=>ar+or/Math.pow(10,2*lr))}),rr.maxKey=hn(rr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(on$1(rn,ar=>{if(!ir){let or;wt?(or=document.createEvent("CustomEvent"),or.initCustomEvent(sn,!0,!0,ar)):or=new CustomEvent(sn,{detail:ar}),ir=!0,dispatchEvent(or),ir=!1}}),addEventListener(sn,({detail:ar})=>{ir||sr(ar)}));let ir=!1;if(typeof BroadcastChannel<"u"){const ar=new BroadcastChannel(sn);typeof ar.unref=="function"&&ar.unref(),on$1(rn,or=>{ir||ar.postMessage(or)}),ar.onmessage=or=>{or.data&&sr(or.data)}}else if(typeof self<"u"&&typeof navigator<"u"){on$1(rn,or=>{try{ir||(typeof localStorage<"u"&&localStorage.setItem(sn,JSON.stringify({trig:Math.random(),changedParts:or})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(lr=>lr.postMessage({type:sn,changedParts:or})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",or=>{if(or.key===sn){const lr=JSON.parse(or.newValue);lr&&sr(lr.changedParts)}});const ar=self.document&&navigator.serviceWorker;ar&&ar.addEventListener("message",function({data:or}){or&&or.type===sn&&sr(or.changedParts)})}je.rejectionMapper=function(ar,or){if(!ar||ar instanceof W||ar instanceof TypeError||ar instanceof SyntaxError||!ar.name||!J[ar.name])return ar;var lr=new J[ar.name](or||ar.message,ar);return"stack"in ar&&l(lr,"stack",{get:function(){return this.inner.stack}}),lr},F(R,Et);const db=new Xn("EstudiaPlan");db.version(1).stores({subjects:"++id, name, color",notes:"++id, title, content, subjectId, tags, createdAt, updatedAt",tasks:"++id, title, description, dueDate, status, priority, subjectId, createdAt, updatedAt",planner:"++id, title, description, startTime, endTime, day, subjectId, createdAt, updatedAt",grades:"++id, title, score, maxScore, weight, subjectId, date, createdAt",pdfs:"++id, title, file, size, subjectId, createdAt, updatedAt"});db.on("populate",async()=>{await db.subjects.bulkAdd([{name:"Matemáticas",color:"#ef4444"},{name:"Ciencias",color:"#3b82f6"},{name:"Historia",color:"#f59e0b"},{name:"Literatura",color:"#10b981"},{name:"Inglés",color:"#8b5cf6"}])});const useTasksStore=defineStore("tasks",()=>{const ar=ref([]),or=ref(!1),lr=ref(null);async function cr(){or.value=!0;try{ar.value=await db.tasks.toArray(),lr.value=null}catch(yr){console.error("Error fetching tasks:",yr),lr.value="Error al cargar las tareas"}finally{or.value=!1}}async function ur(yr){or.value=!0;try{ar.value=await db.tasks.where("subjectId").equals(yr).toArray(),lr.value=null}catch(vr){console.error("Error fetching tasks by subject:",vr),lr.value="Error al cargar las tareas de la materia"}finally{or.value=!1}}async function dr(yr){try{const vr=new Date().toISOString(),br={...yr,createdAt:vr,updatedAt:vr},Sr=await db.tasks.add(br);if(await cr(),yr.dueDate&&"Notification"in window&&Notification.permission==="granted"){const xr=new Date(yr.dueDate),Er=new Date;if(xr>Er){const wr=new Date(xr);wr.setDate(wr.getDate()-1);const Ar=wr.getTime()-Er.getTime();Ar>0&&setTimeout(()=>{const Tr={body:yr.title,icon:"/studyloop/pwa-192x192.png"};new Notification("Recordatorio de tarea",Tr)},Ar)}}return Sr}catch(vr){throw console.error("Error adding task:",vr),lr.value="Error al añadir la tarea",vr}}async function hr(yr,vr){try{const br=new Date().toISOString();await db.tasks.update(yr,{...vr,updatedAt:br}),await cr()}catch(br){throw console.error("Error updating task:",br),lr.value="Error al actualizar la tarea",br}}async function fr(yr){try{if(!await db.tasks.get(Number(yr)))throw new Error("Tarea no encontrada");await db.tasks.delete(Number(yr)),await cr(),lr.value=null}catch(vr){throw console.error("Error deleting task:",vr),lr.value="Error al eliminar la tarea",vr}}const pr=computed(()=>async yr=>yr?await db.tasks.get(Number(yr)):null);async function mr(){or.value=!0;try{const yr=await db.tasks.toArray(),vr=new Date;vr.setHours(0,0,0,0),ar.value=yr.filter(br=>{const Sr=new Date(br.dueDate);return Sr.setHours(0,0,0,0),Sr>=vr&&br.status!=="completed"}).sort((br,Sr)=>new Date(br.dueDate)-new Date(Sr.dueDate)),lr.value=null}catch(yr){console.error("Error fetching upcoming tasks:",yr),lr.value="Error al cargar las tareas próximas"}finally{or.value=!1}}async function gr(){if("Notification"in window)try{return await Notification.requestPermission()}catch(yr){return console.error("Error requesting notification permission:",yr),"denied"}return"unsupported"}return{tasks:ar,loading:or,error:lr,fetchTasks:cr,fetchTasksBySubject:ur,addTask:dr,updateTask:hr,deleteTask:fr,getTaskById:pr,fetchUpcomingTasks:mr,requestNotificationPermission:gr}}),useNotesStore=defineStore("notes",()=>{const ar=ref([]),or=ref(!1),lr=ref(null);async function cr(){or.value=!0;try{ar.value=await db.notes.toArray(),lr.value=null}catch(gr){console.error("Error fetching notes:",gr),lr.value="Error al cargar los apuntes"}finally{or.value=!1}}async function ur(gr){or.value=!0;try{ar.value=await db.notes.where("subjectId").equals(gr).toArray(),lr.value=null}catch(yr){console.error("Error fetching notes by subject:",yr),lr.value="Error al cargar los apuntes de la materia"}finally{or.value=!1}}async function dr(gr){try{const yr=new Date().toISOString(),vr={...gr,createdAt:yr,updatedAt:yr},br=await db.notes.add(vr);return await cr(),br}catch(yr){throw console.error("Error adding note:",yr),lr.value="Error al añadir el apunte",yr}}async function hr(gr,yr){try{const vr=new Date().toISOString();await db.notes.update(gr,{...yr,updatedAt:vr}),await cr()}catch(vr){throw console.error("Error updating note:",vr),lr.value="Error al actualizar el apunte",vr}}async function fr(gr){try{await db.notes.delete(gr),await cr()}catch(yr){throw console.error("Error deleting note:",yr),lr.value="Error al eliminar el apunte",yr}}const pr=computed(()=>async gr=>gr?await db.notes.get(Number(gr)):null);async function mr(gr){or.value=!0;try{const yr=await db.notes.toArray(),vr=gr.toLowerCase();ar.value=yr.filter(br=>br.title.toLowerCase().includes(vr)||br.content.toLowerCase().includes(vr)||br.tags&&br.tags.some(Sr=>Sr.toLowerCase().includes(vr))),lr.value=null}catch(yr){console.error("Error searching notes:",yr),lr.value="Error al buscar los apuntes"}finally{or.value=!1}}return{notes:ar,loading:or,error:lr,fetchNotes:cr,fetchNotesBySubject:ur,addNote:dr,updateNote:hr,deleteNote:fr,getNoteById:pr,searchNotes:mr}}),useSubjectsStore=defineStore("subjects",()=>{const ar=ref([]),or=ref(!1),lr=ref(null);async function cr(){or.value=!0;try{ar.value=await db.subjects.toArray(),lr.value=null}catch(pr){console.error("Error fetching subjects:",pr),lr.value="Error al cargar las materias"}finally{or.value=!1}}async function ur(pr){try{const mr=await db.subjects.add(pr);return await cr(),mr}catch(mr){throw console.error("Error adding subject:",mr),lr.value="Error al añadir la materia",mr}}async function dr(pr,mr){try{await db.subjects.update(pr,mr),await cr()}catch(gr){throw console.error("Error updating subject:",gr),lr.value="Error al actualizar la materia",gr}}async function hr(pr){try{await db.subjects.delete(pr),await cr()}catch(mr){throw console.error("Error deleting subject:",mr),lr.value="Error al eliminar la materia",mr}}const fr=computed(()=>pr=>ar.value.find(mr=>mr.id===pr));return{subjects:ar,loading:or,error:lr,fetchSubjects:cr,addSubject:ur,updateSubject:dr,deleteSubject:hr,getSubjectById:fr}}),usePlannerStore=defineStore("planner",()=>{const ar=ref([]),or=ref(!1),lr=ref(null);async function cr(){or.value=!0;try{ar.value=await db.planner.toArray(),lr.value=null}catch(pr){console.error("Error fetching events:",pr),lr.value="Error al cargar los eventos"}finally{or.value=!1}}async function ur(pr){or.value=!0;try{ar.value=await db.planner.where("day").equals(pr).toArray(),lr.value=null}catch(mr){console.error("Error fetching events by day:",mr),lr.value="Error al cargar los eventos del día"}finally{or.value=!1}}async function dr(pr){try{const mr=new Date().toISOString(),gr={...pr,createdAt:mr,updatedAt:mr},yr=await db.planner.add(gr);return await cr(),yr}catch(mr){throw console.error("Error adding event:",mr),lr.value="Error al añadir el evento",mr}}async function hr(pr,mr){try{const gr=new Date().toISOString();await db.planner.update(pr,{...mr,updatedAt:gr}),await cr()}catch(gr){throw console.error("Error updating event:",gr),lr.value="Error al actualizar el evento",gr}}async function fr(pr){try{await db.planner.delete(pr),await cr()}catch(mr){throw console.error("Error deleting event:",mr),lr.value="Error al eliminar el evento",mr}}return{events:ar,loading:or,error:lr,fetchEvents:cr,fetchEventsByDay:ur,addEvent:dr,updateEvent:hr,deleteEvent:fr}});function toDate(ar){const or=Object.prototype.toString.call(ar);return ar instanceof Date||typeof ar=="object"&&or==="[object Date]"?new ar.constructor(+ar):typeof ar=="number"||or==="[object Number]"||typeof ar=="string"||or==="[object String]"?new Date(ar):new Date(NaN)}function constructFrom(ar,or){return ar instanceof Date?new ar.constructor(or):new Date(or)}const millisecondsInWeek=6048e5,millisecondsInDay=864e5,millisecondsInMinute=6e4,millisecondsInHour=36e5;let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(ar,or){var fr,pr,mr,gr;const lr=getDefaultOptions(),cr=(or==null?void 0:or.weekStartsOn)??((pr=(fr=or==null?void 0:or.locale)==null?void 0:fr.options)==null?void 0:pr.weekStartsOn)??lr.weekStartsOn??((gr=(mr=lr.locale)==null?void 0:mr.options)==null?void 0:gr.weekStartsOn)??0,ur=toDate(ar),dr=ur.getDay(),hr=(dr<cr?7:0)+dr-cr;return ur.setDate(ur.getDate()-hr),ur.setHours(0,0,0,0),ur}function startOfISOWeek(ar){return startOfWeek(ar,{weekStartsOn:1})}function getISOWeekYear(ar){const or=toDate(ar),lr=or.getFullYear(),cr=constructFrom(ar,0);cr.setFullYear(lr+1,0,4),cr.setHours(0,0,0,0);const ur=startOfISOWeek(cr),dr=constructFrom(ar,0);dr.setFullYear(lr,0,4),dr.setHours(0,0,0,0);const hr=startOfISOWeek(dr);return or.getTime()>=ur.getTime()?lr+1:or.getTime()>=hr.getTime()?lr:lr-1}function startOfDay(ar){const or=toDate(ar);return or.setHours(0,0,0,0),or}function getTimezoneOffsetInMilliseconds(ar){const or=toDate(ar),lr=new Date(Date.UTC(or.getFullYear(),or.getMonth(),or.getDate(),or.getHours(),or.getMinutes(),or.getSeconds(),or.getMilliseconds()));return lr.setUTCFullYear(or.getFullYear()),+ar-+lr}function differenceInCalendarDays(ar,or){const lr=startOfDay(ar),cr=startOfDay(or),ur=+lr-getTimezoneOffsetInMilliseconds(lr),dr=+cr-getTimezoneOffsetInMilliseconds(cr);return Math.round((ur-dr)/millisecondsInDay)}function startOfISOWeekYear(ar){const or=getISOWeekYear(ar),lr=constructFrom(ar,0);return lr.setFullYear(or,0,4),lr.setHours(0,0,0,0),startOfISOWeek(lr)}function isDate(ar){return ar instanceof Date||typeof ar=="object"&&Object.prototype.toString.call(ar)==="[object Date]"}function isValid(ar){if(!isDate(ar)&&typeof ar!="number")return!1;const or=toDate(ar);return!isNaN(Number(or))}function startOfYear(ar){const or=toDate(ar),lr=constructFrom(ar,0);return lr.setFullYear(or.getFullYear(),0,1),lr.setHours(0,0,0,0),lr}const formatDistanceLocale$1={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance$1=(ar,or,lr)=>{let cr;const ur=formatDistanceLocale$1[ar];return typeof ur=="string"?cr=ur:or===1?cr=ur.one:cr=ur.other.replace("{{count}}",or.toString()),lr!=null&&lr.addSuffix?lr.comparison&&lr.comparison>0?"in "+cr:cr+" ago":cr};function buildFormatLongFn(ar){return(or={})=>{const lr=or.width?String(or.width):ar.defaultWidth;return ar.formats[lr]||ar.formats[ar.defaultWidth]}}const dateFormats$1={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats$1={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats$1={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong$1={date:buildFormatLongFn({formats:dateFormats$1,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats$1,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats$1,defaultWidth:"full"})},formatRelativeLocale$1={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative$1=(ar,or,lr,cr)=>formatRelativeLocale$1[ar];function buildLocalizeFn(ar){return(or,lr)=>{const cr=lr!=null&&lr.context?String(lr.context):"standalone";let ur;if(cr==="formatting"&&ar.formattingValues){const hr=ar.defaultFormattingWidth||ar.defaultWidth,fr=lr!=null&&lr.width?String(lr.width):hr;ur=ar.formattingValues[fr]||ar.formattingValues[hr]}else{const hr=ar.defaultWidth,fr=lr!=null&&lr.width?String(lr.width):ar.defaultWidth;ur=ar.values[fr]||ar.values[hr]}const dr=ar.argumentCallback?ar.argumentCallback(or):or;return ur[dr]}}const eraValues$1={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues$1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues$1={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues$1={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues$1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues$1={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber$1=(ar,or)=>{const lr=Number(ar),cr=lr%100;if(cr>20||cr<10)switch(cr%10){case 1:return lr+"st";case 2:return lr+"nd";case 3:return lr+"rd"}return lr+"th"},localize$1={ordinalNumber:ordinalNumber$1,era:buildLocalizeFn({values:eraValues$1,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues$1,defaultWidth:"wide",argumentCallback:ar=>ar-1}),month:buildLocalizeFn({values:monthValues$1,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues$1,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues$1,defaultWidth:"wide",formattingValues:formattingDayPeriodValues$1,defaultFormattingWidth:"wide"})};function buildMatchFn(ar){return(or,lr={})=>{const cr=lr.width,ur=cr&&ar.matchPatterns[cr]||ar.matchPatterns[ar.defaultMatchWidth],dr=or.match(ur);if(!dr)return null;const hr=dr[0],fr=cr&&ar.parsePatterns[cr]||ar.parsePatterns[ar.defaultParseWidth],pr=Array.isArray(fr)?findIndex(fr,yr=>yr.test(hr)):findKey(fr,yr=>yr.test(hr));let mr;mr=ar.valueCallback?ar.valueCallback(pr):pr,mr=lr.valueCallback?lr.valueCallback(mr):mr;const gr=or.slice(hr.length);return{value:mr,rest:gr}}}function findKey(ar,or){for(const lr in ar)if(Object.prototype.hasOwnProperty.call(ar,lr)&&or(ar[lr]))return lr}function findIndex(ar,or){for(let lr=0;lr<ar.length;lr++)if(or(ar[lr]))return lr}function buildMatchPatternFn(ar){return(or,lr={})=>{const cr=or.match(ar.matchPattern);if(!cr)return null;const ur=cr[0],dr=or.match(ar.parsePattern);if(!dr)return null;let hr=ar.valueCallback?ar.valueCallback(dr[0]):dr[0];hr=lr.valueCallback?lr.valueCallback(hr):hr;const fr=or.slice(ur.length);return{value:hr,rest:fr}}}const matchOrdinalNumberPattern$1=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern$1=/\d+/i,matchEraPatterns$1={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns$1={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns$1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns$1={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns$1={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns$1={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns$1={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns$1={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns$1={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns$1={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match$1={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern$1,parsePattern:parseOrdinalNumberPattern$1,valueCallback:ar=>parseInt(ar,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns$1,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns$1,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns$1,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns$1,defaultParseWidth:"any",valueCallback:ar=>ar+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns$1,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns$1,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns$1,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns$1,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns$1,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns$1,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance:formatDistance$1,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(ar){const or=toDate(ar);return differenceInCalendarDays(or,startOfYear(or))+1}function getISOWeek(ar){const or=toDate(ar),lr=+startOfISOWeek(or)-+startOfISOWeekYear(or);return Math.round(lr/millisecondsInWeek)+1}function getWeekYear(ar,or){var gr,yr,vr,br;const lr=toDate(ar),cr=lr.getFullYear(),ur=getDefaultOptions(),dr=(or==null?void 0:or.firstWeekContainsDate)??((yr=(gr=or==null?void 0:or.locale)==null?void 0:gr.options)==null?void 0:yr.firstWeekContainsDate)??ur.firstWeekContainsDate??((br=(vr=ur.locale)==null?void 0:vr.options)==null?void 0:br.firstWeekContainsDate)??1,hr=constructFrom(ar,0);hr.setFullYear(cr+1,0,dr),hr.setHours(0,0,0,0);const fr=startOfWeek(hr,or),pr=constructFrom(ar,0);pr.setFullYear(cr,0,dr),pr.setHours(0,0,0,0);const mr=startOfWeek(pr,or);return lr.getTime()>=fr.getTime()?cr+1:lr.getTime()>=mr.getTime()?cr:cr-1}function startOfWeekYear(ar,or){var fr,pr,mr,gr;const lr=getDefaultOptions(),cr=(or==null?void 0:or.firstWeekContainsDate)??((pr=(fr=or==null?void 0:or.locale)==null?void 0:fr.options)==null?void 0:pr.firstWeekContainsDate)??lr.firstWeekContainsDate??((gr=(mr=lr.locale)==null?void 0:mr.options)==null?void 0:gr.firstWeekContainsDate)??1,ur=getWeekYear(ar,or),dr=constructFrom(ar,0);return dr.setFullYear(ur,0,cr),dr.setHours(0,0,0,0),startOfWeek(dr,or)}function getWeek(ar,or){const lr=toDate(ar),cr=+startOfWeek(lr,or)-+startOfWeekYear(lr,or);return Math.round(cr/millisecondsInWeek)+1}function addLeadingZeros(ar,or){const lr=ar<0?"-":"",cr=Math.abs(ar).toString().padStart(or,"0");return lr+cr}const lightFormatters={y(ar,or){const lr=ar.getFullYear(),cr=lr>0?lr:1-lr;return addLeadingZeros(or==="yy"?cr%100:cr,or.length)},M(ar,or){const lr=ar.getMonth();return or==="M"?String(lr+1):addLeadingZeros(lr+1,2)},d(ar,or){return addLeadingZeros(ar.getDate(),or.length)},a(ar,or){const lr=ar.getHours()/12>=1?"pm":"am";switch(or){case"a":case"aa":return lr.toUpperCase();case"aaa":return lr;case"aaaaa":return lr[0];case"aaaa":default:return lr==="am"?"a.m.":"p.m."}},h(ar,or){return addLeadingZeros(ar.getHours()%12||12,or.length)},H(ar,or){return addLeadingZeros(ar.getHours(),or.length)},m(ar,or){return addLeadingZeros(ar.getMinutes(),or.length)},s(ar,or){return addLeadingZeros(ar.getSeconds(),or.length)},S(ar,or){const lr=or.length,cr=ar.getMilliseconds(),ur=Math.trunc(cr*Math.pow(10,lr-3));return addLeadingZeros(ur,or.length)}},dayPeriodEnum={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(ar,or,lr){const cr=ar.getFullYear()>0?1:0;switch(or){case"G":case"GG":case"GGG":return lr.era(cr,{width:"abbreviated"});case"GGGGG":return lr.era(cr,{width:"narrow"});case"GGGG":default:return lr.era(cr,{width:"wide"})}},y:function(ar,or,lr){if(or==="yo"){const cr=ar.getFullYear(),ur=cr>0?cr:1-cr;return lr.ordinalNumber(ur,{unit:"year"})}return lightFormatters.y(ar,or)},Y:function(ar,or,lr,cr){const ur=getWeekYear(ar,cr),dr=ur>0?ur:1-ur;if(or==="YY"){const hr=dr%100;return addLeadingZeros(hr,2)}return or==="Yo"?lr.ordinalNumber(dr,{unit:"year"}):addLeadingZeros(dr,or.length)},R:function(ar,or){const lr=getISOWeekYear(ar);return addLeadingZeros(lr,or.length)},u:function(ar,or){const lr=ar.getFullYear();return addLeadingZeros(lr,or.length)},Q:function(ar,or,lr){const cr=Math.ceil((ar.getMonth()+1)/3);switch(or){case"Q":return String(cr);case"QQ":return addLeadingZeros(cr,2);case"Qo":return lr.ordinalNumber(cr,{unit:"quarter"});case"QQQ":return lr.quarter(cr,{width:"abbreviated",context:"formatting"});case"QQQQQ":return lr.quarter(cr,{width:"narrow",context:"formatting"});case"QQQQ":default:return lr.quarter(cr,{width:"wide",context:"formatting"})}},q:function(ar,or,lr){const cr=Math.ceil((ar.getMonth()+1)/3);switch(or){case"q":return String(cr);case"qq":return addLeadingZeros(cr,2);case"qo":return lr.ordinalNumber(cr,{unit:"quarter"});case"qqq":return lr.quarter(cr,{width:"abbreviated",context:"standalone"});case"qqqqq":return lr.quarter(cr,{width:"narrow",context:"standalone"});case"qqqq":default:return lr.quarter(cr,{width:"wide",context:"standalone"})}},M:function(ar,or,lr){const cr=ar.getMonth();switch(or){case"M":case"MM":return lightFormatters.M(ar,or);case"Mo":return lr.ordinalNumber(cr+1,{unit:"month"});case"MMM":return lr.month(cr,{width:"abbreviated",context:"formatting"});case"MMMMM":return lr.month(cr,{width:"narrow",context:"formatting"});case"MMMM":default:return lr.month(cr,{width:"wide",context:"formatting"})}},L:function(ar,or,lr){const cr=ar.getMonth();switch(or){case"L":return String(cr+1);case"LL":return addLeadingZeros(cr+1,2);case"Lo":return lr.ordinalNumber(cr+1,{unit:"month"});case"LLL":return lr.month(cr,{width:"abbreviated",context:"standalone"});case"LLLLL":return lr.month(cr,{width:"narrow",context:"standalone"});case"LLLL":default:return lr.month(cr,{width:"wide",context:"standalone"})}},w:function(ar,or,lr,cr){const ur=getWeek(ar,cr);return or==="wo"?lr.ordinalNumber(ur,{unit:"week"}):addLeadingZeros(ur,or.length)},I:function(ar,or,lr){const cr=getISOWeek(ar);return or==="Io"?lr.ordinalNumber(cr,{unit:"week"}):addLeadingZeros(cr,or.length)},d:function(ar,or,lr){return or==="do"?lr.ordinalNumber(ar.getDate(),{unit:"date"}):lightFormatters.d(ar,or)},D:function(ar,or,lr){const cr=getDayOfYear(ar);return or==="Do"?lr.ordinalNumber(cr,{unit:"dayOfYear"}):addLeadingZeros(cr,or.length)},E:function(ar,or,lr){const cr=ar.getDay();switch(or){case"E":case"EE":case"EEE":return lr.day(cr,{width:"abbreviated",context:"formatting"});case"EEEEE":return lr.day(cr,{width:"narrow",context:"formatting"});case"EEEEEE":return lr.day(cr,{width:"short",context:"formatting"});case"EEEE":default:return lr.day(cr,{width:"wide",context:"formatting"})}},e:function(ar,or,lr,cr){const ur=ar.getDay(),dr=(ur-cr.weekStartsOn+8)%7||7;switch(or){case"e":return String(dr);case"ee":return addLeadingZeros(dr,2);case"eo":return lr.ordinalNumber(dr,{unit:"day"});case"eee":return lr.day(ur,{width:"abbreviated",context:"formatting"});case"eeeee":return lr.day(ur,{width:"narrow",context:"formatting"});case"eeeeee":return lr.day(ur,{width:"short",context:"formatting"});case"eeee":default:return lr.day(ur,{width:"wide",context:"formatting"})}},c:function(ar,or,lr,cr){const ur=ar.getDay(),dr=(ur-cr.weekStartsOn+8)%7||7;switch(or){case"c":return String(dr);case"cc":return addLeadingZeros(dr,or.length);case"co":return lr.ordinalNumber(dr,{unit:"day"});case"ccc":return lr.day(ur,{width:"abbreviated",context:"standalone"});case"ccccc":return lr.day(ur,{width:"narrow",context:"standalone"});case"cccccc":return lr.day(ur,{width:"short",context:"standalone"});case"cccc":default:return lr.day(ur,{width:"wide",context:"standalone"})}},i:function(ar,or,lr){const cr=ar.getDay(),ur=cr===0?7:cr;switch(or){case"i":return String(ur);case"ii":return addLeadingZeros(ur,or.length);case"io":return lr.ordinalNumber(ur,{unit:"day"});case"iii":return lr.day(cr,{width:"abbreviated",context:"formatting"});case"iiiii":return lr.day(cr,{width:"narrow",context:"formatting"});case"iiiiii":return lr.day(cr,{width:"short",context:"formatting"});case"iiii":default:return lr.day(cr,{width:"wide",context:"formatting"})}},a:function(ar,or,lr){const ur=ar.getHours()/12>=1?"pm":"am";switch(or){case"a":case"aa":return lr.dayPeriod(ur,{width:"abbreviated",context:"formatting"});case"aaa":return lr.dayPeriod(ur,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return lr.dayPeriod(ur,{width:"narrow",context:"formatting"});case"aaaa":default:return lr.dayPeriod(ur,{width:"wide",context:"formatting"})}},b:function(ar,or,lr){const cr=ar.getHours();let ur;switch(cr===12?ur=dayPeriodEnum.noon:cr===0?ur=dayPeriodEnum.midnight:ur=cr/12>=1?"pm":"am",or){case"b":case"bb":return lr.dayPeriod(ur,{width:"abbreviated",context:"formatting"});case"bbb":return lr.dayPeriod(ur,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return lr.dayPeriod(ur,{width:"narrow",context:"formatting"});case"bbbb":default:return lr.dayPeriod(ur,{width:"wide",context:"formatting"})}},B:function(ar,or,lr){const cr=ar.getHours();let ur;switch(cr>=17?ur=dayPeriodEnum.evening:cr>=12?ur=dayPeriodEnum.afternoon:cr>=4?ur=dayPeriodEnum.morning:ur=dayPeriodEnum.night,or){case"B":case"BB":case"BBB":return lr.dayPeriod(ur,{width:"abbreviated",context:"formatting"});case"BBBBB":return lr.dayPeriod(ur,{width:"narrow",context:"formatting"});case"BBBB":default:return lr.dayPeriod(ur,{width:"wide",context:"formatting"})}},h:function(ar,or,lr){if(or==="ho"){let cr=ar.getHours()%12;return cr===0&&(cr=12),lr.ordinalNumber(cr,{unit:"hour"})}return lightFormatters.h(ar,or)},H:function(ar,or,lr){return or==="Ho"?lr.ordinalNumber(ar.getHours(),{unit:"hour"}):lightFormatters.H(ar,or)},K:function(ar,or,lr){const cr=ar.getHours()%12;return or==="Ko"?lr.ordinalNumber(cr,{unit:"hour"}):addLeadingZeros(cr,or.length)},k:function(ar,or,lr){let cr=ar.getHours();return cr===0&&(cr=24),or==="ko"?lr.ordinalNumber(cr,{unit:"hour"}):addLeadingZeros(cr,or.length)},m:function(ar,or,lr){return or==="mo"?lr.ordinalNumber(ar.getMinutes(),{unit:"minute"}):lightFormatters.m(ar,or)},s:function(ar,or,lr){return or==="so"?lr.ordinalNumber(ar.getSeconds(),{unit:"second"}):lightFormatters.s(ar,or)},S:function(ar,or){return lightFormatters.S(ar,or)},X:function(ar,or,lr){const cr=ar.getTimezoneOffset();if(cr===0)return"Z";switch(or){case"X":return formatTimezoneWithOptionalMinutes(cr);case"XXXX":case"XX":return formatTimezone(cr);case"XXXXX":case"XXX":default:return formatTimezone(cr,":")}},x:function(ar,or,lr){const cr=ar.getTimezoneOffset();switch(or){case"x":return formatTimezoneWithOptionalMinutes(cr);case"xxxx":case"xx":return formatTimezone(cr);case"xxxxx":case"xxx":default:return formatTimezone(cr,":")}},O:function(ar,or,lr){const cr=ar.getTimezoneOffset();switch(or){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(cr,":");case"OOOO":default:return"GMT"+formatTimezone(cr,":")}},z:function(ar,or,lr){const cr=ar.getTimezoneOffset();switch(or){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(cr,":");case"zzzz":default:return"GMT"+formatTimezone(cr,":")}},t:function(ar,or,lr){const cr=Math.trunc(ar.getTime()/1e3);return addLeadingZeros(cr,or.length)},T:function(ar,or,lr){const cr=ar.getTime();return addLeadingZeros(cr,or.length)}};function formatTimezoneShort(ar,or=""){const lr=ar>0?"-":"+",cr=Math.abs(ar),ur=Math.trunc(cr/60),dr=cr%60;return dr===0?lr+String(ur):lr+String(ur)+or+addLeadingZeros(dr,2)}function formatTimezoneWithOptionalMinutes(ar,or){return ar%60===0?(ar>0?"-":"+")+addLeadingZeros(Math.abs(ar)/60,2):formatTimezone(ar,or)}function formatTimezone(ar,or=""){const lr=ar>0?"-":"+",cr=Math.abs(ar),ur=addLeadingZeros(Math.trunc(cr/60),2),dr=addLeadingZeros(cr%60,2);return lr+ur+or+dr}const dateLongFormatter=(ar,or)=>{switch(ar){case"P":return or.date({width:"short"});case"PP":return or.date({width:"medium"});case"PPP":return or.date({width:"long"});case"PPPP":default:return or.date({width:"full"})}},timeLongFormatter=(ar,or)=>{switch(ar){case"p":return or.time({width:"short"});case"pp":return or.time({width:"medium"});case"ppp":return or.time({width:"long"});case"pppp":default:return or.time({width:"full"})}},dateTimeLongFormatter=(ar,or)=>{const lr=ar.match(/(P+)(p+)?/)||[],cr=lr[1],ur=lr[2];if(!ur)return dateLongFormatter(ar,or);let dr;switch(cr){case"P":dr=or.dateTime({width:"short"});break;case"PP":dr=or.dateTime({width:"medium"});break;case"PPP":dr=or.dateTime({width:"long"});break;case"PPPP":default:dr=or.dateTime({width:"full"});break}return dr.replace("{{date}}",dateLongFormatter(cr,or)).replace("{{time}}",timeLongFormatter(ur,or))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(ar){return dayOfYearTokenRE.test(ar)}function isProtectedWeekYearToken(ar){return weekYearTokenRE.test(ar)}function warnOrThrowProtectedError(ar,or,lr){const cr=message(ar,or,lr);if(console.warn(cr),throwTokens.includes(ar))throw new RangeError(cr)}function message(ar,or,lr){const cr=ar[0]==="Y"?"years":"days of the month";return`Use \`${ar.toLowerCase()}\` instead of \`${ar}\` (in \`${or}\`) for formatting ${cr} to the input \`${lr}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(ar,or,lr){var gr,yr,vr,br,Sr,xr,Er,wr;const cr=getDefaultOptions(),ur=(lr==null?void 0:lr.locale)??cr.locale??enUS,dr=(lr==null?void 0:lr.firstWeekContainsDate)??((yr=(gr=lr==null?void 0:lr.locale)==null?void 0:gr.options)==null?void 0:yr.firstWeekContainsDate)??cr.firstWeekContainsDate??((br=(vr=cr.locale)==null?void 0:vr.options)==null?void 0:br.firstWeekContainsDate)??1,hr=(lr==null?void 0:lr.weekStartsOn)??((xr=(Sr=lr==null?void 0:lr.locale)==null?void 0:Sr.options)==null?void 0:xr.weekStartsOn)??cr.weekStartsOn??((wr=(Er=cr.locale)==null?void 0:Er.options)==null?void 0:wr.weekStartsOn)??0,fr=toDate(ar);if(!isValid(fr))throw new RangeError("Invalid time value");let pr=or.match(longFormattingTokensRegExp).map(Ar=>{const Tr=Ar[0];if(Tr==="p"||Tr==="P"){const Cr=longFormatters[Tr];return Cr(Ar,ur.formatLong)}return Ar}).join("").match(formattingTokensRegExp).map(Ar=>{if(Ar==="''")return{isToken:!1,value:"'"};const Tr=Ar[0];if(Tr==="'")return{isToken:!1,value:cleanEscapedString(Ar)};if(formatters[Tr])return{isToken:!0,value:Ar};if(Tr.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Tr+"`");return{isToken:!1,value:Ar}});ur.localize.preprocessor&&(pr=ur.localize.preprocessor(fr,pr));const mr={firstWeekContainsDate:dr,weekStartsOn:hr,locale:ur};return pr.map(Ar=>{if(!Ar.isToken)return Ar.value;const Tr=Ar.value;(!(lr!=null&&lr.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(Tr)||!(lr!=null&&lr.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(Tr))&&warnOrThrowProtectedError(Tr,or,String(ar));const Cr=formatters[Tr[0]];return Cr(fr,Tr,ur.localize,mr)}).join("")}function cleanEscapedString(ar){const or=ar.match(escapedStringRegExp);return or?or[1].replace(doubleQuoteRegExp,"'"):ar}function isWithinInterval(ar,or){const lr=+toDate(ar),[cr,ur]=[+toDate(or.start),+toDate(or.end)].sort((dr,hr)=>dr-hr);return lr>=cr&&lr<=ur}function parseISO(ar,or){const cr=splitDateString(ar);let ur;if(cr.date){const pr=parseYear(cr.date,2);ur=parseDate(pr.restDateString,pr.year)}if(!ur||isNaN(ur.getTime()))return new Date(NaN);const dr=ur.getTime();let hr=0,fr;if(cr.time&&(hr=parseTime(cr.time),isNaN(hr)))return new Date(NaN);if(cr.timezone){if(fr=parseTimezone(cr.timezone),isNaN(fr))return new Date(NaN)}else{const pr=new Date(dr+hr),mr=new Date(0);return mr.setFullYear(pr.getUTCFullYear(),pr.getUTCMonth(),pr.getUTCDate()),mr.setHours(pr.getUTCHours(),pr.getUTCMinutes(),pr.getUTCSeconds(),pr.getUTCMilliseconds()),mr}return new Date(dr+hr+fr)}const patterns={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dateRegex=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,timeRegex=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,timezoneRegex=/^([+-])(\d{2})(?::?(\d{2}))?$/;function splitDateString(ar){const or={},lr=ar.split(patterns.dateTimeDelimiter);let cr;if(lr.length>2)return or;if(/:/.test(lr[0])?cr=lr[0]:(or.date=lr[0],cr=lr[1],patterns.timeZoneDelimiter.test(or.date)&&(or.date=ar.split(patterns.timeZoneDelimiter)[0],cr=ar.substr(or.date.length,ar.length))),cr){const ur=patterns.timezone.exec(cr);ur?(or.time=cr.replace(ur[1],""),or.timezone=ur[1]):or.time=cr}return or}function parseYear(ar,or){const lr=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+or)+"})|(\\d{2}|[+-]\\d{"+(2+or)+"})$)"),cr=ar.match(lr);if(!cr)return{year:NaN,restDateString:""};const ur=cr[1]?parseInt(cr[1]):null,dr=cr[2]?parseInt(cr[2]):null;return{year:dr===null?ur:dr*100,restDateString:ar.slice((cr[1]||cr[2]).length)}}function parseDate(ar,or){if(or===null)return new Date(NaN);const lr=ar.match(dateRegex);if(!lr)return new Date(NaN);const cr=!!lr[4],ur=parseDateUnit(lr[1]),dr=parseDateUnit(lr[2])-1,hr=parseDateUnit(lr[3]),fr=parseDateUnit(lr[4]),pr=parseDateUnit(lr[5])-1;if(cr)return validateWeekDate(or,fr,pr)?dayOfISOWeekYear(or,fr,pr):new Date(NaN);{const mr=new Date(0);return!validateDate(or,dr,hr)||!validateDayOfYearDate(or,ur)?new Date(NaN):(mr.setUTCFullYear(or,dr,Math.max(ur,hr)),mr)}}function parseDateUnit(ar){return ar?parseInt(ar):1}function parseTime(ar){const or=ar.match(timeRegex);if(!or)return NaN;const lr=parseTimeUnit(or[1]),cr=parseTimeUnit(or[2]),ur=parseTimeUnit(or[3]);return validateTime(lr,cr,ur)?lr*millisecondsInHour+cr*millisecondsInMinute+ur*1e3:NaN}function parseTimeUnit(ar){return ar&&parseFloat(ar.replace(",","."))||0}function parseTimezone(ar){if(ar==="Z")return 0;const or=ar.match(timezoneRegex);if(!or)return 0;const lr=or[1]==="+"?-1:1,cr=parseInt(or[2]),ur=or[3]&&parseInt(or[3])||0;return validateTimezone(cr,ur)?lr*(cr*millisecondsInHour+ur*millisecondsInMinute):NaN}function dayOfISOWeekYear(ar,or,lr){const cr=new Date(0);cr.setUTCFullYear(ar,0,4);const ur=cr.getUTCDay()||7,dr=(or-1)*7+lr+1-ur;return cr.setUTCDate(cr.getUTCDate()+dr),cr}const daysInMonths=[31,null,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(ar){return ar%400===0||ar%4===0&&ar%100!==0}function validateDate(ar,or,lr){return or>=0&&or<=11&&lr>=1&&lr<=(daysInMonths[or]||(isLeapYearIndex(ar)?29:28))}function validateDayOfYearDate(ar,or){return or>=1&&or<=(isLeapYearIndex(ar)?366:365)}function validateWeekDate(ar,or,lr){return or>=1&&or<=53&&lr>=0&&lr<=6}function validateTime(ar,or,lr){return ar===24?or===0&&lr===0:lr>=0&&lr<60&&or>=0&&or<60&&ar>=0&&ar<25}function validateTimezone(ar,or){return or>=0&&or<=59}const formatDistanceLocale={lessThanXSeconds:{one:"menos de un segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"medio minuto",lessThanXMinutes:{one:"menos de un minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"alrededor de 1 hora",other:"alrededor de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 día",other:"{{count}} días"},aboutXWeeks:{one:"alrededor de 1 semana",other:"alrededor de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"alrededor de 1 mes",other:"alrededor de {{count}} meses"},xMonths:{one:"1 mes",other:"{{count}} meses"},aboutXYears:{one:"alrededor de 1 año",other:"alrededor de {{count}} años"},xYears:{one:"1 año",other:"{{count}} años"},overXYears:{one:"más de 1 año",other:"más de {{count}} años"},almostXYears:{one:"casi 1 año",other:"casi {{count}} años"}},formatDistance=(ar,or,lr)=>{let cr;const ur=formatDistanceLocale[ar];return typeof ur=="string"?cr=ur:or===1?cr=ur.one:cr=ur.other.replace("{{count}}",or.toString()),lr!=null&&lr.addSuffix?lr.comparison&&lr.comparison>0?"en "+cr:"hace "+cr:cr},dateFormats={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/y"},timeFormats={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},dateTimeFormats={full:"{{date}} 'a las' {{time}}",long:"{{date}} 'a las' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'el' eeee 'pasado a la' p",yesterday:"'ayer a la' p",today:"'hoy a la' p",tomorrow:"'mañana a la' p",nextWeek:"eeee 'a la' p",other:"P"},formatRelativeLocalePlural={lastWeek:"'el' eeee 'pasado a las' p",yesterday:"'ayer a las' p",today:"'hoy a las' p",tomorrow:"'mañana a las' p",nextWeek:"eeee 'a las' p",other:"P"},formatRelative=(ar,or,lr,cr)=>or.getHours()!==1?formatRelativeLocalePlural[ar]:formatRelativeLocale[ar],eraValues={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","después de cristo"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1º trimestre","2º trimestre","3º trimestre","4º trimestre"]},monthValues={narrow:["e","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"],wide:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]},dayValues={narrow:["d","l","m","m","j","v","s"],short:["do","lu","ma","mi","ju","vi","sá"],abbreviated:["dom","lun","mar","mié","jue","vie","sáb"],wide:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"mañana",afternoon:"tarde",evening:"tarde",night:"noche"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},abbreviated:{am:"AM",pm:"PM",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"},wide:{am:"a.m.",pm:"p.m.",midnight:"medianoche",noon:"mediodia",morning:"de la mañana",afternoon:"de la tarde",evening:"de la tarde",night:"de la noche"}},ordinalNumber=(ar,or)=>Number(ar)+"º",localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:ar=>Number(ar)-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})},matchOrdinalNumberPattern=/^(\d+)(º)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|a\.?\s?e\.?\s?c\.?|d\.?\s?c\.?|e\.?\s?c\.?)/i,wide:/^(antes de cristo|antes de la era com[uú]n|despu[eé]s de cristo|era com[uú]n)/i},parseEraPatterns={any:[/^ac/i,/^dc/i],wide:[/^(antes de cristo|antes de la era com[uú]n)/i,/^(despu[eé]s de cristo|era com[uú]n)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234](º)? trimestre/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[efmajsond]/i,abbreviated:/^(ene|feb|mar|abr|may|jun|jul|ago|sep|oct|nov|dic)/i,wide:/^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i},parseMonthPatterns={narrow:[/^e/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^en/i,/^feb/i,/^mar/i,/^abr/i,/^may/i,/^jun/i,/^jul/i,/^ago/i,/^sep/i,/^oct/i,/^nov/i,/^dic/i]},matchDayPatterns={narrow:/^[dlmjvs]/i,short:/^(do|lu|ma|mi|ju|vi|s[áa])/i,abbreviated:/^(dom|lun|mar|mi[ée]|jue|vie|s[áa]b)/i,wide:/^(domingo|lunes|martes|mi[ée]rcoles|jueves|viernes|s[áa]bado)/i},parseDayPatterns={narrow:[/^d/i,/^l/i,/^m/i,/^m/i,/^j/i,/^v/i,/^s/i],any:[/^do/i,/^lu/i,/^ma/i,/^mi/i,/^ju/i,/^vi/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mn|md|(de la|a las) (mañana|tarde|noche))/i,any:/^([ap]\.?\s?m\.?|medianoche|mediodia|(de la|a las) (mañana|tarde|noche))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mn/i,noon:/^md/i,morning:/mañana/i,afternoon:/tarde/i,evening:/tarde/i,night:/noche/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function(ar){return parseInt(ar,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:ar=>ar+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},es={code:"es",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:1,firstWeekContainsDate:1}},_hoisted_1$i={class:"mb-6"},_hoisted_2$g={class:"text-sm text-gray-500 dark:text-gray-400"},_hoisted_3$f={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_hoisted_4$e={class:"card"},_hoisted_5$d={class:"flex justify-between items-center mb-4"},_hoisted_6$d={key:0,class:"py-4 text-center text-gray-500 dark:text-gray-400"},_hoisted_7$d={key:1,class:"py-4 text-center text-gray-500 dark:text-gray-400"},_hoisted_8$d={key:2,class:"space-y-3"},_hoisted_9$c={class:"flex justify-between items-start"},_hoisted_10$b={class:"font-medium text-gray-900 dark:text-white"},_hoisted_11$a={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},_hoisted_12$a={class:"flex items-center"},_hoisted_13$a={class:"mt-2 flex items-center"},_hoisted_14$8={class:"text-xs text-gray-600 dark:text-gray-300"},_hoisted_15$8={class:"card"},_hoisted_16$7={class:"flex justify-between items-center mb-4"},_hoisted_17$6={key:0,class:"py-4 text-center text-gray-500 dark:text-gray-400"},_hoisted_18$5={key:1,class:"py-4 text-center text-gray-500 dark:text-gray-400"},_hoisted_19$4={key:2,class:"space-y-3"},_hoisted_20$4={class:"flex justify-between items-start"},_hoisted_21$4={class:"font-medium text-gray-900 dark:text-white"},_hoisted_22$4={class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},_hoisted_23$4={class:"mt-2 flex items-center"},_hoisted_24$3={class:"text-xs text-gray-600 dark:text-gray-300"},_hoisted_25$2={class:"card"},_hoisted_26$2={class:"flex justify-between items-center mb-4"},_hoisted_27$1={key:0,class:"py-4 text-center text-gray-500 dark:text-gray-400"},_hoisted_28$1={key:1,class:"py-4 text-center text-gray-500 dark:text-gray-400"},_hoisted_29$1={key:2,class:"space-y-3"},_hoisted_30$1={class:"flex justify-between items-start"},_hoisted_31$1={class:"font-medium text-gray-900 dark:text-white"},_hoisted_32$1={class:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"},_hoisted_33$1={class:"mt-2 flex items-center"},_hoisted_34={class:"text-xs text-gray-600 dark:text-gray-300"},_hoisted_35={class:"card"},_hoisted_36={class:"grid grid-cols-2 gap-3"},_sfc_main$i={__name:"HomePage",setup(ar){const or=useTasksStore(),lr=useNotesStore(),cr=useSubjectsStore(),ur=usePlannerStore(),dr=new Date,hr=computed(()=>format(dr,"EEEE",{locale:es})),fr=computed(()=>format(dr,"d 'de' MMMM, yyyy",{locale:es}));onMounted(async()=>{await cr.fetchSubjects(),await or.fetchUpcomingTasks(),await lr.fetchNotes();const yr=format(dr,"EEEE",{locale:es}).toLowerCase();await ur.fetchEventsByDay(yr),"Notification"in window&&Notification.permission==="default"&&await or.requestNotificationPermission()});const pr=yr=>cr.subjects.find(vr=>vr.id===yr)||{name:"Sin materia",color:"#94a3b8"},mr=yr=>{const vr={low:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800",medium:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-300 dark:border-yellow-800",high:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800"};return vr[yr]||vr.medium},gr=yr=>yr?yr.substring(0,5):"";return(yr,vr)=>{const br=resolveComponent("router-link");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$i,[createBaseVNode("p",_hoisted_2$g,toDisplayString(hr.value)+", "+toDisplayString(fr.value),1),vr[0]||(vr[0]=createBaseVNode("div",{class:"flex items-center space-x-4"},[createBaseVNode("img",{src:_imports_0,alt:"Logo",class:"w-12 h-12"}),createBaseVNode("h1",{class:"text-3xl font-bold text-primary-600 dark:text-primary-400"},"StudyLoop")],-1))]),createBaseVNode("div",_hoisted_3$f,[createBaseVNode("div",_hoisted_4$e,[createBaseVNode("div",_hoisted_5$d,[vr[2]||(vr[2]=createBaseVNode("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Tareas Próximas",-1)),createVNode(br,{to:"/tasks",class:"text-sm text-primary-600 dark:text-primary-400 hover:underline"},{default:withCtx(()=>vr[1]||(vr[1]=[createTextVNode(" Ver todas ")])),_:1,__:[1]})]),unref(or).loading?(openBlock(),createElementBlock("div",_hoisted_6$d," Cargando tareas... ")):unref(or).tasks.length===0?(openBlock(),createElementBlock("div",_hoisted_7$d," No hay tareas próximas ")):(openBlock(),createElementBlock("div",_hoisted_8$d,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(or).tasks.slice(0,5),Sr=>(openBlock(),createBlock(br,{key:Sr.id,to:`/tasks/${Sr.id}`,class:"block p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_9$c,[createBaseVNode("div",null,[createBaseVNode("h3",_hoisted_10$b,toDisplayString(Sr.title),1),createBaseVNode("p",_hoisted_11$a," Vence: "+toDisplayString(unref(format)(new Date(Sr.dueDate),"d MMM",{locale:unref(es)})),1)]),createBaseVNode("div",_hoisted_12$a,[createBaseVNode("span",{class:normalizeClass(["inline-block px-2 py-1 text-xs rounded-full border",mr(Sr.priority)])},toDisplayString(Sr.priority==="low"?"Baja":Sr.priority==="medium"?"Media":"Alta"),3)])]),createBaseVNode("div",_hoisted_13$a,[createBaseVNode("span",{class:"inline-block w-3 h-3 rounded-full mr-2",style:normalizeStyle({backgroundColor:pr(Sr.subjectId).color})},null,4),createBaseVNode("span",_hoisted_14$8,toDisplayString(pr(Sr.subjectId).name),1)])]),_:2},1032,["to"]))),128))]))]),createBaseVNode("div",_hoisted_15$8,[createBaseVNode("div",_hoisted_16$7,[vr[4]||(vr[4]=createBaseVNode("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Horario de Hoy",-1)),createVNode(br,{to:"/planner",class:"text-sm text-primary-600 dark:text-primary-400 hover:underline"},{default:withCtx(()=>vr[3]||(vr[3]=[createTextVNode(" Ver calendario ")])),_:1,__:[3]})]),unref(ur).loading?(openBlock(),createElementBlock("div",_hoisted_17$6," Cargando horario... ")):unref(ur).events.length===0?(openBlock(),createElementBlock("div",_hoisted_18$5," No hay eventos programados para hoy ")):(openBlock(),createElementBlock("div",_hoisted_19$4,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(ur).events,Sr=>(openBlock(),createElementBlock("div",{key:Sr.id,class:"p-3 border border-gray-200 dark:border-gray-700 rounded-lg"},[createBaseVNode("div",_hoisted_20$4,[createBaseVNode("div",null,[createBaseVNode("h3",_hoisted_21$4,toDisplayString(Sr.title),1),createBaseVNode("p",_hoisted_22$4,toDisplayString(gr(Sr.startTime))+" - "+toDisplayString(gr(Sr.endTime)),1)])]),createBaseVNode("div",_hoisted_23$4,[createBaseVNode("span",{class:"inline-block w-3 h-3 rounded-full mr-2",style:normalizeStyle({backgroundColor:pr(Sr.subjectId).color})},null,4),createBaseVNode("span",_hoisted_24$3,toDisplayString(pr(Sr.subjectId).name),1)])]))),128))]))]),createBaseVNode("div",_hoisted_25$2,[createBaseVNode("div",_hoisted_26$2,[vr[6]||(vr[6]=createBaseVNode("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white"},"Apuntes Recientes",-1)),createVNode(br,{to:"/notes",class:"text-sm text-primary-600 dark:text-primary-400 hover:underline"},{default:withCtx(()=>vr[5]||(vr[5]=[createTextVNode(" Ver todos ")])),_:1,__:[5]})]),unref(lr).loading?(openBlock(),createElementBlock("div",_hoisted_27$1," Cargando apuntes... ")):unref(lr).notes.length===0?(openBlock(),createElementBlock("div",_hoisted_28$1," No hay apuntes guardados ")):(openBlock(),createElementBlock("div",_hoisted_29$1,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(lr).notes.slice(0,5),Sr=>(openBlock(),createBlock(br,{key:Sr.id,to:`/notes/${Sr.id}`,class:"block p-3 border border-gray-200 dark:border-gray-700 rounded-lg hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_30$1,[createBaseVNode("div",null,[createBaseVNode("h3",_hoisted_31$1,toDisplayString(Sr.title),1),createBaseVNode("p",_hoisted_32$1,toDisplayString(Sr.content.replace(/<[^>]*>?/gm,"")),1)])]),createBaseVNode("div",_hoisted_33$1,[createBaseVNode("span",{class:"inline-block w-3 h-3 rounded-full mr-2",style:normalizeStyle({backgroundColor:pr(Sr.subjectId).color})},null,4),createBaseVNode("span",_hoisted_34,toDisplayString(pr(Sr.subjectId).name),1)])]),_:2},1032,["to"]))),128))]))]),createBaseVNode("div",_hoisted_35,[vr[11]||(vr[11]=createBaseVNode("h2",{class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},"Acciones Rápidas",-1)),createBaseVNode("div",_hoisted_36,[createVNode(br,{to:"/notes/new",class:"flex flex-col items-center justify-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors"},{default:withCtx(()=>vr[7]||(vr[7]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-primary-600 dark:text-primary-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),createBaseVNode("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Nuevo Apunte",-1)])),_:1,__:[7]}),createVNode(br,{to:"/tasks/new",class:"flex flex-col items-center justify-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors"},{default:withCtx(()=>vr[8]||(vr[8]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-primary-600 dark:text-primary-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),createBaseVNode("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Nueva Tarea",-1)])),_:1,__:[8]}),createVNode(br,{to:"/grades",class:"flex flex-col items-center justify-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors"},{default:withCtx(()=>vr[9]||(vr[9]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-primary-600 dark:text-primary-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),createBaseVNode("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Registrar Nota",-1)])),_:1,__:[9]}),createVNode(br,{to:"/pdfs",class:"flex flex-col items-center justify-center p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-white dark:bg-slate-800 hover:bg-gray-50 dark:hover:bg-slate-700 transition-colors"},{default:withCtx(()=>vr[10]||(vr[10]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-8 w-8 text-primary-600 dark:text-primary-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),createBaseVNode("span",{class:"text-sm font-medium text-gray-900 dark:text-white"},"Subir PDF",-1)])),_:1,__:[10]})])])])])}}},_hoisted_1$h={class:"relative w-full"},_hoisted_2$f=["placeholder"],_sfc_main$h={__name:"SearchBar",props:{placeholder:{type:String,default:"Buscar..."}},emits:["search"],setup(ar,{emit:or}){const lr=or,cr=ref(""),ur=ref(null);watch(cr,hr=>{ur.value&&clearTimeout(ur.value),ur.value=setTimeout(()=>{lr("search",hr)},300)});const dr=()=>{cr.value="",lr("search","")};return(hr,fr)=>(openBlock(),createElementBlock("div",_hoisted_1$h,[fr[2]||(fr[2]=createBaseVNode("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-500 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":fr[0]||(fr[0]=pr=>cr.value=pr),placeholder:ar.placeholder,class:"input pl-10 pr-10"},null,8,_hoisted_2$f),[[vModelText,cr.value]]),cr.value?(openBlock(),createElementBlock("button",{key:0,onClick:dr,class:"absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},fr[1]||(fr[1]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))):createCommentVNode("",!0)]))}},_hoisted_1$g={class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},_hoisted_2$e={key:0,class:"text-red-500"},_hoisted_3$e={key:0,class:"mb-4"},_hoisted_4$d={class:"grid grid-cols-2 gap-2"},_hoisted_5$c=["onClick"],_hoisted_6$c={key:1,class:"mb-4 p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-slate-900"},_hoisted_7$c={class:"mb-3"},_hoisted_8$c={class:"mb-3"},_hoisted_9$b={class:"flex space-x-2"},_hoisted_10$a=["disabled"],_sfc_main$g={__name:"SubjectSelector",props:{modelValue:{type:Number,default:null},required:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(ar,{emit:or}){const lr=or,cr=useSubjectsStore(),ur=ref(!1),dr=ref(""),hr=ref("#3b82f6");onMounted(async()=>{await cr.fetchSubjects()});const fr=mr=>{lr("update:modelValue",mr)},pr=async()=>{if(dr.value.trim()){const mr={name:dr.value.trim(),color:hr.value},gr=await cr.addSubject(mr);lr("update:modelValue",gr),dr.value="",hr.value="#3b82f6",ur.value=!1}};return(mr,gr)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("label",_hoisted_1$g,[gr[4]||(gr[4]=createTextVNode(" Materia ")),ar.required?(openBlock(),createElementBlock("span",_hoisted_2$e,"*")):createCommentVNode("",!0)]),ur.value?(openBlock(),createElementBlock("div",_hoisted_6$c,[createBaseVNode("div",_hoisted_7$c,[gr[5]||(gr[5]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Nombre de la materia ",-1)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":gr[1]||(gr[1]=yr=>dr.value=yr),placeholder:"Ej: Física",class:"input"},null,512),[[vModelText,dr.value]])]),createBaseVNode("div",_hoisted_8$c,[gr[6]||(gr[6]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Color ",-1)),withDirectives(createBaseVNode("input",{type:"color","onUpdate:modelValue":gr[2]||(gr[2]=yr=>hr.value=yr),class:"w-full h-10 rounded-lg cursor-pointer"},null,512),[[vModelText,hr.value]])]),createBaseVNode("div",_hoisted_9$b,[createBaseVNode("button",{onClick:gr[3]||(gr[3]=yr=>ur.value=!1),class:"flex-1 py-2 px-4 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Cancelar "),createBaseVNode("button",{onClick:pr,class:"flex-1 py-2 px-4 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",disabled:!dr.value.trim()}," Guardar ",8,_hoisted_10$a)])])):(openBlock(),createElementBlock("div",_hoisted_3$e,[createBaseVNode("div",_hoisted_4$d,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(cr).subjects,yr=>(openBlock(),createElementBlock("button",{key:yr.id,onClick:vr=>fr(yr.id),class:normalizeClass(["px-3 py-2 rounded-lg flex items-center justify-between text-sm transition-colors",ar.modelValue===yr.id?"bg-primary-100 dark:bg-primary-900 border-2 border-primary-500 text-primary-700 dark:text-primary-300":"bg-white dark:bg-slate-800 border border-gray-300 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},[createTextVNode(toDisplayString(yr.name)+" ",1),createBaseVNode("span",{class:"w-4 h-4 rounded-full",style:normalizeStyle({backgroundColor:yr.color})},null,4)],10,_hoisted_5$c))),128))]),createBaseVNode("button",{onClick:gr[0]||(gr[0]=yr=>ur.value=!0),class:"mt-2 w-full py-2 px-3 text-sm text-gray-600 dark:text-gray-400 border border-dashed border-gray-300 dark:border-gray-700 rounded-lg hover:text-primary-600 dark:hover:text-primary-400 hover:border-primary-500 dark:hover:border-primary-500 transition-colors"}," + Añadir nueva materia ")]))]))}},_hoisted_1$f={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4"},_hoisted_2$d={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},_hoisted_3$d={class:"md:col-span-2"},_hoisted_4$c={key:0,class:"text-center py-8"},_hoisted_5$b={key:1,class:"text-center py-8"},_hoisted_6$b={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},_hoisted_7$b={class:"mb-2 flex items-center"},_hoisted_8$b={class:"text-xs text-gray-600 dark:text-gray-300"},_hoisted_9$a={class:"text-lg font-semibold text-gray-900 dark:text-white mb-2"},_hoisted_10$9={class:"text-sm text-gray-600 dark:text-gray-300 mb-3 line-clamp-3 prose-sm prose-p:my-0"},_hoisted_11$9=["innerHTML"],_hoisted_12$9={key:0,class:"mb-3 flex flex-wrap gap-1"},_hoisted_13$9={class:"text-xs text-gray-500 dark:text-gray-400"},_sfc_main$f={__name:"NotesPage",setup(ar){const or=useNotesStore(),lr=useSubjectsStore(),cr=ref(null),ur=ref("");onMounted(async()=>{await lr.fetchSubjects(),await or.fetchNotes()});const dr=computed(()=>{let gr=or.notes;if(cr.value&&(gr=gr.filter(yr=>yr.subjectId===cr.value)),ur.value){const yr=ur.value.toLowerCase();gr=gr.filter(vr=>vr.title.toLowerCase().includes(yr)||vr.content.toLowerCase().includes(yr)||vr.tags&&vr.tags.some(br=>br.toLowerCase().includes(yr)))}return[...gr].sort((yr,vr)=>new Date(vr.updatedAt)-new Date(yr.updatedAt))}),hr=gr=>format(new Date(gr),"d MMM, yyyy",{locale:es}),fr=gr=>lr.subjects.find(yr=>yr.id===gr)||{name:"Sin materia",color:"#94a3b8"},pr=gr=>{ur.value=gr},mr=()=>{cr.value=null,ur.value=""};return(gr,yr)=>{const vr=resolveComponent("router-link");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$f,[yr[2]||(yr[2]=createBaseVNode("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Apuntes de Clase",-1)),createVNode(vr,{to:"/notes/new",class:"btn btn-primary flex items-center justify-center"},{default:withCtx(()=>yr[1]||(yr[1]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),createTextVNode(" Nuevo Apunte ")])),_:1,__:[1]})]),createBaseVNode("div",_hoisted_2$d,[createBaseVNode("div",_hoisted_3$d,[createVNode(_sfc_main$h,{placeholder:"Buscar por título o contenido...",onSearch:pr})]),createBaseVNode("div",null,[createVNode(_sfc_main$g,{modelValue:cr.value,"onUpdate:modelValue":yr[0]||(yr[0]=br=>cr.value=br)},null,8,["modelValue"])])]),unref(or).loading?(openBlock(),createElementBlock("div",_hoisted_4$c,yr[3]||(yr[3]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando apuntes...",-1)]))):dr.value.length===0?(openBlock(),createElementBlock("div",_hoisted_5$b,[yr[4]||(yr[4]=createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"No se encontraron apuntes",-1)),cr.value||ur.value?(openBlock(),createElementBlock("button",{key:0,onClick:mr,class:"mt-2 text-primary-600 dark:text-primary-400 hover:underline"}," Borrar filtros ")):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_6$b,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(dr.value,br=>(openBlock(),createBlock(vr,{key:br.id,to:`/notes/${br.id}`,class:"card hover:shadow-lg transition-shadow cursor-pointer"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_7$b,[createBaseVNode("span",{class:"inline-block w-3 h-3 rounded-full mr-2",style:normalizeStyle({backgroundColor:fr(br.subjectId).color})},null,4),createBaseVNode("span",_hoisted_8$b,toDisplayString(fr(br.subjectId).name),1)]),createBaseVNode("h3",_hoisted_9$a,toDisplayString(br.title),1),createBaseVNode("div",_hoisted_10$9,[createBaseVNode("div",{innerHTML:br.content.substring(0,150)+(br.content.length>150?"...":"")},null,8,_hoisted_11$9)]),br.tags&&br.tags.length>0?(openBlock(),createElementBlock("div",_hoisted_12$9,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(br.tags,(Sr,xr)=>(openBlock(),createElementBlock("span",{key:xr,class:"inline-block px-2 py-1 text-xs rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"},toDisplayString(Sr),1))),128))])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_13$9," Última actualización: "+toDisplayString(hr(br.updatedAt)),1)]),_:2},1032,["to"]))),128))]))])}}};function OrderedMap(ar){this.content=ar}OrderedMap.prototype={constructor:OrderedMap,find:function(ar){for(var or=0;or<this.content.length;or+=2)if(this.content[or]===ar)return or;return-1},get:function(ar){var or=this.find(ar);return or==-1?void 0:this.content[or+1]},update:function(ar,or,lr){var cr=lr&&lr!=ar?this.remove(lr):this,ur=cr.find(ar),dr=cr.content.slice();return ur==-1?dr.push(lr||ar,or):(dr[ur+1]=or,lr&&(dr[ur]=lr)),new OrderedMap(dr)},remove:function(ar){var or=this.find(ar);if(or==-1)return this;var lr=this.content.slice();return lr.splice(or,2),new OrderedMap(lr)},addToStart:function(ar,or){return new OrderedMap([ar,or].concat(this.remove(ar).content))},addToEnd:function(ar,or){var lr=this.remove(ar).content.slice();return lr.push(ar,or),new OrderedMap(lr)},addBefore:function(ar,or,lr){var cr=this.remove(or),ur=cr.content.slice(),dr=cr.find(ar);return ur.splice(dr==-1?ur.length:dr,0,or,lr),new OrderedMap(ur)},forEach:function(ar){for(var or=0;or<this.content.length;or+=2)ar(this.content[or],this.content[or+1])},prepend:function(ar){return ar=OrderedMap.from(ar),ar.size?new OrderedMap(ar.content.concat(this.subtract(ar).content)):this},append:function(ar){return ar=OrderedMap.from(ar),ar.size?new OrderedMap(this.subtract(ar).content.concat(ar.content)):this},subtract:function(ar){var or=this;ar=OrderedMap.from(ar);for(var lr=0;lr<ar.content.length;lr+=2)or=or.remove(ar.content[lr]);return or},toObject:function(){var ar={};return this.forEach(function(or,lr){ar[or]=lr}),ar},get size(){return this.content.length>>1}};OrderedMap.from=function(ar){if(ar instanceof OrderedMap)return ar;var or=[];if(ar)for(var lr in ar)or.push(lr,ar[lr]);return new OrderedMap(or)};function findDiffStart(ar,or,lr){for(let cr=0;;cr++){if(cr==ar.childCount||cr==or.childCount)return ar.childCount==or.childCount?null:lr;let ur=ar.child(cr),dr=or.child(cr);if(ur==dr){lr+=ur.nodeSize;continue}if(!ur.sameMarkup(dr))return lr;if(ur.isText&&ur.text!=dr.text){for(let hr=0;ur.text[hr]==dr.text[hr];hr++)lr++;return lr}if(ur.content.size||dr.content.size){let hr=findDiffStart(ur.content,dr.content,lr+1);if(hr!=null)return hr}lr+=ur.nodeSize}}function findDiffEnd(ar,or,lr,cr){for(let ur=ar.childCount,dr=or.childCount;;){if(ur==0||dr==0)return ur==dr?null:{a:lr,b:cr};let hr=ar.child(--ur),fr=or.child(--dr),pr=hr.nodeSize;if(hr==fr){lr-=pr,cr-=pr;continue}if(!hr.sameMarkup(fr))return{a:lr,b:cr};if(hr.isText&&hr.text!=fr.text){let mr=0,gr=Math.min(hr.text.length,fr.text.length);for(;mr<gr&&hr.text[hr.text.length-mr-1]==fr.text[fr.text.length-mr-1];)mr++,lr--,cr--;return{a:lr,b:cr}}if(hr.content.size||fr.content.size){let mr=findDiffEnd(hr.content,fr.content,lr-1,cr-1);if(mr)return mr}lr-=pr,cr-=pr}}class Fragment{constructor(or,lr){if(this.content=or,this.size=lr||0,lr==null)for(let cr=0;cr<or.length;cr++)this.size+=or[cr].nodeSize}nodesBetween(or,lr,cr,ur=0,dr){for(let hr=0,fr=0;fr<lr;hr++){let pr=this.content[hr],mr=fr+pr.nodeSize;if(mr>or&&cr(pr,ur+fr,dr||null,hr)!==!1&&pr.content.size){let gr=fr+1;pr.nodesBetween(Math.max(0,or-gr),Math.min(pr.content.size,lr-gr),cr,ur+gr)}fr=mr}}descendants(or){this.nodesBetween(0,this.size,or)}textBetween(or,lr,cr,ur){let dr="",hr=!0;return this.nodesBetween(or,lr,(fr,pr)=>{let mr=fr.isText?fr.text.slice(Math.max(or,pr)-pr,lr-pr):fr.isLeaf?ur?typeof ur=="function"?ur(fr):ur:fr.type.spec.leafText?fr.type.spec.leafText(fr):"":"";fr.isBlock&&(fr.isLeaf&&mr||fr.isTextblock)&&cr&&(hr?hr=!1:dr+=cr),dr+=mr},0),dr}append(or){if(!or.size)return this;if(!this.size)return or;let lr=this.lastChild,cr=or.firstChild,ur=this.content.slice(),dr=0;for(lr.isText&&lr.sameMarkup(cr)&&(ur[ur.length-1]=lr.withText(lr.text+cr.text),dr=1);dr<or.content.length;dr++)ur.push(or.content[dr]);return new Fragment(ur,this.size+or.size)}cut(or,lr=this.size){if(or==0&&lr==this.size)return this;let cr=[],ur=0;if(lr>or)for(let dr=0,hr=0;hr<lr;dr++){let fr=this.content[dr],pr=hr+fr.nodeSize;pr>or&&((hr<or||pr>lr)&&(fr.isText?fr=fr.cut(Math.max(0,or-hr),Math.min(fr.text.length,lr-hr)):fr=fr.cut(Math.max(0,or-hr-1),Math.min(fr.content.size,lr-hr-1))),cr.push(fr),ur+=fr.nodeSize),hr=pr}return new Fragment(cr,ur)}cutByIndex(or,lr){return or==lr?Fragment.empty:or==0&&lr==this.content.length?this:new Fragment(this.content.slice(or,lr))}replaceChild(or,lr){let cr=this.content[or];if(cr==lr)return this;let ur=this.content.slice(),dr=this.size+lr.nodeSize-cr.nodeSize;return ur[or]=lr,new Fragment(ur,dr)}addToStart(or){return new Fragment([or].concat(this.content),this.size+or.nodeSize)}addToEnd(or){return new Fragment(this.content.concat(or),this.size+or.nodeSize)}eq(or){if(this.content.length!=or.content.length)return!1;for(let lr=0;lr<this.content.length;lr++)if(!this.content[lr].eq(or.content[lr]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(or){let lr=this.content[or];if(!lr)throw new RangeError("Index "+or+" out of range for "+this);return lr}maybeChild(or){return this.content[or]||null}forEach(or){for(let lr=0,cr=0;lr<this.content.length;lr++){let ur=this.content[lr];or(ur,cr,lr),cr+=ur.nodeSize}}findDiffStart(or,lr=0){return findDiffStart(this,or,lr)}findDiffEnd(or,lr=this.size,cr=or.size){return findDiffEnd(this,or,lr,cr)}findIndex(or,lr=-1){if(or==0)return retIndex(0,or);if(or==this.size)return retIndex(this.content.length,or);if(or>this.size||or<0)throw new RangeError(`Position ${or} outside of fragment (${this})`);for(let cr=0,ur=0;;cr++){let dr=this.child(cr),hr=ur+dr.nodeSize;if(hr>=or)return hr==or||lr>0?retIndex(cr+1,hr):retIndex(cr,ur);ur=hr}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(or=>or.toJSON()):null}static fromJSON(or,lr){if(!lr)return Fragment.empty;if(!Array.isArray(lr))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(lr.map(or.nodeFromJSON))}static fromArray(or){if(!or.length)return Fragment.empty;let lr,cr=0;for(let ur=0;ur<or.length;ur++){let dr=or[ur];cr+=dr.nodeSize,ur&&dr.isText&&or[ur-1].sameMarkup(dr)?(lr||(lr=or.slice(0,ur)),lr[lr.length-1]=dr.withText(lr[lr.length-1].text+dr.text)):lr&&lr.push(dr)}return new Fragment(lr||or,cr)}static from(or){if(!or)return Fragment.empty;if(or instanceof Fragment)return or;if(Array.isArray(or))return this.fromArray(or);if(or.attrs)return new Fragment([or],or.nodeSize);throw new RangeError("Can not convert "+or+" to a Fragment"+(or.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(ar,or){return found.index=ar,found.offset=or,found}function compareDeep(ar,or){if(ar===or)return!0;if(!(ar&&typeof ar=="object")||!(or&&typeof or=="object"))return!1;let lr=Array.isArray(ar);if(Array.isArray(or)!=lr)return!1;if(lr){if(ar.length!=or.length)return!1;for(let cr=0;cr<ar.length;cr++)if(!compareDeep(ar[cr],or[cr]))return!1}else{for(let cr in ar)if(!(cr in or)||!compareDeep(ar[cr],or[cr]))return!1;for(let cr in or)if(!(cr in ar))return!1}return!0}let Mark$1=class Hi{constructor(or,lr){this.type=or,this.attrs=lr}addToSet(or){let lr,cr=!1;for(let ur=0;ur<or.length;ur++){let dr=or[ur];if(this.eq(dr))return or;if(this.type.excludes(dr.type))lr||(lr=or.slice(0,ur));else{if(dr.type.excludes(this.type))return or;!cr&&dr.type.rank>this.type.rank&&(lr||(lr=or.slice(0,ur)),lr.push(this),cr=!0),lr&&lr.push(dr)}}return lr||(lr=or.slice()),cr||lr.push(this),lr}removeFromSet(or){for(let lr=0;lr<or.length;lr++)if(this.eq(or[lr]))return or.slice(0,lr).concat(or.slice(lr+1));return or}isInSet(or){for(let lr=0;lr<or.length;lr++)if(this.eq(or[lr]))return!0;return!1}eq(or){return this==or||this.type==or.type&&compareDeep(this.attrs,or.attrs)}toJSON(){let or={type:this.type.name};for(let lr in this.attrs){or.attrs=this.attrs;break}return or}static fromJSON(or,lr){if(!lr)throw new RangeError("Invalid input for Mark.fromJSON");let cr=or.marks[lr.type];if(!cr)throw new RangeError(`There is no mark type ${lr.type} in this schema`);let ur=cr.create(lr.attrs);return cr.checkAttrs(ur.attrs),ur}static sameSet(or,lr){if(or==lr)return!0;if(or.length!=lr.length)return!1;for(let cr=0;cr<or.length;cr++)if(!or[cr].eq(lr[cr]))return!1;return!0}static setFrom(or){if(!or||Array.isArray(or)&&or.length==0)return Hi.none;if(or instanceof Hi)return[or];let lr=or.slice();return lr.sort((cr,ur)=>cr.type.rank-ur.type.rank),lr}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(or,lr,cr){this.content=or,this.openStart=lr,this.openEnd=cr}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(or,lr){let cr=insertInto(this.content,or+this.openStart,lr);return cr&&new Slice(cr,this.openStart,this.openEnd)}removeBetween(or,lr){return new Slice(removeRange(this.content,or+this.openStart,lr+this.openStart),this.openStart,this.openEnd)}eq(or){return this.content.eq(or.content)&&this.openStart==or.openStart&&this.openEnd==or.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let or={content:this.content.toJSON()};return this.openStart>0&&(or.openStart=this.openStart),this.openEnd>0&&(or.openEnd=this.openEnd),or}static fromJSON(or,lr){if(!lr)return Slice.empty;let cr=lr.openStart||0,ur=lr.openEnd||0;if(typeof cr!="number"||typeof ur!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(or,lr.content),cr,ur)}static maxOpen(or,lr=!0){let cr=0,ur=0;for(let dr=or.firstChild;dr&&!dr.isLeaf&&(lr||!dr.type.spec.isolating);dr=dr.firstChild)cr++;for(let dr=or.lastChild;dr&&!dr.isLeaf&&(lr||!dr.type.spec.isolating);dr=dr.lastChild)ur++;return new Slice(or,cr,ur)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(ar,or,lr){let{index:cr,offset:ur}=ar.findIndex(or),dr=ar.maybeChild(cr),{index:hr,offset:fr}=ar.findIndex(lr);if(ur==or||dr.isText){if(fr!=lr&&!ar.child(hr).isText)throw new RangeError("Removing non-flat range");return ar.cut(0,or).append(ar.cut(lr))}if(cr!=hr)throw new RangeError("Removing non-flat range");return ar.replaceChild(cr,dr.copy(removeRange(dr.content,or-ur-1,lr-ur-1)))}function insertInto(ar,or,lr,cr){let{index:ur,offset:dr}=ar.findIndex(or),hr=ar.maybeChild(ur);if(dr==or||hr.isText)return ar.cut(0,or).append(lr).append(ar.cut(or));let fr=insertInto(hr.content,or-dr-1,lr);return fr&&ar.replaceChild(ur,hr.copy(fr))}function replace(ar,or,lr){if(lr.openStart>ar.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(ar.depth-lr.openStart!=or.depth-lr.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(ar,or,lr,0)}function replaceOuter(ar,or,lr,cr){let ur=ar.index(cr),dr=ar.node(cr);if(ur==or.index(cr)&&cr<ar.depth-lr.openStart){let hr=replaceOuter(ar,or,lr,cr+1);return dr.copy(dr.content.replaceChild(ur,hr))}else if(lr.content.size)if(!lr.openStart&&!lr.openEnd&&ar.depth==cr&&or.depth==cr){let hr=ar.parent,fr=hr.content;return close(hr,fr.cut(0,ar.parentOffset).append(lr.content).append(fr.cut(or.parentOffset)))}else{let{start:hr,end:fr}=prepareSliceForReplace(lr,ar);return close(dr,replaceThreeWay(ar,hr,fr,or,cr))}else return close(dr,replaceTwoWay(ar,or,cr))}function checkJoin(ar,or){if(!or.type.compatibleContent(ar.type))throw new ReplaceError("Cannot join "+or.type.name+" onto "+ar.type.name)}function joinable$1(ar,or,lr){let cr=ar.node(lr);return checkJoin(cr,or.node(lr)),cr}function addNode(ar,or){let lr=or.length-1;lr>=0&&ar.isText&&ar.sameMarkup(or[lr])?or[lr]=ar.withText(or[lr].text+ar.text):or.push(ar)}function addRange(ar,or,lr,cr){let ur=(or||ar).node(lr),dr=0,hr=or?or.index(lr):ur.childCount;ar&&(dr=ar.index(lr),ar.depth>lr?dr++:ar.textOffset&&(addNode(ar.nodeAfter,cr),dr++));for(let fr=dr;fr<hr;fr++)addNode(ur.child(fr),cr);or&&or.depth==lr&&or.textOffset&&addNode(or.nodeBefore,cr)}function close(ar,or){return ar.type.checkContent(or),ar.copy(or)}function replaceThreeWay(ar,or,lr,cr,ur){let dr=ar.depth>ur&&joinable$1(ar,or,ur+1),hr=cr.depth>ur&&joinable$1(lr,cr,ur+1),fr=[];return addRange(null,ar,ur,fr),dr&&hr&&or.index(ur)==lr.index(ur)?(checkJoin(dr,hr),addNode(close(dr,replaceThreeWay(ar,or,lr,cr,ur+1)),fr)):(dr&&addNode(close(dr,replaceTwoWay(ar,or,ur+1)),fr),addRange(or,lr,ur,fr),hr&&addNode(close(hr,replaceTwoWay(lr,cr,ur+1)),fr)),addRange(cr,null,ur,fr),new Fragment(fr)}function replaceTwoWay(ar,or,lr){let cr=[];if(addRange(null,ar,lr,cr),ar.depth>lr){let ur=joinable$1(ar,or,lr+1);addNode(close(ur,replaceTwoWay(ar,or,lr+1)),cr)}return addRange(or,null,lr,cr),new Fragment(cr)}function prepareSliceForReplace(ar,or){let lr=or.depth-ar.openStart,ur=or.node(lr).copy(ar.content);for(let dr=lr-1;dr>=0;dr--)ur=or.node(dr).copy(Fragment.from(ur));return{start:ur.resolveNoCache(ar.openStart+lr),end:ur.resolveNoCache(ur.content.size-ar.openEnd-lr)}}class ResolvedPos{constructor(or,lr,cr){this.pos=or,this.path=lr,this.parentOffset=cr,this.depth=lr.length/3-1}resolveDepth(or){return or==null?this.depth:or<0?this.depth+or:or}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(or){return this.path[this.resolveDepth(or)*3]}index(or){return this.path[this.resolveDepth(or)*3+1]}indexAfter(or){return or=this.resolveDepth(or),this.index(or)+(or==this.depth&&!this.textOffset?0:1)}start(or){return or=this.resolveDepth(or),or==0?0:this.path[or*3-1]+1}end(or){return or=this.resolveDepth(or),this.start(or)+this.node(or).content.size}before(or){if(or=this.resolveDepth(or),!or)throw new RangeError("There is no position before the top-level node");return or==this.depth+1?this.pos:this.path[or*3-1]}after(or){if(or=this.resolveDepth(or),!or)throw new RangeError("There is no position after the top-level node");return or==this.depth+1?this.pos:this.path[or*3-1]+this.path[or*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let or=this.parent,lr=this.index(this.depth);if(lr==or.childCount)return null;let cr=this.pos-this.path[this.path.length-1],ur=or.child(lr);return cr?or.child(lr).cut(cr):ur}get nodeBefore(){let or=this.index(this.depth),lr=this.pos-this.path[this.path.length-1];return lr?this.parent.child(or).cut(0,lr):or==0?null:this.parent.child(or-1)}posAtIndex(or,lr){lr=this.resolveDepth(lr);let cr=this.path[lr*3],ur=lr==0?0:this.path[lr*3-1]+1;for(let dr=0;dr<or;dr++)ur+=cr.child(dr).nodeSize;return ur}marks(){let or=this.parent,lr=this.index();if(or.content.size==0)return Mark$1.none;if(this.textOffset)return or.child(lr).marks;let cr=or.maybeChild(lr-1),ur=or.maybeChild(lr);if(!cr){let fr=cr;cr=ur,ur=fr}let dr=cr.marks;for(var hr=0;hr<dr.length;hr++)dr[hr].type.spec.inclusive===!1&&(!ur||!dr[hr].isInSet(ur.marks))&&(dr=dr[hr--].removeFromSet(dr));return dr}marksAcross(or){let lr=this.parent.maybeChild(this.index());if(!lr||!lr.isInline)return null;let cr=lr.marks,ur=or.parent.maybeChild(or.index());for(var dr=0;dr<cr.length;dr++)cr[dr].type.spec.inclusive===!1&&(!ur||!cr[dr].isInSet(ur.marks))&&(cr=cr[dr--].removeFromSet(cr));return cr}sharedDepth(or){for(let lr=this.depth;lr>0;lr--)if(this.start(lr)<=or&&this.end(lr)>=or)return lr;return 0}blockRange(or=this,lr){if(or.pos<this.pos)return or.blockRange(this);for(let cr=this.depth-(this.parent.inlineContent||this.pos==or.pos?1:0);cr>=0;cr--)if(or.pos<=this.end(cr)&&(!lr||lr(this.node(cr))))return new NodeRange(this,or,cr);return null}sameParent(or){return this.pos-this.parentOffset==or.pos-or.parentOffset}max(or){return or.pos>this.pos?or:this}min(or){return or.pos<this.pos?or:this}toString(){let or="";for(let lr=1;lr<=this.depth;lr++)or+=(or?"/":"")+this.node(lr).type.name+"_"+this.index(lr-1);return or+":"+this.parentOffset}static resolve(or,lr){if(!(lr>=0&&lr<=or.content.size))throw new RangeError("Position "+lr+" out of range");let cr=[],ur=0,dr=lr;for(let hr=or;;){let{index:fr,offset:pr}=hr.content.findIndex(dr),mr=dr-pr;if(cr.push(hr,fr,ur+pr),!mr||(hr=hr.child(fr),hr.isText))break;dr=mr-1,ur+=pr+1}return new ResolvedPos(lr,cr,dr)}static resolveCached(or,lr){let cr=resolveCache.get(or);if(cr)for(let dr=0;dr<cr.elts.length;dr++){let hr=cr.elts[dr];if(hr.pos==lr)return hr}else resolveCache.set(or,cr=new ResolveCache);let ur=cr.elts[cr.i]=ResolvedPos.resolve(or,lr);return cr.i=(cr.i+1)%resolveCacheSize,ur}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(or,lr,cr){this.$from=or,this.$to=lr,this.depth=cr}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$1=class Ui{constructor(or,lr,cr,ur=Mark$1.none){this.type=or,this.attrs=lr,this.marks=ur,this.content=cr||Fragment.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(or){return this.content.child(or)}maybeChild(or){return this.content.maybeChild(or)}forEach(or){this.content.forEach(or)}nodesBetween(or,lr,cr,ur=0){this.content.nodesBetween(or,lr,cr,ur,this)}descendants(or){this.nodesBetween(0,this.content.size,or)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(or,lr,cr,ur){return this.content.textBetween(or,lr,cr,ur)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(or){return this==or||this.sameMarkup(or)&&this.content.eq(or.content)}sameMarkup(or){return this.hasMarkup(or.type,or.attrs,or.marks)}hasMarkup(or,lr,cr){return this.type==or&&compareDeep(this.attrs,lr||or.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,cr||Mark$1.none)}copy(or=null){return or==this.content?this:new Ui(this.type,this.attrs,or,this.marks)}mark(or){return or==this.marks?this:new Ui(this.type,this.attrs,this.content,or)}cut(or,lr=this.content.size){return or==0&&lr==this.content.size?this:this.copy(this.content.cut(or,lr))}slice(or,lr=this.content.size,cr=!1){if(or==lr)return Slice.empty;let ur=this.resolve(or),dr=this.resolve(lr),hr=cr?0:ur.sharedDepth(lr),fr=ur.start(hr),mr=ur.node(hr).content.cut(ur.pos-fr,dr.pos-fr);return new Slice(mr,ur.depth-hr,dr.depth-hr)}replace(or,lr,cr){return replace(this.resolve(or),this.resolve(lr),cr)}nodeAt(or){for(let lr=this;;){let{index:cr,offset:ur}=lr.content.findIndex(or);if(lr=lr.maybeChild(cr),!lr)return null;if(ur==or||lr.isText)return lr;or-=ur+1}}childAfter(or){let{index:lr,offset:cr}=this.content.findIndex(or);return{node:this.content.maybeChild(lr),index:lr,offset:cr}}childBefore(or){if(or==0)return{node:null,index:0,offset:0};let{index:lr,offset:cr}=this.content.findIndex(or);if(cr<or)return{node:this.content.child(lr),index:lr,offset:cr};let ur=this.content.child(lr-1);return{node:ur,index:lr-1,offset:cr-ur.nodeSize}}resolve(or){return ResolvedPos.resolveCached(this,or)}resolveNoCache(or){return ResolvedPos.resolve(this,or)}rangeHasMark(or,lr,cr){let ur=!1;return lr>or&&this.nodesBetween(or,lr,dr=>(cr.isInSet(dr.marks)&&(ur=!0),!ur)),ur}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let or=this.type.name;return this.content.size&&(or+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,or)}contentMatchAt(or){let lr=this.type.contentMatch.matchFragment(this.content,0,or);if(!lr)throw new Error("Called contentMatchAt on a node with invalid content");return lr}canReplace(or,lr,cr=Fragment.empty,ur=0,dr=cr.childCount){let hr=this.contentMatchAt(or).matchFragment(cr,ur,dr),fr=hr&&hr.matchFragment(this.content,lr);if(!fr||!fr.validEnd)return!1;for(let pr=ur;pr<dr;pr++)if(!this.type.allowsMarks(cr.child(pr).marks))return!1;return!0}canReplaceWith(or,lr,cr,ur){if(ur&&!this.type.allowsMarks(ur))return!1;let dr=this.contentMatchAt(or).matchType(cr),hr=dr&&dr.matchFragment(this.content,lr);return hr?hr.validEnd:!1}canAppend(or){return or.content.size?this.canReplace(this.childCount,this.childCount,or.content):this.type.compatibleContent(or.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let or=Mark$1.none;for(let lr=0;lr<this.marks.length;lr++){let cr=this.marks[lr];cr.type.checkAttrs(cr.attrs),or=cr.addToSet(or)}if(!Mark$1.sameSet(or,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(lr=>lr.type.name)}`);this.content.forEach(lr=>lr.check())}toJSON(){let or={type:this.type.name};for(let lr in this.attrs){or.attrs=this.attrs;break}return this.content.size&&(or.content=this.content.toJSON()),this.marks.length&&(or.marks=this.marks.map(lr=>lr.toJSON())),or}static fromJSON(or,lr){if(!lr)throw new RangeError("Invalid input for Node.fromJSON");let cr;if(lr.marks){if(!Array.isArray(lr.marks))throw new RangeError("Invalid mark data for Node.fromJSON");cr=lr.marks.map(or.markFromJSON)}if(lr.type=="text"){if(typeof lr.text!="string")throw new RangeError("Invalid text node in JSON");return or.text(lr.text,cr)}let ur=Fragment.fromJSON(or,lr.content),dr=or.nodeType(lr.type).create(lr.attrs,ur,cr);return dr.type.checkAttrs(dr.attrs),dr}};Node$1.prototype.text=void 0;class TextNode extends Node$1{constructor(or,lr,cr,ur){if(super(or,lr,null,ur),!cr)throw new RangeError("Empty text nodes are not allowed");this.text=cr}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(or,lr){return this.text.slice(or,lr)}get nodeSize(){return this.text.length}mark(or){return or==this.marks?this:new TextNode(this.type,this.attrs,this.text,or)}withText(or){return or==this.text?this:new TextNode(this.type,this.attrs,or,this.marks)}cut(or=0,lr=this.text.length){return or==0&&lr==this.text.length?this:this.withText(this.text.slice(or,lr))}eq(or){return this.sameMarkup(or)&&this.text==or.text}toJSON(){let or=super.toJSON();return or.text=this.text,or}}function wrapMarks(ar,or){for(let lr=ar.length-1;lr>=0;lr--)or=ar[lr].type.name+"("+or+")";return or}class ContentMatch{constructor(or){this.validEnd=or,this.next=[],this.wrapCache=[]}static parse(or,lr){let cr=new TokenStream(or,lr);if(cr.next==null)return ContentMatch.empty;let ur=parseExpr(cr);cr.next&&cr.err("Unexpected trailing text");let dr=dfa(nfa(ur));return checkForDeadEnds(dr,cr),dr}matchType(or){for(let lr=0;lr<this.next.length;lr++)if(this.next[lr].type==or)return this.next[lr].next;return null}matchFragment(or,lr=0,cr=or.childCount){let ur=this;for(let dr=lr;ur&&dr<cr;dr++)ur=ur.matchType(or.child(dr).type);return ur}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let or=0;or<this.next.length;or++){let{type:lr}=this.next[or];if(!(lr.isText||lr.hasRequiredAttrs()))return lr}return null}compatible(or){for(let lr=0;lr<this.next.length;lr++)for(let cr=0;cr<or.next.length;cr++)if(this.next[lr].type==or.next[cr].type)return!0;return!1}fillBefore(or,lr=!1,cr=0){let ur=[this];function dr(hr,fr){let pr=hr.matchFragment(or,cr);if(pr&&(!lr||pr.validEnd))return Fragment.from(fr.map(mr=>mr.createAndFill()));for(let mr=0;mr<hr.next.length;mr++){let{type:gr,next:yr}=hr.next[mr];if(!(gr.isText||gr.hasRequiredAttrs())&&ur.indexOf(yr)==-1){ur.push(yr);let vr=dr(yr,fr.concat(gr));if(vr)return vr}}return null}return dr(this,[])}findWrapping(or){for(let cr=0;cr<this.wrapCache.length;cr+=2)if(this.wrapCache[cr]==or)return this.wrapCache[cr+1];let lr=this.computeWrapping(or);return this.wrapCache.push(or,lr),lr}computeWrapping(or){let lr=Object.create(null),cr=[{match:this,type:null,via:null}];for(;cr.length;){let ur=cr.shift(),dr=ur.match;if(dr.matchType(or)){let hr=[];for(let fr=ur;fr.type;fr=fr.via)hr.push(fr.type);return hr.reverse()}for(let hr=0;hr<dr.next.length;hr++){let{type:fr,next:pr}=dr.next[hr];!fr.isLeaf&&!fr.hasRequiredAttrs()&&!(fr.name in lr)&&(!ur.type||pr.validEnd)&&(cr.push({match:fr.contentMatch,type:fr,via:ur}),lr[fr.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(or){if(or>=this.next.length)throw new RangeError(`There's no ${or}th edge in this content match`);return this.next[or]}toString(){let or=[];function lr(cr){or.push(cr);for(let ur=0;ur<cr.next.length;ur++)or.indexOf(cr.next[ur].next)==-1&&lr(cr.next[ur].next)}return lr(this),or.map((cr,ur)=>{let dr=ur+(cr.validEnd?"*":" ")+" ";for(let hr=0;hr<cr.next.length;hr++)dr+=(hr?", ":"")+cr.next[hr].type.name+"->"+or.indexOf(cr.next[hr].next);return dr}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(or,lr){this.string=or,this.nodeTypes=lr,this.inline=null,this.pos=0,this.tokens=or.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(or){return this.next==or&&(this.pos++||!0)}err(or){throw new SyntaxError(or+" (in content expression '"+this.string+"')")}}function parseExpr(ar){let or=[];do or.push(parseExprSeq(ar));while(ar.eat("|"));return or.length==1?or[0]:{type:"choice",exprs:or}}function parseExprSeq(ar){let or=[];do or.push(parseExprSubscript(ar));while(ar.next&&ar.next!=")"&&ar.next!="|");return or.length==1?or[0]:{type:"seq",exprs:or}}function parseExprSubscript(ar){let or=parseExprAtom(ar);for(;;)if(ar.eat("+"))or={type:"plus",expr:or};else if(ar.eat("*"))or={type:"star",expr:or};else if(ar.eat("?"))or={type:"opt",expr:or};else if(ar.eat("{"))or=parseExprRange(ar,or);else break;return or}function parseNum(ar){/\D/.test(ar.next)&&ar.err("Expected number, got '"+ar.next+"'");let or=Number(ar.next);return ar.pos++,or}function parseExprRange(ar,or){let lr=parseNum(ar),cr=lr;return ar.eat(",")&&(ar.next!="}"?cr=parseNum(ar):cr=-1),ar.eat("}")||ar.err("Unclosed braced range"),{type:"range",min:lr,max:cr,expr:or}}function resolveName(ar,or){let lr=ar.nodeTypes,cr=lr[or];if(cr)return[cr];let ur=[];for(let dr in lr){let hr=lr[dr];hr.isInGroup(or)&&ur.push(hr)}return ur.length==0&&ar.err("No node type or group '"+or+"' found"),ur}function parseExprAtom(ar){if(ar.eat("(")){let or=parseExpr(ar);return ar.eat(")")||ar.err("Missing closing paren"),or}else if(/\W/.test(ar.next))ar.err("Unexpected token '"+ar.next+"'");else{let or=resolveName(ar,ar.next).map(lr=>(ar.inline==null?ar.inline=lr.isInline:ar.inline!=lr.isInline&&ar.err("Mixing inline and block content"),{type:"name",value:lr}));return ar.pos++,or.length==1?or[0]:{type:"choice",exprs:or}}}function nfa(ar){let or=[[]];return ur(dr(ar,0),lr()),or;function lr(){return or.push([])-1}function cr(hr,fr,pr){let mr={term:pr,to:fr};return or[hr].push(mr),mr}function ur(hr,fr){hr.forEach(pr=>pr.to=fr)}function dr(hr,fr){if(hr.type=="choice")return hr.exprs.reduce((pr,mr)=>pr.concat(dr(mr,fr)),[]);if(hr.type=="seq")for(let pr=0;;pr++){let mr=dr(hr.exprs[pr],fr);if(pr==hr.exprs.length-1)return mr;ur(mr,fr=lr())}else if(hr.type=="star"){let pr=lr();return cr(fr,pr),ur(dr(hr.expr,pr),pr),[cr(pr)]}else if(hr.type=="plus"){let pr=lr();return ur(dr(hr.expr,fr),pr),ur(dr(hr.expr,pr),pr),[cr(pr)]}else{if(hr.type=="opt")return[cr(fr)].concat(dr(hr.expr,fr));if(hr.type=="range"){let pr=fr;for(let mr=0;mr<hr.min;mr++){let gr=lr();ur(dr(hr.expr,pr),gr),pr=gr}if(hr.max==-1)ur(dr(hr.expr,pr),pr);else for(let mr=hr.min;mr<hr.max;mr++){let gr=lr();cr(pr,gr),ur(dr(hr.expr,pr),gr),pr=gr}return[cr(pr)]}else{if(hr.type=="name")return[cr(fr,void 0,hr.value)];throw new Error("Unknown expr type")}}}}function cmp(ar,or){return or-ar}function nullFrom(ar,or){let lr=[];return cr(or),lr.sort(cmp);function cr(ur){let dr=ar[ur];if(dr.length==1&&!dr[0].term)return cr(dr[0].to);lr.push(ur);for(let hr=0;hr<dr.length;hr++){let{term:fr,to:pr}=dr[hr];!fr&&lr.indexOf(pr)==-1&&cr(pr)}}}function dfa(ar){let or=Object.create(null);return lr(nullFrom(ar,0));function lr(cr){let ur=[];cr.forEach(hr=>{ar[hr].forEach(({term:fr,to:pr})=>{if(!fr)return;let mr;for(let gr=0;gr<ur.length;gr++)ur[gr][0]==fr&&(mr=ur[gr][1]);nullFrom(ar,pr).forEach(gr=>{mr||ur.push([fr,mr=[]]),mr.indexOf(gr)==-1&&mr.push(gr)})})});let dr=or[cr.join(",")]=new ContentMatch(cr.indexOf(ar.length-1)>-1);for(let hr=0;hr<ur.length;hr++){let fr=ur[hr][1].sort(cmp);dr.next.push({type:ur[hr][0],next:or[fr.join(",")]||lr(fr)})}return dr}}function checkForDeadEnds(ar,or){for(let lr=0,cr=[ar];lr<cr.length;lr++){let ur=cr[lr],dr=!ur.validEnd,hr=[];for(let fr=0;fr<ur.next.length;fr++){let{type:pr,next:mr}=ur.next[fr];hr.push(pr.name),dr&&!(pr.isText||pr.hasRequiredAttrs())&&(dr=!1),cr.indexOf(mr)==-1&&cr.push(mr)}dr&&or.err("Only non-generatable nodes ("+hr.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(ar){let or=Object.create(null);for(let lr in ar){let cr=ar[lr];if(!cr.hasDefault)return null;or[lr]=cr.default}return or}function computeAttrs(ar,or){let lr=Object.create(null);for(let cr in ar){let ur=or&&or[cr];if(ur===void 0){let dr=ar[cr];if(dr.hasDefault)ur=dr.default;else throw new RangeError("No value supplied for attribute "+cr)}lr[cr]=ur}return lr}function checkAttrs(ar,or,lr,cr){for(let ur in or)if(!(ur in ar))throw new RangeError(`Unsupported attribute ${ur} for ${lr} of type ${ur}`);for(let ur in ar){let dr=ar[ur];dr.validate&&dr.validate(or[ur])}}function initAttrs(ar,or){let lr=Object.create(null);if(or)for(let cr in or)lr[cr]=new Attribute(ar,cr,or[cr]);return lr}let NodeType$1=class To{constructor(or,lr,cr){this.name=or,this.schema=lr,this.spec=cr,this.markSet=null,this.groups=cr.group?cr.group.split(" "):[],this.attrs=initAttrs(or,cr.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(cr.inline||or=="text"),this.isText=or=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(or){return this.groups.indexOf(or)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let or in this.attrs)if(this.attrs[or].isRequired)return!0;return!1}compatibleContent(or){return this==or||this.contentMatch.compatible(or.contentMatch)}computeAttrs(or){return!or&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,or)}create(or=null,lr,cr){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$1(this,this.computeAttrs(or),Fragment.from(lr),Mark$1.setFrom(cr))}createChecked(or=null,lr,cr){return lr=Fragment.from(lr),this.checkContent(lr),new Node$1(this,this.computeAttrs(or),lr,Mark$1.setFrom(cr))}createAndFill(or=null,lr,cr){if(or=this.computeAttrs(or),lr=Fragment.from(lr),lr.size){let hr=this.contentMatch.fillBefore(lr);if(!hr)return null;lr=hr.append(lr)}let ur=this.contentMatch.matchFragment(lr),dr=ur&&ur.fillBefore(Fragment.empty,!0);return dr?new Node$1(this,or,lr.append(dr),Mark$1.setFrom(cr)):null}validContent(or){let lr=this.contentMatch.matchFragment(or);if(!lr||!lr.validEnd)return!1;for(let cr=0;cr<or.childCount;cr++)if(!this.allowsMarks(or.child(cr).marks))return!1;return!0}checkContent(or){if(!this.validContent(or))throw new RangeError(`Invalid content for node ${this.name}: ${or.toString().slice(0,50)}`)}checkAttrs(or){checkAttrs(this.attrs,or,"node",this.name)}allowsMarkType(or){return this.markSet==null||this.markSet.indexOf(or)>-1}allowsMarks(or){if(this.markSet==null)return!0;for(let lr=0;lr<or.length;lr++)if(!this.allowsMarkType(or[lr].type))return!1;return!0}allowedMarks(or){if(this.markSet==null)return or;let lr;for(let cr=0;cr<or.length;cr++)this.allowsMarkType(or[cr].type)?lr&&lr.push(or[cr]):lr||(lr=or.slice(0,cr));return lr?lr.length?lr:Mark$1.none:or}static compile(or,lr){let cr=Object.create(null);or.forEach((dr,hr)=>cr[dr]=new To(dr,lr,hr));let ur=lr.spec.topNode||"doc";if(!cr[ur])throw new RangeError("Schema is missing its top node type ('"+ur+"')");if(!cr.text)throw new RangeError("Every schema needs a 'text' type");for(let dr in cr.text.attrs)throw new RangeError("The text node type should not have attributes");return cr}};function validateType(ar,or,lr){let cr=lr.split("|");return ur=>{let dr=ur===null?"null":typeof ur;if(cr.indexOf(dr)<0)throw new RangeError(`Expected value of type ${cr} for attribute ${or} on type ${ar}, got ${dr}`)}}class Attribute{constructor(or,lr,cr){this.hasDefault=Object.prototype.hasOwnProperty.call(cr,"default"),this.default=cr.default,this.validate=typeof cr.validate=="string"?validateType(or,lr,cr.validate):cr.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(or,lr,cr,ur){this.name=or,this.rank=lr,this.schema=cr,this.spec=ur,this.attrs=initAttrs(or,ur.attrs),this.excluded=null;let dr=defaultAttrs(this.attrs);this.instance=dr?new Mark$1(this,dr):null}create(or=null){return!or&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,or))}static compile(or,lr){let cr=Object.create(null),ur=0;return or.forEach((dr,hr)=>cr[dr]=new MarkType(dr,ur++,lr,hr)),cr}removeFromSet(or){for(var lr=0;lr<or.length;lr++)or[lr].type==this&&(or=or.slice(0,lr).concat(or.slice(lr+1)),lr--);return or}isInSet(or){for(let lr=0;lr<or.length;lr++)if(or[lr].type==this)return or[lr]}checkAttrs(or){checkAttrs(this.attrs,or,"mark",this.name)}excludes(or){return this.excluded.indexOf(or)>-1}}class Schema{constructor(or){this.linebreakReplacement=null,this.cached=Object.create(null);let lr=this.spec={};for(let ur in or)lr[ur]=or[ur];lr.nodes=OrderedMap.from(or.nodes),lr.marks=OrderedMap.from(or.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let cr=Object.create(null);for(let ur in this.nodes){if(ur in this.marks)throw new RangeError(ur+" can not be both a node and a mark");let dr=this.nodes[ur],hr=dr.spec.content||"",fr=dr.spec.marks;if(dr.contentMatch=cr[hr]||(cr[hr]=ContentMatch.parse(hr,this.nodes)),dr.inlineContent=dr.contentMatch.inlineContent,dr.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!dr.isInline||!dr.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=dr}dr.markSet=fr=="_"?null:fr?gatherMarks(this,fr.split(" ")):fr==""||!dr.inlineContent?[]:null}for(let ur in this.marks){let dr=this.marks[ur],hr=dr.spec.excludes;dr.excluded=hr==null?[dr]:hr==""?[]:gatherMarks(this,hr.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(or,lr=null,cr,ur){if(typeof or=="string")or=this.nodeType(or);else if(or instanceof NodeType$1){if(or.schema!=this)throw new RangeError("Node type from different schema used ("+or.name+")")}else throw new RangeError("Invalid node type: "+or);return or.createChecked(lr,cr,ur)}text(or,lr){let cr=this.nodes.text;return new TextNode(cr,cr.defaultAttrs,or,Mark$1.setFrom(lr))}mark(or,lr){return typeof or=="string"&&(or=this.marks[or]),or.create(lr)}nodeFromJSON(or){return Node$1.fromJSON(this,or)}markFromJSON(or){return Mark$1.fromJSON(this,or)}nodeType(or){let lr=this.nodes[or];if(!lr)throw new RangeError("Unknown node type: "+or);return lr}}function gatherMarks(ar,or){let lr=[];for(let cr=0;cr<or.length;cr++){let ur=or[cr],dr=ar.marks[ur],hr=dr;if(dr)lr.push(dr);else for(let fr in ar.marks){let pr=ar.marks[fr];(ur=="_"||pr.spec.group&&pr.spec.group.split(" ").indexOf(ur)>-1)&&lr.push(hr=pr)}if(!hr)throw new SyntaxError("Unknown mark type: '"+or[cr]+"'")}return lr}function isTagRule(ar){return ar.tag!=null}function isStyleRule(ar){return ar.style!=null}class DOMParser{constructor(or,lr){this.schema=or,this.rules=lr,this.tags=[],this.styles=[];let cr=this.matchedStyles=[];lr.forEach(ur=>{if(isTagRule(ur))this.tags.push(ur);else if(isStyleRule(ur)){let dr=/[^=]*/.exec(ur.style)[0];cr.indexOf(dr)<0&&cr.push(dr),this.styles.push(ur)}}),this.normalizeLists=!this.tags.some(ur=>{if(!/^(ul|ol)\b/.test(ur.tag)||!ur.node)return!1;let dr=or.nodes[ur.node];return dr.contentMatch.matchType(dr)})}parse(or,lr={}){let cr=new ParseContext(this,lr,!1);return cr.addAll(or,Mark$1.none,lr.from,lr.to),cr.finish()}parseSlice(or,lr={}){let cr=new ParseContext(this,lr,!0);return cr.addAll(or,Mark$1.none,lr.from,lr.to),Slice.maxOpen(cr.finish())}matchTag(or,lr,cr){for(let ur=cr?this.tags.indexOf(cr)+1:0;ur<this.tags.length;ur++){let dr=this.tags[ur];if(matches$1(or,dr.tag)&&(dr.namespace===void 0||or.namespaceURI==dr.namespace)&&(!dr.context||lr.matchesContext(dr.context))){if(dr.getAttrs){let hr=dr.getAttrs(or);if(hr===!1)continue;dr.attrs=hr||void 0}return dr}}}matchStyle(or,lr,cr,ur){for(let dr=ur?this.styles.indexOf(ur)+1:0;dr<this.styles.length;dr++){let hr=this.styles[dr],fr=hr.style;if(!(fr.indexOf(or)!=0||hr.context&&!cr.matchesContext(hr.context)||fr.length>or.length&&(fr.charCodeAt(or.length)!=61||fr.slice(or.length+1)!=lr))){if(hr.getAttrs){let pr=hr.getAttrs(lr);if(pr===!1)continue;hr.attrs=pr||void 0}return hr}}}static schemaRules(or){let lr=[];function cr(ur){let dr=ur.priority==null?50:ur.priority,hr=0;for(;hr<lr.length;hr++){let fr=lr[hr];if((fr.priority==null?50:fr.priority)<dr)break}lr.splice(hr,0,ur)}for(let ur in or.marks){let dr=or.marks[ur].spec.parseDOM;dr&&dr.forEach(hr=>{cr(hr=copy(hr)),hr.mark||hr.ignore||hr.clearMark||(hr.mark=ur)})}for(let ur in or.nodes){let dr=or.nodes[ur].spec.parseDOM;dr&&dr.forEach(hr=>{cr(hr=copy(hr)),hr.node||hr.ignore||hr.mark||(hr.node=ur)})}return lr}static fromSchema(or){return or.cached.domParser||(or.cached.domParser=new DOMParser(or,DOMParser.schemaRules(or)))}}const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(ar,or,lr){return or!=null?(or?OPT_PRESERVE_WS:0)|(or==="full"?OPT_PRESERVE_WS_FULL:0):ar&&ar.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:lr&-5}class NodeContext{constructor(or,lr,cr,ur,dr,hr){this.type=or,this.attrs=lr,this.marks=cr,this.solid=ur,this.options=hr,this.content=[],this.activeMarks=Mark$1.none,this.match=dr||(hr&OPT_OPEN_LEFT?null:or.contentMatch)}findWrapping(or){if(!this.match){if(!this.type)return[];let lr=this.type.contentMatch.fillBefore(Fragment.from(or));if(lr)this.match=this.type.contentMatch.matchFragment(lr);else{let cr=this.type.contentMatch,ur;return(ur=cr.findWrapping(or.type))?(this.match=cr,ur):null}}return this.match.findWrapping(or.type)}finish(or){if(!(this.options&OPT_PRESERVE_WS)){let cr=this.content[this.content.length-1],ur;if(cr&&cr.isText&&(ur=/[ \t\r\n\u000c]+$/.exec(cr.text))){let dr=cr;cr.text.length==ur[0].length?this.content.pop():this.content[this.content.length-1]=dr.withText(dr.text.slice(0,dr.text.length-ur[0].length))}}let lr=Fragment.from(this.content);return!or&&this.match&&(lr=lr.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,lr,this.marks):lr}inlineContext(or){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:or.parentNode&&!blockTags.hasOwnProperty(or.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(or,lr,cr){this.parser=or,this.options=lr,this.isOpen=cr,this.open=0,this.localPreserveWS=!1;let ur=lr.topNode,dr,hr=wsOptionsFor(null,lr.preserveWhitespace,0)|(cr?OPT_OPEN_LEFT:0);ur?dr=new NodeContext(ur.type,ur.attrs,Mark$1.none,!0,lr.topMatch||ur.type.contentMatch,hr):cr?dr=new NodeContext(null,null,Mark$1.none,!0,null,hr):dr=new NodeContext(or.schema.topNodeType,null,Mark$1.none,!0,null,hr),this.nodes=[dr],this.find=lr.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(or,lr){or.nodeType==3?this.addTextNode(or,lr):or.nodeType==1&&this.addElement(or,lr)}addTextNode(or,lr){let cr=or.nodeValue,ur=this.top,dr=ur.options&OPT_PRESERVE_WS_FULL?"full":this.localPreserveWS||(ur.options&OPT_PRESERVE_WS)>0;if(dr==="full"||ur.inlineContext(or)||/[^ \t\r\n\u000c]/.test(cr)){if(dr)dr!=="full"?cr=cr.replace(/\r?\n|\r/g," "):cr=cr.replace(/\r\n?/g,`
`);else if(cr=cr.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(cr)&&this.open==this.nodes.length-1){let hr=ur.content[ur.content.length-1],fr=or.previousSibling;(!hr||fr&&fr.nodeName=="BR"||hr.isText&&/[ \t\r\n\u000c]$/.test(hr.text))&&(cr=cr.slice(1))}cr&&this.insertNode(this.parser.schema.text(cr),lr,!/\S/.test(cr)),this.findInText(or)}else this.findInside(or)}addElement(or,lr,cr){let ur=this.localPreserveWS,dr=this.top;(or.tagName=="PRE"||/pre/.test(or.style&&or.style.whiteSpace))&&(this.localPreserveWS=!0);let hr=or.nodeName.toLowerCase(),fr;listTags.hasOwnProperty(hr)&&this.parser.normalizeLists&&normalizeList(or);let pr=this.options.ruleFromNode&&this.options.ruleFromNode(or)||(fr=this.parser.matchTag(or,this,cr));e:if(pr?pr.ignore:ignoreTags.hasOwnProperty(hr))this.findInside(or),this.ignoreFallback(or,lr);else if(!pr||pr.skip||pr.closeParent){pr&&pr.closeParent?this.open=Math.max(0,this.open-1):pr&&pr.skip.nodeType&&(or=pr.skip);let mr,gr=this.needsBlock;if(blockTags.hasOwnProperty(hr))dr.content.length&&dr.content[0].isInline&&this.open&&(this.open--,dr=this.top),mr=!0,dr.type||(this.needsBlock=!0);else if(!or.firstChild){this.leafFallback(or,lr);break e}let yr=pr&&pr.skip?lr:this.readStyles(or,lr);yr&&this.addAll(or,yr),mr&&this.sync(dr),this.needsBlock=gr}else{let mr=this.readStyles(or,lr);mr&&this.addElementByRule(or,pr,mr,pr.consuming===!1?fr:void 0)}this.localPreserveWS=ur}leafFallback(or,lr){or.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(or.ownerDocument.createTextNode(`
`),lr)}ignoreFallback(or,lr){or.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),lr,!0)}readStyles(or,lr){let cr=or.style;if(cr&&cr.length)for(let ur=0;ur<this.parser.matchedStyles.length;ur++){let dr=this.parser.matchedStyles[ur],hr=cr.getPropertyValue(dr);if(hr)for(let fr=void 0;;){let pr=this.parser.matchStyle(dr,hr,this,fr);if(!pr)break;if(pr.ignore)return null;if(pr.clearMark?lr=lr.filter(mr=>!pr.clearMark(mr)):lr=lr.concat(this.parser.schema.marks[pr.mark].create(pr.attrs)),pr.consuming===!1)fr=pr;else break}}return lr}addElementByRule(or,lr,cr,ur){let dr,hr;if(lr.node)if(hr=this.parser.schema.nodes[lr.node],hr.isLeaf)this.insertNode(hr.create(lr.attrs),cr,or.nodeName=="BR")||this.leafFallback(or,cr);else{let pr=this.enter(hr,lr.attrs||null,cr,lr.preserveWhitespace);pr&&(dr=!0,cr=pr)}else{let pr=this.parser.schema.marks[lr.mark];cr=cr.concat(pr.create(lr.attrs))}let fr=this.top;if(hr&&hr.isLeaf)this.findInside(or);else if(ur)this.addElement(or,cr,ur);else if(lr.getContent)this.findInside(or),lr.getContent(or,this.parser.schema).forEach(pr=>this.insertNode(pr,cr,!1));else{let pr=or;typeof lr.contentElement=="string"?pr=or.querySelector(lr.contentElement):typeof lr.contentElement=="function"?pr=lr.contentElement(or):lr.contentElement&&(pr=lr.contentElement),this.findAround(or,pr,!0),this.addAll(pr,cr),this.findAround(or,pr,!1)}dr&&this.sync(fr)&&this.open--}addAll(or,lr,cr,ur){let dr=cr||0;for(let hr=cr?or.childNodes[cr]:or.firstChild,fr=ur==null?null:or.childNodes[ur];hr!=fr;hr=hr.nextSibling,++dr)this.findAtPoint(or,dr),this.addDOM(hr,lr);this.findAtPoint(or,dr)}findPlace(or,lr,cr){let ur,dr;for(let hr=this.open,fr=0;hr>=0;hr--){let pr=this.nodes[hr],mr=pr.findWrapping(or);if(mr&&(!ur||ur.length>mr.length+fr)&&(ur=mr,dr=pr,!mr.length))break;if(pr.solid){if(cr)break;fr+=2}}if(!ur)return null;this.sync(dr);for(let hr=0;hr<ur.length;hr++)lr=this.enterInner(ur[hr],null,lr,!1);return lr}insertNode(or,lr,cr){if(or.isInline&&this.needsBlock&&!this.top.type){let dr=this.textblockFromContext();dr&&(lr=this.enterInner(dr,null,lr))}let ur=this.findPlace(or,lr,cr);if(ur){this.closeExtra();let dr=this.top;dr.match&&(dr.match=dr.match.matchType(or.type));let hr=Mark$1.none;for(let fr of ur.concat(or.marks))(dr.type?dr.type.allowsMarkType(fr.type):markMayApply(fr.type,or.type))&&(hr=fr.addToSet(hr));return dr.content.push(or.mark(hr)),!0}return!1}enter(or,lr,cr,ur){let dr=this.findPlace(or.create(lr),cr,!1);return dr&&(dr=this.enterInner(or,lr,cr,!0,ur)),dr}enterInner(or,lr,cr,ur=!1,dr){this.closeExtra();let hr=this.top;hr.match=hr.match&&hr.match.matchType(or);let fr=wsOptionsFor(or,dr,hr.options);hr.options&OPT_OPEN_LEFT&&hr.content.length==0&&(fr|=OPT_OPEN_LEFT);let pr=Mark$1.none;return cr=cr.filter(mr=>(hr.type?hr.type.allowsMarkType(mr.type):markMayApply(mr.type,or))?(pr=mr.addToSet(pr),!1):!0),this.nodes.push(new NodeContext(or,lr,pr,ur,null,fr)),this.open++,cr}closeExtra(or=!1){let lr=this.nodes.length-1;if(lr>this.open){for(;lr>this.open;lr--)this.nodes[lr-1].content.push(this.nodes[lr].finish(or));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(or){for(let lr=this.open;lr>=0;lr--){if(this.nodes[lr]==or)return this.open=lr,!0;this.localPreserveWS&&(this.nodes[lr].options|=OPT_PRESERVE_WS)}return!1}get currentPos(){this.closeExtra();let or=0;for(let lr=this.open;lr>=0;lr--){let cr=this.nodes[lr].content;for(let ur=cr.length-1;ur>=0;ur--)or+=cr[ur].nodeSize;lr&&or++}return or}findAtPoint(or,lr){if(this.find)for(let cr=0;cr<this.find.length;cr++)this.find[cr].node==or&&this.find[cr].offset==lr&&(this.find[cr].pos=this.currentPos)}findInside(or){if(this.find)for(let lr=0;lr<this.find.length;lr++)this.find[lr].pos==null&&or.nodeType==1&&or.contains(this.find[lr].node)&&(this.find[lr].pos=this.currentPos)}findAround(or,lr,cr){if(or!=lr&&this.find)for(let ur=0;ur<this.find.length;ur++)this.find[ur].pos==null&&or.nodeType==1&&or.contains(this.find[ur].node)&&lr.compareDocumentPosition(this.find[ur].node)&(cr?2:4)&&(this.find[ur].pos=this.currentPos)}findInText(or){if(this.find)for(let lr=0;lr<this.find.length;lr++)this.find[lr].node==or&&(this.find[lr].pos=this.currentPos-(or.nodeValue.length-this.find[lr].offset))}matchesContext(or){if(or.indexOf("|")>-1)return or.split(/\s*\|\s*/).some(this.matchesContext,this);let lr=or.split("/"),cr=this.options.context,ur=!this.isOpen&&(!cr||cr.parent.type==this.nodes[0].type),dr=-(cr?cr.depth+1:0)+(ur?0:1),hr=(fr,pr)=>{for(;fr>=0;fr--){let mr=lr[fr];if(mr==""){if(fr==lr.length-1||fr==0)continue;for(;pr>=dr;pr--)if(hr(fr-1,pr))return!0;return!1}else{let gr=pr>0||pr==0&&ur?this.nodes[pr].type:cr&&pr>=dr?cr.node(pr-dr).type:null;if(!gr||gr.name!=mr&&!gr.isInGroup(mr))return!1;pr--}}return!0};return hr(lr.length-1,this.open)}textblockFromContext(){let or=this.options.context;if(or)for(let lr=or.depth;lr>=0;lr--){let cr=or.node(lr).contentMatchAt(or.indexAfter(lr)).defaultType;if(cr&&cr.isTextblock&&cr.defaultAttrs)return cr}for(let lr in this.parser.schema.nodes){let cr=this.parser.schema.nodes[lr];if(cr.isTextblock&&cr.defaultAttrs)return cr}}}function normalizeList(ar){for(let or=ar.firstChild,lr=null;or;or=or.nextSibling){let cr=or.nodeType==1?or.nodeName.toLowerCase():null;cr&&listTags.hasOwnProperty(cr)&&lr?(lr.appendChild(or),or=lr):cr=="li"?lr=or:cr&&(lr=null)}}function matches$1(ar,or){return(ar.matches||ar.msMatchesSelector||ar.webkitMatchesSelector||ar.mozMatchesSelector).call(ar,or)}function copy(ar){let or={};for(let lr in ar)or[lr]=ar[lr];return or}function markMayApply(ar,or){let lr=or.schema.nodes;for(let cr in lr){let ur=lr[cr];if(!ur.allowsMarkType(ar))continue;let dr=[],hr=fr=>{dr.push(fr);for(let pr=0;pr<fr.edgeCount;pr++){let{type:mr,next:gr}=fr.edge(pr);if(mr==or||dr.indexOf(gr)<0&&hr(gr))return!0}};if(hr(ur.contentMatch))return!0}}class DOMSerializer{constructor(or,lr){this.nodes=or,this.marks=lr}serializeFragment(or,lr={},cr){cr||(cr=doc$1(lr).createDocumentFragment());let ur=cr,dr=[];return or.forEach(hr=>{if(dr.length||hr.marks.length){let fr=0,pr=0;for(;fr<dr.length&&pr<hr.marks.length;){let mr=hr.marks[pr];if(!this.marks[mr.type.name]){pr++;continue}if(!mr.eq(dr[fr][0])||mr.type.spec.spanning===!1)break;fr++,pr++}for(;fr<dr.length;)ur=dr.pop()[1];for(;pr<hr.marks.length;){let mr=hr.marks[pr++],gr=this.serializeMark(mr,hr.isInline,lr);gr&&(dr.push([mr,ur]),ur.appendChild(gr.dom),ur=gr.contentDOM||gr.dom)}}ur.appendChild(this.serializeNodeInner(hr,lr))}),cr}serializeNodeInner(or,lr){let{dom:cr,contentDOM:ur}=renderSpec(doc$1(lr),this.nodes[or.type.name](or),null,or.attrs);if(ur){if(or.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(or.content,lr,ur)}return cr}serializeNode(or,lr={}){let cr=this.serializeNodeInner(or,lr);for(let ur=or.marks.length-1;ur>=0;ur--){let dr=this.serializeMark(or.marks[ur],or.isInline,lr);dr&&((dr.contentDOM||dr.dom).appendChild(cr),cr=dr.dom)}return cr}serializeMark(or,lr,cr={}){let ur=this.marks[or.type.name];return ur&&renderSpec(doc$1(cr),ur(or,lr),null,or.attrs)}static renderSpec(or,lr,cr=null,ur){return renderSpec(or,lr,cr,ur)}static fromSchema(or){return or.cached.domSerializer||(or.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(or),this.marksFromSchema(or)))}static nodesFromSchema(or){let lr=gatherToDOM(or.nodes);return lr.text||(lr.text=cr=>cr.text),lr}static marksFromSchema(or){return gatherToDOM(or.marks)}}function gatherToDOM(ar){let or={};for(let lr in ar){let cr=ar[lr].spec.toDOM;cr&&(or[lr]=cr)}return or}function doc$1(ar){return ar.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(ar){let or=suspiciousAttributeCache.get(ar);return or===void 0&&suspiciousAttributeCache.set(ar,or=suspiciousAttributesInner(ar)),or}function suspiciousAttributesInner(ar){let or=null;function lr(cr){if(cr&&typeof cr=="object")if(Array.isArray(cr))if(typeof cr[0]=="string")or||(or=[]),or.push(cr);else for(let ur=0;ur<cr.length;ur++)lr(cr[ur]);else for(let ur in cr)lr(cr[ur])}return lr(ar),or}function renderSpec(ar,or,lr,cr){if(typeof or=="string")return{dom:ar.createTextNode(or)};if(or.nodeType!=null)return{dom:or};if(or.dom&&or.dom.nodeType!=null)return or;let ur=or[0],dr;if(typeof ur!="string")throw new RangeError("Invalid array passed to renderSpec");if(cr&&(dr=suspiciousAttributes(cr))&&dr.indexOf(or)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let hr=ur.indexOf(" ");hr>0&&(lr=ur.slice(0,hr),ur=ur.slice(hr+1));let fr,pr=lr?ar.createElementNS(lr,ur):ar.createElement(ur),mr=or[1],gr=1;if(mr&&typeof mr=="object"&&mr.nodeType==null&&!Array.isArray(mr)){gr=2;for(let yr in mr)if(mr[yr]!=null){let vr=yr.indexOf(" ");vr>0?pr.setAttributeNS(yr.slice(0,vr),yr.slice(vr+1),mr[yr]):pr.setAttribute(yr,mr[yr])}}for(let yr=gr;yr<or.length;yr++){let vr=or[yr];if(vr===0){if(yr<or.length-1||yr>gr)throw new RangeError("Content hole must be the only child of its parent node");return{dom:pr,contentDOM:pr}}else{let{dom:br,contentDOM:Sr}=renderSpec(ar,vr,lr,cr);if(pr.appendChild(br),Sr){if(fr)throw new RangeError("Multiple content holes");fr=Sr}}}return{dom:pr,contentDOM:fr}}const lower16=65535,factor16=Math.pow(2,16);function makeRecover(ar,or){return ar+or*factor16}function recoverIndex(ar){return ar&lower16}function recoverOffset(ar){return(ar-(ar&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(or,lr,cr){this.pos=or,this.delInfo=lr,this.recover=cr}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(or,lr=!1){if(this.ranges=or,this.inverted=lr,!or.length&&StepMap.empty)return StepMap.empty}recover(or){let lr=0,cr=recoverIndex(or);if(!this.inverted)for(let ur=0;ur<cr;ur++)lr+=this.ranges[ur*3+2]-this.ranges[ur*3+1];return this.ranges[cr*3]+lr+recoverOffset(or)}mapResult(or,lr=1){return this._map(or,lr,!1)}map(or,lr=1){return this._map(or,lr,!0)}_map(or,lr,cr){let ur=0,dr=this.inverted?2:1,hr=this.inverted?1:2;for(let fr=0;fr<this.ranges.length;fr+=3){let pr=this.ranges[fr]-(this.inverted?ur:0);if(pr>or)break;let mr=this.ranges[fr+dr],gr=this.ranges[fr+hr],yr=pr+mr;if(or<=yr){let vr=mr?or==pr?-1:or==yr?1:lr:lr,br=pr+ur+(vr<0?0:gr);if(cr)return br;let Sr=or==(lr<0?pr:yr)?null:makeRecover(fr/3,or-pr),xr=or==pr?DEL_AFTER:or==yr?DEL_BEFORE:DEL_ACROSS;return(lr<0?or!=pr:or!=yr)&&(xr|=DEL_SIDE),new MapResult(br,xr,Sr)}ur+=gr-mr}return cr?or+ur:new MapResult(or+ur,0,null)}touches(or,lr){let cr=0,ur=recoverIndex(lr),dr=this.inverted?2:1,hr=this.inverted?1:2;for(let fr=0;fr<this.ranges.length;fr+=3){let pr=this.ranges[fr]-(this.inverted?cr:0);if(pr>or)break;let mr=this.ranges[fr+dr],gr=pr+mr;if(or<=gr&&fr==ur*3)return!0;cr+=this.ranges[fr+hr]-mr}return!1}forEach(or){let lr=this.inverted?2:1,cr=this.inverted?1:2;for(let ur=0,dr=0;ur<this.ranges.length;ur+=3){let hr=this.ranges[ur],fr=hr-(this.inverted?dr:0),pr=hr+(this.inverted?0:dr),mr=this.ranges[ur+lr],gr=this.ranges[ur+cr];or(fr,fr+mr,pr,pr+gr),dr+=gr-mr}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(or){return or==0?StepMap.empty:new StepMap(or<0?[0,-or,0]:[0,0,or])}}StepMap.empty=new StepMap([]);class Mapping{constructor(or,lr,cr=0,ur=or?or.length:0){this.mirror=lr,this.from=cr,this.to=ur,this._maps=or||[],this.ownData=!(or||lr)}get maps(){return this._maps}slice(or=0,lr=this.maps.length){return new Mapping(this._maps,this.mirror,or,lr)}appendMap(or,lr){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(or),lr!=null&&this.setMirror(this._maps.length-1,lr)}appendMapping(or){for(let lr=0,cr=this._maps.length;lr<or._maps.length;lr++){let ur=or.getMirror(lr);this.appendMap(or._maps[lr],ur!=null&&ur<lr?cr+ur:void 0)}}getMirror(or){if(this.mirror){for(let lr=0;lr<this.mirror.length;lr++)if(this.mirror[lr]==or)return this.mirror[lr+(lr%2?-1:1)]}}setMirror(or,lr){this.mirror||(this.mirror=[]),this.mirror.push(or,lr)}appendMappingInverted(or){for(let lr=or.maps.length-1,cr=this._maps.length+or._maps.length;lr>=0;lr--){let ur=or.getMirror(lr);this.appendMap(or._maps[lr].invert(),ur!=null&&ur>lr?cr-ur-1:void 0)}}invert(){let or=new Mapping;return or.appendMappingInverted(this),or}map(or,lr=1){if(this.mirror)return this._map(or,lr,!0);for(let cr=this.from;cr<this.to;cr++)or=this._maps[cr].map(or,lr);return or}mapResult(or,lr=1){return this._map(or,lr,!1)}_map(or,lr,cr){let ur=0;for(let dr=this.from;dr<this.to;dr++){let hr=this._maps[dr],fr=hr.mapResult(or,lr);if(fr.recover!=null){let pr=this.getMirror(dr);if(pr!=null&&pr>dr&&pr<this.to){dr=pr,or=this._maps[pr].recover(fr.recover);continue}}ur|=fr.delInfo,or=fr.pos}return cr?or:new MapResult(or,ur,null)}}const stepsByID=Object.create(null);class Step{getMap(){return StepMap.empty}merge(or){return null}static fromJSON(or,lr){if(!lr||!lr.stepType)throw new RangeError("Invalid input for Step.fromJSON");let cr=stepsByID[lr.stepType];if(!cr)throw new RangeError(`No step type ${lr.stepType} defined`);return cr.fromJSON(or,lr)}static jsonID(or,lr){if(or in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+or);return stepsByID[or]=lr,lr.prototype.jsonID=or,lr}}class StepResult{constructor(or,lr){this.doc=or,this.failed=lr}static ok(or){return new StepResult(or,null)}static fail(or){return new StepResult(null,or)}static fromReplace(or,lr,cr,ur){try{return StepResult.ok(or.replace(lr,cr,ur))}catch(dr){if(dr instanceof ReplaceError)return StepResult.fail(dr.message);throw dr}}}function mapFragment(ar,or,lr){let cr=[];for(let ur=0;ur<ar.childCount;ur++){let dr=ar.child(ur);dr.content.size&&(dr=dr.copy(mapFragment(dr.content,or,dr))),dr.isInline&&(dr=or(dr,lr,ur)),cr.push(dr)}return Fragment.fromArray(cr)}class AddMarkStep extends Step{constructor(or,lr,cr){super(),this.from=or,this.to=lr,this.mark=cr}apply(or){let lr=or.slice(this.from,this.to),cr=or.resolve(this.from),ur=cr.node(cr.sharedDepth(this.to)),dr=new Slice(mapFragment(lr.content,(hr,fr)=>!hr.isAtom||!fr.type.allowsMarkType(this.mark.type)?hr:hr.mark(this.mark.addToSet(hr.marks)),ur),lr.openStart,lr.openEnd);return StepResult.fromReplace(or,this.from,this.to,dr)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(or){let lr=or.mapResult(this.from,1),cr=or.mapResult(this.to,-1);return lr.deleted&&cr.deleted||lr.pos>=cr.pos?null:new AddMarkStep(lr.pos,cr.pos,this.mark)}merge(or){return or instanceof AddMarkStep&&or.mark.eq(this.mark)&&this.from<=or.to&&this.to>=or.from?new AddMarkStep(Math.min(this.from,or.from),Math.max(this.to,or.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(or,lr){if(typeof lr.from!="number"||typeof lr.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(lr.from,lr.to,or.markFromJSON(lr.mark))}}Step.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step{constructor(or,lr,cr){super(),this.from=or,this.to=lr,this.mark=cr}apply(or){let lr=or.slice(this.from,this.to),cr=new Slice(mapFragment(lr.content,ur=>ur.mark(this.mark.removeFromSet(ur.marks)),or),lr.openStart,lr.openEnd);return StepResult.fromReplace(or,this.from,this.to,cr)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(or){let lr=or.mapResult(this.from,1),cr=or.mapResult(this.to,-1);return lr.deleted&&cr.deleted||lr.pos>=cr.pos?null:new RemoveMarkStep(lr.pos,cr.pos,this.mark)}merge(or){return or instanceof RemoveMarkStep&&or.mark.eq(this.mark)&&this.from<=or.to&&this.to>=or.from?new RemoveMarkStep(Math.min(this.from,or.from),Math.max(this.to,or.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(or,lr){if(typeof lr.from!="number"||typeof lr.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(lr.from,lr.to,or.markFromJSON(lr.mark))}}Step.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step{constructor(or,lr){super(),this.pos=or,this.mark=lr}apply(or){let lr=or.nodeAt(this.pos);if(!lr)return StepResult.fail("No node at mark step's position");let cr=lr.type.create(lr.attrs,null,this.mark.addToSet(lr.marks));return StepResult.fromReplace(or,this.pos,this.pos+1,new Slice(Fragment.from(cr),0,lr.isLeaf?0:1))}invert(or){let lr=or.nodeAt(this.pos);if(lr){let cr=this.mark.addToSet(lr.marks);if(cr.length==lr.marks.length){for(let ur=0;ur<lr.marks.length;ur++)if(!lr.marks[ur].isInSet(cr))return new AddNodeMarkStep(this.pos,lr.marks[ur]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(or){let lr=or.mapResult(this.pos,1);return lr.deletedAfter?null:new AddNodeMarkStep(lr.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(or,lr){if(typeof lr.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(lr.pos,or.markFromJSON(lr.mark))}}Step.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step{constructor(or,lr){super(),this.pos=or,this.mark=lr}apply(or){let lr=or.nodeAt(this.pos);if(!lr)return StepResult.fail("No node at mark step's position");let cr=lr.type.create(lr.attrs,null,this.mark.removeFromSet(lr.marks));return StepResult.fromReplace(or,this.pos,this.pos+1,new Slice(Fragment.from(cr),0,lr.isLeaf?0:1))}invert(or){let lr=or.nodeAt(this.pos);return!lr||!this.mark.isInSet(lr.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(or){let lr=or.mapResult(this.pos,1);return lr.deletedAfter?null:new RemoveNodeMarkStep(lr.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(or,lr){if(typeof lr.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(lr.pos,or.markFromJSON(lr.mark))}}Step.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step{constructor(or,lr,cr,ur=!1){super(),this.from=or,this.to=lr,this.slice=cr,this.structure=ur}apply(or){return this.structure&&contentBetween(or,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(or,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(or){return new ReplaceStep(this.from,this.from+this.slice.size,or.slice(this.from,this.to))}map(or){let lr=or.mapResult(this.from,1),cr=or.mapResult(this.to,-1);return lr.deletedAcross&&cr.deletedAcross?null:new ReplaceStep(lr.pos,Math.max(lr.pos,cr.pos),this.slice,this.structure)}merge(or){if(!(or instanceof ReplaceStep)||or.structure||this.structure)return null;if(this.from+this.slice.size==or.from&&!this.slice.openEnd&&!or.slice.openStart){let lr=this.slice.size+or.slice.size==0?Slice.empty:new Slice(this.slice.content.append(or.slice.content),this.slice.openStart,or.slice.openEnd);return new ReplaceStep(this.from,this.to+(or.to-or.from),lr,this.structure)}else if(or.to==this.from&&!this.slice.openStart&&!or.slice.openEnd){let lr=this.slice.size+or.slice.size==0?Slice.empty:new Slice(or.slice.content.append(this.slice.content),or.slice.openStart,this.slice.openEnd);return new ReplaceStep(or.from,this.to,lr,this.structure)}else return null}toJSON(){let or={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(or.slice=this.slice.toJSON()),this.structure&&(or.structure=!0),or}static fromJSON(or,lr){if(typeof lr.from!="number"||typeof lr.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(lr.from,lr.to,Slice.fromJSON(or,lr.slice),!!lr.structure)}}Step.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step{constructor(or,lr,cr,ur,dr,hr,fr=!1){super(),this.from=or,this.to=lr,this.gapFrom=cr,this.gapTo=ur,this.slice=dr,this.insert=hr,this.structure=fr}apply(or){if(this.structure&&(contentBetween(or,this.from,this.gapFrom)||contentBetween(or,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let lr=or.slice(this.gapFrom,this.gapTo);if(lr.openStart||lr.openEnd)return StepResult.fail("Gap is not a flat range");let cr=this.slice.insertAt(this.insert,lr.content);return cr?StepResult.fromReplace(or,this.from,this.to,cr):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(or){let lr=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+lr,this.from+this.insert,this.from+this.insert+lr,or.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(or){let lr=or.mapResult(this.from,1),cr=or.mapResult(this.to,-1),ur=this.from==this.gapFrom?lr.pos:or.map(this.gapFrom,-1),dr=this.to==this.gapTo?cr.pos:or.map(this.gapTo,1);return lr.deletedAcross&&cr.deletedAcross||ur<lr.pos||dr>cr.pos?null:new ReplaceAroundStep(lr.pos,cr.pos,ur,dr,this.slice,this.insert,this.structure)}toJSON(){let or={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(or.slice=this.slice.toJSON()),this.structure&&(or.structure=!0),or}static fromJSON(or,lr){if(typeof lr.from!="number"||typeof lr.to!="number"||typeof lr.gapFrom!="number"||typeof lr.gapTo!="number"||typeof lr.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(lr.from,lr.to,lr.gapFrom,lr.gapTo,Slice.fromJSON(or,lr.slice),lr.insert,!!lr.structure)}}Step.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(ar,or,lr){let cr=ar.resolve(or),ur=lr-or,dr=cr.depth;for(;ur>0&&dr>0&&cr.indexAfter(dr)==cr.node(dr).childCount;)dr--,ur--;if(ur>0){let hr=cr.node(dr).maybeChild(cr.indexAfter(dr));for(;ur>0;){if(!hr||hr.isLeaf)return!0;hr=hr.firstChild,ur--}}return!1}function addMark(ar,or,lr,cr){let ur=[],dr=[],hr,fr;ar.doc.nodesBetween(or,lr,(pr,mr,gr)=>{if(!pr.isInline)return;let yr=pr.marks;if(!cr.isInSet(yr)&&gr.type.allowsMarkType(cr.type)){let vr=Math.max(mr,or),br=Math.min(mr+pr.nodeSize,lr),Sr=cr.addToSet(yr);for(let xr=0;xr<yr.length;xr++)yr[xr].isInSet(Sr)||(hr&&hr.to==vr&&hr.mark.eq(yr[xr])?hr.to=br:ur.push(hr=new RemoveMarkStep(vr,br,yr[xr])));fr&&fr.to==vr?fr.to=br:dr.push(fr=new AddMarkStep(vr,br,cr))}}),ur.forEach(pr=>ar.step(pr)),dr.forEach(pr=>ar.step(pr))}function removeMark(ar,or,lr,cr){let ur=[],dr=0;ar.doc.nodesBetween(or,lr,(hr,fr)=>{if(!hr.isInline)return;dr++;let pr=null;if(cr instanceof MarkType){let mr=hr.marks,gr;for(;gr=cr.isInSet(mr);)(pr||(pr=[])).push(gr),mr=gr.removeFromSet(mr)}else cr?cr.isInSet(hr.marks)&&(pr=[cr]):pr=hr.marks;if(pr&&pr.length){let mr=Math.min(fr+hr.nodeSize,lr);for(let gr=0;gr<pr.length;gr++){let yr=pr[gr],vr;for(let br=0;br<ur.length;br++){let Sr=ur[br];Sr.step==dr-1&&yr.eq(ur[br].style)&&(vr=Sr)}vr?(vr.to=mr,vr.step=dr):ur.push({style:yr,from:Math.max(fr,or),to:mr,step:dr})}}}),ur.forEach(hr=>ar.step(new RemoveMarkStep(hr.from,hr.to,hr.style)))}function clearIncompatible(ar,or,lr,cr=lr.contentMatch,ur=!0){let dr=ar.doc.nodeAt(or),hr=[],fr=or+1;for(let pr=0;pr<dr.childCount;pr++){let mr=dr.child(pr),gr=fr+mr.nodeSize,yr=cr.matchType(mr.type);if(!yr)hr.push(new ReplaceStep(fr,gr,Slice.empty));else{cr=yr;for(let vr=0;vr<mr.marks.length;vr++)lr.allowsMarkType(mr.marks[vr].type)||ar.step(new RemoveMarkStep(fr,gr,mr.marks[vr]));if(ur&&mr.isText&&lr.whitespace!="pre"){let vr,br=/\r?\n|\r/g,Sr;for(;vr=br.exec(mr.text);)Sr||(Sr=new Slice(Fragment.from(lr.schema.text(" ",lr.allowedMarks(mr.marks))),0,0)),hr.push(new ReplaceStep(fr+vr.index,fr+vr.index+vr[0].length,Sr))}}fr=gr}if(!cr.validEnd){let pr=cr.fillBefore(Fragment.empty,!0);ar.replace(fr,fr,new Slice(pr,0,0))}for(let pr=hr.length-1;pr>=0;pr--)ar.step(hr[pr])}function canCut(ar,or,lr){return(or==0||ar.canReplace(or,ar.childCount))&&(lr==ar.childCount||ar.canReplace(0,lr))}function liftTarget(ar){let lr=ar.parent.content.cutByIndex(ar.startIndex,ar.endIndex);for(let cr=ar.depth;;--cr){let ur=ar.$from.node(cr),dr=ar.$from.index(cr),hr=ar.$to.indexAfter(cr);if(cr<ar.depth&&ur.canReplace(dr,hr,lr))return cr;if(cr==0||ur.type.spec.isolating||!canCut(ur,dr,hr))break}return null}function lift$2(ar,or,lr){let{$from:cr,$to:ur,depth:dr}=or,hr=cr.before(dr+1),fr=ur.after(dr+1),pr=hr,mr=fr,gr=Fragment.empty,yr=0;for(let Sr=dr,xr=!1;Sr>lr;Sr--)xr||cr.index(Sr)>0?(xr=!0,gr=Fragment.from(cr.node(Sr).copy(gr)),yr++):pr--;let vr=Fragment.empty,br=0;for(let Sr=dr,xr=!1;Sr>lr;Sr--)xr||ur.after(Sr+1)<ur.end(Sr)?(xr=!0,vr=Fragment.from(ur.node(Sr).copy(vr)),br++):mr++;ar.step(new ReplaceAroundStep(pr,mr,hr,fr,new Slice(gr.append(vr),yr,br),gr.size-yr,!0))}function findWrapping(ar,or,lr=null,cr=ar){let ur=findWrappingOutside(ar,or),dr=ur&&findWrappingInside(cr,or);return dr?ur.map(withAttrs).concat({type:or,attrs:lr}).concat(dr.map(withAttrs)):null}function withAttrs(ar){return{type:ar,attrs:null}}function findWrappingOutside(ar,or){let{parent:lr,startIndex:cr,endIndex:ur}=ar,dr=lr.contentMatchAt(cr).findWrapping(or);if(!dr)return null;let hr=dr.length?dr[0]:or;return lr.canReplaceWith(cr,ur,hr)?dr:null}function findWrappingInside(ar,or){let{parent:lr,startIndex:cr,endIndex:ur}=ar,dr=lr.child(cr),hr=or.contentMatch.findWrapping(dr.type);if(!hr)return null;let pr=(hr.length?hr[hr.length-1]:or).contentMatch;for(let mr=cr;pr&&mr<ur;mr++)pr=pr.matchType(lr.child(mr).type);return!pr||!pr.validEnd?null:hr}function wrap(ar,or,lr){let cr=Fragment.empty;for(let hr=lr.length-1;hr>=0;hr--){if(cr.size){let fr=lr[hr].type.contentMatch.matchFragment(cr);if(!fr||!fr.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}cr=Fragment.from(lr[hr].type.create(lr[hr].attrs,cr))}let ur=or.start,dr=or.end;ar.step(new ReplaceAroundStep(ur,dr,ur,dr,new Slice(cr,0,0),lr.length,!0))}function setBlockType$1(ar,or,lr,cr,ur){if(!cr.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let dr=ar.steps.length;ar.doc.nodesBetween(or,lr,(hr,fr)=>{let pr=typeof ur=="function"?ur(hr):ur;if(hr.isTextblock&&!hr.hasMarkup(cr,pr)&&canChangeType(ar.doc,ar.mapping.slice(dr).map(fr),cr)){let mr=null;if(cr.schema.linebreakReplacement){let br=cr.whitespace=="pre",Sr=!!cr.contentMatch.matchType(cr.schema.linebreakReplacement);br&&!Sr?mr=!1:!br&&Sr&&(mr=!0)}mr===!1&&replaceLinebreaks(ar,hr,fr,dr),clearIncompatible(ar,ar.mapping.slice(dr).map(fr,1),cr,void 0,mr===null);let gr=ar.mapping.slice(dr),yr=gr.map(fr,1),vr=gr.map(fr+hr.nodeSize,1);return ar.step(new ReplaceAroundStep(yr,vr,yr+1,vr-1,new Slice(Fragment.from(cr.create(pr,null,hr.marks)),0,0),1,!0)),mr===!0&&replaceNewlines(ar,hr,fr,dr),!1}})}function replaceNewlines(ar,or,lr,cr){or.forEach((ur,dr)=>{if(ur.isText){let hr,fr=/\r?\n|\r/g;for(;hr=fr.exec(ur.text);){let pr=ar.mapping.slice(cr).map(lr+1+dr+hr.index);ar.replaceWith(pr,pr+1,or.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(ar,or,lr,cr){or.forEach((ur,dr)=>{if(ur.type==ur.type.schema.linebreakReplacement){let hr=ar.mapping.slice(cr).map(lr+1+dr);ar.replaceWith(hr,hr+1,or.type.schema.text(`
`))}})}function canChangeType(ar,or,lr){let cr=ar.resolve(or),ur=cr.index();return cr.parent.canReplaceWith(ur,ur+1,lr)}function setNodeMarkup(ar,or,lr,cr,ur){let dr=ar.doc.nodeAt(or);if(!dr)throw new RangeError("No node at given position");lr||(lr=dr.type);let hr=lr.create(cr,null,ur||dr.marks);if(dr.isLeaf)return ar.replaceWith(or,or+dr.nodeSize,hr);if(!lr.validContent(dr.content))throw new RangeError("Invalid content for node type "+lr.name);ar.step(new ReplaceAroundStep(or,or+dr.nodeSize,or+1,or+dr.nodeSize-1,new Slice(Fragment.from(hr),0,0),1,!0))}function canSplit(ar,or,lr=1,cr){let ur=ar.resolve(or),dr=ur.depth-lr,hr=cr&&cr[cr.length-1]||ur.parent;if(dr<0||ur.parent.type.spec.isolating||!ur.parent.canReplace(ur.index(),ur.parent.childCount)||!hr.type.validContent(ur.parent.content.cutByIndex(ur.index(),ur.parent.childCount)))return!1;for(let mr=ur.depth-1,gr=lr-2;mr>dr;mr--,gr--){let yr=ur.node(mr),vr=ur.index(mr);if(yr.type.spec.isolating)return!1;let br=yr.content.cutByIndex(vr,yr.childCount),Sr=cr&&cr[gr+1];Sr&&(br=br.replaceChild(0,Sr.type.create(Sr.attrs)));let xr=cr&&cr[gr]||yr;if(!yr.canReplace(vr+1,yr.childCount)||!xr.type.validContent(br))return!1}let fr=ur.indexAfter(dr),pr=cr&&cr[0];return ur.node(dr).canReplaceWith(fr,fr,pr?pr.type:ur.node(dr+1).type)}function split(ar,or,lr=1,cr){let ur=ar.doc.resolve(or),dr=Fragment.empty,hr=Fragment.empty;for(let fr=ur.depth,pr=ur.depth-lr,mr=lr-1;fr>pr;fr--,mr--){dr=Fragment.from(ur.node(fr).copy(dr));let gr=cr&&cr[mr];hr=Fragment.from(gr?gr.type.create(gr.attrs,hr):ur.node(fr).copy(hr))}ar.step(new ReplaceStep(or,or,new Slice(dr.append(hr),lr,lr),!0))}function canJoin(ar,or){let lr=ar.resolve(or),cr=lr.index();return joinable(lr.nodeBefore,lr.nodeAfter)&&lr.parent.canReplace(cr,cr+1)}function canAppendWithSubstitutedLinebreaks(ar,or){or.content.size||ar.type.compatibleContent(or.type);let lr=ar.contentMatchAt(ar.childCount),{linebreakReplacement:cr}=ar.type.schema;for(let ur=0;ur<or.childCount;ur++){let dr=or.child(ur),hr=dr.type==cr?ar.type.schema.nodes.text:dr.type;if(lr=lr.matchType(hr),!lr||!ar.type.allowsMarks(dr.marks))return!1}return lr.validEnd}function joinable(ar,or){return!!(ar&&or&&!ar.isLeaf&&canAppendWithSubstitutedLinebreaks(ar,or))}function joinPoint(ar,or,lr=-1){let cr=ar.resolve(or);for(let ur=cr.depth;;ur--){let dr,hr,fr=cr.index(ur);if(ur==cr.depth?(dr=cr.nodeBefore,hr=cr.nodeAfter):lr>0?(dr=cr.node(ur+1),fr++,hr=cr.node(ur).maybeChild(fr)):(dr=cr.node(ur).maybeChild(fr-1),hr=cr.node(ur+1)),dr&&!dr.isTextblock&&joinable(dr,hr)&&cr.node(ur).canReplace(fr,fr+1))return or;if(ur==0)break;or=lr<0?cr.before(ur):cr.after(ur)}}function join(ar,or,lr){let cr=null,{linebreakReplacement:ur}=ar.doc.type.schema,dr=ar.doc.resolve(or-lr),hr=dr.node().type;if(ur&&hr.inlineContent){let gr=hr.whitespace=="pre",yr=!!hr.contentMatch.matchType(ur);gr&&!yr?cr=!1:!gr&&yr&&(cr=!0)}let fr=ar.steps.length;if(cr===!1){let gr=ar.doc.resolve(or+lr);replaceLinebreaks(ar,gr.node(),gr.before(),fr)}hr.inlineContent&&clearIncompatible(ar,or+lr-1,hr,dr.node().contentMatchAt(dr.index()),cr==null);let pr=ar.mapping.slice(fr),mr=pr.map(or-lr);if(ar.step(new ReplaceStep(mr,pr.map(or+lr,-1),Slice.empty,!0)),cr===!0){let gr=ar.doc.resolve(mr);replaceNewlines(ar,gr.node(),gr.before(),ar.steps.length)}return ar}function insertPoint(ar,or,lr){let cr=ar.resolve(or);if(cr.parent.canReplaceWith(cr.index(),cr.index(),lr))return or;if(cr.parentOffset==0)for(let ur=cr.depth-1;ur>=0;ur--){let dr=cr.index(ur);if(cr.node(ur).canReplaceWith(dr,dr,lr))return cr.before(ur+1);if(dr>0)return null}if(cr.parentOffset==cr.parent.content.size)for(let ur=cr.depth-1;ur>=0;ur--){let dr=cr.indexAfter(ur);if(cr.node(ur).canReplaceWith(dr,dr,lr))return cr.after(ur+1);if(dr<cr.node(ur).childCount)return null}return null}function dropPoint(ar,or,lr){let cr=ar.resolve(or);if(!lr.content.size)return or;let ur=lr.content;for(let dr=0;dr<lr.openStart;dr++)ur=ur.firstChild.content;for(let dr=1;dr<=(lr.openStart==0&&lr.size?2:1);dr++)for(let hr=cr.depth;hr>=0;hr--){let fr=hr==cr.depth?0:cr.pos<=(cr.start(hr+1)+cr.end(hr+1))/2?-1:1,pr=cr.index(hr)+(fr>0?1:0),mr=cr.node(hr),gr=!1;if(dr==1)gr=mr.canReplace(pr,pr,ur);else{let yr=mr.contentMatchAt(pr).findWrapping(ur.firstChild.type);gr=yr&&mr.canReplaceWith(pr,pr,yr[0])}if(gr)return fr==0?cr.pos:fr<0?cr.before(hr+1):cr.after(hr+1)}return null}function replaceStep(ar,or,lr=or,cr=Slice.empty){if(or==lr&&!cr.size)return null;let ur=ar.resolve(or),dr=ar.resolve(lr);return fitsTrivially(ur,dr,cr)?new ReplaceStep(or,lr,cr):new Fitter(ur,dr,cr).fit()}function fitsTrivially(ar,or,lr){return!lr.openStart&&!lr.openEnd&&ar.start()==or.start()&&ar.parent.canReplace(ar.index(),or.index(),lr.content)}class Fitter{constructor(or,lr,cr){this.$from=or,this.$to=lr,this.unplaced=cr,this.frontier=[],this.placed=Fragment.empty;for(let ur=0;ur<=or.depth;ur++){let dr=or.node(ur);this.frontier.push({type:dr.type,match:dr.contentMatchAt(or.indexAfter(ur))})}for(let ur=or.depth;ur>0;ur--)this.placed=Fragment.from(or.node(ur).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let mr=this.findFittable();mr?this.placeNodes(mr):this.openMore()||this.dropNode()}let or=this.mustMoveInline(),lr=this.placed.size-this.depth-this.$from.depth,cr=this.$from,ur=this.close(or<0?this.$to:cr.doc.resolve(or));if(!ur)return null;let dr=this.placed,hr=cr.depth,fr=ur.depth;for(;hr&&fr&&dr.childCount==1;)dr=dr.firstChild.content,hr--,fr--;let pr=new Slice(dr,hr,fr);return or>-1?new ReplaceAroundStep(cr.pos,or,this.$to.pos,this.$to.end(),pr,lr):pr.size||cr.pos!=this.$to.pos?new ReplaceStep(cr.pos,ur.pos,pr):null}findFittable(){let or=this.unplaced.openStart;for(let lr=this.unplaced.content,cr=0,ur=this.unplaced.openEnd;cr<or;cr++){let dr=lr.firstChild;if(lr.childCount>1&&(ur=0),dr.type.spec.isolating&&ur<=cr){or=cr;break}lr=dr.content}for(let lr=1;lr<=2;lr++)for(let cr=lr==1?or:this.unplaced.openStart;cr>=0;cr--){let ur,dr=null;cr?(dr=contentAt(this.unplaced.content,cr-1).firstChild,ur=dr.content):ur=this.unplaced.content;let hr=ur.firstChild;for(let fr=this.depth;fr>=0;fr--){let{type:pr,match:mr}=this.frontier[fr],gr,yr=null;if(lr==1&&(hr?mr.matchType(hr.type)||(yr=mr.fillBefore(Fragment.from(hr),!1)):dr&&pr.compatibleContent(dr.type)))return{sliceDepth:cr,frontierDepth:fr,parent:dr,inject:yr};if(lr==2&&hr&&(gr=mr.findWrapping(hr.type)))return{sliceDepth:cr,frontierDepth:fr,parent:dr,wrap:gr};if(dr&&mr.matchType(dr.type))break}}}openMore(){let{content:or,openStart:lr,openEnd:cr}=this.unplaced,ur=contentAt(or,lr);return!ur.childCount||ur.firstChild.isLeaf?!1:(this.unplaced=new Slice(or,lr+1,Math.max(cr,ur.size+lr>=or.size-cr?lr+1:0)),!0)}dropNode(){let{content:or,openStart:lr,openEnd:cr}=this.unplaced,ur=contentAt(or,lr);if(ur.childCount<=1&&lr>0){let dr=or.size-lr<=lr+ur.size;this.unplaced=new Slice(dropFromFragment(or,lr-1,1),lr-1,dr?lr-1:cr)}else this.unplaced=new Slice(dropFromFragment(or,lr,1),lr,cr)}placeNodes({sliceDepth:or,frontierDepth:lr,parent:cr,inject:ur,wrap:dr}){for(;this.depth>lr;)this.closeFrontierNode();if(dr)for(let xr=0;xr<dr.length;xr++)this.openFrontierNode(dr[xr]);let hr=this.unplaced,fr=cr?cr.content:hr.content,pr=hr.openStart-or,mr=0,gr=[],{match:yr,type:vr}=this.frontier[lr];if(ur){for(let xr=0;xr<ur.childCount;xr++)gr.push(ur.child(xr));yr=yr.matchFragment(ur)}let br=fr.size+or-(hr.content.size-hr.openEnd);for(;mr<fr.childCount;){let xr=fr.child(mr),Er=yr.matchType(xr.type);if(!Er)break;mr++,(mr>1||pr==0||xr.content.size)&&(yr=Er,gr.push(closeNodeStart(xr.mark(vr.allowedMarks(xr.marks)),mr==1?pr:0,mr==fr.childCount?br:-1)))}let Sr=mr==fr.childCount;Sr||(br=-1),this.placed=addToFragment(this.placed,lr,Fragment.from(gr)),this.frontier[lr].match=yr,Sr&&br<0&&cr&&cr.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let xr=0,Er=fr;xr<br;xr++){let wr=Er.lastChild;this.frontier.push({type:wr.type,match:wr.contentMatchAt(wr.childCount)}),Er=wr.content}this.unplaced=Sr?or==0?Slice.empty:new Slice(dropFromFragment(hr.content,or-1,1),or-1,br<0?hr.openEnd:or-1):new Slice(dropFromFragment(hr.content,or,mr),hr.openStart,hr.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let or=this.frontier[this.depth],lr;if(!or.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,or.type,or.match,!1)||this.$to.depth==this.depth&&(lr=this.findCloseLevel(this.$to))&&lr.depth==this.depth)return-1;let{depth:cr}=this.$to,ur=this.$to.after(cr);for(;cr>1&&ur==this.$to.end(--cr);)++ur;return ur}findCloseLevel(or){e:for(let lr=Math.min(this.depth,or.depth);lr>=0;lr--){let{match:cr,type:ur}=this.frontier[lr],dr=lr<or.depth&&or.end(lr+1)==or.pos+(or.depth-(lr+1)),hr=contentAfterFits(or,lr,ur,cr,dr);if(hr){for(let fr=lr-1;fr>=0;fr--){let{match:pr,type:mr}=this.frontier[fr],gr=contentAfterFits(or,fr,mr,pr,!0);if(!gr||gr.childCount)continue e}return{depth:lr,fit:hr,move:dr?or.doc.resolve(or.after(lr+1)):or}}}}close(or){let lr=this.findCloseLevel(or);if(!lr)return null;for(;this.depth>lr.depth;)this.closeFrontierNode();lr.fit.childCount&&(this.placed=addToFragment(this.placed,lr.depth,lr.fit)),or=lr.move;for(let cr=lr.depth+1;cr<=or.depth;cr++){let ur=or.node(cr),dr=ur.type.contentMatch.fillBefore(ur.content,!0,or.index(cr));this.openFrontierNode(ur.type,ur.attrs,dr)}return or}openFrontierNode(or,lr=null,cr){let ur=this.frontier[this.depth];ur.match=ur.match.matchType(or),this.placed=addToFragment(this.placed,this.depth,Fragment.from(or.create(lr,cr))),this.frontier.push({type:or,match:or.contentMatch})}closeFrontierNode(){let lr=this.frontier.pop().match.fillBefore(Fragment.empty,!0);lr.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,lr))}}function dropFromFragment(ar,or,lr){return or==0?ar.cutByIndex(lr,ar.childCount):ar.replaceChild(0,ar.firstChild.copy(dropFromFragment(ar.firstChild.content,or-1,lr)))}function addToFragment(ar,or,lr){return or==0?ar.append(lr):ar.replaceChild(ar.childCount-1,ar.lastChild.copy(addToFragment(ar.lastChild.content,or-1,lr)))}function contentAt(ar,or){for(let lr=0;lr<or;lr++)ar=ar.firstChild.content;return ar}function closeNodeStart(ar,or,lr){if(or<=0)return ar;let cr=ar.content;return or>1&&(cr=cr.replaceChild(0,closeNodeStart(cr.firstChild,or-1,cr.childCount==1?lr-1:0))),or>0&&(cr=ar.type.contentMatch.fillBefore(cr).append(cr),lr<=0&&(cr=cr.append(ar.type.contentMatch.matchFragment(cr).fillBefore(Fragment.empty,!0)))),ar.copy(cr)}function contentAfterFits(ar,or,lr,cr,ur){let dr=ar.node(or),hr=ur?ar.indexAfter(or):ar.index(or);if(hr==dr.childCount&&!lr.compatibleContent(dr.type))return null;let fr=cr.fillBefore(dr.content,!0,hr);return fr&&!invalidMarks(lr,dr.content,hr)?fr:null}function invalidMarks(ar,or,lr){for(let cr=lr;cr<or.childCount;cr++)if(!ar.allowsMarks(or.child(cr).marks))return!0;return!1}function definesContent(ar){return ar.spec.defining||ar.spec.definingForContent}function replaceRange(ar,or,lr,cr){if(!cr.size)return ar.deleteRange(or,lr);let ur=ar.doc.resolve(or),dr=ar.doc.resolve(lr);if(fitsTrivially(ur,dr,cr))return ar.step(new ReplaceStep(or,lr,cr));let hr=coveredDepths(ur,ar.doc.resolve(lr));hr[hr.length-1]==0&&hr.pop();let fr=-(ur.depth+1);hr.unshift(fr);for(let vr=ur.depth,br=ur.pos-1;vr>0;vr--,br--){let Sr=ur.node(vr).type.spec;if(Sr.defining||Sr.definingAsContext||Sr.isolating)break;hr.indexOf(vr)>-1?fr=vr:ur.before(vr)==br&&hr.splice(1,0,-vr)}let pr=hr.indexOf(fr),mr=[],gr=cr.openStart;for(let vr=cr.content,br=0;;br++){let Sr=vr.firstChild;if(mr.push(Sr),br==cr.openStart)break;vr=Sr.content}for(let vr=gr-1;vr>=0;vr--){let br=mr[vr],Sr=definesContent(br.type);if(Sr&&!br.sameMarkup(ur.node(Math.abs(fr)-1)))gr=vr;else if(Sr||!br.type.isTextblock)break}for(let vr=cr.openStart;vr>=0;vr--){let br=(vr+gr+1)%(cr.openStart+1),Sr=mr[br];if(Sr)for(let xr=0;xr<hr.length;xr++){let Er=hr[(xr+pr)%hr.length],wr=!0;Er<0&&(wr=!1,Er=-Er);let Ar=ur.node(Er-1),Tr=ur.index(Er-1);if(Ar.canReplaceWith(Tr,Tr,Sr.type,Sr.marks))return ar.replace(ur.before(Er),wr?dr.after(Er):lr,new Slice(closeFragment(cr.content,0,cr.openStart,br),br,cr.openEnd))}}let yr=ar.steps.length;for(let vr=hr.length-1;vr>=0&&(ar.replace(or,lr,cr),!(ar.steps.length>yr));vr--){let br=hr[vr];br<0||(or=ur.before(br),lr=dr.after(br))}}function closeFragment(ar,or,lr,cr,ur){if(or<lr){let dr=ar.firstChild;ar=ar.replaceChild(0,dr.copy(closeFragment(dr.content,or+1,lr,cr,dr)))}if(or>cr){let dr=ur.contentMatchAt(0),hr=dr.fillBefore(ar).append(ar);ar=hr.append(dr.matchFragment(hr).fillBefore(Fragment.empty,!0))}return ar}function replaceRangeWith(ar,or,lr,cr){if(!cr.isInline&&or==lr&&ar.doc.resolve(or).parent.content.size){let ur=insertPoint(ar.doc,or,cr.type);ur!=null&&(or=lr=ur)}ar.replaceRange(or,lr,new Slice(Fragment.from(cr),0,0))}function deleteRange$1(ar,or,lr){let cr=ar.doc.resolve(or),ur=ar.doc.resolve(lr),dr=coveredDepths(cr,ur);for(let hr=0;hr<dr.length;hr++){let fr=dr[hr],pr=hr==dr.length-1;if(pr&&fr==0||cr.node(fr).type.contentMatch.validEnd)return ar.delete(cr.start(fr),ur.end(fr));if(fr>0&&(pr||cr.node(fr-1).canReplace(cr.index(fr-1),ur.indexAfter(fr-1))))return ar.delete(cr.before(fr),ur.after(fr))}for(let hr=1;hr<=cr.depth&&hr<=ur.depth;hr++)if(or-cr.start(hr)==cr.depth-hr&&lr>cr.end(hr)&&ur.end(hr)-lr!=ur.depth-hr&&cr.start(hr-1)==ur.start(hr-1)&&cr.node(hr-1).canReplace(cr.index(hr-1),ur.index(hr-1)))return ar.delete(cr.before(hr),lr);ar.delete(or,lr)}function coveredDepths(ar,or){let lr=[],cr=Math.min(ar.depth,or.depth);for(let ur=cr;ur>=0;ur--){let dr=ar.start(ur);if(dr<ar.pos-(ar.depth-ur)||or.end(ur)>or.pos+(or.depth-ur)||ar.node(ur).type.spec.isolating||or.node(ur).type.spec.isolating)break;(dr==or.start(ur)||ur==ar.depth&&ur==or.depth&&ar.parent.inlineContent&&or.parent.inlineContent&&ur&&or.start(ur-1)==dr-1)&&lr.push(ur)}return lr}class AttrStep extends Step{constructor(or,lr,cr){super(),this.pos=or,this.attr=lr,this.value=cr}apply(or){let lr=or.nodeAt(this.pos);if(!lr)return StepResult.fail("No node at attribute step's position");let cr=Object.create(null);for(let dr in lr.attrs)cr[dr]=lr.attrs[dr];cr[this.attr]=this.value;let ur=lr.type.create(cr,null,lr.marks);return StepResult.fromReplace(or,this.pos,this.pos+1,new Slice(Fragment.from(ur),0,lr.isLeaf?0:1))}getMap(){return StepMap.empty}invert(or){return new AttrStep(this.pos,this.attr,or.nodeAt(this.pos).attrs[this.attr])}map(or){let lr=or.mapResult(this.pos,1);return lr.deletedAfter?null:new AttrStep(lr.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(or,lr){if(typeof lr.pos!="number"||typeof lr.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(lr.pos,lr.attr,lr.value)}}Step.jsonID("attr",AttrStep);class DocAttrStep extends Step{constructor(or,lr){super(),this.attr=or,this.value=lr}apply(or){let lr=Object.create(null);for(let ur in or.attrs)lr[ur]=or.attrs[ur];lr[this.attr]=this.value;let cr=or.type.create(lr,or.content,or.marks);return StepResult.ok(cr)}getMap(){return StepMap.empty}invert(or){return new DocAttrStep(this.attr,or.attrs[this.attr])}map(or){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(or,lr){if(typeof lr.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(lr.attr,lr.value)}}Step.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function ar(or){let lr=Error.call(this,or);return lr.__proto__=ar.prototype,lr};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";class Transform{constructor(or){this.doc=or,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(or){let lr=this.maybeStep(or);if(lr.failed)throw new TransformError(lr.failed);return this}maybeStep(or){let lr=or.apply(this.doc);return lr.failed||this.addStep(or,lr.doc),lr}get docChanged(){return this.steps.length>0}addStep(or,lr){this.docs.push(this.doc),this.steps.push(or),this.mapping.appendMap(or.getMap()),this.doc=lr}replace(or,lr=or,cr=Slice.empty){let ur=replaceStep(this.doc,or,lr,cr);return ur&&this.step(ur),this}replaceWith(or,lr,cr){return this.replace(or,lr,new Slice(Fragment.from(cr),0,0))}delete(or,lr){return this.replace(or,lr,Slice.empty)}insert(or,lr){return this.replaceWith(or,or,lr)}replaceRange(or,lr,cr){return replaceRange(this,or,lr,cr),this}replaceRangeWith(or,lr,cr){return replaceRangeWith(this,or,lr,cr),this}deleteRange(or,lr){return deleteRange$1(this,or,lr),this}lift(or,lr){return lift$2(this,or,lr),this}join(or,lr=1){return join(this,or,lr),this}wrap(or,lr){return wrap(this,or,lr),this}setBlockType(or,lr=or,cr,ur=null){return setBlockType$1(this,or,lr,cr,ur),this}setNodeMarkup(or,lr,cr=null,ur){return setNodeMarkup(this,or,lr,cr,ur),this}setNodeAttribute(or,lr,cr){return this.step(new AttrStep(or,lr,cr)),this}setDocAttribute(or,lr){return this.step(new DocAttrStep(or,lr)),this}addNodeMark(or,lr){return this.step(new AddNodeMarkStep(or,lr)),this}removeNodeMark(or,lr){let cr=this.doc.nodeAt(or);if(!cr)throw new RangeError("No node at position "+or);if(lr instanceof Mark$1)lr.isInSet(cr.marks)&&this.step(new RemoveNodeMarkStep(or,lr));else{let ur=cr.marks,dr,hr=[];for(;dr=lr.isInSet(ur);)hr.push(new RemoveNodeMarkStep(or,dr)),ur=dr.removeFromSet(ur);for(let fr=hr.length-1;fr>=0;fr--)this.step(hr[fr])}return this}split(or,lr=1,cr){return split(this,or,lr,cr),this}addMark(or,lr,cr){return addMark(this,or,lr,cr),this}removeMark(or,lr,cr){return removeMark(this,or,lr,cr),this}clearIncompatible(or,lr,cr){return clearIncompatible(this,or,lr,cr),this}}const classesById=Object.create(null);class Selection{constructor(or,lr,cr){this.$anchor=or,this.$head=lr,this.ranges=cr||[new SelectionRange(or.min(lr),or.max(lr))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let or=this.ranges;for(let lr=0;lr<or.length;lr++)if(or[lr].$from.pos!=or[lr].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(or,lr=Slice.empty){let cr=lr.content.lastChild,ur=null;for(let fr=0;fr<lr.openEnd;fr++)ur=cr,cr=cr.lastChild;let dr=or.steps.length,hr=this.ranges;for(let fr=0;fr<hr.length;fr++){let{$from:pr,$to:mr}=hr[fr],gr=or.mapping.slice(dr);or.replaceRange(gr.map(pr.pos),gr.map(mr.pos),fr?Slice.empty:lr),fr==0&&selectionToInsertionEnd$1(or,dr,(cr?cr.isInline:ur&&ur.isTextblock)?-1:1)}}replaceWith(or,lr){let cr=or.steps.length,ur=this.ranges;for(let dr=0;dr<ur.length;dr++){let{$from:hr,$to:fr}=ur[dr],pr=or.mapping.slice(cr),mr=pr.map(hr.pos),gr=pr.map(fr.pos);dr?or.deleteRange(mr,gr):(or.replaceRangeWith(mr,gr,lr),selectionToInsertionEnd$1(or,cr,lr.isInline?-1:1))}}static findFrom(or,lr,cr=!1){let ur=or.parent.inlineContent?new TextSelection(or):findSelectionIn(or.node(0),or.parent,or.pos,or.index(),lr,cr);if(ur)return ur;for(let dr=or.depth-1;dr>=0;dr--){let hr=lr<0?findSelectionIn(or.node(0),or.node(dr),or.before(dr+1),or.index(dr),lr,cr):findSelectionIn(or.node(0),or.node(dr),or.after(dr+1),or.index(dr)+1,lr,cr);if(hr)return hr}return null}static near(or,lr=1){return this.findFrom(or,lr)||this.findFrom(or,-lr)||new AllSelection(or.node(0))}static atStart(or){return findSelectionIn(or,or,0,0,1)||new AllSelection(or)}static atEnd(or){return findSelectionIn(or,or,or.content.size,or.childCount,-1)||new AllSelection(or)}static fromJSON(or,lr){if(!lr||!lr.type)throw new RangeError("Invalid input for Selection.fromJSON");let cr=classesById[lr.type];if(!cr)throw new RangeError(`No selection type ${lr.type} defined`);return cr.fromJSON(or,lr)}static jsonID(or,lr){if(or in classesById)throw new RangeError("Duplicate use of selection JSON ID "+or);return classesById[or]=lr,lr.prototype.jsonID=or,lr}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}}Selection.prototype.visible=!0;class SelectionRange{constructor(or,lr){this.$from=or,this.$to=lr}}let warnedAboutTextSelection=!1;function checkTextSelection(ar){!warnedAboutTextSelection&&!ar.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+ar.parent.type.name+")"))}class TextSelection extends Selection{constructor(or,lr=or){checkTextSelection(or),checkTextSelection(lr),super(or,lr)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(or,lr){let cr=or.resolve(lr.map(this.head));if(!cr.parent.inlineContent)return Selection.near(cr);let ur=or.resolve(lr.map(this.anchor));return new TextSelection(ur.parent.inlineContent?ur:cr,cr)}replace(or,lr=Slice.empty){if(super.replace(or,lr),lr==Slice.empty){let cr=this.$from.marksAcross(this.$to);cr&&or.ensureMarks(cr)}}eq(or){return or instanceof TextSelection&&or.anchor==this.anchor&&or.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(or,lr){if(typeof lr.anchor!="number"||typeof lr.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(or.resolve(lr.anchor),or.resolve(lr.head))}static create(or,lr,cr=lr){let ur=or.resolve(lr);return new this(ur,cr==lr?ur:or.resolve(cr))}static between(or,lr,cr){let ur=or.pos-lr.pos;if((!cr||ur)&&(cr=ur>=0?1:-1),!lr.parent.inlineContent){let dr=Selection.findFrom(lr,cr,!0)||Selection.findFrom(lr,-cr,!0);if(dr)lr=dr.$head;else return Selection.near(lr,cr)}return or.parent.inlineContent||(ur==0?or=lr:(or=(Selection.findFrom(or,-cr,!0)||Selection.findFrom(or,cr,!0)).$anchor,or.pos<lr.pos!=ur<0&&(or=lr))),new TextSelection(or,lr)}}Selection.jsonID("text",TextSelection);class TextBookmark{constructor(or,lr){this.anchor=or,this.head=lr}map(or){return new TextBookmark(or.map(this.anchor),or.map(this.head))}resolve(or){return TextSelection.between(or.resolve(this.anchor),or.resolve(this.head))}}class NodeSelection extends Selection{constructor(or){let lr=or.nodeAfter,cr=or.node(0).resolve(or.pos+lr.nodeSize);super(or,cr),this.node=lr}map(or,lr){let{deleted:cr,pos:ur}=lr.mapResult(this.anchor),dr=or.resolve(ur);return cr?Selection.near(dr):new NodeSelection(dr)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(or){return or instanceof NodeSelection&&or.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(or,lr){if(typeof lr.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(or.resolve(lr.anchor))}static create(or,lr){return new NodeSelection(or.resolve(lr))}static isSelectable(or){return!or.isText&&or.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection.jsonID("node",NodeSelection);class NodeBookmark{constructor(or){this.anchor=or}map(or){let{deleted:lr,pos:cr}=or.mapResult(this.anchor);return lr?new TextBookmark(cr,cr):new NodeBookmark(cr)}resolve(or){let lr=or.resolve(this.anchor),cr=lr.nodeAfter;return cr&&NodeSelection.isSelectable(cr)?new NodeSelection(lr):Selection.near(lr)}}class AllSelection extends Selection{constructor(or){super(or.resolve(0),or.resolve(or.content.size))}replace(or,lr=Slice.empty){if(lr==Slice.empty){or.delete(0,or.doc.content.size);let cr=Selection.atStart(or.doc);cr.eq(or.selection)||or.setSelection(cr)}else super.replace(or,lr)}toJSON(){return{type:"all"}}static fromJSON(or){return new AllSelection(or)}map(or){return new AllSelection(or)}eq(or){return or instanceof AllSelection}getBookmark(){return AllBookmark}}Selection.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(ar){return new AllSelection(ar)}};function findSelectionIn(ar,or,lr,cr,ur,dr=!1){if(or.inlineContent)return TextSelection.create(ar,lr);for(let hr=cr-(ur>0?0:1);ur>0?hr<or.childCount:hr>=0;hr+=ur){let fr=or.child(hr);if(fr.isAtom){if(!dr&&NodeSelection.isSelectable(fr))return NodeSelection.create(ar,lr-(ur<0?fr.nodeSize:0))}else{let pr=findSelectionIn(ar,fr,lr+ur,ur<0?fr.childCount:0,ur,dr);if(pr)return pr}lr+=fr.nodeSize*ur}return null}function selectionToInsertionEnd$1(ar,or,lr){let cr=ar.steps.length-1;if(cr<or)return;let ur=ar.steps[cr];if(!(ur instanceof ReplaceStep||ur instanceof ReplaceAroundStep))return;let dr=ar.mapping.maps[cr],hr;dr.forEach((fr,pr,mr,gr)=>{hr==null&&(hr=gr)}),ar.setSelection(Selection.near(ar.doc.resolve(hr),lr))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform{constructor(or){super(or.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=or.selection,this.storedMarks=or.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(or){if(or.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=or,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(or){return this.storedMarks=or,this.updated|=UPDATED_MARKS,this}ensureMarks(or){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),or)||this.setStoredMarks(or),this}addStoredMark(or){return this.ensureMarks(or.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(or){return this.ensureMarks(or.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(or,lr){super.addStep(or,lr),this.updated=this.updated&-3,this.storedMarks=null}setTime(or){return this.time=or,this}replaceSelection(or){return this.selection.replace(this,or),this}replaceSelectionWith(or,lr=!0){let cr=this.selection;return lr&&(or=or.mark(this.storedMarks||(cr.empty?cr.$from.marks():cr.$from.marksAcross(cr.$to)||Mark$1.none))),cr.replaceWith(this,or),this}deleteSelection(){return this.selection.replace(this),this}insertText(or,lr,cr){let ur=this.doc.type.schema;if(lr==null)return or?this.replaceSelectionWith(ur.text(or),!0):this.deleteSelection();{if(cr==null&&(cr=lr),cr=cr??lr,!or)return this.deleteRange(lr,cr);let dr=this.storedMarks;if(!dr){let hr=this.doc.resolve(lr);dr=cr==lr?hr.marks():hr.marksAcross(this.doc.resolve(cr))}return this.replaceRangeWith(lr,cr,ur.text(or,dr)),this.selection.empty||this.setSelection(Selection.near(this.selection.$to)),this}}setMeta(or,lr){return this.meta[typeof or=="string"?or:or.key]=lr,this}getMeta(or){return this.meta[typeof or=="string"?or:or.key]}get isGeneric(){for(let or in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(ar,or){return!or||!ar?ar:ar.bind(or)}class FieldDesc{constructor(or,lr,cr){this.name=or,this.init=bind(lr.init,cr),this.apply=bind(lr.apply,cr)}}const baseFields=[new FieldDesc("doc",{init(ar){return ar.doc||ar.schema.topNodeType.createAndFill()},apply(ar){return ar.doc}}),new FieldDesc("selection",{init(ar,or){return ar.selection||Selection.atStart(or.doc)},apply(ar){return ar.selection}}),new FieldDesc("storedMarks",{init(ar){return ar.storedMarks||null},apply(ar,or,lr,cr){return cr.selection.$cursor?ar.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(ar,or){return ar.scrolledIntoView?or+1:or}})];class Configuration{constructor(or,lr){this.schema=or,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),lr&&lr.forEach(cr=>{if(this.pluginsByKey[cr.key])throw new RangeError("Adding different instances of a keyed plugin ("+cr.key+")");this.plugins.push(cr),this.pluginsByKey[cr.key]=cr,cr.spec.state&&this.fields.push(new FieldDesc(cr.key,cr.spec.state,cr))})}}class EditorState{constructor(or){this.config=or}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(or){return this.applyTransaction(or).state}filterTransaction(or,lr=-1){for(let cr=0;cr<this.config.plugins.length;cr++)if(cr!=lr){let ur=this.config.plugins[cr];if(ur.spec.filterTransaction&&!ur.spec.filterTransaction.call(ur,or,this))return!1}return!0}applyTransaction(or){if(!this.filterTransaction(or))return{state:this,transactions:[]};let lr=[or],cr=this.applyInner(or),ur=null;for(;;){let dr=!1;for(let hr=0;hr<this.config.plugins.length;hr++){let fr=this.config.plugins[hr];if(fr.spec.appendTransaction){let pr=ur?ur[hr].n:0,mr=ur?ur[hr].state:this,gr=pr<lr.length&&fr.spec.appendTransaction.call(fr,pr?lr.slice(pr):lr,mr,cr);if(gr&&cr.filterTransaction(gr,hr)){if(gr.setMeta("appendedTransaction",or),!ur){ur=[];for(let yr=0;yr<this.config.plugins.length;yr++)ur.push(yr<hr?{state:cr,n:lr.length}:{state:this,n:0})}lr.push(gr),cr=cr.applyInner(gr),dr=!0}ur&&(ur[hr]={state:cr,n:lr.length})}}if(!dr)return{state:cr,transactions:lr}}}applyInner(or){if(!or.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let lr=new EditorState(this.config),cr=this.config.fields;for(let ur=0;ur<cr.length;ur++){let dr=cr[ur];lr[dr.name]=dr.apply(or,this[dr.name],this,lr)}return lr}get tr(){return new Transaction(this)}static create(or){let lr=new Configuration(or.doc?or.doc.type.schema:or.schema,or.plugins),cr=new EditorState(lr);for(let ur=0;ur<lr.fields.length;ur++)cr[lr.fields[ur].name]=lr.fields[ur].init(or,cr);return cr}reconfigure(or){let lr=new Configuration(this.schema,or.plugins),cr=lr.fields,ur=new EditorState(lr);for(let dr=0;dr<cr.length;dr++){let hr=cr[dr].name;ur[hr]=this.hasOwnProperty(hr)?this[hr]:cr[dr].init(or,ur)}return ur}toJSON(or){let lr={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(lr.storedMarks=this.storedMarks.map(cr=>cr.toJSON())),or&&typeof or=="object")for(let cr in or){if(cr=="doc"||cr=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let ur=or[cr],dr=ur.spec.state;dr&&dr.toJSON&&(lr[cr]=dr.toJSON.call(ur,this[ur.key]))}return lr}static fromJSON(or,lr,cr){if(!lr)throw new RangeError("Invalid input for EditorState.fromJSON");if(!or.schema)throw new RangeError("Required config field 'schema' missing");let ur=new Configuration(or.schema,or.plugins),dr=new EditorState(ur);return ur.fields.forEach(hr=>{if(hr.name=="doc")dr.doc=Node$1.fromJSON(or.schema,lr.doc);else if(hr.name=="selection")dr.selection=Selection.fromJSON(dr.doc,lr.selection);else if(hr.name=="storedMarks")lr.storedMarks&&(dr.storedMarks=lr.storedMarks.map(or.schema.markFromJSON));else{if(cr)for(let fr in cr){let pr=cr[fr],mr=pr.spec.state;if(pr.key==hr.name&&mr&&mr.fromJSON&&Object.prototype.hasOwnProperty.call(lr,fr)){dr[hr.name]=mr.fromJSON.call(pr,or,lr[fr],dr);return}}dr[hr.name]=hr.init(or,dr)}}),dr}}function bindProps(ar,or,lr){for(let cr in ar){let ur=ar[cr];ur instanceof Function?ur=ur.bind(or):cr=="handleDOMEvents"&&(ur=bindProps(ur,or,{})),lr[cr]=ur}return lr}class Plugin{constructor(or){this.spec=or,this.props={},or.props&&bindProps(or.props,this,this.props),this.key=or.key?or.key.key:createKey("plugin")}getState(or){return or[this.key]}}const keys=Object.create(null);function createKey(ar){return ar in keys?ar+"$"+ ++keys[ar]:(keys[ar]=0,ar+"$")}class PluginKey{constructor(or="key"){this.key=createKey(or)}get(or){return or.config.pluginsByKey[this.key]}getState(or){return or[this.key]}}const domIndex=function(ar){for(var or=0;;or++)if(ar=ar.previousSibling,!ar)return or},parentNode=function(ar){let or=ar.assignedSlot||ar.parentNode;return or&&or.nodeType==11?or.host:or};let reusedRange=null;const textRange=function(ar,or,lr){let cr=reusedRange||(reusedRange=document.createRange());return cr.setEnd(ar,lr??ar.nodeValue.length),cr.setStart(ar,or||0),cr},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(ar,or,lr,cr){return lr&&(scanFor(ar,or,lr,cr,-1)||scanFor(ar,or,lr,cr,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(ar,or,lr,cr,ur){for(;;){if(ar==lr&&or==cr)return!0;if(or==(ur<0?0:nodeSize(ar))){let dr=ar.parentNode;if(!dr||dr.nodeType!=1||hasBlockDesc(ar)||atomElements.test(ar.nodeName)||ar.contentEditable=="false")return!1;or=domIndex(ar)+(ur<0?0:1),ar=dr}else if(ar.nodeType==1){if(ar=ar.childNodes[or+(ur<0?-1:0)],ar.contentEditable=="false")return!1;or=ur<0?nodeSize(ar):0}else return!1}}function nodeSize(ar){return ar.nodeType==3?ar.nodeValue.length:ar.childNodes.length}function textNodeBefore$1(ar,or){for(;;){if(ar.nodeType==3&&or)return ar;if(ar.nodeType==1&&or>0){if(ar.contentEditable=="false")return null;ar=ar.childNodes[or-1],or=nodeSize(ar)}else if(ar.parentNode&&!hasBlockDesc(ar))or=domIndex(ar),ar=ar.parentNode;else return null}}function textNodeAfter$1(ar,or){for(;;){if(ar.nodeType==3&&or<ar.nodeValue.length)return ar;if(ar.nodeType==1&&or<ar.childNodes.length){if(ar.contentEditable=="false")return null;ar=ar.childNodes[or],or=0}else if(ar.parentNode&&!hasBlockDesc(ar))or=domIndex(ar)+1,ar=ar.parentNode;else return null}}function isOnEdge(ar,or,lr){for(let cr=or==0,ur=or==nodeSize(ar);cr||ur;){if(ar==lr)return!0;let dr=domIndex(ar);if(ar=ar.parentNode,!ar)return!1;cr=cr&&dr==0,ur=ur&&dr==nodeSize(ar)}}function hasBlockDesc(ar){let or;for(let lr=ar;lr&&!(or=lr.pmViewDesc);lr=lr.parentNode);return or&&or.node&&or.node.isBlock&&(or.dom==ar||or.contentDOM==ar)}const selectionCollapsed=function(ar){return ar.focusNode&&isEquivalentPosition(ar.focusNode,ar.focusOffset,ar.anchorNode,ar.anchorOffset)};function keyEvent(ar,or){let lr=document.createEvent("Event");return lr.initEvent("keydown",!0,!0),lr.keyCode=ar,lr.key=lr.code=or,lr}function deepActiveElement(ar){let or=ar.activeElement;for(;or&&or.shadowRoot;)or=or.shadowRoot.activeElement;return or}function caretFromPoint(ar,or,lr){if(ar.caretPositionFromPoint)try{let cr=ar.caretPositionFromPoint(or,lr);if(cr)return{node:cr.offsetNode,offset:Math.min(nodeSize(cr.offsetNode),cr.offset)}}catch{}if(ar.caretRangeFromPoint){let cr=ar.caretRangeFromPoint(or,lr);if(cr)return{node:cr.startContainer,offset:Math.min(nodeSize(cr.startContainer),cr.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$1=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$1&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$1&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$1&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows$1=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(ar){let or=ar.defaultView&&ar.defaultView.visualViewport;return or?{left:0,right:or.width,top:0,bottom:or.height}:{left:0,right:ar.documentElement.clientWidth,top:0,bottom:ar.documentElement.clientHeight}}function getSide(ar,or){return typeof ar=="number"?ar:ar[or]}function clientRect(ar){let or=ar.getBoundingClientRect(),lr=or.width/ar.offsetWidth||1,cr=or.height/ar.offsetHeight||1;return{left:or.left,right:or.left+ar.clientWidth*lr,top:or.top,bottom:or.top+ar.clientHeight*cr}}function scrollRectIntoView(ar,or,lr){let cr=ar.someProp("scrollThreshold")||0,ur=ar.someProp("scrollMargin")||5,dr=ar.dom.ownerDocument;for(let hr=lr||ar.dom;hr;){if(hr.nodeType!=1){hr=parentNode(hr);continue}let fr=hr,pr=fr==dr.body,mr=pr?windowRect(dr):clientRect(fr),gr=0,yr=0;if(or.top<mr.top+getSide(cr,"top")?yr=-(mr.top-or.top+getSide(ur,"top")):or.bottom>mr.bottom-getSide(cr,"bottom")&&(yr=or.bottom-or.top>mr.bottom-mr.top?or.top+getSide(ur,"top")-mr.top:or.bottom-mr.bottom+getSide(ur,"bottom")),or.left<mr.left+getSide(cr,"left")?gr=-(mr.left-or.left+getSide(ur,"left")):or.right>mr.right-getSide(cr,"right")&&(gr=or.right-mr.right+getSide(ur,"right")),gr||yr)if(pr)dr.defaultView.scrollBy(gr,yr);else{let br=fr.scrollLeft,Sr=fr.scrollTop;yr&&(fr.scrollTop+=yr),gr&&(fr.scrollLeft+=gr);let xr=fr.scrollLeft-br,Er=fr.scrollTop-Sr;or={left:or.left-xr,top:or.top-Er,right:or.right-xr,bottom:or.bottom-Er}}let vr=pr?"fixed":getComputedStyle(hr).position;if(/^(fixed|sticky)$/.test(vr))break;hr=vr=="absolute"?hr.offsetParent:parentNode(hr)}}function storeScrollPos(ar){let or=ar.dom.getBoundingClientRect(),lr=Math.max(0,or.top),cr,ur;for(let dr=(or.left+or.right)/2,hr=lr+1;hr<Math.min(innerHeight,or.bottom);hr+=5){let fr=ar.root.elementFromPoint(dr,hr);if(!fr||fr==ar.dom||!ar.dom.contains(fr))continue;let pr=fr.getBoundingClientRect();if(pr.top>=lr-20){cr=fr,ur=pr.top;break}}return{refDOM:cr,refTop:ur,stack:scrollStack(ar.dom)}}function scrollStack(ar){let or=[],lr=ar.ownerDocument;for(let cr=ar;cr&&(or.push({dom:cr,top:cr.scrollTop,left:cr.scrollLeft}),ar!=lr);cr=parentNode(cr));return or}function resetScrollPos({refDOM:ar,refTop:or,stack:lr}){let cr=ar?ar.getBoundingClientRect().top:0;restoreScrollStack(lr,cr==0?0:cr-or)}function restoreScrollStack(ar,or){for(let lr=0;lr<ar.length;lr++){let{dom:cr,top:ur,left:dr}=ar[lr];cr.scrollTop!=ur+or&&(cr.scrollTop=ur+or),cr.scrollLeft!=dr&&(cr.scrollLeft=dr)}}let preventScrollSupported=null;function focusPreventScroll(ar){if(ar.setActive)return ar.setActive();if(preventScrollSupported)return ar.focus(preventScrollSupported);let or=scrollStack(ar);ar.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(or,0))}function findOffsetInNode(ar,or){let lr,cr=2e8,ur,dr=0,hr=or.top,fr=or.top,pr,mr;for(let gr=ar.firstChild,yr=0;gr;gr=gr.nextSibling,yr++){let vr;if(gr.nodeType==1)vr=gr.getClientRects();else if(gr.nodeType==3)vr=textRange(gr).getClientRects();else continue;for(let br=0;br<vr.length;br++){let Sr=vr[br];if(Sr.top<=hr&&Sr.bottom>=fr){hr=Math.max(Sr.bottom,hr),fr=Math.min(Sr.top,fr);let xr=Sr.left>or.left?Sr.left-or.left:Sr.right<or.left?or.left-Sr.right:0;if(xr<cr){lr=gr,cr=xr,ur=xr&&lr.nodeType==3?{left:Sr.right<or.left?Sr.right:Sr.left,top:or.top}:or,gr.nodeType==1&&xr&&(dr=yr+(or.left>=(Sr.left+Sr.right)/2?1:0));continue}}else Sr.top>or.top&&!pr&&Sr.left<=or.left&&Sr.right>=or.left&&(pr=gr,mr={left:Math.max(Sr.left,Math.min(Sr.right,or.left)),top:Sr.top});!lr&&(or.left>=Sr.right&&or.top>=Sr.top||or.left>=Sr.left&&or.top>=Sr.bottom)&&(dr=yr+1)}}return!lr&&pr&&(lr=pr,ur=mr,cr=0),lr&&lr.nodeType==3?findOffsetInText(lr,ur):!lr||cr&&lr.nodeType==1?{node:ar,offset:dr}:findOffsetInNode(lr,ur)}function findOffsetInText(ar,or){let lr=ar.nodeValue.length,cr=document.createRange();for(let ur=0;ur<lr;ur++){cr.setEnd(ar,ur+1),cr.setStart(ar,ur);let dr=singleRect(cr,1);if(dr.top!=dr.bottom&&inRect(or,dr))return{node:ar,offset:ur+(or.left>=(dr.left+dr.right)/2?1:0)}}return{node:ar,offset:0}}function inRect(ar,or){return ar.left>=or.left-1&&ar.left<=or.right+1&&ar.top>=or.top-1&&ar.top<=or.bottom+1}function targetKludge(ar,or){let lr=ar.parentNode;return lr&&/^li$/i.test(lr.nodeName)&&or.left<ar.getBoundingClientRect().left?lr:ar}function posFromElement(ar,or,lr){let{node:cr,offset:ur}=findOffsetInNode(or,lr),dr=-1;if(cr.nodeType==1&&!cr.firstChild){let hr=cr.getBoundingClientRect();dr=hr.left!=hr.right&&lr.left>(hr.left+hr.right)/2?1:-1}return ar.docView.posFromDOM(cr,ur,dr)}function posFromCaret(ar,or,lr,cr){let ur=-1;for(let dr=or,hr=!1;dr!=ar.dom;){let fr=ar.docView.nearestDesc(dr,!0),pr;if(!fr)return null;if(fr.dom.nodeType==1&&(fr.node.isBlock&&fr.parent||!fr.contentDOM)&&((pr=fr.dom.getBoundingClientRect()).width||pr.height)&&(fr.node.isBlock&&fr.parent&&(!hr&&pr.left>cr.left||pr.top>cr.top?ur=fr.posBefore:(!hr&&pr.right<cr.left||pr.bottom<cr.top)&&(ur=fr.posAfter),hr=!0),!fr.contentDOM&&ur<0&&!fr.node.isText))return(fr.node.isBlock?cr.top<(pr.top+pr.bottom)/2:cr.left<(pr.left+pr.right)/2)?fr.posBefore:fr.posAfter;dr=fr.dom.parentNode}return ur>-1?ur:ar.docView.posFromDOM(or,lr,-1)}function elementFromPoint(ar,or,lr){let cr=ar.childNodes.length;if(cr&&lr.top<lr.bottom)for(let ur=Math.max(0,Math.min(cr-1,Math.floor(cr*(or.top-lr.top)/(lr.bottom-lr.top))-2)),dr=ur;;){let hr=ar.childNodes[dr];if(hr.nodeType==1){let fr=hr.getClientRects();for(let pr=0;pr<fr.length;pr++){let mr=fr[pr];if(inRect(or,mr))return elementFromPoint(hr,or,mr)}}if((dr=(dr+1)%cr)==ur)break}return ar}function posAtCoords(ar,or){let lr=ar.dom.ownerDocument,cr,ur=0,dr=caretFromPoint(lr,or.left,or.top);dr&&({node:cr,offset:ur}=dr);let hr=(ar.root.elementFromPoint?ar.root:lr).elementFromPoint(or.left,or.top),fr;if(!hr||!ar.dom.contains(hr.nodeType!=1?hr.parentNode:hr)){let mr=ar.dom.getBoundingClientRect();if(!inRect(or,mr)||(hr=elementFromPoint(ar.dom,or,mr),!hr))return null}if(safari)for(let mr=hr;cr&&mr;mr=parentNode(mr))mr.draggable&&(cr=void 0);if(hr=targetKludge(hr,or),cr){if(gecko&&cr.nodeType==1&&(ur=Math.min(ur,cr.childNodes.length),ur<cr.childNodes.length)){let gr=cr.childNodes[ur],yr;gr.nodeName=="IMG"&&(yr=gr.getBoundingClientRect()).right<=or.left&&yr.bottom>or.top&&ur++}let mr;webkit&&ur&&cr.nodeType==1&&(mr=cr.childNodes[ur-1]).nodeType==1&&mr.contentEditable=="false"&&mr.getBoundingClientRect().top>=or.top&&ur--,cr==ar.dom&&ur==cr.childNodes.length-1&&cr.lastChild.nodeType==1&&or.top>cr.lastChild.getBoundingClientRect().bottom?fr=ar.state.doc.content.size:(ur==0||cr.nodeType!=1||cr.childNodes[ur-1].nodeName!="BR")&&(fr=posFromCaret(ar,cr,ur,or))}fr==null&&(fr=posFromElement(ar,hr,or));let pr=ar.docView.nearestDesc(hr,!0);return{pos:fr,inside:pr?pr.posAtStart-pr.border:-1}}function nonZero(ar){return ar.top<ar.bottom||ar.left<ar.right}function singleRect(ar,or){let lr=ar.getClientRects();if(lr.length){let cr=lr[or<0?0:lr.length-1];if(nonZero(cr))return cr}return Array.prototype.find.call(lr,nonZero)||ar.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(ar,or,lr){let{node:cr,offset:ur,atom:dr}=ar.docView.domFromPos(or,lr<0?-1:1),hr=webkit||gecko;if(cr.nodeType==3)if(hr&&(BIDI.test(cr.nodeValue)||(lr<0?!ur:ur==cr.nodeValue.length))){let pr=singleRect(textRange(cr,ur,ur),lr);if(gecko&&ur&&/\s/.test(cr.nodeValue[ur-1])&&ur<cr.nodeValue.length){let mr=singleRect(textRange(cr,ur-1,ur-1),-1);if(mr.top==pr.top){let gr=singleRect(textRange(cr,ur,ur+1),-1);if(gr.top!=pr.top)return flattenV(gr,gr.left<mr.left)}}return pr}else{let pr=ur,mr=ur,gr=lr<0?1:-1;return lr<0&&!ur?(mr++,gr=-1):lr>=0&&ur==cr.nodeValue.length?(pr--,gr=1):lr<0?pr--:mr++,flattenV(singleRect(textRange(cr,pr,mr),gr),gr<0)}if(!ar.state.doc.resolve(or-(dr||0)).parent.inlineContent){if(dr==null&&ur&&(lr<0||ur==nodeSize(cr))){let pr=cr.childNodes[ur-1];if(pr.nodeType==1)return flattenH(pr.getBoundingClientRect(),!1)}if(dr==null&&ur<nodeSize(cr)){let pr=cr.childNodes[ur];if(pr.nodeType==1)return flattenH(pr.getBoundingClientRect(),!0)}return flattenH(cr.getBoundingClientRect(),lr>=0)}if(dr==null&&ur&&(lr<0||ur==nodeSize(cr))){let pr=cr.childNodes[ur-1],mr=pr.nodeType==3?textRange(pr,nodeSize(pr)-(hr?0:1)):pr.nodeType==1&&(pr.nodeName!="BR"||!pr.nextSibling)?pr:null;if(mr)return flattenV(singleRect(mr,1),!1)}if(dr==null&&ur<nodeSize(cr)){let pr=cr.childNodes[ur];for(;pr.pmViewDesc&&pr.pmViewDesc.ignoreForCoords;)pr=pr.nextSibling;let mr=pr?pr.nodeType==3?textRange(pr,0,hr?0:1):pr.nodeType==1?pr:null:null;if(mr)return flattenV(singleRect(mr,-1),!0)}return flattenV(singleRect(cr.nodeType==3?textRange(cr):cr,-lr),lr>=0)}function flattenV(ar,or){if(ar.width==0)return ar;let lr=or?ar.left:ar.right;return{top:ar.top,bottom:ar.bottom,left:lr,right:lr}}function flattenH(ar,or){if(ar.height==0)return ar;let lr=or?ar.top:ar.bottom;return{top:lr,bottom:lr,left:ar.left,right:ar.right}}function withFlushedState(ar,or,lr){let cr=ar.state,ur=ar.root.activeElement;cr!=or&&ar.updateState(or),ur!=ar.dom&&ar.focus();try{return lr()}finally{cr!=or&&ar.updateState(cr),ur!=ar.dom&&ur&&ur.focus()}}function endOfTextblockVertical(ar,or,lr){let cr=or.selection,ur=lr=="up"?cr.$from:cr.$to;return withFlushedState(ar,or,()=>{let{node:dr}=ar.docView.domFromPos(ur.pos,lr=="up"?-1:1);for(;;){let fr=ar.docView.nearestDesc(dr,!0);if(!fr)break;if(fr.node.isBlock){dr=fr.contentDOM||fr.dom;break}dr=fr.dom.parentNode}let hr=coordsAtPos(ar,ur.pos,1);for(let fr=dr.firstChild;fr;fr=fr.nextSibling){let pr;if(fr.nodeType==1)pr=fr.getClientRects();else if(fr.nodeType==3)pr=textRange(fr,0,fr.nodeValue.length).getClientRects();else continue;for(let mr=0;mr<pr.length;mr++){let gr=pr[mr];if(gr.bottom>gr.top+1&&(lr=="up"?hr.top-gr.top>(gr.bottom-hr.top)*2:gr.bottom-hr.bottom>(hr.bottom-gr.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(ar,or,lr){let{$head:cr}=or.selection;if(!cr.parent.isTextblock)return!1;let ur=cr.parentOffset,dr=!ur,hr=ur==cr.parent.content.size,fr=ar.domSelection();return fr?!maybeRTL.test(cr.parent.textContent)||!fr.modify?lr=="left"||lr=="backward"?dr:hr:withFlushedState(ar,or,()=>{let{focusNode:pr,focusOffset:mr,anchorNode:gr,anchorOffset:yr}=ar.domSelectionRange(),vr=fr.caretBidiLevel;fr.modify("move",lr,"character");let br=cr.depth?ar.docView.domAfterPos(cr.before()):ar.dom,{focusNode:Sr,focusOffset:xr}=ar.domSelectionRange(),Er=Sr&&!br.contains(Sr.nodeType==1?Sr:Sr.parentNode)||pr==Sr&&mr==xr;try{fr.collapse(gr,yr),pr&&(pr!=gr||mr!=yr)&&fr.extend&&fr.extend(pr,mr)}catch{}return vr!=null&&(fr.caretBidiLevel=vr),Er}):cr.pos==cr.start()||cr.pos==cr.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(ar,or,lr){return cachedState==or&&cachedDir==lr?cachedResult:(cachedState=or,cachedDir=lr,cachedResult=lr=="up"||lr=="down"?endOfTextblockVertical(ar,or,lr):endOfTextblockHorizontal(ar,or,lr))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(or,lr,cr,ur){this.parent=or,this.children=lr,this.dom=cr,this.contentDOM=ur,this.dirty=NOT_DIRTY,cr.pmViewDesc=this}matchesWidget(or){return!1}matchesMark(or){return!1}matchesNode(or,lr,cr){return!1}matchesHack(or){return!1}parseRule(){return null}stopEvent(or){return!1}get size(){let or=0;for(let lr=0;lr<this.children.length;lr++)or+=this.children[lr].size;return or}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let or=0;or<this.children.length;or++)this.children[or].destroy()}posBeforeChild(or){for(let lr=0,cr=this.posAtStart;;lr++){let ur=this.children[lr];if(ur==or)return cr;cr+=ur.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(or,lr,cr){if(this.contentDOM&&this.contentDOM.contains(or.nodeType==1?or:or.parentNode))if(cr<0){let dr,hr;if(or==this.contentDOM)dr=or.childNodes[lr-1];else{for(;or.parentNode!=this.contentDOM;)or=or.parentNode;dr=or.previousSibling}for(;dr&&!((hr=dr.pmViewDesc)&&hr.parent==this);)dr=dr.previousSibling;return dr?this.posBeforeChild(hr)+hr.size:this.posAtStart}else{let dr,hr;if(or==this.contentDOM)dr=or.childNodes[lr];else{for(;or.parentNode!=this.contentDOM;)or=or.parentNode;dr=or.nextSibling}for(;dr&&!((hr=dr.pmViewDesc)&&hr.parent==this);)dr=dr.nextSibling;return dr?this.posBeforeChild(hr):this.posAtEnd}let ur;if(or==this.dom&&this.contentDOM)ur=lr>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))ur=or.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(lr==0)for(let dr=or;;dr=dr.parentNode){if(dr==this.dom){ur=!1;break}if(dr.previousSibling)break}if(ur==null&&lr==or.childNodes.length)for(let dr=or;;dr=dr.parentNode){if(dr==this.dom){ur=!0;break}if(dr.nextSibling)break}}return ur??cr>0?this.posAtEnd:this.posAtStart}nearestDesc(or,lr=!1){for(let cr=!0,ur=or;ur;ur=ur.parentNode){let dr=this.getDesc(ur),hr;if(dr&&(!lr||dr.node))if(cr&&(hr=dr.nodeDOM)&&!(hr.nodeType==1?hr.contains(or.nodeType==1?or:or.parentNode):hr==or))cr=!1;else return dr}}getDesc(or){let lr=or.pmViewDesc;for(let cr=lr;cr;cr=cr.parent)if(cr==this)return lr}posFromDOM(or,lr,cr){for(let ur=or;ur;ur=ur.parentNode){let dr=this.getDesc(ur);if(dr)return dr.localPosFromDOM(or,lr,cr)}return-1}descAt(or){for(let lr=0,cr=0;lr<this.children.length;lr++){let ur=this.children[lr],dr=cr+ur.size;if(cr==or&&dr!=cr){for(;!ur.border&&ur.children.length;)for(let hr=0;hr<ur.children.length;hr++){let fr=ur.children[hr];if(fr.size){ur=fr;break}}return ur}if(or<dr)return ur.descAt(or-cr-ur.border);cr=dr}}domFromPos(or,lr){if(!this.contentDOM)return{node:this.dom,offset:0,atom:or+1};let cr=0,ur=0;for(let dr=0;cr<this.children.length;cr++){let hr=this.children[cr],fr=dr+hr.size;if(fr>or||hr instanceof TrailingHackViewDesc){ur=or-dr;break}dr=fr}if(ur)return this.children[cr].domFromPos(ur-this.children[cr].border,lr);for(let dr;cr&&!(dr=this.children[cr-1]).size&&dr instanceof WidgetViewDesc&&dr.side>=0;cr--);if(lr<=0){let dr,hr=!0;for(;dr=cr?this.children[cr-1]:null,!(!dr||dr.dom.parentNode==this.contentDOM);cr--,hr=!1);return dr&&lr&&hr&&!dr.border&&!dr.domAtom?dr.domFromPos(dr.size,lr):{node:this.contentDOM,offset:dr?domIndex(dr.dom)+1:0}}else{let dr,hr=!0;for(;dr=cr<this.children.length?this.children[cr]:null,!(!dr||dr.dom.parentNode==this.contentDOM);cr++,hr=!1);return dr&&hr&&!dr.border&&!dr.domAtom?dr.domFromPos(0,lr):{node:this.contentDOM,offset:dr?domIndex(dr.dom):this.contentDOM.childNodes.length}}}parseRange(or,lr,cr=0){if(this.children.length==0)return{node:this.contentDOM,from:or,to:lr,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let ur=-1,dr=-1;for(let hr=cr,fr=0;;fr++){let pr=this.children[fr],mr=hr+pr.size;if(ur==-1&&or<=mr){let gr=hr+pr.border;if(or>=gr&&lr<=mr-pr.border&&pr.node&&pr.contentDOM&&this.contentDOM.contains(pr.contentDOM))return pr.parseRange(or,lr,gr);or=hr;for(let yr=fr;yr>0;yr--){let vr=this.children[yr-1];if(vr.size&&vr.dom.parentNode==this.contentDOM&&!vr.emptyChildAt(1)){ur=domIndex(vr.dom)+1;break}or-=vr.size}ur==-1&&(ur=0)}if(ur>-1&&(mr>lr||fr==this.children.length-1)){lr=mr;for(let gr=fr+1;gr<this.children.length;gr++){let yr=this.children[gr];if(yr.size&&yr.dom.parentNode==this.contentDOM&&!yr.emptyChildAt(-1)){dr=domIndex(yr.dom);break}lr+=yr.size}dr==-1&&(dr=this.contentDOM.childNodes.length);break}hr=mr}return{node:this.contentDOM,from:or,to:lr,fromOffset:ur,toOffset:dr}}emptyChildAt(or){if(this.border||!this.contentDOM||!this.children.length)return!1;let lr=this.children[or<0?0:this.children.length-1];return lr.size==0||lr.emptyChildAt(or)}domAfterPos(or){let{node:lr,offset:cr}=this.domFromPos(or,0);if(lr.nodeType!=1||cr==lr.childNodes.length)throw new RangeError("No node after pos "+or);return lr.childNodes[cr]}setSelection(or,lr,cr,ur=!1){let dr=Math.min(or,lr),hr=Math.max(or,lr);for(let br=0,Sr=0;br<this.children.length;br++){let xr=this.children[br],Er=Sr+xr.size;if(dr>Sr&&hr<Er)return xr.setSelection(or-Sr-xr.border,lr-Sr-xr.border,cr,ur);Sr=Er}let fr=this.domFromPos(or,or?-1:1),pr=lr==or?fr:this.domFromPos(lr,lr?-1:1),mr=cr.root.getSelection(),gr=cr.domSelectionRange(),yr=!1;if((gecko||safari)&&or==lr){let{node:br,offset:Sr}=fr;if(br.nodeType==3){if(yr=!!(Sr&&br.nodeValue[Sr-1]==`
`),yr&&Sr==br.nodeValue.length)for(let xr=br,Er;xr;xr=xr.parentNode){if(Er=xr.nextSibling){Er.nodeName=="BR"&&(fr=pr={node:Er.parentNode,offset:domIndex(Er)+1});break}let wr=xr.pmViewDesc;if(wr&&wr.node&&wr.node.isBlock)break}}else{let xr=br.childNodes[Sr-1];yr=xr&&(xr.nodeName=="BR"||xr.contentEditable=="false")}}if(gecko&&gr.focusNode&&gr.focusNode!=pr.node&&gr.focusNode.nodeType==1){let br=gr.focusNode.childNodes[gr.focusOffset];br&&br.contentEditable=="false"&&(ur=!0)}if(!(ur||yr&&safari)&&isEquivalentPosition(fr.node,fr.offset,gr.anchorNode,gr.anchorOffset)&&isEquivalentPosition(pr.node,pr.offset,gr.focusNode,gr.focusOffset))return;let vr=!1;if((mr.extend||or==lr)&&!yr){mr.collapse(fr.node,fr.offset);try{or!=lr&&mr.extend(pr.node,pr.offset),vr=!0}catch{}}if(!vr){if(or>lr){let Sr=fr;fr=pr,pr=Sr}let br=document.createRange();br.setEnd(pr.node,pr.offset),br.setStart(fr.node,fr.offset),mr.removeAllRanges(),mr.addRange(br)}}ignoreMutation(or){return!this.contentDOM&&or.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(or,lr){for(let cr=0,ur=0;ur<this.children.length;ur++){let dr=this.children[ur],hr=cr+dr.size;if(cr==hr?or<=hr&&lr>=cr:or<hr&&lr>cr){let fr=cr+dr.border,pr=hr-dr.border;if(or>=fr&&lr<=pr){this.dirty=or==cr||lr==hr?CONTENT_DIRTY:CHILD_DIRTY,or==fr&&lr==pr&&(dr.contentLost||dr.dom.parentNode!=this.contentDOM)?dr.dirty=NODE_DIRTY:dr.markDirty(or-fr,lr-fr);return}else dr.dirty=dr.dom==dr.contentDOM&&dr.dom.parentNode==this.contentDOM&&!dr.children.length?CONTENT_DIRTY:NODE_DIRTY}cr=hr}this.dirty=CONTENT_DIRTY}markParentsDirty(){let or=1;for(let lr=this.parent;lr;lr=lr.parent,or++){let cr=or==1?CONTENT_DIRTY:CHILD_DIRTY;lr.dirty<cr&&(lr.dirty=cr)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(or){return!1}}class WidgetViewDesc extends ViewDesc{constructor(or,lr,cr,ur){let dr,hr=lr.type.toDOM;if(typeof hr=="function"&&(hr=hr(cr,()=>{if(!dr)return ur;if(dr.parent)return dr.parent.posBeforeChild(dr)})),!lr.type.spec.raw){if(hr.nodeType!=1){let fr=document.createElement("span");fr.appendChild(hr),hr=fr}hr.contentEditable="false",hr.classList.add("ProseMirror-widget")}super(or,[],hr,null),this.widget=lr,this.widget=lr,dr=this}matchesWidget(or){return this.dirty==NOT_DIRTY&&or.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(or){let lr=this.widget.spec.stopEvent;return lr?lr(or):!1}ignoreMutation(or){return or.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(or,lr,cr,ur){super(or,[],lr,null),this.textDOM=cr,this.text=ur}get size(){return this.text.length}localPosFromDOM(or,lr){return or!=this.textDOM?this.posAtStart+(lr?this.size:0):this.posAtStart+lr}domFromPos(or){return{node:this.textDOM,offset:or}}ignoreMutation(or){return or.type==="characterData"&&or.target.nodeValue==or.oldValue}}class MarkViewDesc extends ViewDesc{constructor(or,lr,cr,ur,dr){super(or,[],cr,ur),this.mark=lr,this.spec=dr}static create(or,lr,cr,ur){let dr=ur.nodeViews[lr.type.name],hr=dr&&dr(lr,ur,cr);return(!hr||!hr.dom)&&(hr=DOMSerializer.renderSpec(document,lr.type.spec.toDOM(lr,cr),null,lr.attrs)),new MarkViewDesc(or,lr,hr.dom,hr.contentDOM||hr.dom,hr)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(or){return this.dirty!=NODE_DIRTY&&this.mark.eq(or)}markDirty(or,lr){if(super.markDirty(or,lr),this.dirty!=NOT_DIRTY){let cr=this.parent;for(;!cr.node;)cr=cr.parent;cr.dirty<this.dirty&&(cr.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(or,lr,cr){let ur=MarkViewDesc.create(this.parent,this.mark,!0,cr),dr=this.children,hr=this.size;lr<hr&&(dr=replaceNodes(dr,lr,hr,cr)),or>0&&(dr=replaceNodes(dr,0,or,cr));for(let fr=0;fr<dr.length;fr++)dr[fr].parent=ur;return ur.children=dr,ur}ignoreMutation(or){return this.spec.ignoreMutation?this.spec.ignoreMutation(or):super.ignoreMutation(or)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class NodeViewDesc extends ViewDesc{constructor(or,lr,cr,ur,dr,hr,fr,pr,mr){super(or,[],dr,hr),this.node=lr,this.outerDeco=cr,this.innerDeco=ur,this.nodeDOM=fr}static create(or,lr,cr,ur,dr,hr){let fr=dr.nodeViews[lr.type.name],pr,mr=fr&&fr(lr,dr,()=>{if(!pr)return hr;if(pr.parent)return pr.parent.posBeforeChild(pr)},cr,ur),gr=mr&&mr.dom,yr=mr&&mr.contentDOM;if(lr.isText){if(!gr)gr=document.createTextNode(lr.text);else if(gr.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else gr||({dom:gr,contentDOM:yr}=DOMSerializer.renderSpec(document,lr.type.spec.toDOM(lr),null,lr.attrs));!yr&&!lr.isText&&gr.nodeName!="BR"&&(gr.hasAttribute("contenteditable")||(gr.contentEditable="false"),lr.type.spec.draggable&&(gr.draggable=!0));let vr=gr;return gr=applyOuterDeco(gr,cr,lr),mr?pr=new CustomNodeViewDesc(or,lr,cr,ur,gr,yr||null,vr,mr,dr,hr+1):lr.isText?new TextViewDesc(or,lr,cr,ur,gr,vr,dr):new NodeViewDesc(or,lr,cr,ur,gr,yr||null,vr,dr,hr+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let or={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(or.preserveWhitespace="full"),!this.contentDOM)or.getContent=()=>this.node.content;else if(!this.contentLost)or.contentElement=this.contentDOM;else{for(let lr=this.children.length-1;lr>=0;lr--){let cr=this.children[lr];if(this.dom.contains(cr.dom.parentNode)){or.contentElement=cr.dom.parentNode;break}}or.contentElement||(or.getContent=()=>Fragment.empty)}return or}matchesNode(or,lr,cr){return this.dirty==NOT_DIRTY&&or.eq(this.node)&&sameOuterDeco(lr,this.outerDeco)&&cr.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(or,lr){let cr=this.node.inlineContent,ur=lr,dr=or.composing?this.localCompositionInfo(or,lr):null,hr=dr&&dr.pos>-1?dr:null,fr=dr&&dr.pos<0,pr=new ViewTreeUpdater(this,hr&&hr.node,or);iterDeco(this.node,this.innerDeco,(mr,gr,yr)=>{mr.spec.marks?pr.syncToMarks(mr.spec.marks,cr,or):mr.type.side>=0&&!yr&&pr.syncToMarks(gr==this.node.childCount?Mark$1.none:this.node.child(gr).marks,cr,or),pr.placeWidget(mr,or,ur)},(mr,gr,yr,vr)=>{pr.syncToMarks(mr.marks,cr,or);let br;pr.findNodeMatch(mr,gr,yr,vr)||fr&&or.state.selection.from>ur&&or.state.selection.to<ur+mr.nodeSize&&(br=pr.findIndexWithChild(dr.node))>-1&&pr.updateNodeAt(mr,gr,yr,br,or)||pr.updateNextNode(mr,gr,yr,or,vr,ur)||pr.addNode(mr,gr,yr,or,ur),ur+=mr.nodeSize}),pr.syncToMarks([],cr,or),this.node.isTextblock&&pr.addTextblockHacks(),pr.destroyRest(),(pr.changed||this.dirty==CONTENT_DIRTY)&&(hr&&this.protectLocalComposition(or,hr),renderDescs(this.contentDOM,this.children,or),ios&&iosHacks(this.dom))}localCompositionInfo(or,lr){let{from:cr,to:ur}=or.state.selection;if(!(or.state.selection instanceof TextSelection)||cr<lr||ur>lr+this.node.content.size)return null;let dr=or.input.compositionNode;if(!dr||!this.dom.contains(dr.parentNode))return null;if(this.node.inlineContent){let hr=dr.nodeValue,fr=findTextInFragment(this.node.content,hr,cr-lr,ur-lr);return fr<0?null:{node:dr,pos:fr,text:hr}}else return{node:dr,pos:-1,text:""}}protectLocalComposition(or,{node:lr,pos:cr,text:ur}){if(this.getDesc(lr))return;let dr=lr;for(;dr.parentNode!=this.contentDOM;dr=dr.parentNode){for(;dr.previousSibling;)dr.parentNode.removeChild(dr.previousSibling);for(;dr.nextSibling;)dr.parentNode.removeChild(dr.nextSibling);dr.pmViewDesc&&(dr.pmViewDesc=void 0)}let hr=new CompositionViewDesc(this,dr,lr,ur);or.input.compositionNodes.push(hr),this.children=replaceNodes(this.children,cr,cr+ur.length,or,hr)}update(or,lr,cr,ur){return this.dirty==NODE_DIRTY||!or.sameMarkup(this.node)?!1:(this.updateInner(or,lr,cr,ur),!0)}updateInner(or,lr,cr,ur){this.updateOuterDeco(lr),this.node=or,this.innerDeco=cr,this.contentDOM&&this.updateChildren(ur,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(or){if(sameOuterDeco(or,this.outerDeco))return;let lr=this.nodeDOM.nodeType!=1,cr=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,lr),computeOuterDeco(or,this.node,lr)),this.dom!=cr&&(cr.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=or}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(ar,or,lr,cr,ur){applyOuterDeco(cr,or,ar);let dr=new NodeViewDesc(void 0,ar,or,lr,cr,cr,cr,ur,0);return dr.contentDOM&&dr.updateChildren(ur,0),dr}class TextViewDesc extends NodeViewDesc{constructor(or,lr,cr,ur,dr,hr,fr){super(or,lr,cr,ur,dr,null,hr,fr,0)}parseRule(){let or=this.nodeDOM.parentNode;for(;or&&or!=this.dom&&!or.pmIsDeco;)or=or.parentNode;return{skip:or||!0}}update(or,lr,cr,ur){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!or.sameMarkup(this.node)?!1:(this.updateOuterDeco(lr),(this.dirty!=NOT_DIRTY||or.text!=this.node.text)&&or.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=or.text,ur.trackWrites==this.nodeDOM&&(ur.trackWrites=null)),this.node=or,this.dirty=NOT_DIRTY,!0)}inParent(){let or=this.parent.contentDOM;for(let lr=this.nodeDOM;lr;lr=lr.parentNode)if(lr==or)return!0;return!1}domFromPos(or){return{node:this.nodeDOM,offset:or}}localPosFromDOM(or,lr,cr){return or==this.nodeDOM?this.posAtStart+Math.min(lr,this.node.text.length):super.localPosFromDOM(or,lr,cr)}ignoreMutation(or){return or.type!="characterData"&&or.type!="selection"}slice(or,lr,cr){let ur=this.node.cut(or,lr),dr=document.createTextNode(ur.text);return new TextViewDesc(this.parent,ur,this.outerDeco,this.innerDeco,dr,dr,cr)}markDirty(or,lr){super.markDirty(or,lr),this.dom!=this.nodeDOM&&(or==0||lr==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(or){return this.node.text==or}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(or){return this.dirty==NOT_DIRTY&&this.dom.nodeName==or}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(or,lr,cr,ur,dr,hr,fr,pr,mr,gr){super(or,lr,cr,ur,dr,hr,fr,mr,gr),this.spec=pr}update(or,lr,cr,ur){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update&&(this.node.type==or.type||this.spec.multiType)){let dr=this.spec.update(or,lr,cr);return dr&&this.updateInner(or,lr,cr,ur),dr}else return!this.contentDOM&&!or.isLeaf?!1:super.update(or,lr,cr,ur)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(or,lr,cr,ur){this.spec.setSelection?this.spec.setSelection(or,lr,cr.root):super.setSelection(or,lr,cr,ur)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(or){return this.spec.stopEvent?this.spec.stopEvent(or):!1}ignoreMutation(or){return this.spec.ignoreMutation?this.spec.ignoreMutation(or):super.ignoreMutation(or)}}function renderDescs(ar,or,lr){let cr=ar.firstChild,ur=!1;for(let dr=0;dr<or.length;dr++){let hr=or[dr],fr=hr.dom;if(fr.parentNode==ar){for(;fr!=cr;)cr=rm(cr),ur=!0;cr=cr.nextSibling}else ur=!0,ar.insertBefore(fr,cr);if(hr instanceof MarkViewDesc){let pr=cr?cr.previousSibling:ar.lastChild;renderDescs(hr.contentDOM,hr.children,lr),cr=pr?pr.nextSibling:ar.firstChild}}for(;cr;)cr=rm(cr),ur=!0;ur&&lr.trackWrites==ar&&(lr.trackWrites=null)}const OuterDecoLevel=function(ar){ar&&(this.nodeName=ar)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(ar,or,lr){if(ar.length==0)return noDeco;let cr=lr?noDeco[0]:new OuterDecoLevel,ur=[cr];for(let dr=0;dr<ar.length;dr++){let hr=ar[dr].type.attrs;if(hr){hr.nodeName&&ur.push(cr=new OuterDecoLevel(hr.nodeName));for(let fr in hr){let pr=hr[fr];pr!=null&&(lr&&ur.length==1&&ur.push(cr=new OuterDecoLevel(or.isInline?"span":"div")),fr=="class"?cr.class=(cr.class?cr.class+" ":"")+pr:fr=="style"?cr.style=(cr.style?cr.style+";":"")+pr:fr!="nodeName"&&(cr[fr]=pr))}}}return ur}function patchOuterDeco(ar,or,lr,cr){if(lr==noDeco&&cr==noDeco)return or;let ur=or;for(let dr=0;dr<cr.length;dr++){let hr=cr[dr],fr=lr[dr];if(dr){let pr;fr&&fr.nodeName==hr.nodeName&&ur!=ar&&(pr=ur.parentNode)&&pr.nodeName.toLowerCase()==hr.nodeName||(pr=document.createElement(hr.nodeName),pr.pmIsDeco=!0,pr.appendChild(ur),fr=noDeco[0]),ur=pr}patchAttributes(ur,fr||noDeco[0],hr)}return ur}function patchAttributes(ar,or,lr){for(let cr in or)cr!="class"&&cr!="style"&&cr!="nodeName"&&!(cr in lr)&&ar.removeAttribute(cr);for(let cr in lr)cr!="class"&&cr!="style"&&cr!="nodeName"&&lr[cr]!=or[cr]&&ar.setAttribute(cr,lr[cr]);if(or.class!=lr.class){let cr=or.class?or.class.split(" ").filter(Boolean):[],ur=lr.class?lr.class.split(" ").filter(Boolean):[];for(let dr=0;dr<cr.length;dr++)ur.indexOf(cr[dr])==-1&&ar.classList.remove(cr[dr]);for(let dr=0;dr<ur.length;dr++)cr.indexOf(ur[dr])==-1&&ar.classList.add(ur[dr]);ar.classList.length==0&&ar.removeAttribute("class")}if(or.style!=lr.style){if(or.style){let cr=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,ur;for(;ur=cr.exec(or.style);)ar.style.removeProperty(ur[1])}lr.style&&(ar.style.cssText+=lr.style)}}function applyOuterDeco(ar,or,lr){return patchOuterDeco(ar,ar,noDeco,computeOuterDeco(or,lr,ar.nodeType!=1))}function sameOuterDeco(ar,or){if(ar.length!=or.length)return!1;for(let lr=0;lr<ar.length;lr++)if(!ar[lr].type.eq(or[lr].type))return!1;return!0}function rm(ar){let or=ar.nextSibling;return ar.parentNode.removeChild(ar),or}class ViewTreeUpdater{constructor(or,lr,cr){this.lock=lr,this.view=cr,this.index=0,this.stack=[],this.changed=!1,this.top=or,this.preMatch=preMatch(or.node.content,or)}destroyBetween(or,lr){if(or!=lr){for(let cr=or;cr<lr;cr++)this.top.children[cr].destroy();this.top.children.splice(or,lr-or),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(or,lr,cr){let ur=0,dr=this.stack.length>>1,hr=Math.min(dr,or.length);for(;ur<hr&&(ur==dr-1?this.top:this.stack[ur+1<<1]).matchesMark(or[ur])&&or[ur].type.spec.spanning!==!1;)ur++;for(;ur<dr;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),dr--;for(;dr<or.length;){this.stack.push(this.top,this.index+1);let fr=-1;for(let pr=this.index;pr<Math.min(this.index+3,this.top.children.length);pr++){let mr=this.top.children[pr];if(mr.matchesMark(or[dr])&&!this.isLocked(mr.dom)){fr=pr;break}}if(fr>-1)fr>this.index&&(this.changed=!0,this.destroyBetween(this.index,fr)),this.top=this.top.children[this.index];else{let pr=MarkViewDesc.create(this.top,or[dr],lr,cr);this.top.children.splice(this.index,0,pr),this.top=pr,this.changed=!0}this.index=0,dr++}}findNodeMatch(or,lr,cr,ur){let dr=-1,hr;if(ur>=this.preMatch.index&&(hr=this.preMatch.matches[ur-this.preMatch.index]).parent==this.top&&hr.matchesNode(or,lr,cr))dr=this.top.children.indexOf(hr,this.index);else for(let fr=this.index,pr=Math.min(this.top.children.length,fr+5);fr<pr;fr++){let mr=this.top.children[fr];if(mr.matchesNode(or,lr,cr)&&!this.preMatch.matched.has(mr)){dr=fr;break}}return dr<0?!1:(this.destroyBetween(this.index,dr),this.index++,!0)}updateNodeAt(or,lr,cr,ur,dr){let hr=this.top.children[ur];return hr.dirty==NODE_DIRTY&&hr.dom==hr.contentDOM&&(hr.dirty=CONTENT_DIRTY),hr.update(or,lr,cr,dr)?(this.destroyBetween(this.index,ur),this.index++,!0):!1}findIndexWithChild(or){for(;;){let lr=or.parentNode;if(!lr)return-1;if(lr==this.top.contentDOM){let cr=or.pmViewDesc;if(cr){for(let ur=this.index;ur<this.top.children.length;ur++)if(this.top.children[ur]==cr)return ur}return-1}or=lr}}updateNextNode(or,lr,cr,ur,dr,hr){for(let fr=this.index;fr<this.top.children.length;fr++){let pr=this.top.children[fr];if(pr instanceof NodeViewDesc){let mr=this.preMatch.matched.get(pr);if(mr!=null&&mr!=dr)return!1;let gr=pr.dom,yr,vr=this.isLocked(gr)&&!(or.isText&&pr.node&&pr.node.isText&&pr.nodeDOM.nodeValue==or.text&&pr.dirty!=NODE_DIRTY&&sameOuterDeco(lr,pr.outerDeco));if(!vr&&pr.update(or,lr,cr,ur))return this.destroyBetween(this.index,fr),pr.dom!=gr&&(this.changed=!0),this.index++,!0;if(!vr&&(yr=this.recreateWrapper(pr,or,lr,cr,ur,hr)))return this.destroyBetween(this.index,fr),this.top.children[this.index]=yr,yr.contentDOM&&(yr.dirty=CONTENT_DIRTY,yr.updateChildren(ur,hr+1),yr.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(or,lr,cr,ur,dr,hr){if(or.dirty||lr.isAtom||!or.children.length||!or.node.content.eq(lr.content)||!sameOuterDeco(cr,or.outerDeco)||!ur.eq(or.innerDeco))return null;let fr=NodeViewDesc.create(this.top,lr,cr,ur,dr,hr);if(fr.contentDOM){fr.children=or.children,or.children=[];for(let pr of fr.children)pr.parent=fr}return or.destroy(),fr}addNode(or,lr,cr,ur,dr){let hr=NodeViewDesc.create(this.top,or,lr,cr,ur,dr);hr.contentDOM&&hr.updateChildren(ur,dr+1),this.top.children.splice(this.index++,0,hr),this.changed=!0}placeWidget(or,lr,cr){let ur=this.index<this.top.children.length?this.top.children[this.index]:null;if(ur&&ur.matchesWidget(or)&&(or==ur.widget||!ur.widget.type.toDOM.parentNode))this.index++;else{let dr=new WidgetViewDesc(this.top,or,lr,cr);this.top.children.splice(this.index++,0,dr),this.changed=!0}}addTextblockHacks(){let or=this.top.children[this.index-1],lr=this.top;for(;or instanceof MarkViewDesc;)lr=or,or=lr.children[lr.children.length-1];(!or||!(or instanceof TextViewDesc)||/\n$/.test(or.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(or.node.text))&&((safari||chrome)&&or&&or.dom.contentEditable=="false"&&this.addHackNode("IMG",lr),this.addHackNode("BR",this.top))}addHackNode(or,lr){if(lr==this.top&&this.index<lr.children.length&&lr.children[this.index].matchesHack(or))this.index++;else{let cr=document.createElement(or);or=="IMG"&&(cr.className="ProseMirror-separator",cr.alt=""),or=="BR"&&(cr.className="ProseMirror-trailingBreak");let ur=new TrailingHackViewDesc(this.top,[],cr,null);lr!=this.top?lr.children.push(ur):lr.children.splice(this.index++,0,ur),this.changed=!0}}isLocked(or){return this.lock&&(or==this.lock||or.nodeType==1&&or.contains(this.lock.parentNode))}}function preMatch(ar,or){let lr=or,cr=lr.children.length,ur=ar.childCount,dr=new Map,hr=[];e:for(;ur>0;){let fr;for(;;)if(cr){let mr=lr.children[cr-1];if(mr instanceof MarkViewDesc)lr=mr,cr=mr.children.length;else{fr=mr,cr--;break}}else{if(lr==or)break e;cr=lr.parent.children.indexOf(lr),lr=lr.parent}let pr=fr.node;if(pr){if(pr!=ar.child(ur-1))break;--ur,dr.set(fr,ur),hr.push(fr)}}return{index:ur,matched:dr,matches:hr.reverse()}}function compareSide(ar,or){return ar.type.side-or.type.side}function iterDeco(ar,or,lr,cr){let ur=or.locals(ar),dr=0;if(ur.length==0){for(let mr=0;mr<ar.childCount;mr++){let gr=ar.child(mr);cr(gr,ur,or.forChild(dr,gr),mr),dr+=gr.nodeSize}return}let hr=0,fr=[],pr=null;for(let mr=0;;){let gr,yr;for(;hr<ur.length&&ur[hr].to==dr;){let Er=ur[hr++];Er.widget&&(gr?(yr||(yr=[gr])).push(Er):gr=Er)}if(gr)if(yr){yr.sort(compareSide);for(let Er=0;Er<yr.length;Er++)lr(yr[Er],mr,!!pr)}else lr(gr,mr,!!pr);let vr,br;if(pr)br=-1,vr=pr,pr=null;else if(mr<ar.childCount)br=mr,vr=ar.child(mr++);else break;for(let Er=0;Er<fr.length;Er++)fr[Er].to<=dr&&fr.splice(Er--,1);for(;hr<ur.length&&ur[hr].from<=dr&&ur[hr].to>dr;)fr.push(ur[hr++]);let Sr=dr+vr.nodeSize;if(vr.isText){let Er=Sr;hr<ur.length&&ur[hr].from<Er&&(Er=ur[hr].from);for(let wr=0;wr<fr.length;wr++)fr[wr].to<Er&&(Er=fr[wr].to);Er<Sr&&(pr=vr.cut(Er-dr),vr=vr.cut(0,Er-dr),Sr=Er,br=-1)}else for(;hr<ur.length&&ur[hr].to<Sr;)hr++;let xr=vr.isInline&&!vr.isLeaf?fr.filter(Er=>!Er.inline):fr.slice();cr(vr,xr,or.forChild(dr,vr),br),dr=Sr}}function iosHacks(ar){if(ar.nodeName=="UL"||ar.nodeName=="OL"){let or=ar.style.cssText;ar.style.cssText=or+"; list-style: square !important",window.getComputedStyle(ar).listStyle,ar.style.cssText=or}}function findTextInFragment(ar,or,lr,cr){for(let ur=0,dr=0;ur<ar.childCount&&dr<=cr;){let hr=ar.child(ur++),fr=dr;if(dr+=hr.nodeSize,!hr.isText)continue;let pr=hr.text;for(;ur<ar.childCount;){let mr=ar.child(ur++);if(dr+=mr.nodeSize,!mr.isText)break;pr+=mr.text}if(dr>=lr){if(dr>=cr&&pr.slice(cr-or.length-fr,cr-fr)==or)return cr-or.length;let mr=fr<cr?pr.lastIndexOf(or,cr-fr-1):-1;if(mr>=0&&mr+or.length+fr>=lr)return fr+mr;if(lr==cr&&pr.length>=cr+or.length-fr&&pr.slice(cr-fr,cr-fr+or.length)==or)return cr}}return-1}function replaceNodes(ar,or,lr,cr,ur){let dr=[];for(let hr=0,fr=0;hr<ar.length;hr++){let pr=ar[hr],mr=fr,gr=fr+=pr.size;mr>=lr||gr<=or?dr.push(pr):(mr<or&&dr.push(pr.slice(0,or-mr,cr)),ur&&(dr.push(ur),ur=void 0),gr>lr&&dr.push(pr.slice(lr-mr,pr.size,cr)))}return dr}function selectionFromDOM(ar,or=null){let lr=ar.domSelectionRange(),cr=ar.state.doc;if(!lr.focusNode)return null;let ur=ar.docView.nearestDesc(lr.focusNode),dr=ur&&ur.size==0,hr=ar.docView.posFromDOM(lr.focusNode,lr.focusOffset,1);if(hr<0)return null;let fr=cr.resolve(hr),pr,mr;if(selectionCollapsed(lr)){for(pr=hr;ur&&!ur.node;)ur=ur.parent;let yr=ur.node;if(ur&&yr.isAtom&&NodeSelection.isSelectable(yr)&&ur.parent&&!(yr.isInline&&isOnEdge(lr.focusNode,lr.focusOffset,ur.dom))){let vr=ur.posBefore;mr=new NodeSelection(hr==vr?fr:cr.resolve(vr))}}else{if(lr instanceof ar.dom.ownerDocument.defaultView.Selection&&lr.rangeCount>1){let yr=hr,vr=hr;for(let br=0;br<lr.rangeCount;br++){let Sr=lr.getRangeAt(br);yr=Math.min(yr,ar.docView.posFromDOM(Sr.startContainer,Sr.startOffset,1)),vr=Math.max(vr,ar.docView.posFromDOM(Sr.endContainer,Sr.endOffset,-1))}if(yr<0)return null;[pr,hr]=vr==ar.state.selection.anchor?[vr,yr]:[yr,vr],fr=cr.resolve(hr)}else pr=ar.docView.posFromDOM(lr.anchorNode,lr.anchorOffset,1);if(pr<0)return null}let gr=cr.resolve(pr);if(!mr){let yr=or=="pointer"||ar.state.selection.head<fr.pos&&!dr?1:-1;mr=selectionBetween(ar,gr,fr,yr)}return mr}function editorOwnsSelection(ar){return ar.editable?ar.hasFocus():hasSelection(ar)&&document.activeElement&&document.activeElement.contains(ar.dom)}function selectionToDOM(ar,or=!1){let lr=ar.state.selection;if(syncNodeSelection(ar,lr),!!editorOwnsSelection(ar)){if(!or&&ar.input.mouseDown&&ar.input.mouseDown.allowDefault&&chrome){let cr=ar.domSelectionRange(),ur=ar.domObserver.currentSelection;if(cr.anchorNode&&ur.anchorNode&&isEquivalentPosition(cr.anchorNode,cr.anchorOffset,ur.anchorNode,ur.anchorOffset)){ar.input.mouseDown.delayedSelectionSync=!0,ar.domObserver.setCurSelection();return}}if(ar.domObserver.disconnectSelection(),ar.cursorWrapper)selectCursorWrapper(ar);else{let{anchor:cr,head:ur}=lr,dr,hr;brokenSelectBetweenUneditable&&!(lr instanceof TextSelection)&&(lr.$from.parent.inlineContent||(dr=temporarilyEditableNear(ar,lr.from)),!lr.empty&&!lr.$from.parent.inlineContent&&(hr=temporarilyEditableNear(ar,lr.to))),ar.docView.setSelection(cr,ur,ar,or),brokenSelectBetweenUneditable&&(dr&&resetEditable(dr),hr&&resetEditable(hr)),lr.visible?ar.dom.classList.remove("ProseMirror-hideselection"):(ar.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(ar))}ar.domObserver.setCurSelection(),ar.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(ar,or){let{node:lr,offset:cr}=ar.docView.domFromPos(or,0),ur=cr<lr.childNodes.length?lr.childNodes[cr]:null,dr=cr?lr.childNodes[cr-1]:null;if(safari&&ur&&ur.contentEditable=="false")return setEditable(ur);if((!ur||ur.contentEditable=="false")&&(!dr||dr.contentEditable=="false")){if(ur)return setEditable(ur);if(dr)return setEditable(dr)}}function setEditable(ar){return ar.contentEditable="true",safari&&ar.draggable&&(ar.draggable=!1,ar.wasDraggable=!0),ar}function resetEditable(ar){ar.contentEditable="false",ar.wasDraggable&&(ar.draggable=!0,ar.wasDraggable=null)}function removeClassOnSelectionChange(ar){let or=ar.dom.ownerDocument;or.removeEventListener("selectionchange",ar.input.hideSelectionGuard);let lr=ar.domSelectionRange(),cr=lr.anchorNode,ur=lr.anchorOffset;or.addEventListener("selectionchange",ar.input.hideSelectionGuard=()=>{(lr.anchorNode!=cr||lr.anchorOffset!=ur)&&(or.removeEventListener("selectionchange",ar.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(ar)||ar.state.selection.visible)&&ar.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(ar){let or=ar.domSelection(),lr=document.createRange();if(!or)return;let cr=ar.cursorWrapper.dom,ur=cr.nodeName=="IMG";ur?lr.setStart(cr.parentNode,domIndex(cr)+1):lr.setStart(cr,0),lr.collapse(!0),or.removeAllRanges(),or.addRange(lr),!ur&&!ar.state.selection.visible&&ie$1&&ie_version<=11&&(cr.disabled=!0,cr.disabled=!1)}function syncNodeSelection(ar,or){if(or instanceof NodeSelection){let lr=ar.docView.descAt(or.from);lr!=ar.lastSelectedViewDesc&&(clearNodeSelection(ar),lr&&lr.selectNode(),ar.lastSelectedViewDesc=lr)}else clearNodeSelection(ar)}function clearNodeSelection(ar){ar.lastSelectedViewDesc&&(ar.lastSelectedViewDesc.parent&&ar.lastSelectedViewDesc.deselectNode(),ar.lastSelectedViewDesc=void 0)}function selectionBetween(ar,or,lr,cr){return ar.someProp("createSelectionBetween",ur=>ur(ar,or,lr))||TextSelection.between(or,lr,cr)}function hasFocusAndSelection(ar){return ar.editable&&!ar.hasFocus()?!1:hasSelection(ar)}function hasSelection(ar){let or=ar.domSelectionRange();if(!or.anchorNode)return!1;try{return ar.dom.contains(or.anchorNode.nodeType==3?or.anchorNode.parentNode:or.anchorNode)&&(ar.editable||ar.dom.contains(or.focusNode.nodeType==3?or.focusNode.parentNode:or.focusNode))}catch{return!1}}function anchorInRightPlace(ar){let or=ar.docView.domFromPos(ar.state.selection.anchor,0),lr=ar.domSelectionRange();return isEquivalentPosition(or.node,or.offset,lr.anchorNode,lr.anchorOffset)}function moveSelectionBlock(ar,or){let{$anchor:lr,$head:cr}=ar.selection,ur=or>0?lr.max(cr):lr.min(cr),dr=ur.parent.inlineContent?ur.depth?ar.doc.resolve(or>0?ur.after():ur.before()):null:ur;return dr&&Selection.findFrom(dr,or)}function apply(ar,or){return ar.dispatch(ar.state.tr.setSelection(or).scrollIntoView()),!0}function selectHorizontally(ar,or,lr){let cr=ar.state.selection;if(cr instanceof TextSelection)if(lr.indexOf("s")>-1){let{$head:ur}=cr,dr=ur.textOffset?null:or<0?ur.nodeBefore:ur.nodeAfter;if(!dr||dr.isText||!dr.isLeaf)return!1;let hr=ar.state.doc.resolve(ur.pos+dr.nodeSize*(or<0?-1:1));return apply(ar,new TextSelection(cr.$anchor,hr))}else if(cr.empty){if(ar.endOfTextblock(or>0?"forward":"backward")){let ur=moveSelectionBlock(ar.state,or);return ur&&ur instanceof NodeSelection?apply(ar,ur):!1}else if(!(mac$2&&lr.indexOf("m")>-1)){let ur=cr.$head,dr=ur.textOffset?null:or<0?ur.nodeBefore:ur.nodeAfter,hr;if(!dr||dr.isText)return!1;let fr=or<0?ur.pos-dr.nodeSize:ur.pos;return dr.isAtom||(hr=ar.docView.descAt(fr))&&!hr.contentDOM?NodeSelection.isSelectable(dr)?apply(ar,new NodeSelection(or<0?ar.state.doc.resolve(ur.pos-dr.nodeSize):ur)):webkit?apply(ar,new TextSelection(ar.state.doc.resolve(or<0?fr:fr+dr.nodeSize))):!1:!1}}else return!1;else{if(cr instanceof NodeSelection&&cr.node.isInline)return apply(ar,new TextSelection(or>0?cr.$to:cr.$from));{let ur=moveSelectionBlock(ar.state,or);return ur?apply(ar,ur):!1}}}function nodeLen(ar){return ar.nodeType==3?ar.nodeValue.length:ar.childNodes.length}function isIgnorable(ar,or){let lr=ar.pmViewDesc;return lr&&lr.size==0&&(or<0||ar.nextSibling||ar.nodeName!="BR")}function skipIgnoredNodes(ar,or){return or<0?skipIgnoredNodesBefore(ar):skipIgnoredNodesAfter(ar)}function skipIgnoredNodesBefore(ar){let or=ar.domSelectionRange(),lr=or.focusNode,cr=or.focusOffset;if(!lr)return;let ur,dr,hr=!1;for(gecko&&lr.nodeType==1&&cr<nodeLen(lr)&&isIgnorable(lr.childNodes[cr],-1)&&(hr=!0);;)if(cr>0){if(lr.nodeType!=1)break;{let fr=lr.childNodes[cr-1];if(isIgnorable(fr,-1))ur=lr,dr=--cr;else if(fr.nodeType==3)lr=fr,cr=lr.nodeValue.length;else break}}else{if(isBlockNode(lr))break;{let fr=lr.previousSibling;for(;fr&&isIgnorable(fr,-1);)ur=lr.parentNode,dr=domIndex(fr),fr=fr.previousSibling;if(fr)lr=fr,cr=nodeLen(lr);else{if(lr=lr.parentNode,lr==ar.dom)break;cr=0}}}hr?setSelFocus(ar,lr,cr):ur&&setSelFocus(ar,ur,dr)}function skipIgnoredNodesAfter(ar){let or=ar.domSelectionRange(),lr=or.focusNode,cr=or.focusOffset;if(!lr)return;let ur=nodeLen(lr),dr,hr;for(;;)if(cr<ur){if(lr.nodeType!=1)break;let fr=lr.childNodes[cr];if(isIgnorable(fr,1))dr=lr,hr=++cr;else break}else{if(isBlockNode(lr))break;{let fr=lr.nextSibling;for(;fr&&isIgnorable(fr,1);)dr=fr.parentNode,hr=domIndex(fr)+1,fr=fr.nextSibling;if(fr)lr=fr,cr=0,ur=nodeLen(lr);else{if(lr=lr.parentNode,lr==ar.dom)break;cr=ur=0}}}dr&&setSelFocus(ar,dr,hr)}function isBlockNode(ar){let or=ar.pmViewDesc;return or&&or.node&&or.node.isBlock}function textNodeAfter(ar,or){for(;ar&&or==ar.childNodes.length&&!hasBlockDesc(ar);)or=domIndex(ar)+1,ar=ar.parentNode;for(;ar&&or<ar.childNodes.length;){let lr=ar.childNodes[or];if(lr.nodeType==3)return lr;if(lr.nodeType==1&&lr.contentEditable=="false")break;ar=lr,or=0}}function textNodeBefore(ar,or){for(;ar&&!or&&!hasBlockDesc(ar);)or=domIndex(ar),ar=ar.parentNode;for(;ar&&or;){let lr=ar.childNodes[or-1];if(lr.nodeType==3)return lr;if(lr.nodeType==1&&lr.contentEditable=="false")break;ar=lr,or=ar.childNodes.length}}function setSelFocus(ar,or,lr){if(or.nodeType!=3){let dr,hr;(hr=textNodeAfter(or,lr))?(or=hr,lr=0):(dr=textNodeBefore(or,lr))&&(or=dr,lr=dr.nodeValue.length)}let cr=ar.domSelection();if(!cr)return;if(selectionCollapsed(cr)){let dr=document.createRange();dr.setEnd(or,lr),dr.setStart(or,lr),cr.removeAllRanges(),cr.addRange(dr)}else cr.extend&&cr.extend(or,lr);ar.domObserver.setCurSelection();let{state:ur}=ar;setTimeout(()=>{ar.state==ur&&selectionToDOM(ar)},50)}function findDirection(ar,or){let lr=ar.state.doc.resolve(or);if(!(chrome||windows$1)&&lr.parent.inlineContent){let ur=ar.coordsAtPos(or);if(or>lr.start()){let dr=ar.coordsAtPos(or-1),hr=(dr.top+dr.bottom)/2;if(hr>ur.top&&hr<ur.bottom&&Math.abs(dr.left-ur.left)>1)return dr.left<ur.left?"ltr":"rtl"}if(or<lr.end()){let dr=ar.coordsAtPos(or+1),hr=(dr.top+dr.bottom)/2;if(hr>ur.top&&hr<ur.bottom&&Math.abs(dr.left-ur.left)>1)return dr.left>ur.left?"ltr":"rtl"}}return getComputedStyle(ar.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(ar,or,lr){let cr=ar.state.selection;if(cr instanceof TextSelection&&!cr.empty||lr.indexOf("s")>-1||mac$2&&lr.indexOf("m")>-1)return!1;let{$from:ur,$to:dr}=cr;if(!ur.parent.inlineContent||ar.endOfTextblock(or<0?"up":"down")){let hr=moveSelectionBlock(ar.state,or);if(hr&&hr instanceof NodeSelection)return apply(ar,hr)}if(!ur.parent.inlineContent){let hr=or<0?ur:dr,fr=cr instanceof AllSelection?Selection.near(hr,or):Selection.findFrom(hr,or);return fr?apply(ar,fr):!1}return!1}function stopNativeHorizontalDelete(ar,or){if(!(ar.state.selection instanceof TextSelection))return!0;let{$head:lr,$anchor:cr,empty:ur}=ar.state.selection;if(!lr.sameParent(cr))return!0;if(!ur)return!1;if(ar.endOfTextblock(or>0?"forward":"backward"))return!0;let dr=!lr.textOffset&&(or<0?lr.nodeBefore:lr.nodeAfter);if(dr&&!dr.isText){let hr=ar.state.tr;return or<0?hr.delete(lr.pos-dr.nodeSize,lr.pos):hr.delete(lr.pos,lr.pos+dr.nodeSize),ar.dispatch(hr),!0}return!1}function switchEditable(ar,or,lr){ar.domObserver.stop(),or.contentEditable=lr,ar.domObserver.start()}function safariDownArrowBug(ar){if(!safari||ar.state.selection.$head.parentOffset>0)return!1;let{focusNode:or,focusOffset:lr}=ar.domSelectionRange();if(or&&or.nodeType==1&&lr==0&&or.firstChild&&or.firstChild.contentEditable=="false"){let cr=or.firstChild;switchEditable(ar,cr,"true"),setTimeout(()=>switchEditable(ar,cr,"false"),20)}return!1}function getMods(ar){let or="";return ar.ctrlKey&&(or+="c"),ar.metaKey&&(or+="m"),ar.altKey&&(or+="a"),ar.shiftKey&&(or+="s"),or}function captureKeyDown(ar,or){let lr=or.keyCode,cr=getMods(or);if(lr==8||mac$2&&lr==72&&cr=="c")return stopNativeHorizontalDelete(ar,-1)||skipIgnoredNodes(ar,-1);if(lr==46&&!or.shiftKey||mac$2&&lr==68&&cr=="c")return stopNativeHorizontalDelete(ar,1)||skipIgnoredNodes(ar,1);if(lr==13||lr==27)return!0;if(lr==37||mac$2&&lr==66&&cr=="c"){let ur=lr==37?findDirection(ar,ar.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(ar,ur,cr)||skipIgnoredNodes(ar,ur)}else if(lr==39||mac$2&&lr==70&&cr=="c"){let ur=lr==39?findDirection(ar,ar.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(ar,ur,cr)||skipIgnoredNodes(ar,ur)}else{if(lr==38||mac$2&&lr==80&&cr=="c")return selectVertically(ar,-1,cr)||skipIgnoredNodes(ar,-1);if(lr==40||mac$2&&lr==78&&cr=="c")return safariDownArrowBug(ar)||selectVertically(ar,1,cr)||skipIgnoredNodes(ar,1);if(cr==(mac$2?"m":"c")&&(lr==66||lr==73||lr==89||lr==90))return!0}return!1}function serializeForClipboard(ar,or){ar.someProp("transformCopied",br=>{or=br(or,ar)});let lr=[],{content:cr,openStart:ur,openEnd:dr}=or;for(;ur>1&&dr>1&&cr.childCount==1&&cr.firstChild.childCount==1;){ur--,dr--;let br=cr.firstChild;lr.push(br.type.name,br.attrs!=br.type.defaultAttrs?br.attrs:null),cr=br.content}let hr=ar.someProp("clipboardSerializer")||DOMSerializer.fromSchema(ar.state.schema),fr=detachedDoc(),pr=fr.createElement("div");pr.appendChild(hr.serializeFragment(cr,{document:fr}));let mr=pr.firstChild,gr,yr=0;for(;mr&&mr.nodeType==1&&(gr=wrapMap[mr.nodeName.toLowerCase()]);){for(let br=gr.length-1;br>=0;br--){let Sr=fr.createElement(gr[br]);for(;pr.firstChild;)Sr.appendChild(pr.firstChild);pr.appendChild(Sr),yr++}mr=pr.firstChild}mr&&mr.nodeType==1&&mr.setAttribute("data-pm-slice",`${ur} ${dr}${yr?` -${yr}`:""} ${JSON.stringify(lr)}`);let vr=ar.someProp("clipboardTextSerializer",br=>br(or,ar))||or.content.textBetween(0,or.content.size,`

`);return{dom:pr,text:vr,slice:or}}function parseFromClipboard(ar,or,lr,cr,ur){let dr=ur.parent.type.spec.code,hr,fr;if(!lr&&!or)return null;let pr=or&&(cr||dr||!lr);if(pr){if(ar.someProp("transformPastedText",vr=>{or=vr(or,dr||cr,ar)}),dr)return or?new Slice(Fragment.from(ar.state.schema.text(or.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let yr=ar.someProp("clipboardTextParser",vr=>vr(or,ur,cr,ar));if(yr)fr=yr;else{let vr=ur.marks(),{schema:br}=ar.state,Sr=DOMSerializer.fromSchema(br);hr=document.createElement("div"),or.split(/(?:\r\n?|\n)+/).forEach(xr=>{let Er=hr.appendChild(document.createElement("p"));xr&&Er.appendChild(Sr.serializeNode(br.text(xr,vr)))})}}else ar.someProp("transformPastedHTML",yr=>{lr=yr(lr,ar)}),hr=readHTML(lr),webkit&&restoreReplacedSpaces(hr);let mr=hr&&hr.querySelector("[data-pm-slice]"),gr=mr&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(mr.getAttribute("data-pm-slice")||"");if(gr&&gr[3])for(let yr=+gr[3];yr>0;yr--){let vr=hr.firstChild;for(;vr&&vr.nodeType!=1;)vr=vr.nextSibling;if(!vr)break;hr=vr}if(fr||(fr=(ar.someProp("clipboardParser")||ar.someProp("domParser")||DOMParser.fromSchema(ar.state.schema)).parseSlice(hr,{preserveWhitespace:!!(pr||gr),context:ur,ruleFromNode(vr){return vr.nodeName=="BR"&&!vr.nextSibling&&vr.parentNode&&!inlineParents.test(vr.parentNode.nodeName)?{ignore:!0}:null}})),gr)fr=addContext(closeSlice(fr,+gr[1],+gr[2]),gr[4]);else if(fr=Slice.maxOpen(normalizeSiblings(fr.content,ur),!0),fr.openStart||fr.openEnd){let yr=0,vr=0;for(let br=fr.content.firstChild;yr<fr.openStart&&!br.type.spec.isolating;yr++,br=br.firstChild);for(let br=fr.content.lastChild;vr<fr.openEnd&&!br.type.spec.isolating;vr++,br=br.lastChild);fr=closeSlice(fr,yr,vr)}return ar.someProp("transformPasted",yr=>{fr=yr(fr,ar)}),fr}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(ar,or){if(ar.childCount<2)return ar;for(let lr=or.depth;lr>=0;lr--){let ur=or.node(lr).contentMatchAt(or.index(lr)),dr,hr=[];if(ar.forEach(fr=>{if(!hr)return;let pr=ur.findWrapping(fr.type),mr;if(!pr)return hr=null;if(mr=hr.length&&dr.length&&addToSibling(pr,dr,fr,hr[hr.length-1],0))hr[hr.length-1]=mr;else{hr.length&&(hr[hr.length-1]=closeRight(hr[hr.length-1],dr.length));let gr=withWrappers(fr,pr);hr.push(gr),ur=ur.matchType(gr.type),dr=pr}}),hr)return Fragment.from(hr)}return ar}function withWrappers(ar,or,lr=0){for(let cr=or.length-1;cr>=lr;cr--)ar=or[cr].create(null,Fragment.from(ar));return ar}function addToSibling(ar,or,lr,cr,ur){if(ur<ar.length&&ur<or.length&&ar[ur]==or[ur]){let dr=addToSibling(ar,or,lr,cr.lastChild,ur+1);if(dr)return cr.copy(cr.content.replaceChild(cr.childCount-1,dr));if(cr.contentMatchAt(cr.childCount).matchType(ur==ar.length-1?lr.type:ar[ur+1]))return cr.copy(cr.content.append(Fragment.from(withWrappers(lr,ar,ur+1))))}}function closeRight(ar,or){if(or==0)return ar;let lr=ar.content.replaceChild(ar.childCount-1,closeRight(ar.lastChild,or-1)),cr=ar.contentMatchAt(ar.childCount).fillBefore(Fragment.empty,!0);return ar.copy(lr.append(cr))}function closeRange(ar,or,lr,cr,ur,dr){let hr=or<0?ar.firstChild:ar.lastChild,fr=hr.content;return ar.childCount>1&&(dr=0),ur<cr-1&&(fr=closeRange(fr,or,lr,cr,ur+1,dr)),ur>=lr&&(fr=or<0?hr.contentMatchAt(0).fillBefore(fr,dr<=ur).append(fr):fr.append(hr.contentMatchAt(hr.childCount).fillBefore(Fragment.empty,!0))),ar.replaceChild(or<0?0:ar.childCount-1,hr.copy(fr))}function closeSlice(ar,or,lr){return or<ar.openStart&&(ar=new Slice(closeRange(ar.content,-1,or,ar.openStart,0,ar.openEnd),or,ar.openEnd)),lr<ar.openEnd&&(ar=new Slice(closeRange(ar.content,1,lr,ar.openEnd,0,0),ar.openStart,lr)),ar}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}let _policy=null;function maybeWrapTrusted(ar){let or=window.trustedTypes;return or?(_policy||(_policy=or.defaultPolicy||or.createPolicy("ProseMirrorClipboard",{createHTML:lr=>lr})),_policy.createHTML(ar)):ar}function readHTML(ar){let or=/^(\s*<meta [^>]*>)*/.exec(ar);or&&(ar=ar.slice(or[0].length));let lr=detachedDoc().createElement("div"),cr=/<([a-z][^>\s]+)/i.exec(ar),ur;if((ur=cr&&wrapMap[cr[1].toLowerCase()])&&(ar=ur.map(dr=>"<"+dr+">").join("")+ar+ur.map(dr=>"</"+dr+">").reverse().join("")),lr.innerHTML=maybeWrapTrusted(ar),ur)for(let dr=0;dr<ur.length;dr++)lr=lr.querySelector(ur[dr])||lr;return lr}function restoreReplacedSpaces(ar){let or=ar.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let lr=0;lr<or.length;lr++){let cr=or[lr];cr.childNodes.length==1&&cr.textContent==" "&&cr.parentNode&&cr.parentNode.replaceChild(ar.ownerDocument.createTextNode(" "),cr)}}function addContext(ar,or){if(!ar.size)return ar;let lr=ar.content.firstChild.type.schema,cr;try{cr=JSON.parse(or)}catch{return ar}let{content:ur,openStart:dr,openEnd:hr}=ar;for(let fr=cr.length-2;fr>=0;fr-=2){let pr=lr.nodes[cr[fr]];if(!pr||pr.hasRequiredAttrs())break;ur=Fragment.from(pr.create(cr[fr+1],ur)),dr++,hr++}return new Slice(ur,dr,hr)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(ar){for(let or in handlers){let lr=handlers[or];ar.dom.addEventListener(or,ar.input.eventHandlers[or]=cr=>{eventBelongsToView(ar,cr)&&!runCustomHandler(ar,cr)&&(ar.editable||!(cr.type in editHandlers))&&lr(ar,cr)},passiveHandlers[or]?{passive:!0}:void 0)}safari&&ar.dom.addEventListener("input",()=>null),ensureListeners(ar)}function setSelectionOrigin(ar,or){ar.input.lastSelectionOrigin=or,ar.input.lastSelectionTime=Date.now()}function destroyInput(ar){ar.domObserver.stop();for(let or in ar.input.eventHandlers)ar.dom.removeEventListener(or,ar.input.eventHandlers[or]);clearTimeout(ar.input.composingTimeout),clearTimeout(ar.input.lastIOSEnterFallbackTimeout)}function ensureListeners(ar){ar.someProp("handleDOMEvents",or=>{for(let lr in or)ar.input.eventHandlers[lr]||ar.dom.addEventListener(lr,ar.input.eventHandlers[lr]=cr=>runCustomHandler(ar,cr))})}function runCustomHandler(ar,or){return ar.someProp("handleDOMEvents",lr=>{let cr=lr[or.type];return cr?cr(ar,or)||or.defaultPrevented:!1})}function eventBelongsToView(ar,or){if(!or.bubbles)return!0;if(or.defaultPrevented)return!1;for(let lr=or.target;lr!=ar.dom;lr=lr.parentNode)if(!lr||lr.nodeType==11||lr.pmViewDesc&&lr.pmViewDesc.stopEvent(or))return!1;return!0}function dispatchEvent$2(ar,or){!runCustomHandler(ar,or)&&handlers[or.type]&&(ar.editable||!(or.type in editHandlers))&&handlers[or.type](ar,or)}editHandlers.keydown=(ar,or)=>{let lr=or;if(ar.input.shiftKey=lr.keyCode==16||lr.shiftKey,!inOrNearComposition(ar,lr)&&(ar.input.lastKeyCode=lr.keyCode,ar.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&lr.keyCode==13)))if(lr.keyCode!=229&&ar.domObserver.forceFlush(),ios&&lr.keyCode==13&&!lr.ctrlKey&&!lr.altKey&&!lr.metaKey){let cr=Date.now();ar.input.lastIOSEnter=cr,ar.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{ar.input.lastIOSEnter==cr&&(ar.someProp("handleKeyDown",ur=>ur(ar,keyEvent(13,"Enter"))),ar.input.lastIOSEnter=0)},200)}else ar.someProp("handleKeyDown",cr=>cr(ar,lr))||captureKeyDown(ar,lr)?lr.preventDefault():setSelectionOrigin(ar,"key")};editHandlers.keyup=(ar,or)=>{or.keyCode==16&&(ar.input.shiftKey=!1)};editHandlers.keypress=(ar,or)=>{let lr=or;if(inOrNearComposition(ar,lr)||!lr.charCode||lr.ctrlKey&&!lr.altKey||mac$2&&lr.metaKey)return;if(ar.someProp("handleKeyPress",ur=>ur(ar,lr))){lr.preventDefault();return}let cr=ar.state.selection;if(!(cr instanceof TextSelection)||!cr.$from.sameParent(cr.$to)){let ur=String.fromCharCode(lr.charCode);!/[\r\n]/.test(ur)&&!ar.someProp("handleTextInput",dr=>dr(ar,cr.$from.pos,cr.$to.pos,ur))&&ar.dispatch(ar.state.tr.insertText(ur).scrollIntoView()),lr.preventDefault()}};function eventCoords(ar){return{left:ar.clientX,top:ar.clientY}}function isNear(ar,or){let lr=or.x-ar.clientX,cr=or.y-ar.clientY;return lr*lr+cr*cr<100}function runHandlerOnContext(ar,or,lr,cr,ur){if(cr==-1)return!1;let dr=ar.state.doc.resolve(cr);for(let hr=dr.depth+1;hr>0;hr--)if(ar.someProp(or,fr=>hr>dr.depth?fr(ar,lr,dr.nodeAfter,dr.before(hr),ur,!0):fr(ar,lr,dr.node(hr),dr.before(hr),ur,!1)))return!0;return!1}function updateSelection(ar,or,lr){if(ar.focused||ar.focus(),ar.state.selection.eq(or))return;let cr=ar.state.tr.setSelection(or);cr.setMeta("pointer",!0),ar.dispatch(cr)}function selectClickedLeaf(ar,or){if(or==-1)return!1;let lr=ar.state.doc.resolve(or),cr=lr.nodeAfter;return cr&&cr.isAtom&&NodeSelection.isSelectable(cr)?(updateSelection(ar,new NodeSelection(lr)),!0):!1}function selectClickedNode(ar,or){if(or==-1)return!1;let lr=ar.state.selection,cr,ur;lr instanceof NodeSelection&&(cr=lr.node);let dr=ar.state.doc.resolve(or);for(let hr=dr.depth+1;hr>0;hr--){let fr=hr>dr.depth?dr.nodeAfter:dr.node(hr);if(NodeSelection.isSelectable(fr)){cr&&lr.$from.depth>0&&hr>=lr.$from.depth&&dr.before(lr.$from.depth+1)==lr.$from.pos?ur=dr.before(lr.$from.depth):ur=dr.before(hr);break}}return ur!=null?(updateSelection(ar,NodeSelection.create(ar.state.doc,ur)),!0):!1}function handleSingleClick(ar,or,lr,cr,ur){return runHandlerOnContext(ar,"handleClickOn",or,lr,cr)||ar.someProp("handleClick",dr=>dr(ar,or,cr))||(ur?selectClickedNode(ar,lr):selectClickedLeaf(ar,lr))}function handleDoubleClick(ar,or,lr,cr){return runHandlerOnContext(ar,"handleDoubleClickOn",or,lr,cr)||ar.someProp("handleDoubleClick",ur=>ur(ar,or,cr))}function handleTripleClick(ar,or,lr,cr){return runHandlerOnContext(ar,"handleTripleClickOn",or,lr,cr)||ar.someProp("handleTripleClick",ur=>ur(ar,or,cr))||defaultTripleClick(ar,lr,cr)}function defaultTripleClick(ar,or,lr){if(lr.button!=0)return!1;let cr=ar.state.doc;if(or==-1)return cr.inlineContent?(updateSelection(ar,TextSelection.create(cr,0,cr.content.size)),!0):!1;let ur=cr.resolve(or);for(let dr=ur.depth+1;dr>0;dr--){let hr=dr>ur.depth?ur.nodeAfter:ur.node(dr),fr=ur.before(dr);if(hr.inlineContent)updateSelection(ar,TextSelection.create(cr,fr+1,fr+1+hr.content.size));else if(NodeSelection.isSelectable(hr))updateSelection(ar,NodeSelection.create(cr,fr));else continue;return!0}}function forceDOMFlush(ar){return endComposition(ar)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(ar,or)=>{let lr=or;ar.input.shiftKey=lr.shiftKey;let cr=forceDOMFlush(ar),ur=Date.now(),dr="singleClick";ur-ar.input.lastClick.time<500&&isNear(lr,ar.input.lastClick)&&!lr[selectNodeModifier]&&ar.input.lastClick.button==lr.button&&(ar.input.lastClick.type=="singleClick"?dr="doubleClick":ar.input.lastClick.type=="doubleClick"&&(dr="tripleClick")),ar.input.lastClick={time:ur,x:lr.clientX,y:lr.clientY,type:dr,button:lr.button};let hr=ar.posAtCoords(eventCoords(lr));hr&&(dr=="singleClick"?(ar.input.mouseDown&&ar.input.mouseDown.done(),ar.input.mouseDown=new MouseDown(ar,hr,lr,!!cr)):(dr=="doubleClick"?handleDoubleClick:handleTripleClick)(ar,hr.pos,hr.inside,lr)?lr.preventDefault():setSelectionOrigin(ar,"pointer"))};class MouseDown{constructor(or,lr,cr,ur){this.view=or,this.pos=lr,this.event=cr,this.flushed=ur,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=or.state.doc,this.selectNode=!!cr[selectNodeModifier],this.allowDefault=cr.shiftKey;let dr,hr;if(lr.inside>-1)dr=or.state.doc.nodeAt(lr.inside),hr=lr.inside;else{let gr=or.state.doc.resolve(lr.pos);dr=gr.parent,hr=gr.depth?gr.before():0}const fr=ur?null:cr.target,pr=fr?or.docView.nearestDesc(fr,!0):null;this.target=pr&&pr.dom.nodeType==1?pr.dom:null;let{selection:mr}=or.state;(cr.button==0&&dr.type.spec.draggable&&dr.type.spec.selectable!==!1||mr instanceof NodeSelection&&mr.from<=hr&&mr.to>hr)&&(this.mightDrag={node:dr,pos:hr,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),or.root.addEventListener("mouseup",this.up=this.up.bind(this)),or.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(or,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(or){if(this.done(),!this.view.dom.contains(or.target))return;let lr=this.pos;this.view.state.doc!=this.startDoc&&(lr=this.view.posAtCoords(eventCoords(or))),this.updateAllowDefault(or),this.allowDefault||!lr?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,lr.pos,lr.inside,or,this.selectNode)?or.preventDefault():or.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(lr.pos-this.view.state.selection.from),Math.abs(lr.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection.near(this.view.state.doc.resolve(lr.pos))),or.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(or){this.updateAllowDefault(or),setSelectionOrigin(this.view,"pointer"),or.buttons==0&&this.done()}updateAllowDefault(or){!this.allowDefault&&(Math.abs(this.event.x-or.clientX)>4||Math.abs(this.event.y-or.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=ar=>{ar.input.lastTouch=Date.now(),forceDOMFlush(ar),setSelectionOrigin(ar,"pointer")};handlers.touchmove=ar=>{ar.input.lastTouch=Date.now(),setSelectionOrigin(ar,"pointer")};handlers.contextmenu=ar=>forceDOMFlush(ar);function inOrNearComposition(ar,or){return ar.composing?!0:safari&&Math.abs(or.timeStamp-ar.input.compositionEndedAt)<500?(ar.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=ar=>{if(!ar.composing){ar.domObserver.flush();let{state:or}=ar,lr=or.selection.$to;if(or.selection instanceof TextSelection&&(or.storedMarks||!lr.textOffset&&lr.parentOffset&&lr.nodeBefore.marks.some(cr=>cr.type.spec.inclusive===!1)))ar.markCursor=ar.state.storedMarks||lr.marks(),endComposition(ar,!0),ar.markCursor=null;else if(endComposition(ar,!or.selection.empty),gecko&&or.selection.empty&&lr.parentOffset&&!lr.textOffset&&lr.nodeBefore.marks.length){let cr=ar.domSelectionRange();for(let ur=cr.focusNode,dr=cr.focusOffset;ur&&ur.nodeType==1&&dr!=0;){let hr=dr<0?ur.lastChild:ur.childNodes[dr-1];if(!hr)break;if(hr.nodeType==3){let fr=ar.domSelection();fr&&fr.collapse(hr,hr.nodeValue.length);break}else ur=hr,dr=-1}}ar.input.composing=!0}scheduleComposeEnd(ar,timeoutComposition)};editHandlers.compositionend=(ar,or)=>{ar.composing&&(ar.input.composing=!1,ar.input.compositionEndedAt=or.timeStamp,ar.input.compositionPendingChanges=ar.domObserver.pendingRecords().length?ar.input.compositionID:0,ar.input.compositionNode=null,ar.input.compositionPendingChanges&&Promise.resolve().then(()=>ar.domObserver.flush()),ar.input.compositionID++,scheduleComposeEnd(ar,20))};function scheduleComposeEnd(ar,or){clearTimeout(ar.input.composingTimeout),or>-1&&(ar.input.composingTimeout=setTimeout(()=>endComposition(ar),or))}function clearComposition(ar){for(ar.composing&&(ar.input.composing=!1,ar.input.compositionEndedAt=timestampFromCustomEvent());ar.input.compositionNodes.length>0;)ar.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(ar){let or=ar.domSelectionRange();if(!or.focusNode)return null;let lr=textNodeBefore$1(or.focusNode,or.focusOffset),cr=textNodeAfter$1(or.focusNode,or.focusOffset);if(lr&&cr&&lr!=cr){let ur=cr.pmViewDesc,dr=ar.domObserver.lastChangedTextNode;if(lr==dr||cr==dr)return dr;if(!ur||!ur.isText(cr.nodeValue))return cr;if(ar.input.compositionNode==cr){let hr=lr.pmViewDesc;if(!(!hr||!hr.isText(lr.nodeValue)))return cr}}return lr||cr}function timestampFromCustomEvent(){let ar=document.createEvent("Event");return ar.initEvent("event",!0,!0),ar.timeStamp}function endComposition(ar,or=!1){if(!(android&&ar.domObserver.flushingSoon>=0)){if(ar.domObserver.forceFlush(),clearComposition(ar),or||ar.docView&&ar.docView.dirty){let lr=selectionFromDOM(ar),cr=ar.state.selection;return lr&&!lr.eq(cr)?ar.dispatch(ar.state.tr.setSelection(lr)):(ar.markCursor||or)&&!cr.$from.node(cr.$from.sharedDepth(cr.to)).inlineContent?ar.dispatch(ar.state.tr.deleteSelection()):ar.updateState(ar.state),!0}return!1}}function captureCopy(ar,or){if(!ar.dom.parentNode)return;let lr=ar.dom.parentNode.appendChild(document.createElement("div"));lr.appendChild(or),lr.style.cssText="position: fixed; left: -10000px; top: 10px";let cr=getSelection(),ur=document.createRange();ur.selectNodeContents(or),ar.dom.blur(),cr.removeAllRanges(),cr.addRange(ur),setTimeout(()=>{lr.parentNode&&lr.parentNode.removeChild(lr),ar.focus()},50)}const brokenClipboardAPI=ie$1&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(ar,or)=>{let lr=or,cr=ar.state.selection,ur=lr.type=="cut";if(cr.empty)return;let dr=brokenClipboardAPI?null:lr.clipboardData,hr=cr.content(),{dom:fr,text:pr}=serializeForClipboard(ar,hr);dr?(lr.preventDefault(),dr.clearData(),dr.setData("text/html",fr.innerHTML),dr.setData("text/plain",pr)):captureCopy(ar,fr),ur&&ar.dispatch(ar.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(ar){return ar.openStart==0&&ar.openEnd==0&&ar.content.childCount==1?ar.content.firstChild:null}function capturePaste(ar,or){if(!ar.dom.parentNode)return;let lr=ar.input.shiftKey||ar.state.selection.$from.parent.type.spec.code,cr=ar.dom.parentNode.appendChild(document.createElement(lr?"textarea":"div"));lr||(cr.contentEditable="true"),cr.style.cssText="position: fixed; left: -10000px; top: 10px",cr.focus();let ur=ar.input.shiftKey&&ar.input.lastKeyCode!=45;setTimeout(()=>{ar.focus(),cr.parentNode&&cr.parentNode.removeChild(cr),lr?doPaste(ar,cr.value,null,ur,or):doPaste(ar,cr.textContent,cr.innerHTML,ur,or)},50)}function doPaste(ar,or,lr,cr,ur){let dr=parseFromClipboard(ar,or,lr,cr,ar.state.selection.$from);if(ar.someProp("handlePaste",pr=>pr(ar,ur,dr||Slice.empty)))return!0;if(!dr)return!1;let hr=sliceSingleNode(dr),fr=hr?ar.state.tr.replaceSelectionWith(hr,cr):ar.state.tr.replaceSelection(dr);return ar.dispatch(fr.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(ar){let or=ar.getData("text/plain")||ar.getData("Text");if(or)return or;let lr=ar.getData("text/uri-list");return lr?lr.replace(/\r?\n/g," "):""}editHandlers.paste=(ar,or)=>{let lr=or;if(ar.composing&&!android)return;let cr=brokenClipboardAPI?null:lr.clipboardData,ur=ar.input.shiftKey&&ar.input.lastKeyCode!=45;cr&&doPaste(ar,getText$1(cr),cr.getData("text/html"),ur,lr)?lr.preventDefault():capturePaste(ar,lr)};class Dragging{constructor(or,lr,cr){this.slice=or,this.move=lr,this.node=cr}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";function dragMoves(ar,or){let lr=ar.someProp("dragCopies",cr=>!cr(or));return lr??!or[dragCopyModifier]}handlers.dragstart=(ar,or)=>{let lr=or,cr=ar.input.mouseDown;if(cr&&cr.done(),!lr.dataTransfer)return;let ur=ar.state.selection,dr=ur.empty?null:ar.posAtCoords(eventCoords(lr)),hr;if(!(dr&&dr.pos>=ur.from&&dr.pos<=(ur instanceof NodeSelection?ur.to-1:ur.to))){if(cr&&cr.mightDrag)hr=NodeSelection.create(ar.state.doc,cr.mightDrag.pos);else if(lr.target&&lr.target.nodeType==1){let yr=ar.docView.nearestDesc(lr.target,!0);yr&&yr.node.type.spec.draggable&&yr!=ar.docView&&(hr=NodeSelection.create(ar.state.doc,yr.posBefore))}}let fr=(hr||ar.state.selection).content(),{dom:pr,text:mr,slice:gr}=serializeForClipboard(ar,fr);(!lr.dataTransfer.files.length||!chrome||chrome_version>120)&&lr.dataTransfer.clearData(),lr.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",pr.innerHTML),lr.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||lr.dataTransfer.setData("text/plain",mr),ar.dragging=new Dragging(gr,dragMoves(ar,lr),hr)};handlers.dragend=ar=>{let or=ar.dragging;window.setTimeout(()=>{ar.dragging==or&&(ar.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(ar,or)=>or.preventDefault();editHandlers.drop=(ar,or)=>{let lr=or,cr=ar.dragging;if(ar.dragging=null,!lr.dataTransfer)return;let ur=ar.posAtCoords(eventCoords(lr));if(!ur)return;let dr=ar.state.doc.resolve(ur.pos),hr=cr&&cr.slice;hr?ar.someProp("transformPasted",Sr=>{hr=Sr(hr,ar)}):hr=parseFromClipboard(ar,getText$1(lr.dataTransfer),brokenClipboardAPI?null:lr.dataTransfer.getData("text/html"),!1,dr);let fr=!!(cr&&dragMoves(ar,lr));if(ar.someProp("handleDrop",Sr=>Sr(ar,lr,hr||Slice.empty,fr))){lr.preventDefault();return}if(!hr)return;lr.preventDefault();let pr=hr?dropPoint(ar.state.doc,dr.pos,hr):dr.pos;pr==null&&(pr=dr.pos);let mr=ar.state.tr;if(fr){let{node:Sr}=cr;Sr?Sr.replace(mr):mr.deleteSelection()}let gr=mr.mapping.map(pr),yr=hr.openStart==0&&hr.openEnd==0&&hr.content.childCount==1,vr=mr.doc;if(yr?mr.replaceRangeWith(gr,gr,hr.content.firstChild):mr.replaceRange(gr,gr,hr),mr.doc.eq(vr))return;let br=mr.doc.resolve(gr);if(yr&&NodeSelection.isSelectable(hr.content.firstChild)&&br.nodeAfter&&br.nodeAfter.sameMarkup(hr.content.firstChild))mr.setSelection(new NodeSelection(br));else{let Sr=mr.mapping.map(pr);mr.mapping.maps[mr.mapping.maps.length-1].forEach((xr,Er,wr,Ar)=>Sr=Ar),mr.setSelection(selectionBetween(ar,br,mr.doc.resolve(Sr)))}ar.focus(),ar.dispatch(mr.setMeta("uiEvent","drop"))};handlers.focus=ar=>{ar.input.lastFocus=Date.now(),ar.focused||(ar.domObserver.stop(),ar.dom.classList.add("ProseMirror-focused"),ar.domObserver.start(),ar.focused=!0,setTimeout(()=>{ar.docView&&ar.hasFocus()&&!ar.domObserver.currentSelection.eq(ar.domSelectionRange())&&selectionToDOM(ar)},20))};handlers.blur=(ar,or)=>{let lr=or;ar.focused&&(ar.domObserver.stop(),ar.dom.classList.remove("ProseMirror-focused"),ar.domObserver.start(),lr.relatedTarget&&ar.dom.contains(lr.relatedTarget)&&ar.domObserver.currentSelection.clear(),ar.focused=!1)};handlers.beforeinput=(ar,or)=>{if(chrome&&android&&or.inputType=="deleteContentBackward"){ar.domObserver.flushSoon();let{domChangeCount:cr}=ar.input;setTimeout(()=>{if(ar.input.domChangeCount!=cr||(ar.dom.blur(),ar.focus(),ar.someProp("handleKeyDown",dr=>dr(ar,keyEvent(8,"Backspace")))))return;let{$cursor:ur}=ar.state.selection;ur&&ur.pos>0&&ar.dispatch(ar.state.tr.delete(ur.pos-1,ur.pos).scrollIntoView())},50)}};for(let ar in editHandlers)handlers[ar]=editHandlers[ar];function compareObjs(ar,or){if(ar==or)return!0;for(let lr in ar)if(ar[lr]!==or[lr])return!1;for(let lr in or)if(!(lr in ar))return!1;return!0}class WidgetType{constructor(or,lr){this.toDOM=or,this.spec=lr||noSpec,this.side=this.spec.side||0}map(or,lr,cr,ur){let{pos:dr,deleted:hr}=or.mapResult(lr.from+ur,this.side<0?-1:1);return hr?null:new Decoration(dr-cr,dr-cr,this)}valid(){return!0}eq(or){return this==or||or instanceof WidgetType&&(this.spec.key&&this.spec.key==or.spec.key||this.toDOM==or.toDOM&&compareObjs(this.spec,or.spec))}destroy(or){this.spec.destroy&&this.spec.destroy(or)}}class InlineType{constructor(or,lr){this.attrs=or,this.spec=lr||noSpec}map(or,lr,cr,ur){let dr=or.map(lr.from+ur,this.spec.inclusiveStart?-1:1)-cr,hr=or.map(lr.to+ur,this.spec.inclusiveEnd?1:-1)-cr;return dr>=hr?null:new Decoration(dr,hr,this)}valid(or,lr){return lr.from<lr.to}eq(or){return this==or||or instanceof InlineType&&compareObjs(this.attrs,or.attrs)&&compareObjs(this.spec,or.spec)}static is(or){return or.type instanceof InlineType}destroy(){}}class NodeType{constructor(or,lr){this.attrs=or,this.spec=lr||noSpec}map(or,lr,cr,ur){let dr=or.mapResult(lr.from+ur,1);if(dr.deleted)return null;let hr=or.mapResult(lr.to+ur,-1);return hr.deleted||hr.pos<=dr.pos?null:new Decoration(dr.pos-cr,hr.pos-cr,this)}valid(or,lr){let{index:cr,offset:ur}=or.content.findIndex(lr.from),dr;return ur==lr.from&&!(dr=or.child(cr)).isText&&ur+dr.nodeSize==lr.to}eq(or){return this==or||or instanceof NodeType&&compareObjs(this.attrs,or.attrs)&&compareObjs(this.spec,or.spec)}destroy(){}}class Decoration{constructor(or,lr,cr){this.from=or,this.to=lr,this.type=cr}copy(or,lr){return new Decoration(or,lr,this.type)}eq(or,lr=0){return this.type.eq(or.type)&&this.from+lr==or.from&&this.to+lr==or.to}map(or,lr,cr){return this.type.map(or,this,lr,cr)}static widget(or,lr,cr){return new Decoration(or,or,new WidgetType(lr,cr))}static inline(or,lr,cr,ur){return new Decoration(or,lr,new InlineType(cr,ur))}static node(or,lr,cr,ur){return new Decoration(or,lr,new NodeType(cr,ur))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none=[],noSpec={};class DecorationSet{constructor(or,lr){this.local=or.length?or:none,this.children=lr.length?lr:none}static create(or,lr){return lr.length?buildTree(lr,or,0,noSpec):empty}find(or,lr,cr){let ur=[];return this.findInner(or??0,lr??1e9,ur,0,cr),ur}findInner(or,lr,cr,ur,dr){for(let hr=0;hr<this.local.length;hr++){let fr=this.local[hr];fr.from<=lr&&fr.to>=or&&(!dr||dr(fr.spec))&&cr.push(fr.copy(fr.from+ur,fr.to+ur))}for(let hr=0;hr<this.children.length;hr+=3)if(this.children[hr]<lr&&this.children[hr+1]>or){let fr=this.children[hr]+1;this.children[hr+2].findInner(or-fr,lr-fr,cr,ur+fr,dr)}}map(or,lr,cr){return this==empty||or.maps.length==0?this:this.mapInner(or,lr,0,0,cr||noSpec)}mapInner(or,lr,cr,ur,dr){let hr;for(let fr=0;fr<this.local.length;fr++){let pr=this.local[fr].map(or,cr,ur);pr&&pr.type.valid(lr,pr)?(hr||(hr=[])).push(pr):dr.onRemove&&dr.onRemove(this.local[fr].spec)}return this.children.length?mapChildren(this.children,hr||[],or,lr,cr,ur,dr):hr?new DecorationSet(hr.sort(byPos),none):empty}add(or,lr){return lr.length?this==empty?DecorationSet.create(or,lr):this.addInner(or,lr,0):this}addInner(or,lr,cr){let ur,dr=0;or.forEach((fr,pr)=>{let mr=pr+cr,gr;if(gr=takeSpansForNode(lr,fr,mr)){for(ur||(ur=this.children.slice());dr<ur.length&&ur[dr]<pr;)dr+=3;ur[dr]==pr?ur[dr+2]=ur[dr+2].addInner(fr,gr,mr+1):ur.splice(dr,0,pr,pr+fr.nodeSize,buildTree(gr,fr,mr+1,noSpec)),dr+=3}});let hr=moveSpans(dr?withoutNulls(lr):lr,-cr);for(let fr=0;fr<hr.length;fr++)hr[fr].type.valid(or,hr[fr])||hr.splice(fr--,1);return new DecorationSet(hr.length?this.local.concat(hr).sort(byPos):this.local,ur||this.children)}remove(or){return or.length==0||this==empty?this:this.removeInner(or,0)}removeInner(or,lr){let cr=this.children,ur=this.local;for(let dr=0;dr<cr.length;dr+=3){let hr,fr=cr[dr]+lr,pr=cr[dr+1]+lr;for(let gr=0,yr;gr<or.length;gr++)(yr=or[gr])&&yr.from>fr&&yr.to<pr&&(or[gr]=null,(hr||(hr=[])).push(yr));if(!hr)continue;cr==this.children&&(cr=this.children.slice());let mr=cr[dr+2].removeInner(hr,fr+1);mr!=empty?cr[dr+2]=mr:(cr.splice(dr,3),dr-=3)}if(ur.length){for(let dr=0,hr;dr<or.length;dr++)if(hr=or[dr])for(let fr=0;fr<ur.length;fr++)ur[fr].eq(hr,lr)&&(ur==this.local&&(ur=this.local.slice()),ur.splice(fr--,1))}return cr==this.children&&ur==this.local?this:ur.length||cr.length?new DecorationSet(ur,cr):empty}forChild(or,lr){if(this==empty)return this;if(lr.isLeaf)return DecorationSet.empty;let cr,ur;for(let fr=0;fr<this.children.length;fr+=3)if(this.children[fr]>=or){this.children[fr]==or&&(cr=this.children[fr+2]);break}let dr=or+1,hr=dr+lr.content.size;for(let fr=0;fr<this.local.length;fr++){let pr=this.local[fr];if(pr.from<hr&&pr.to>dr&&pr.type instanceof InlineType){let mr=Math.max(dr,pr.from)-dr,gr=Math.min(hr,pr.to)-dr;mr<gr&&(ur||(ur=[])).push(pr.copy(mr,gr))}}if(ur){let fr=new DecorationSet(ur.sort(byPos),none);return cr?new DecorationGroup([fr,cr]):fr}return cr||empty}eq(or){if(this==or)return!0;if(!(or instanceof DecorationSet)||this.local.length!=or.local.length||this.children.length!=or.children.length)return!1;for(let lr=0;lr<this.local.length;lr++)if(!this.local[lr].eq(or.local[lr]))return!1;for(let lr=0;lr<this.children.length;lr+=3)if(this.children[lr]!=or.children[lr]||this.children[lr+1]!=or.children[lr+1]||!this.children[lr+2].eq(or.children[lr+2]))return!1;return!0}locals(or){return removeOverlap(this.localsInner(or))}localsInner(or){if(this==empty)return none;if(or.inlineContent||!this.local.some(InlineType.is))return this.local;let lr=[];for(let cr=0;cr<this.local.length;cr++)this.local[cr].type instanceof InlineType||lr.push(this.local[cr]);return lr}forEachSet(or){or(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty=DecorationSet.empty;class DecorationGroup{constructor(or){this.members=or}map(or,lr){const cr=this.members.map(ur=>ur.map(or,lr,noSpec));return DecorationGroup.from(cr)}forChild(or,lr){if(lr.isLeaf)return DecorationSet.empty;let cr=[];for(let ur=0;ur<this.members.length;ur++){let dr=this.members[ur].forChild(or,lr);dr!=empty&&(dr instanceof DecorationGroup?cr=cr.concat(dr.members):cr.push(dr))}return DecorationGroup.from(cr)}eq(or){if(!(or instanceof DecorationGroup)||or.members.length!=this.members.length)return!1;for(let lr=0;lr<this.members.length;lr++)if(!this.members[lr].eq(or.members[lr]))return!1;return!0}locals(or){let lr,cr=!0;for(let ur=0;ur<this.members.length;ur++){let dr=this.members[ur].localsInner(or);if(dr.length)if(!lr)lr=dr;else{cr&&(lr=lr.slice(),cr=!1);for(let hr=0;hr<dr.length;hr++)lr.push(dr[hr])}}return lr?removeOverlap(cr?lr:lr.sort(byPos)):none}static from(or){switch(or.length){case 0:return empty;case 1:return or[0];default:return new DecorationGroup(or.every(lr=>lr instanceof DecorationSet)?or:or.reduce((lr,cr)=>lr.concat(cr instanceof DecorationSet?cr:cr.members),[]))}}forEachSet(or){for(let lr=0;lr<this.members.length;lr++)this.members[lr].forEachSet(or)}}function mapChildren(ar,or,lr,cr,ur,dr,hr){let fr=ar.slice();for(let mr=0,gr=dr;mr<lr.maps.length;mr++){let yr=0;lr.maps[mr].forEach((vr,br,Sr,xr)=>{let Er=xr-Sr-(br-vr);for(let wr=0;wr<fr.length;wr+=3){let Ar=fr[wr+1];if(Ar<0||vr>Ar+gr-yr)continue;let Tr=fr[wr]+gr-yr;br>=Tr?fr[wr+1]=vr<=Tr?-2:-1:vr>=gr&&Er&&(fr[wr]+=Er,fr[wr+1]+=Er)}yr+=Er}),gr=lr.maps[mr].map(gr,-1)}let pr=!1;for(let mr=0;mr<fr.length;mr+=3)if(fr[mr+1]<0){if(fr[mr+1]==-2){pr=!0,fr[mr+1]=-1;continue}let gr=lr.map(ar[mr]+dr),yr=gr-ur;if(yr<0||yr>=cr.content.size){pr=!0;continue}let vr=lr.map(ar[mr+1]+dr,-1),br=vr-ur,{index:Sr,offset:xr}=cr.content.findIndex(yr),Er=cr.maybeChild(Sr);if(Er&&xr==yr&&xr+Er.nodeSize==br){let wr=fr[mr+2].mapInner(lr,Er,gr+1,ar[mr]+dr+1,hr);wr!=empty?(fr[mr]=yr,fr[mr+1]=br,fr[mr+2]=wr):(fr[mr+1]=-2,pr=!0)}else pr=!0}if(pr){let mr=mapAndGatherRemainingDecorations(fr,ar,or,lr,ur,dr,hr),gr=buildTree(mr,cr,0,hr);or=gr.local;for(let yr=0;yr<fr.length;yr+=3)fr[yr+1]<0&&(fr.splice(yr,3),yr-=3);for(let yr=0,vr=0;yr<gr.children.length;yr+=3){let br=gr.children[yr];for(;vr<fr.length&&fr[vr]<br;)vr+=3;fr.splice(vr,0,gr.children[yr],gr.children[yr+1],gr.children[yr+2])}}return new DecorationSet(or.sort(byPos),fr)}function moveSpans(ar,or){if(!or||!ar.length)return ar;let lr=[];for(let cr=0;cr<ar.length;cr++){let ur=ar[cr];lr.push(new Decoration(ur.from+or,ur.to+or,ur.type))}return lr}function mapAndGatherRemainingDecorations(ar,or,lr,cr,ur,dr,hr){function fr(pr,mr){for(let gr=0;gr<pr.local.length;gr++){let yr=pr.local[gr].map(cr,ur,mr);yr?lr.push(yr):hr.onRemove&&hr.onRemove(pr.local[gr].spec)}for(let gr=0;gr<pr.children.length;gr+=3)fr(pr.children[gr+2],pr.children[gr]+mr+1)}for(let pr=0;pr<ar.length;pr+=3)ar[pr+1]==-1&&fr(ar[pr+2],or[pr]+dr+1);return lr}function takeSpansForNode(ar,or,lr){if(or.isLeaf)return null;let cr=lr+or.nodeSize,ur=null;for(let dr=0,hr;dr<ar.length;dr++)(hr=ar[dr])&&hr.from>lr&&hr.to<cr&&((ur||(ur=[])).push(hr),ar[dr]=null);return ur}function withoutNulls(ar){let or=[];for(let lr=0;lr<ar.length;lr++)ar[lr]!=null&&or.push(ar[lr]);return or}function buildTree(ar,or,lr,cr){let ur=[],dr=!1;or.forEach((fr,pr)=>{let mr=takeSpansForNode(ar,fr,pr+lr);if(mr){dr=!0;let gr=buildTree(mr,fr,lr+pr+1,cr);gr!=empty&&ur.push(pr,pr+fr.nodeSize,gr)}});let hr=moveSpans(dr?withoutNulls(ar):ar,-lr).sort(byPos);for(let fr=0;fr<hr.length;fr++)hr[fr].type.valid(or,hr[fr])||(cr.onRemove&&cr.onRemove(hr[fr].spec),hr.splice(fr--,1));return hr.length||ur.length?new DecorationSet(hr,ur):empty}function byPos(ar,or){return ar.from-or.from||ar.to-or.to}function removeOverlap(ar){let or=ar;for(let lr=0;lr<or.length-1;lr++){let cr=or[lr];if(cr.from!=cr.to)for(let ur=lr+1;ur<or.length;ur++){let dr=or[ur];if(dr.from==cr.from){dr.to!=cr.to&&(or==ar&&(or=ar.slice()),or[ur]=dr.copy(dr.from,cr.to),insertAhead(or,ur+1,dr.copy(cr.to,dr.to)));continue}else{dr.from<cr.to&&(or==ar&&(or=ar.slice()),or[lr]=cr.copy(cr.from,dr.from),insertAhead(or,ur,cr.copy(dr.from,cr.to)));break}}}return or}function insertAhead(ar,or,lr){for(;or<ar.length&&byPos(lr,ar[or])>0;)or++;ar.splice(or,0,lr)}function viewDecorations(ar){let or=[];return ar.someProp("decorations",lr=>{let cr=lr(ar.state);cr&&cr!=empty&&or.push(cr)}),ar.cursorWrapper&&or.push(DecorationSet.create(ar.state.doc,[ar.cursorWrapper.deco])),DecorationGroup.from(or)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$1&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(or){this.anchorNode=or.anchorNode,this.anchorOffset=or.anchorOffset,this.focusNode=or.focusNode,this.focusOffset=or.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(or){return or.anchorNode==this.anchorNode&&or.anchorOffset==this.anchorOffset&&or.focusNode==this.focusNode&&or.focusOffset==this.focusOffset}}class DOMObserver{constructor(or,lr){this.view=or,this.handleDOMChange=lr,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(cr=>{for(let ur=0;ur<cr.length;ur++)this.queue.push(cr[ur]);ie$1&&ie_version<=11&&cr.some(ur=>ur.type=="childList"&&ur.removedNodes.length||ur.type=="characterData"&&ur.oldValue.length>ur.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=cr=>{this.queue.push({target:cr.target,type:"characterData",oldValue:cr.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let or=this.observer.takeRecords();if(or.length){for(let lr=0;lr<or.length;lr++)this.queue.push(or[lr]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$1&&ie_version<=11&&!this.view.state.selection.empty){let or=this.view.domSelectionRange();if(or.focusNode&&isEquivalentPosition(or.focusNode,or.focusOffset,or.anchorNode,or.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(or){if(!or.focusNode)return!0;let lr=new Set,cr;for(let dr=or.focusNode;dr;dr=parentNode(dr))lr.add(dr);for(let dr=or.anchorNode;dr;dr=parentNode(dr))if(lr.has(dr)){cr=dr;break}let ur=cr&&this.view.docView.nearestDesc(cr);if(ur&&ur.ignoreMutation({type:"selection",target:cr.nodeType==3?cr.parentNode:cr}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let or of this.observer.takeRecords())this.queue.push(or);return this.queue}flush(){let{view:or}=this;if(!or.docView||this.flushingSoon>-1)return;let lr=this.pendingRecords();lr.length&&(this.queue=[]);let cr=or.domSelectionRange(),ur=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(cr)&&hasFocusAndSelection(or)&&!this.ignoreSelectionChange(cr),dr=-1,hr=-1,fr=!1,pr=[];if(or.editable)for(let gr=0;gr<lr.length;gr++){let yr=this.registerMutation(lr[gr],pr);yr&&(dr=dr<0?yr.from:Math.min(yr.from,dr),hr=hr<0?yr.to:Math.max(yr.to,hr),yr.typeOver&&(fr=!0))}if(gecko&&pr.length){let gr=pr.filter(yr=>yr.nodeName=="BR");if(gr.length==2){let[yr,vr]=gr;yr.parentNode&&yr.parentNode.parentNode==vr.parentNode?vr.remove():yr.remove()}else{let{focusNode:yr}=this.currentSelection;for(let vr of gr){let br=vr.parentNode;br&&br.nodeName=="LI"&&(!yr||blockParent(or,yr)!=br)&&vr.remove()}}}let mr=null;dr<0&&ur&&or.input.lastFocus>Date.now()-200&&Math.max(or.input.lastTouch,or.input.lastClick.time)<Date.now()-300&&selectionCollapsed(cr)&&(mr=selectionFromDOM(or))&&mr.eq(Selection.near(or.state.doc.resolve(0),1))?(or.input.lastFocus=0,selectionToDOM(or),this.currentSelection.set(cr),or.scrollToSelection()):(dr>-1||ur)&&(dr>-1&&(or.docView.markDirty(dr,hr),checkCSS(or)),this.handleDOMChange(dr,hr,fr,pr),or.docView&&or.docView.dirty?or.updateState(or.state):this.currentSelection.eq(cr)||selectionToDOM(or),this.currentSelection.set(cr))}registerMutation(or,lr){if(lr.indexOf(or.target)>-1)return null;let cr=this.view.docView.nearestDesc(or.target);if(or.type=="attributes"&&(cr==this.view.docView||or.attributeName=="contenteditable"||or.attributeName=="style"&&!or.oldValue&&!or.target.getAttribute("style"))||!cr||cr.ignoreMutation(or))return null;if(or.type=="childList"){for(let gr=0;gr<or.addedNodes.length;gr++){let yr=or.addedNodes[gr];lr.push(yr),yr.nodeType==3&&(this.lastChangedTextNode=yr)}if(cr.contentDOM&&cr.contentDOM!=cr.dom&&!cr.contentDOM.contains(or.target))return{from:cr.posBefore,to:cr.posAfter};let ur=or.previousSibling,dr=or.nextSibling;if(ie$1&&ie_version<=11&&or.addedNodes.length)for(let gr=0;gr<or.addedNodes.length;gr++){let{previousSibling:yr,nextSibling:vr}=or.addedNodes[gr];(!yr||Array.prototype.indexOf.call(or.addedNodes,yr)<0)&&(ur=yr),(!vr||Array.prototype.indexOf.call(or.addedNodes,vr)<0)&&(dr=vr)}let hr=ur&&ur.parentNode==or.target?domIndex(ur)+1:0,fr=cr.localPosFromDOM(or.target,hr,-1),pr=dr&&dr.parentNode==or.target?domIndex(dr):or.target.childNodes.length,mr=cr.localPosFromDOM(or.target,pr,1);return{from:fr,to:mr}}else return or.type=="attributes"?{from:cr.posAtStart-cr.border,to:cr.posAtEnd+cr.border}:(this.lastChangedTextNode=or.target,{from:cr.posAtStart,to:cr.posAtEnd,typeOver:or.target.nodeValue==or.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(ar){if(!cssChecked.has(ar)&&(cssChecked.set(ar,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(ar.dom).whiteSpace)!==-1)){if(ar.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(ar,or){let lr=or.startContainer,cr=or.startOffset,ur=or.endContainer,dr=or.endOffset,hr=ar.domAtPos(ar.state.selection.anchor);return isEquivalentPosition(hr.node,hr.offset,ur,dr)&&([lr,cr,ur,dr]=[ur,dr,lr,cr]),{anchorNode:lr,anchorOffset:cr,focusNode:ur,focusOffset:dr}}function safariShadowSelectionRange(ar,or){if(or.getComposedRanges){let ur=or.getComposedRanges(ar.root)[0];if(ur)return rangeToSelectionRange(ar,ur)}let lr;function cr(ur){ur.preventDefault(),ur.stopImmediatePropagation(),lr=ur.getTargetRanges()[0]}return ar.dom.addEventListener("beforeinput",cr,!0),document.execCommand("indent"),ar.dom.removeEventListener("beforeinput",cr,!0),lr?rangeToSelectionRange(ar,lr):null}function blockParent(ar,or){for(let lr=or.parentNode;lr&&lr!=ar.dom;lr=lr.parentNode){let cr=ar.docView.nearestDesc(lr,!0);if(cr&&cr.node.isBlock)return lr}return null}function parseBetween(ar,or,lr){let{node:cr,fromOffset:ur,toOffset:dr,from:hr,to:fr}=ar.docView.parseRange(or,lr),pr=ar.domSelectionRange(),mr,gr=pr.anchorNode;if(gr&&ar.dom.contains(gr.nodeType==1?gr:gr.parentNode)&&(mr=[{node:gr,offset:pr.anchorOffset}],selectionCollapsed(pr)||mr.push({node:pr.focusNode,offset:pr.focusOffset})),chrome&&ar.input.lastKeyCode===8)for(let Er=dr;Er>ur;Er--){let wr=cr.childNodes[Er-1],Ar=wr.pmViewDesc;if(wr.nodeName=="BR"&&!Ar){dr=Er;break}if(!Ar||Ar.size)break}let yr=ar.state.doc,vr=ar.someProp("domParser")||DOMParser.fromSchema(ar.state.schema),br=yr.resolve(hr),Sr=null,xr=vr.parse(cr,{topNode:br.parent,topMatch:br.parent.contentMatchAt(br.index()),topOpen:!0,from:ur,to:dr,preserveWhitespace:br.parent.type.whitespace=="pre"?"full":!0,findPositions:mr,ruleFromNode,context:br});if(mr&&mr[0].pos!=null){let Er=mr[0].pos,wr=mr[1]&&mr[1].pos;wr==null&&(wr=Er),Sr={anchor:Er+hr,head:wr+hr}}return{doc:xr,sel:Sr,from:hr,to:fr}}function ruleFromNode(ar){let or=ar.pmViewDesc;if(or)return or.parseRule();if(ar.nodeName=="BR"&&ar.parentNode){if(safari&&/^(ul|ol)$/i.test(ar.parentNode.nodeName)){let lr=document.createElement("div");return lr.appendChild(document.createElement("li")),{skip:lr}}else if(ar.parentNode.lastChild==ar||safari&&/^(tr|table)$/i.test(ar.parentNode.nodeName))return{ignore:!0}}else if(ar.nodeName=="IMG"&&ar.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(ar,or,lr,cr,ur){let dr=ar.input.compositionPendingChanges||(ar.composing?ar.input.compositionID:0);if(ar.input.compositionPendingChanges=0,or<0){let _r=ar.input.lastSelectionTime>Date.now()-50?ar.input.lastSelectionOrigin:null,Dr=selectionFromDOM(ar,_r);if(Dr&&!ar.state.selection.eq(Dr)){if(chrome&&android&&ar.input.lastKeyCode===13&&Date.now()-100<ar.input.lastKeyCodeTime&&ar.someProp("handleKeyDown",Ir=>Ir(ar,keyEvent(13,"Enter"))))return;let Pr=ar.state.tr.setSelection(Dr);_r=="pointer"?Pr.setMeta("pointer",!0):_r=="key"&&Pr.scrollIntoView(),dr&&Pr.setMeta("composition",dr),ar.dispatch(Pr)}return}let hr=ar.state.doc.resolve(or),fr=hr.sharedDepth(lr);or=hr.before(fr+1),lr=ar.state.doc.resolve(lr).after(fr+1);let pr=ar.state.selection,mr=parseBetween(ar,or,lr),gr=ar.state.doc,yr=gr.slice(mr.from,mr.to),vr,br;ar.input.lastKeyCode===8&&Date.now()-100<ar.input.lastKeyCodeTime?(vr=ar.state.selection.to,br="end"):(vr=ar.state.selection.from,br="start"),ar.input.lastKeyCode=null;let Sr=findDiff(yr.content,mr.doc.content,mr.from,vr,br);if(Sr&&ar.input.domChangeCount++,(ios&&ar.input.lastIOSEnter>Date.now()-225||android)&&ur.some(_r=>_r.nodeType==1&&!isInline.test(_r.nodeName))&&(!Sr||Sr.endA>=Sr.endB)&&ar.someProp("handleKeyDown",_r=>_r(ar,keyEvent(13,"Enter")))){ar.input.lastIOSEnter=0;return}if(!Sr)if(cr&&pr instanceof TextSelection&&!pr.empty&&pr.$head.sameParent(pr.$anchor)&&!ar.composing&&!(mr.sel&&mr.sel.anchor!=mr.sel.head))Sr={start:pr.from,endA:pr.to,endB:pr.to};else{if(mr.sel){let _r=resolveSelection(ar,ar.state.doc,mr.sel);if(_r&&!_r.eq(ar.state.selection)){let Dr=ar.state.tr.setSelection(_r);dr&&Dr.setMeta("composition",dr),ar.dispatch(Dr)}}return}ar.state.selection.from<ar.state.selection.to&&Sr.start==Sr.endB&&ar.state.selection instanceof TextSelection&&(Sr.start>ar.state.selection.from&&Sr.start<=ar.state.selection.from+2&&ar.state.selection.from>=mr.from?Sr.start=ar.state.selection.from:Sr.endA<ar.state.selection.to&&Sr.endA>=ar.state.selection.to-2&&ar.state.selection.to<=mr.to&&(Sr.endB+=ar.state.selection.to-Sr.endA,Sr.endA=ar.state.selection.to)),ie$1&&ie_version<=11&&Sr.endB==Sr.start+1&&Sr.endA==Sr.start&&Sr.start>mr.from&&mr.doc.textBetween(Sr.start-mr.from-1,Sr.start-mr.from+1)=="  "&&(Sr.start--,Sr.endA--,Sr.endB--);let xr=mr.doc.resolveNoCache(Sr.start-mr.from),Er=mr.doc.resolveNoCache(Sr.endB-mr.from),wr=gr.resolve(Sr.start),Ar=xr.sameParent(Er)&&xr.parent.inlineContent&&wr.end()>=Sr.endA,Tr;if((ios&&ar.input.lastIOSEnter>Date.now()-225&&(!Ar||ur.some(_r=>_r.nodeName=="DIV"||_r.nodeName=="P"))||!Ar&&xr.pos<mr.doc.content.size&&(!xr.sameParent(Er)||!xr.parent.inlineContent)&&!/\S/.test(mr.doc.textBetween(xr.pos,Er.pos,"",""))&&(Tr=Selection.findFrom(mr.doc.resolve(xr.pos+1),1,!0))&&Tr.head>xr.pos)&&ar.someProp("handleKeyDown",_r=>_r(ar,keyEvent(13,"Enter")))){ar.input.lastIOSEnter=0;return}if(ar.state.selection.anchor>Sr.start&&looksLikeBackspace(gr,Sr.start,Sr.endA,xr,Er)&&ar.someProp("handleKeyDown",_r=>_r(ar,keyEvent(8,"Backspace")))){android&&chrome&&ar.domObserver.suppressSelectionUpdates();return}chrome&&Sr.endB==Sr.start&&(ar.input.lastChromeDelete=Date.now()),android&&!Ar&&xr.start()!=Er.start()&&Er.parentOffset==0&&xr.depth==Er.depth&&mr.sel&&mr.sel.anchor==mr.sel.head&&mr.sel.head==Sr.endA&&(Sr.endB-=2,Er=mr.doc.resolveNoCache(Sr.endB-mr.from),setTimeout(()=>{ar.someProp("handleKeyDown",function(_r){return _r(ar,keyEvent(13,"Enter"))})},20));let Cr=Sr.start,kr=Sr.endA,Mr,Rr,Nr;if(Ar){if(xr.pos==Er.pos)ie$1&&ie_version<=11&&xr.parentOffset==0&&(ar.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(ar),20)),Mr=ar.state.tr.delete(Cr,kr),Rr=gr.resolve(Sr.start).marksAcross(gr.resolve(Sr.endA));else if(Sr.endA==Sr.endB&&(Nr=isMarkChange(xr.parent.content.cut(xr.parentOffset,Er.parentOffset),wr.parent.content.cut(wr.parentOffset,Sr.endA-wr.start()))))Mr=ar.state.tr,Nr.type=="add"?Mr.addMark(Cr,kr,Nr.mark):Mr.removeMark(Cr,kr,Nr.mark);else if(xr.parent.child(xr.index()).isText&&xr.index()==Er.index()-(Er.textOffset?0:1)){let _r=xr.parent.textBetween(xr.parentOffset,Er.parentOffset);if(ar.someProp("handleTextInput",Dr=>Dr(ar,Cr,kr,_r)))return;Mr=ar.state.tr.insertText(_r,Cr,kr)}}if(Mr||(Mr=ar.state.tr.replace(Cr,kr,mr.doc.slice(Sr.start-mr.from,Sr.endB-mr.from))),mr.sel){let _r=resolveSelection(ar,Mr.doc,mr.sel);_r&&!(chrome&&ar.composing&&_r.empty&&(Sr.start!=Sr.endB||ar.input.lastChromeDelete<Date.now()-100)&&(_r.head==Cr||_r.head==Mr.mapping.map(kr)-1)||ie$1&&_r.empty&&_r.head==Cr)&&Mr.setSelection(_r)}Rr&&Mr.ensureMarks(Rr),dr&&Mr.setMeta("composition",dr),ar.dispatch(Mr.scrollIntoView())}function resolveSelection(ar,or,lr){return Math.max(lr.anchor,lr.head)>or.content.size?null:selectionBetween(ar,or.resolve(lr.anchor),or.resolve(lr.head))}function isMarkChange(ar,or){let lr=ar.firstChild.marks,cr=or.firstChild.marks,ur=lr,dr=cr,hr,fr,pr;for(let gr=0;gr<cr.length;gr++)ur=cr[gr].removeFromSet(ur);for(let gr=0;gr<lr.length;gr++)dr=lr[gr].removeFromSet(dr);if(ur.length==1&&dr.length==0)fr=ur[0],hr="add",pr=gr=>gr.mark(fr.addToSet(gr.marks));else if(ur.length==0&&dr.length==1)fr=dr[0],hr="remove",pr=gr=>gr.mark(fr.removeFromSet(gr.marks));else return null;let mr=[];for(let gr=0;gr<or.childCount;gr++)mr.push(pr(or.child(gr)));if(Fragment.from(mr).eq(ar))return{mark:fr,type:hr}}function looksLikeBackspace(ar,or,lr,cr,ur){if(lr-or<=ur.pos-cr.pos||skipClosingAndOpening(cr,!0,!1)<ur.pos)return!1;let dr=ar.resolve(or);if(!cr.parent.isTextblock){let fr=dr.nodeAfter;return fr!=null&&lr==or+fr.nodeSize}if(dr.parentOffset<dr.parent.content.size||!dr.parent.isTextblock)return!1;let hr=ar.resolve(skipClosingAndOpening(dr,!0,!0));return!hr.parent.isTextblock||hr.pos>lr||skipClosingAndOpening(hr,!0,!1)<lr?!1:cr.parent.content.cut(cr.parentOffset).eq(hr.parent.content)}function skipClosingAndOpening(ar,or,lr){let cr=ar.depth,ur=or?ar.end():ar.pos;for(;cr>0&&(or||ar.indexAfter(cr)==ar.node(cr).childCount);)cr--,ur++,or=!1;if(lr){let dr=ar.node(cr).maybeChild(ar.indexAfter(cr));for(;dr&&!dr.isLeaf;)dr=dr.firstChild,ur++}return ur}function findDiff(ar,or,lr,cr,ur){let dr=ar.findDiffStart(or,lr);if(dr==null)return null;let{a:hr,b:fr}=ar.findDiffEnd(or,lr+ar.size,lr+or.size);if(ur=="end"){let pr=Math.max(0,dr-Math.min(hr,fr));cr-=hr+pr-dr}if(hr<dr&&ar.size<or.size){let pr=cr<=dr&&cr>=hr?dr-cr:0;dr-=pr,dr&&dr<or.size&&isSurrogatePair(or.textBetween(dr-1,dr+1))&&(dr+=pr?1:-1),fr=dr+(fr-hr),hr=dr}else if(fr<dr){let pr=cr<=dr&&cr>=fr?dr-cr:0;dr-=pr,dr&&dr<ar.size&&isSurrogatePair(ar.textBetween(dr-1,dr+1))&&(dr+=pr?1:-1),hr=dr+(hr-fr),fr=dr}return{start:dr,endA:hr,endB:fr}}function isSurrogatePair(ar){if(ar.length!=2)return!1;let or=ar.charCodeAt(0),lr=ar.charCodeAt(1);return or>=56320&&or<=57343&&lr>=55296&&lr<=56319}class EditorView{constructor(or,lr){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=lr,this.state=lr.state,this.directPlugins=lr.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=or&&or.mount||document.createElement("div"),or&&(or.appendChild?or.appendChild(this.dom):typeof or=="function"?or(this.dom):or.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(cr,ur,dr,hr)=>readDOMChange(this,cr,ur,dr,hr)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let or=this._props;this._props={};for(let lr in or)this._props[lr]=or[lr];this._props.state=this.state}return this._props}update(or){or.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let lr=this._props;this._props=or,or.plugins&&(or.plugins.forEach(checkStateComponent),this.directPlugins=or.plugins),this.updateStateInner(or.state,lr)}setProps(or){let lr={};for(let cr in this._props)lr[cr]=this._props[cr];lr.state=this.state;for(let cr in or)lr[cr]=or[cr];this.update(lr)}updateState(or){this.updateStateInner(or,this._props)}updateStateInner(or,lr){var cr;let ur=this.state,dr=!1,hr=!1;or.storedMarks&&this.composing&&(clearComposition(this),hr=!0),this.state=or;let fr=ur.plugins!=or.plugins||this._props.plugins!=lr.plugins;if(fr||this._props.plugins!=lr.plugins||this._props.nodeViews!=lr.nodeViews){let br=buildNodeViews(this);changedNodeViews(br,this.nodeViews)&&(this.nodeViews=br,dr=!0)}(fr||lr.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let pr=viewDecorations(this),mr=computeDocDeco(this),gr=ur.plugins!=or.plugins&&!ur.doc.eq(or.doc)?"reset":or.scrollToSelection>ur.scrollToSelection?"to selection":"preserve",yr=dr||!this.docView.matchesNode(or.doc,mr,pr);(yr||!or.selection.eq(ur.selection))&&(hr=!0);let vr=gr=="preserve"&&hr&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(hr){this.domObserver.stop();let br=yr&&(ie$1||chrome)&&!this.composing&&!ur.selection.empty&&!or.selection.empty&&selectionContextChanged(ur.selection,or.selection);if(yr){let Sr=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(dr||!this.docView.update(or.doc,mr,pr,this))&&(this.docView.updateOuterDeco(mr),this.docView.destroy(),this.docView=docViewDesc(or.doc,mr,pr,this.dom,this)),Sr&&!this.trackWrites&&(br=!0)}br||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,br):(syncNodeSelection(this,or.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(ur),!((cr=this.dragging)===null||cr===void 0)&&cr.node&&!ur.doc.eq(or.doc)&&this.updateDraggedNode(this.dragging,ur),gr=="reset"?this.dom.scrollTop=0:gr=="to selection"?this.scrollToSelection():vr&&resetScrollPos(vr)}scrollToSelection(){let or=this.domSelectionRange().focusNode;if(!(!or||!this.dom.contains(or.nodeType==1?or:or.parentNode))){if(!this.someProp("handleScrollToSelection",lr=>lr(this)))if(this.state.selection instanceof NodeSelection){let lr=this.docView.domAfterPos(this.state.selection.from);lr.nodeType==1&&scrollRectIntoView(this,lr.getBoundingClientRect(),or)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),or)}}destroyPluginViews(){let or;for(;or=this.pluginViews.pop();)or.destroy&&or.destroy()}updatePluginViews(or){if(!or||or.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let lr=0;lr<this.directPlugins.length;lr++){let cr=this.directPlugins[lr];cr.spec.view&&this.pluginViews.push(cr.spec.view(this))}for(let lr=0;lr<this.state.plugins.length;lr++){let cr=this.state.plugins[lr];cr.spec.view&&this.pluginViews.push(cr.spec.view(this))}}else for(let lr=0;lr<this.pluginViews.length;lr++){let cr=this.pluginViews[lr];cr.update&&cr.update(this,or)}}updateDraggedNode(or,lr){let cr=or.node,ur=-1;if(this.state.doc.nodeAt(cr.from)==cr.node)ur=cr.from;else{let dr=cr.from+(this.state.doc.content.size-lr.doc.content.size);(dr>0&&this.state.doc.nodeAt(dr))==cr.node&&(ur=dr)}this.dragging=new Dragging(or.slice,or.move,ur<0?void 0:NodeSelection.create(this.state.doc,ur))}someProp(or,lr){let cr=this._props&&this._props[or],ur;if(cr!=null&&(ur=lr?lr(cr):cr))return ur;for(let hr=0;hr<this.directPlugins.length;hr++){let fr=this.directPlugins[hr].props[or];if(fr!=null&&(ur=lr?lr(fr):fr))return ur}let dr=this.state.plugins;if(dr)for(let hr=0;hr<dr.length;hr++){let fr=dr[hr].props[or];if(fr!=null&&(ur=lr?lr(fr):fr))return ur}}hasFocus(){if(ie$1){let or=this.root.activeElement;if(or==this.dom)return!0;if(!or||!this.dom.contains(or))return!1;for(;or&&this.dom!=or&&this.dom.contains(or);){if(or.contentEditable=="false")return!1;or=or.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let or=this._root;if(or==null){for(let lr=this.dom.parentNode;lr;lr=lr.parentNode)if(lr.nodeType==9||lr.nodeType==11&&lr.host)return lr.getSelection||(Object.getPrototypeOf(lr).getSelection=()=>lr.ownerDocument.getSelection()),this._root=lr}return or||document}updateRoot(){this._root=null}posAtCoords(or){return posAtCoords(this,or)}coordsAtPos(or,lr=1){return coordsAtPos(this,or,lr)}domAtPos(or,lr=0){return this.docView.domFromPos(or,lr)}nodeDOM(or){let lr=this.docView.descAt(or);return lr?lr.nodeDOM:null}posAtDOM(or,lr,cr=-1){let ur=this.docView.posFromDOM(or,lr,cr);if(ur==null)throw new RangeError("DOM position not inside the editor");return ur}endOfTextblock(or,lr){return endOfTextblock(this,lr||this.state,or)}pasteHTML(or,lr){return doPaste(this,"",or,!1,lr||new ClipboardEvent("paste"))}pasteText(or,lr){return doPaste(this,or,null,!0,lr||new ClipboardEvent("paste"))}serializeForClipboard(or){return serializeForClipboard(this,or)}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(or){return dispatchEvent$2(this,or)}dispatch(or){let lr=this._props.dispatchTransaction;lr?lr.call(this,or):this.updateState(this.state.apply(or))}domSelectionRange(){let or=this.domSelection();return or?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,or)||or:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function computeDocDeco(ar){let or=Object.create(null);return or.class="ProseMirror",or.contenteditable=String(ar.editable),ar.someProp("attributes",lr=>{if(typeof lr=="function"&&(lr=lr(ar.state)),lr)for(let cr in lr)cr=="class"?or.class+=" "+lr[cr]:cr=="style"?or.style=(or.style?or.style+";":"")+lr[cr]:!or[cr]&&cr!="contenteditable"&&cr!="nodeName"&&(or[cr]=String(lr[cr]))}),or.translate||(or.translate="no"),[Decoration.node(0,ar.state.doc.content.size,or)]}function updateCursorWrapper(ar){if(ar.markCursor){let or=document.createElement("img");or.className="ProseMirror-separator",or.setAttribute("mark-placeholder","true"),or.setAttribute("alt",""),ar.cursorWrapper={dom:or,deco:Decoration.widget(ar.state.selection.from,or,{raw:!0,marks:ar.markCursor})}}else ar.cursorWrapper=null}function getEditable(ar){return!ar.someProp("editable",or=>or(ar.state)===!1)}function selectionContextChanged(ar,or){let lr=Math.min(ar.$anchor.sharedDepth(ar.head),or.$anchor.sharedDepth(or.head));return ar.$anchor.start(lr)!=or.$anchor.start(lr)}function buildNodeViews(ar){let or=Object.create(null);function lr(cr){for(let ur in cr)Object.prototype.hasOwnProperty.call(or,ur)||(or[ur]=cr[ur])}return ar.someProp("nodeViews",lr),ar.someProp("markViews",lr),or}function changedNodeViews(ar,or){let lr=0,cr=0;for(let ur in ar){if(ar[ur]!=or[ur])return!0;lr++}for(let ur in or)cr++;return lr!=cr}function checkStateComponent(ar){if(ar.spec.state||ar.spec.filterTransaction||ar.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i=0;i<10;i++)base[48+i]=base[96+i]=String(i);for(var i=1;i<=24;i++)base[i+111]="F"+i;for(var i=65;i<=90;i++)base[i]=String.fromCharCode(i+32),shift[i]=String.fromCharCode(i);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(ar){var or=mac$1&&ar.metaKey&&ar.shiftKey&&!ar.ctrlKey&&!ar.altKey||ie&&ar.shiftKey&&ar.key&&ar.key.length==1||ar.key=="Unidentified",lr=!or&&ar.key||(ar.shiftKey?shift:base)[ar.keyCode]||ar.key||"Unidentified";return lr=="Esc"&&(lr="Escape"),lr=="Del"&&(lr="Delete"),lr=="Left"&&(lr="ArrowLeft"),lr=="Up"&&(lr="ArrowUp"),lr=="Right"&&(lr="ArrowRight"),lr=="Down"&&(lr="ArrowDown"),lr}const mac=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),windows=typeof navigator<"u"&&/Win/.test(navigator.platform);function normalizeKeyName$1(ar){let or=ar.split(/-(?!$)/),lr=or[or.length-1];lr=="Space"&&(lr=" ");let cr,ur,dr,hr;for(let fr=0;fr<or.length-1;fr++){let pr=or[fr];if(/^(cmd|meta|m)$/i.test(pr))hr=!0;else if(/^a(lt)?$/i.test(pr))cr=!0;else if(/^(c|ctrl|control)$/i.test(pr))ur=!0;else if(/^s(hift)?$/i.test(pr))dr=!0;else if(/^mod$/i.test(pr))mac?hr=!0:ur=!0;else throw new Error("Unrecognized modifier name: "+pr)}return cr&&(lr="Alt-"+lr),ur&&(lr="Ctrl-"+lr),hr&&(lr="Meta-"+lr),dr&&(lr="Shift-"+lr),lr}function normalize(ar){let or=Object.create(null);for(let lr in ar)or[normalizeKeyName$1(lr)]=ar[lr];return or}function modifiers(ar,or,lr=!0){return or.altKey&&(ar="Alt-"+ar),or.ctrlKey&&(ar="Ctrl-"+ar),or.metaKey&&(ar="Meta-"+ar),lr&&or.shiftKey&&(ar="Shift-"+ar),ar}function keymap(ar){return new Plugin({props:{handleKeyDown:keydownHandler(ar)}})}function keydownHandler(ar){let or=normalize(ar);return function(lr,cr){let ur=keyName(cr),dr,hr=or[modifiers(ur,cr)];if(hr&&hr(lr.state,lr.dispatch,lr))return!0;if(ur.length==1&&ur!=" "){if(cr.shiftKey){let fr=or[modifiers(ur,cr,!1)];if(fr&&fr(lr.state,lr.dispatch,lr))return!0}if((cr.altKey||cr.metaKey||cr.ctrlKey)&&!(windows&&cr.ctrlKey&&cr.altKey)&&(dr=base[cr.keyCode])&&dr!=ur){let fr=or[modifiers(dr,cr)];if(fr&&fr(lr.state,lr.dispatch,lr))return!0}}return!1}}const deleteSelection$1=(ar,or)=>ar.selection.empty?!1:(or&&or(ar.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(ar,or){let{$cursor:lr}=ar.selection;return!lr||(or?!or.endOfTextblock("backward",ar):lr.parentOffset>0)?null:lr}const joinBackward$1=(ar,or,lr)=>{let cr=atBlockStart(ar,lr);if(!cr)return!1;let ur=findCutBefore(cr);if(!ur){let hr=cr.blockRange(),fr=hr&&liftTarget(hr);return fr==null?!1:(or&&or(ar.tr.lift(hr,fr).scrollIntoView()),!0)}let dr=ur.nodeBefore;if(deleteBarrier(ar,ur,or,-1))return!0;if(cr.parent.content.size==0&&(textblockAt(dr,"end")||NodeSelection.isSelectable(dr)))for(let hr=cr.depth;;hr--){let fr=replaceStep(ar.doc,cr.before(hr),cr.after(hr),Slice.empty);if(fr&&fr.slice.size<fr.to-fr.from){if(or){let pr=ar.tr.step(fr);pr.setSelection(textblockAt(dr,"end")?Selection.findFrom(pr.doc.resolve(pr.mapping.map(ur.pos,-1)),-1):NodeSelection.create(pr.doc,ur.pos-dr.nodeSize)),or(pr.scrollIntoView())}return!0}if(hr==1||cr.node(hr-1).childCount>1)break}return dr.isAtom&&ur.depth==cr.depth-1?(or&&or(ar.tr.delete(ur.pos-dr.nodeSize,ur.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(ar,or,lr)=>{let cr=atBlockStart(ar,lr);if(!cr)return!1;let ur=findCutBefore(cr);return ur?joinTextblocksAround(ar,ur,or):!1},joinTextblockForward$1=(ar,or,lr)=>{let cr=atBlockEnd(ar,lr);if(!cr)return!1;let ur=findCutAfter(cr);return ur?joinTextblocksAround(ar,ur,or):!1};function joinTextblocksAround(ar,or,lr){let cr=or.nodeBefore,ur=cr,dr=or.pos-1;for(;!ur.isTextblock;dr--){if(ur.type.spec.isolating)return!1;let gr=ur.lastChild;if(!gr)return!1;ur=gr}let hr=or.nodeAfter,fr=hr,pr=or.pos+1;for(;!fr.isTextblock;pr++){if(fr.type.spec.isolating)return!1;let gr=fr.firstChild;if(!gr)return!1;fr=gr}let mr=replaceStep(ar.doc,dr,pr,Slice.empty);if(!mr||mr.from!=dr||mr instanceof ReplaceStep&&mr.slice.size>=pr-dr)return!1;if(lr){let gr=ar.tr.step(mr);gr.setSelection(TextSelection.create(gr.doc,dr)),lr(gr.scrollIntoView())}return!0}function textblockAt(ar,or,lr=!1){for(let cr=ar;cr;cr=or=="start"?cr.firstChild:cr.lastChild){if(cr.isTextblock)return!0;if(lr&&cr.childCount!=1)return!1}return!1}const selectNodeBackward$1=(ar,or,lr)=>{let{$head:cr,empty:ur}=ar.selection,dr=cr;if(!ur)return!1;if(cr.parent.isTextblock){if(lr?!lr.endOfTextblock("backward",ar):cr.parentOffset>0)return!1;dr=findCutBefore(cr)}let hr=dr&&dr.nodeBefore;return!hr||!NodeSelection.isSelectable(hr)?!1:(or&&or(ar.tr.setSelection(NodeSelection.create(ar.doc,dr.pos-hr.nodeSize)).scrollIntoView()),!0)};function findCutBefore(ar){if(!ar.parent.type.spec.isolating)for(let or=ar.depth-1;or>=0;or--){if(ar.index(or)>0)return ar.doc.resolve(ar.before(or+1));if(ar.node(or).type.spec.isolating)break}return null}function atBlockEnd(ar,or){let{$cursor:lr}=ar.selection;return!lr||(or?!or.endOfTextblock("forward",ar):lr.parentOffset<lr.parent.content.size)?null:lr}const joinForward$1=(ar,or,lr)=>{let cr=atBlockEnd(ar,lr);if(!cr)return!1;let ur=findCutAfter(cr);if(!ur)return!1;let dr=ur.nodeAfter;if(deleteBarrier(ar,ur,or,1))return!0;if(cr.parent.content.size==0&&(textblockAt(dr,"start")||NodeSelection.isSelectable(dr))){let hr=replaceStep(ar.doc,cr.before(),cr.after(),Slice.empty);if(hr&&hr.slice.size<hr.to-hr.from){if(or){let fr=ar.tr.step(hr);fr.setSelection(textblockAt(dr,"start")?Selection.findFrom(fr.doc.resolve(fr.mapping.map(ur.pos)),1):NodeSelection.create(fr.doc,fr.mapping.map(ur.pos))),or(fr.scrollIntoView())}return!0}}return dr.isAtom&&ur.depth==cr.depth-1?(or&&or(ar.tr.delete(ur.pos,ur.pos+dr.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(ar,or,lr)=>{let{$head:cr,empty:ur}=ar.selection,dr=cr;if(!ur)return!1;if(cr.parent.isTextblock){if(lr?!lr.endOfTextblock("forward",ar):cr.parentOffset<cr.parent.content.size)return!1;dr=findCutAfter(cr)}let hr=dr&&dr.nodeAfter;return!hr||!NodeSelection.isSelectable(hr)?!1:(or&&or(ar.tr.setSelection(NodeSelection.create(ar.doc,dr.pos)).scrollIntoView()),!0)};function findCutAfter(ar){if(!ar.parent.type.spec.isolating)for(let or=ar.depth-1;or>=0;or--){let lr=ar.node(or);if(ar.index(or)+1<lr.childCount)return ar.doc.resolve(ar.after(or+1));if(lr.type.spec.isolating)break}return null}const joinUp$1=(ar,or)=>{let lr=ar.selection,cr=lr instanceof NodeSelection,ur;if(cr){if(lr.node.isTextblock||!canJoin(ar.doc,lr.from))return!1;ur=lr.from}else if(ur=joinPoint(ar.doc,lr.from,-1),ur==null)return!1;if(or){let dr=ar.tr.join(ur);cr&&dr.setSelection(NodeSelection.create(dr.doc,ur-ar.doc.resolve(ur).nodeBefore.nodeSize)),or(dr.scrollIntoView())}return!0},joinDown$1=(ar,or)=>{let lr=ar.selection,cr;if(lr instanceof NodeSelection){if(lr.node.isTextblock||!canJoin(ar.doc,lr.to))return!1;cr=lr.to}else if(cr=joinPoint(ar.doc,lr.to,1),cr==null)return!1;return or&&or(ar.tr.join(cr).scrollIntoView()),!0},lift$1=(ar,or)=>{let{$from:lr,$to:cr}=ar.selection,ur=lr.blockRange(cr),dr=ur&&liftTarget(ur);return dr==null?!1:(or&&or(ar.tr.lift(ur,dr).scrollIntoView()),!0)},newlineInCode$1=(ar,or)=>{let{$head:lr,$anchor:cr}=ar.selection;return!lr.parent.type.spec.code||!lr.sameParent(cr)?!1:(or&&or(ar.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(ar){for(let or=0;or<ar.edgeCount;or++){let{type:lr}=ar.edge(or);if(lr.isTextblock&&!lr.hasRequiredAttrs())return lr}return null}const exitCode$1=(ar,or)=>{let{$head:lr,$anchor:cr}=ar.selection;if(!lr.parent.type.spec.code||!lr.sameParent(cr))return!1;let ur=lr.node(-1),dr=lr.indexAfter(-1),hr=defaultBlockAt$1(ur.contentMatchAt(dr));if(!hr||!ur.canReplaceWith(dr,dr,hr))return!1;if(or){let fr=lr.after(),pr=ar.tr.replaceWith(fr,fr,hr.createAndFill());pr.setSelection(Selection.near(pr.doc.resolve(fr),1)),or(pr.scrollIntoView())}return!0},createParagraphNear$1=(ar,or)=>{let lr=ar.selection,{$from:cr,$to:ur}=lr;if(lr instanceof AllSelection||cr.parent.inlineContent||ur.parent.inlineContent)return!1;let dr=defaultBlockAt$1(ur.parent.contentMatchAt(ur.indexAfter()));if(!dr||!dr.isTextblock)return!1;if(or){let hr=(!cr.parentOffset&&ur.index()<ur.parent.childCount?cr:ur).pos,fr=ar.tr.insert(hr,dr.createAndFill());fr.setSelection(TextSelection.create(fr.doc,hr+1)),or(fr.scrollIntoView())}return!0},liftEmptyBlock$1=(ar,or)=>{let{$cursor:lr}=ar.selection;if(!lr||lr.parent.content.size)return!1;if(lr.depth>1&&lr.after()!=lr.end(-1)){let dr=lr.before();if(canSplit(ar.doc,dr))return or&&or(ar.tr.split(dr).scrollIntoView()),!0}let cr=lr.blockRange(),ur=cr&&liftTarget(cr);return ur==null?!1:(or&&or(ar.tr.lift(cr,ur).scrollIntoView()),!0)};function splitBlockAs(ar){return(or,lr)=>{let{$from:cr,$to:ur}=or.selection;if(or.selection instanceof NodeSelection&&or.selection.node.isBlock)return!cr.parentOffset||!canSplit(or.doc,cr.pos)?!1:(lr&&lr(or.tr.split(cr.pos).scrollIntoView()),!0);if(!cr.depth)return!1;let dr=[],hr,fr,pr=!1,mr=!1;for(let br=cr.depth;;br--)if(cr.node(br).isBlock){pr=cr.end(br)==cr.pos+(cr.depth-br),mr=cr.start(br)==cr.pos-(cr.depth-br),fr=defaultBlockAt$1(cr.node(br-1).contentMatchAt(cr.indexAfter(br-1))),dr.unshift(pr&&fr?{type:fr}:null),hr=br;break}else{if(br==1)return!1;dr.unshift(null)}let gr=or.tr;(or.selection instanceof TextSelection||or.selection instanceof AllSelection)&&gr.deleteSelection();let yr=gr.mapping.map(cr.pos),vr=canSplit(gr.doc,yr,dr.length,dr);if(vr||(dr[0]=fr?{type:fr}:null,vr=canSplit(gr.doc,yr,dr.length,dr)),!vr)return!1;if(gr.split(yr,dr.length,dr),!pr&&mr&&cr.node(hr).type!=fr){let br=gr.mapping.map(cr.before(hr)),Sr=gr.doc.resolve(br);fr&&cr.node(hr-1).canReplaceWith(Sr.index(),Sr.index()+1,fr)&&gr.setNodeMarkup(gr.mapping.map(cr.before(hr)),fr)}return lr&&lr(gr.scrollIntoView()),!0}}const splitBlock$1=splitBlockAs(),selectParentNode$1=(ar,or)=>{let{$from:lr,to:cr}=ar.selection,ur,dr=lr.sharedDepth(cr);return dr==0?!1:(ur=lr.before(dr),or&&or(ar.tr.setSelection(NodeSelection.create(ar.doc,ur))),!0)};function joinMaybeClear(ar,or,lr){let cr=or.nodeBefore,ur=or.nodeAfter,dr=or.index();return!cr||!ur||!cr.type.compatibleContent(ur.type)?!1:!cr.content.size&&or.parent.canReplace(dr-1,dr)?(lr&&lr(ar.tr.delete(or.pos-cr.nodeSize,or.pos).scrollIntoView()),!0):!or.parent.canReplace(dr,dr+1)||!(ur.isTextblock||canJoin(ar.doc,or.pos))?!1:(lr&&lr(ar.tr.join(or.pos).scrollIntoView()),!0)}function deleteBarrier(ar,or,lr,cr){let ur=or.nodeBefore,dr=or.nodeAfter,hr,fr,pr=ur.type.spec.isolating||dr.type.spec.isolating;if(!pr&&joinMaybeClear(ar,or,lr))return!0;let mr=!pr&&or.parent.canReplace(or.index(),or.index()+1);if(mr&&(hr=(fr=ur.contentMatchAt(ur.childCount)).findWrapping(dr.type))&&fr.matchType(hr[0]||dr.type).validEnd){if(lr){let br=or.pos+dr.nodeSize,Sr=Fragment.empty;for(let wr=hr.length-1;wr>=0;wr--)Sr=Fragment.from(hr[wr].create(null,Sr));Sr=Fragment.from(ur.copy(Sr));let xr=ar.tr.step(new ReplaceAroundStep(or.pos-1,br,or.pos,br,new Slice(Sr,1,0),hr.length,!0)),Er=xr.doc.resolve(br+2*hr.length);Er.nodeAfter&&Er.nodeAfter.type==ur.type&&canJoin(xr.doc,Er.pos)&&xr.join(Er.pos),lr(xr.scrollIntoView())}return!0}let gr=dr.type.spec.isolating||cr>0&&pr?null:Selection.findFrom(or,1),yr=gr&&gr.$from.blockRange(gr.$to),vr=yr&&liftTarget(yr);if(vr!=null&&vr>=or.depth)return lr&&lr(ar.tr.lift(yr,vr).scrollIntoView()),!0;if(mr&&textblockAt(dr,"start",!0)&&textblockAt(ur,"end")){let br=ur,Sr=[];for(;Sr.push(br),!br.isTextblock;)br=br.lastChild;let xr=dr,Er=1;for(;!xr.isTextblock;xr=xr.firstChild)Er++;if(br.canReplace(br.childCount,br.childCount,xr.content)){if(lr){let wr=Fragment.empty;for(let Tr=Sr.length-1;Tr>=0;Tr--)wr=Fragment.from(Sr[Tr].copy(wr));let Ar=ar.tr.step(new ReplaceAroundStep(or.pos-Sr.length,or.pos+dr.nodeSize,or.pos+Er,or.pos+dr.nodeSize-Er,new Slice(wr,Sr.length,0),0,!0));lr(Ar.scrollIntoView())}return!0}}return!1}function selectTextblockSide(ar){return function(or,lr){let cr=or.selection,ur=ar<0?cr.$from:cr.$to,dr=ur.depth;for(;ur.node(dr).isInline;){if(!dr)return!1;dr--}return ur.node(dr).isTextblock?(lr&&lr(or.tr.setSelection(TextSelection.create(or.doc,ar<0?ur.start(dr):ur.end(dr)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(ar,or=null){return function(lr,cr){let{$from:ur,$to:dr}=lr.selection,hr=ur.blockRange(dr),fr=hr&&findWrapping(hr,ar,or);return fr?(cr&&cr(lr.tr.wrap(hr,fr).scrollIntoView()),!0):!1}}function setBlockType(ar,or=null){return function(lr,cr){let ur=!1;for(let dr=0;dr<lr.selection.ranges.length&&!ur;dr++){let{$from:{pos:hr},$to:{pos:fr}}=lr.selection.ranges[dr];lr.doc.nodesBetween(hr,fr,(pr,mr)=>{if(ur)return!1;if(!(!pr.isTextblock||pr.hasMarkup(ar,or)))if(pr.type==ar)ur=!0;else{let gr=lr.doc.resolve(mr),yr=gr.index();ur=gr.parent.canReplaceWith(yr,yr+1,ar)}})}if(!ur)return!1;if(cr){let dr=lr.tr;for(let hr=0;hr<lr.selection.ranges.length;hr++){let{$from:{pos:fr},$to:{pos:pr}}=lr.selection.ranges[hr];dr.setBlockType(fr,pr,ar,or)}cr(dr.scrollIntoView())}return!0}}function chainCommands(...ar){return function(or,lr,cr){for(let ur=0;ur<ar.length;ur++)if(ar[ur](or,lr,cr))return!0;return!1}}chainCommands(deleteSelection$1,joinBackward$1,selectNodeBackward$1);chainCommands(deleteSelection$1,joinForward$1,selectNodeForward$1);chainCommands(newlineInCode$1,createParagraphNear$1,liftEmptyBlock$1,splitBlock$1);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(ar,or=null){return function(lr,cr){let{$from:ur,$to:dr}=lr.selection,hr=ur.blockRange(dr);if(!hr)return!1;let fr=cr?lr.tr:null;return wrapRangeInList(fr,hr,ar,or)?(cr&&cr(fr.scrollIntoView()),!0):!1}}function wrapRangeInList(ar,or,lr,cr=null){let ur=!1,dr=or,hr=or.$from.doc;if(or.depth>=2&&or.$from.node(or.depth-1).type.compatibleContent(lr)&&or.startIndex==0){if(or.$from.index(or.depth-1)==0)return!1;let pr=hr.resolve(or.start-2);dr=new NodeRange(pr,pr,or.depth),or.endIndex<or.parent.childCount&&(or=new NodeRange(or.$from,hr.resolve(or.$to.end(or.depth)),or.depth)),ur=!0}let fr=findWrapping(dr,lr,cr,or);return fr?(ar&&doWrapInList(ar,or,fr,ur,lr),!0):!1}function doWrapInList(ar,or,lr,cr,ur){let dr=Fragment.empty;for(let gr=lr.length-1;gr>=0;gr--)dr=Fragment.from(lr[gr].type.create(lr[gr].attrs,dr));ar.step(new ReplaceAroundStep(or.start-(cr?2:0),or.end,or.start,or.end,new Slice(dr,0,0),lr.length,!0));let hr=0;for(let gr=0;gr<lr.length;gr++)lr[gr].type==ur&&(hr=gr+1);let fr=lr.length-hr,pr=or.start+lr.length-(cr?2:0),mr=or.parent;for(let gr=or.startIndex,yr=or.endIndex,vr=!0;gr<yr;gr++,vr=!1)!vr&&canSplit(ar.doc,pr,fr)&&(ar.split(pr,fr),pr+=2*fr),pr+=mr.child(gr).nodeSize;return ar}function liftListItem$1(ar){return function(or,lr){let{$from:cr,$to:ur}=or.selection,dr=cr.blockRange(ur,hr=>hr.childCount>0&&hr.firstChild.type==ar);return dr?lr?cr.node(dr.depth-1).type==ar?liftToOuterList(or,lr,ar,dr):liftOutOfList(or,lr,dr):!0:!1}}function liftToOuterList(ar,or,lr,cr){let ur=ar.tr,dr=cr.end,hr=cr.$to.end(cr.depth);dr<hr&&(ur.step(new ReplaceAroundStep(dr-1,hr,dr,hr,new Slice(Fragment.from(lr.create(null,cr.parent.copy())),1,0),1,!0)),cr=new NodeRange(ur.doc.resolve(cr.$from.pos),ur.doc.resolve(hr),cr.depth));const fr=liftTarget(cr);if(fr==null)return!1;ur.lift(cr,fr);let pr=ur.doc.resolve(ur.mapping.map(dr,-1)-1);return canJoin(ur.doc,pr.pos)&&pr.nodeBefore.type==pr.nodeAfter.type&&ur.join(pr.pos),or(ur.scrollIntoView()),!0}function liftOutOfList(ar,or,lr){let cr=ar.tr,ur=lr.parent;for(let br=lr.end,Sr=lr.endIndex-1,xr=lr.startIndex;Sr>xr;Sr--)br-=ur.child(Sr).nodeSize,cr.delete(br-1,br+1);let dr=cr.doc.resolve(lr.start),hr=dr.nodeAfter;if(cr.mapping.map(lr.end)!=lr.start+dr.nodeAfter.nodeSize)return!1;let fr=lr.startIndex==0,pr=lr.endIndex==ur.childCount,mr=dr.node(-1),gr=dr.index(-1);if(!mr.canReplace(gr+(fr?0:1),gr+1,hr.content.append(pr?Fragment.empty:Fragment.from(ur))))return!1;let yr=dr.pos,vr=yr+hr.nodeSize;return cr.step(new ReplaceAroundStep(yr-(fr?1:0),vr+(pr?1:0),yr+1,vr-1,new Slice((fr?Fragment.empty:Fragment.from(ur.copy(Fragment.empty))).append(pr?Fragment.empty:Fragment.from(ur.copy(Fragment.empty))),fr?0:1,pr?0:1),fr?0:1)),or(cr.scrollIntoView()),!0}function sinkListItem$1(ar){return function(or,lr){let{$from:cr,$to:ur}=or.selection,dr=cr.blockRange(ur,mr=>mr.childCount>0&&mr.firstChild.type==ar);if(!dr)return!1;let hr=dr.startIndex;if(hr==0)return!1;let fr=dr.parent,pr=fr.child(hr-1);if(pr.type!=ar)return!1;if(lr){let mr=pr.lastChild&&pr.lastChild.type==fr.type,gr=Fragment.from(mr?ar.create():null),yr=new Slice(Fragment.from(ar.create(null,Fragment.from(fr.type.create(null,gr)))),mr?3:1,0),vr=dr.start,br=dr.end;lr(or.tr.step(new ReplaceAroundStep(vr-(mr?3:1),br,vr,br,yr,1,!0)).scrollIntoView())}return!0}}function createChainableState(ar){const{state:or,transaction:lr}=ar;let{selection:cr}=lr,{doc:ur}=lr,{storedMarks:dr}=lr;return{...or,apply:or.apply.bind(or),applyTransaction:or.applyTransaction.bind(or),plugins:or.plugins,schema:or.schema,reconfigure:or.reconfigure.bind(or),toJSON:or.toJSON.bind(or),get storedMarks(){return dr},get selection(){return cr},get doc(){return ur},get tr(){return cr=lr.selection,ur=lr.doc,dr=lr.storedMarks,lr}}}class CommandManager{constructor(or){this.editor=or.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=or.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:or,editor:lr,state:cr}=this,{view:ur}=lr,{tr:dr}=cr,hr=this.buildProps(dr);return Object.fromEntries(Object.entries(or).map(([fr,pr])=>[fr,(...gr)=>{const yr=pr(...gr)(hr);return!dr.getMeta("preventDispatch")&&!this.hasCustomState&&ur.dispatch(dr),yr}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(or,lr=!0){const{rawCommands:cr,editor:ur,state:dr}=this,{view:hr}=ur,fr=[],pr=!!or,mr=or||dr.tr,gr=()=>(!pr&&lr&&!mr.getMeta("preventDispatch")&&!this.hasCustomState&&hr.dispatch(mr),fr.every(vr=>vr===!0)),yr={...Object.fromEntries(Object.entries(cr).map(([vr,br])=>[vr,(...xr)=>{const Er=this.buildProps(mr,lr),wr=br(...xr)(Er);return fr.push(wr),yr}])),run:gr};return yr}createCan(or){const{rawCommands:lr,state:cr}=this,ur=!1,dr=or||cr.tr,hr=this.buildProps(dr,ur);return{...Object.fromEntries(Object.entries(lr).map(([pr,mr])=>[pr,(...gr)=>mr(...gr)({...hr,dispatch:void 0})])),chain:()=>this.createChain(dr,ur)}}buildProps(or,lr=!0){const{rawCommands:cr,editor:ur,state:dr}=this,{view:hr}=ur,fr={tr:or,editor:ur,view:hr,state:createChainableState({state:dr,transaction:or}),dispatch:lr?()=>{}:void 0,chain:()=>this.createChain(or,lr),can:()=>this.createCan(or),get commands(){return Object.fromEntries(Object.entries(cr).map(([pr,mr])=>[pr,(...gr)=>mr(...gr)(fr)]))}};return fr}}class EventEmitter{constructor(){this.callbacks={}}on(or,lr){return this.callbacks[or]||(this.callbacks[or]=[]),this.callbacks[or].push(lr),this}emit(or,...lr){const cr=this.callbacks[or];return cr&&cr.forEach(ur=>ur.apply(this,lr)),this}off(or,lr){const cr=this.callbacks[or];return cr&&(lr?this.callbacks[or]=cr.filter(ur=>ur!==lr):delete this.callbacks[or]),this}once(or,lr){const cr=(...ur)=>{this.off(or,cr),lr.apply(this,ur)};return this.on(or,cr)}removeAllListeners(){this.callbacks={}}}function getExtensionField(ar,or,lr){return ar.config[or]===void 0&&ar.parent?getExtensionField(ar.parent,or,lr):typeof ar.config[or]=="function"?ar.config[or].bind({...lr,parent:ar.parent?getExtensionField(ar.parent,or,lr):null}):ar.config[or]}function splitExtensions(ar){const or=ar.filter(ur=>ur.type==="extension"),lr=ar.filter(ur=>ur.type==="node"),cr=ar.filter(ur=>ur.type==="mark");return{baseExtensions:or,nodeExtensions:lr,markExtensions:cr}}function getAttributesFromExtensions(ar){const or=[],{nodeExtensions:lr,markExtensions:cr}=splitExtensions(ar),ur=[...lr,...cr],dr={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return ar.forEach(hr=>{const fr={name:hr.name,options:hr.options,storage:hr.storage,extensions:ur},pr=getExtensionField(hr,"addGlobalAttributes",fr);if(!pr)return;pr().forEach(gr=>{gr.types.forEach(yr=>{Object.entries(gr.attributes).forEach(([vr,br])=>{or.push({type:yr,name:vr,attribute:{...dr,...br}})})})})}),ur.forEach(hr=>{const fr={name:hr.name,options:hr.options,storage:hr.storage},pr=getExtensionField(hr,"addAttributes",fr);if(!pr)return;const mr=pr();Object.entries(mr).forEach(([gr,yr])=>{const vr={...dr,...yr};typeof(vr==null?void 0:vr.default)=="function"&&(vr.default=vr.default()),vr!=null&&vr.isRequired&&(vr==null?void 0:vr.default)===void 0&&delete vr.default,or.push({type:hr.name,name:gr,attribute:vr})})}),or}function getNodeType(ar,or){if(typeof ar=="string"){if(!or.nodes[ar])throw Error(`There is no node type named '${ar}'. Maybe you forgot to add the extension?`);return or.nodes[ar]}return ar}function mergeAttributes(...ar){return ar.filter(or=>!!or).reduce((or,lr)=>{const cr={...or};return Object.entries(lr).forEach(([ur,dr])=>{if(!cr[ur]){cr[ur]=dr;return}if(ur==="class"){const fr=dr?String(dr).split(" "):[],pr=cr[ur]?cr[ur].split(" "):[],mr=fr.filter(gr=>!pr.includes(gr));cr[ur]=[...pr,...mr].join(" ")}else if(ur==="style"){const fr=dr?dr.split(";").map(gr=>gr.trim()).filter(Boolean):[],pr=cr[ur]?cr[ur].split(";").map(gr=>gr.trim()).filter(Boolean):[],mr=new Map;pr.forEach(gr=>{const[yr,vr]=gr.split(":").map(br=>br.trim());mr.set(yr,vr)}),fr.forEach(gr=>{const[yr,vr]=gr.split(":").map(br=>br.trim());mr.set(yr,vr)}),cr[ur]=Array.from(mr.entries()).map(([gr,yr])=>`${gr}: ${yr}`).join("; ")}else cr[ur]=dr}),cr},{})}function getRenderedAttributes(ar,or){return or.filter(lr=>lr.type===ar.type.name).filter(lr=>lr.attribute.rendered).map(lr=>lr.attribute.renderHTML?lr.attribute.renderHTML(ar.attrs)||{}:{[lr.name]:ar.attrs[lr.name]}).reduce((lr,cr)=>mergeAttributes(lr,cr),{})}function isFunction(ar){return typeof ar=="function"}function callOrReturn(ar,or=void 0,...lr){return isFunction(ar)?or?ar.bind(or)(...lr):ar(...lr):ar}function isEmptyObject(ar={}){return Object.keys(ar).length===0&&ar.constructor===Object}function fromString(ar){return typeof ar!="string"?ar:ar.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(ar):ar==="true"?!0:ar==="false"?!1:ar}function injectExtensionAttributesToParseRule(ar,or){return"style"in ar?ar:{...ar,getAttrs:lr=>{const cr=ar.getAttrs?ar.getAttrs(lr):ar.attrs;if(cr===!1)return!1;const ur=or.reduce((dr,hr)=>{const fr=hr.attribute.parseHTML?hr.attribute.parseHTML(lr):fromString(lr.getAttribute(hr.name));return fr==null?dr:{...dr,[hr.name]:fr}},{});return{...cr,...ur}}}}function cleanUpSchemaItem(ar){return Object.fromEntries(Object.entries(ar).filter(([or,lr])=>or==="attrs"&&isEmptyObject(lr)?!1:lr!=null))}function getSchemaByResolvedExtensions(ar,or){var lr;const cr=getAttributesFromExtensions(ar),{nodeExtensions:ur,markExtensions:dr}=splitExtensions(ar),hr=(lr=ur.find(mr=>getExtensionField(mr,"topNode")))===null||lr===void 0?void 0:lr.name,fr=Object.fromEntries(ur.map(mr=>{const gr=cr.filter(wr=>wr.type===mr.name),yr={name:mr.name,options:mr.options,storage:mr.storage,editor:or},vr=ar.reduce((wr,Ar)=>{const Tr=getExtensionField(Ar,"extendNodeSchema",yr);return{...wr,...Tr?Tr(mr):{}}},{}),br=cleanUpSchemaItem({...vr,content:callOrReturn(getExtensionField(mr,"content",yr)),marks:callOrReturn(getExtensionField(mr,"marks",yr)),group:callOrReturn(getExtensionField(mr,"group",yr)),inline:callOrReturn(getExtensionField(mr,"inline",yr)),atom:callOrReturn(getExtensionField(mr,"atom",yr)),selectable:callOrReturn(getExtensionField(mr,"selectable",yr)),draggable:callOrReturn(getExtensionField(mr,"draggable",yr)),code:callOrReturn(getExtensionField(mr,"code",yr)),whitespace:callOrReturn(getExtensionField(mr,"whitespace",yr)),linebreakReplacement:callOrReturn(getExtensionField(mr,"linebreakReplacement",yr)),defining:callOrReturn(getExtensionField(mr,"defining",yr)),isolating:callOrReturn(getExtensionField(mr,"isolating",yr)),attrs:Object.fromEntries(gr.map(wr=>{var Ar;return[wr.name,{default:(Ar=wr==null?void 0:wr.attribute)===null||Ar===void 0?void 0:Ar.default}]}))}),Sr=callOrReturn(getExtensionField(mr,"parseHTML",yr));Sr&&(br.parseDOM=Sr.map(wr=>injectExtensionAttributesToParseRule(wr,gr)));const xr=getExtensionField(mr,"renderHTML",yr);xr&&(br.toDOM=wr=>xr({node:wr,HTMLAttributes:getRenderedAttributes(wr,gr)}));const Er=getExtensionField(mr,"renderText",yr);return Er&&(br.toText=Er),[mr.name,br]})),pr=Object.fromEntries(dr.map(mr=>{const gr=cr.filter(Er=>Er.type===mr.name),yr={name:mr.name,options:mr.options,storage:mr.storage,editor:or},vr=ar.reduce((Er,wr)=>{const Ar=getExtensionField(wr,"extendMarkSchema",yr);return{...Er,...Ar?Ar(mr):{}}},{}),br=cleanUpSchemaItem({...vr,inclusive:callOrReturn(getExtensionField(mr,"inclusive",yr)),excludes:callOrReturn(getExtensionField(mr,"excludes",yr)),group:callOrReturn(getExtensionField(mr,"group",yr)),spanning:callOrReturn(getExtensionField(mr,"spanning",yr)),code:callOrReturn(getExtensionField(mr,"code",yr)),attrs:Object.fromEntries(gr.map(Er=>{var wr;return[Er.name,{default:(wr=Er==null?void 0:Er.attribute)===null||wr===void 0?void 0:wr.default}]}))}),Sr=callOrReturn(getExtensionField(mr,"parseHTML",yr));Sr&&(br.parseDOM=Sr.map(Er=>injectExtensionAttributesToParseRule(Er,gr)));const xr=getExtensionField(mr,"renderHTML",yr);return xr&&(br.toDOM=Er=>xr({mark:Er,HTMLAttributes:getRenderedAttributes(Er,gr)})),[mr.name,br]}));return new Schema({topNode:hr,nodes:fr,marks:pr})}function getSchemaTypeByName(ar,or){return or.nodes[ar]||or.marks[ar]||null}function isExtensionRulesEnabled(ar,or){return Array.isArray(or)?or.some(lr=>(typeof lr=="string"?lr:lr.name)===ar.name):or}function getHTMLFromFragment(ar,or){const lr=DOMSerializer.fromSchema(or).serializeFragment(ar),ur=document.implementation.createHTMLDocument().createElement("div");return ur.appendChild(lr),ur.innerHTML}const getTextContentFromNodes=(ar,or=500)=>{let lr="";const cr=ar.parentOffset;return ar.parent.nodesBetween(Math.max(0,cr-or),cr,(ur,dr,hr,fr)=>{var pr,mr;const gr=((mr=(pr=ur.type.spec).toText)===null||mr===void 0?void 0:mr.call(pr,{node:ur,pos:dr,parent:hr,index:fr}))||ur.textContent||"%leaf%";lr+=ur.isAtom&&!ur.isText?gr:gr.slice(0,Math.max(0,cr-dr))}),lr};function isRegExp(ar){return Object.prototype.toString.call(ar)==="[object RegExp]"}class InputRule{constructor(or){this.find=or.find,this.handler=or.handler}}const inputRuleMatcherHandler=(ar,or)=>{if(isRegExp(or))return or.exec(ar);const lr=or(ar);if(!lr)return null;const cr=[lr.text];return cr.index=lr.index,cr.input=ar,cr.data=lr.data,lr.replaceWith&&(lr.text.includes(lr.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),cr.push(lr.replaceWith)),cr};function run$1$1(ar){var or;const{editor:lr,from:cr,to:ur,text:dr,rules:hr,plugin:fr}=ar,{view:pr}=lr;if(pr.composing)return!1;const mr=pr.state.doc.resolve(cr);if(mr.parent.type.spec.code||!((or=mr.nodeBefore||mr.nodeAfter)===null||or===void 0)&&or.marks.find(vr=>vr.type.spec.code))return!1;let gr=!1;const yr=getTextContentFromNodes(mr)+dr;return hr.forEach(vr=>{if(gr)return;const br=inputRuleMatcherHandler(yr,vr.find);if(!br)return;const Sr=pr.state.tr,xr=createChainableState({state:pr.state,transaction:Sr}),Er={from:cr-(br[0].length-dr.length),to:ur},{commands:wr,chain:Ar,can:Tr}=new CommandManager({editor:lr,state:xr});vr.handler({state:xr,range:Er,match:br,commands:wr,chain:Ar,can:Tr})===null||!Sr.steps.length||(Sr.setMeta(fr,{transform:Sr,from:cr,to:ur,text:dr}),pr.dispatch(Sr),gr=!0)}),gr}function inputRulesPlugin(ar){const{editor:or,rules:lr}=ar,cr=new Plugin({state:{init(){return null},apply(ur,dr,hr){const fr=ur.getMeta(cr);if(fr)return fr;const pr=ur.getMeta("applyInputRules");return!!pr&&setTimeout(()=>{let{text:gr}=pr;typeof gr=="string"?gr=gr:gr=getHTMLFromFragment(Fragment.from(gr),hr.schema);const{from:yr}=pr,vr=yr+gr.length;run$1$1({editor:or,from:yr,to:vr,text:gr,rules:lr,plugin:cr})}),ur.selectionSet||ur.docChanged?null:dr}},props:{handleTextInput(ur,dr,hr,fr){return run$1$1({editor:or,from:dr,to:hr,text:fr,rules:lr,plugin:cr})},handleDOMEvents:{compositionend:ur=>(setTimeout(()=>{const{$cursor:dr}=ur.state.selection;dr&&run$1$1({editor:or,from:dr.pos,to:dr.pos,text:"",rules:lr,plugin:cr})}),!1)},handleKeyDown(ur,dr){if(dr.key!=="Enter")return!1;const{$cursor:hr}=ur.state.selection;return hr?run$1$1({editor:or,from:hr.pos,to:hr.pos,text:`
`,rules:lr,plugin:cr}):!1}},isInputRules:!0});return cr}function getType(ar){return Object.prototype.toString.call(ar).slice(8,-1)}function isPlainObject(ar){return getType(ar)!=="Object"?!1:ar.constructor===Object&&Object.getPrototypeOf(ar)===Object.prototype}function mergeDeep(ar,or){const lr={...ar};return isPlainObject(ar)&&isPlainObject(or)&&Object.keys(or).forEach(cr=>{isPlainObject(or[cr])&&isPlainObject(ar[cr])?lr[cr]=mergeDeep(ar[cr],or[cr]):lr[cr]=or[cr]}),lr}class Mark{constructor(or={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...or},this.name=this.config.name,or.defaultOptions&&Object.keys(or.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(or={}){return new Mark(or)}configure(or={}){const lr=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,or)});return lr.name=this.name,lr.parent=this.parent,lr}extend(or={}){const lr=new Mark(or);return lr.parent=this,this.child=lr,lr.name=or.name?or.name:lr.parent.name,or.defaultOptions&&Object.keys(or.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${lr.name}".`),lr.options=callOrReturn(getExtensionField(lr,"addOptions",{name:lr.name})),lr.storage=callOrReturn(getExtensionField(lr,"addStorage",{name:lr.name,options:lr.options})),lr}static handleExit({editor:or,mark:lr}){const{tr:cr}=or.state,ur=or.state.selection.$from;if(ur.pos===ur.end()){const hr=ur.marks();if(!!!hr.find(mr=>(mr==null?void 0:mr.type.name)===lr.name))return!1;const pr=hr.find(mr=>(mr==null?void 0:mr.type.name)===lr.name);return pr&&cr.removeStoredMark(pr),cr.insertText(" ",ur.pos),or.view.dispatch(cr),!0}return!1}}function isNumber(ar){return typeof ar=="number"}class PasteRule{constructor(or){this.find=or.find,this.handler=or.handler}}const pasteRuleMatcherHandler=(ar,or,lr)=>{if(isRegExp(or))return[...ar.matchAll(or)];const cr=or(ar,lr);return cr?cr.map(ur=>{const dr=[ur.text];return dr.index=ur.index,dr.input=ar,dr.data=ur.data,ur.replaceWith&&(ur.text.includes(ur.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),dr.push(ur.replaceWith)),dr}):[]};function run$2(ar){const{editor:or,state:lr,from:cr,to:ur,rule:dr,pasteEvent:hr,dropEvent:fr}=ar,{commands:pr,chain:mr,can:gr}=new CommandManager({editor:or,state:lr}),yr=[];return lr.doc.nodesBetween(cr,ur,(br,Sr)=>{if(!br.isTextblock||br.type.spec.code)return;const xr=Math.max(cr,Sr),Er=Math.min(ur,Sr+br.content.size),wr=br.textBetween(xr-Sr,Er-Sr,void 0,"￼");pasteRuleMatcherHandler(wr,dr.find,hr).forEach(Tr=>{if(Tr.index===void 0)return;const Cr=xr+Tr.index+1,kr=Cr+Tr[0].length,Mr={from:lr.tr.mapping.map(Cr),to:lr.tr.mapping.map(kr)},Rr=dr.handler({state:lr,range:Mr,match:Tr,commands:pr,chain:mr,can:gr,pasteEvent:hr,dropEvent:fr});yr.push(Rr)})}),yr.every(br=>br!==null)}let tiptapDragFromOtherEditor=null;const createClipboardPasteEvent=ar=>{var or;const lr=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(or=lr.clipboardData)===null||or===void 0||or.setData("text/html",ar),lr};function pasteRulesPlugin(ar){const{editor:or,rules:lr}=ar;let cr=null,ur=!1,dr=!1,hr=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,fr;try{fr=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{fr=null}const pr=({state:gr,from:yr,to:vr,rule:br,pasteEvt:Sr})=>{const xr=gr.tr,Er=createChainableState({state:gr,transaction:xr});if(!(!run$2({editor:or,state:Er,from:Math.max(yr-1,0),to:vr.b-1,rule:br,pasteEvent:Sr,dropEvent:fr})||!xr.steps.length)){try{fr=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{fr=null}return hr=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,xr}};return lr.map(gr=>new Plugin({view(yr){const vr=Sr=>{var xr;cr=!((xr=yr.dom.parentElement)===null||xr===void 0)&&xr.contains(Sr.target)?yr.dom.parentElement:null,cr&&(tiptapDragFromOtherEditor=or)},br=()=>{tiptapDragFromOtherEditor&&(tiptapDragFromOtherEditor=null)};return window.addEventListener("dragstart",vr),window.addEventListener("dragend",br),{destroy(){window.removeEventListener("dragstart",vr),window.removeEventListener("dragend",br)}}},props:{handleDOMEvents:{drop:(yr,vr)=>{if(dr=cr===yr.dom.parentElement,fr=vr,!dr){const br=tiptapDragFromOtherEditor;br&&setTimeout(()=>{const Sr=br.state.selection;Sr&&br.commands.deleteRange({from:Sr.from,to:Sr.to})},10)}return!1},paste:(yr,vr)=>{var br;const Sr=(br=vr.clipboardData)===null||br===void 0?void 0:br.getData("text/html");return hr=vr,ur=!!(Sr!=null&&Sr.includes("data-pm-slice")),!1}}},appendTransaction:(yr,vr,br)=>{const Sr=yr[0],xr=Sr.getMeta("uiEvent")==="paste"&&!ur,Er=Sr.getMeta("uiEvent")==="drop"&&!dr,wr=Sr.getMeta("applyPasteRules"),Ar=!!wr;if(!xr&&!Er&&!Ar)return;if(Ar){let{text:kr}=wr;typeof kr=="string"?kr=kr:kr=getHTMLFromFragment(Fragment.from(kr),br.schema);const{from:Mr}=wr,Rr=Mr+kr.length,Nr=createClipboardPasteEvent(kr);return pr({rule:gr,state:br,from:Mr,to:{b:Rr},pasteEvt:Nr})}const Tr=vr.doc.content.findDiffStart(br.doc.content),Cr=vr.doc.content.findDiffEnd(br.doc.content);if(!(!isNumber(Tr)||!Cr||Tr===Cr.b))return pr({rule:gr,state:br,from:Tr,to:Cr,pasteEvt:hr})}}))}function findDuplicates(ar){const or=ar.filter((lr,cr)=>ar.indexOf(lr)!==cr);return Array.from(new Set(or))}class ExtensionManager{constructor(or,lr){this.splittableMarks=[],this.editor=lr,this.extensions=ExtensionManager.resolve(or),this.schema=getSchemaByResolvedExtensions(this.extensions,lr),this.setupExtensions()}static resolve(or){const lr=ExtensionManager.sort(ExtensionManager.flatten(or)),cr=findDuplicates(lr.map(ur=>ur.name));return cr.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${cr.map(ur=>`'${ur}'`).join(", ")}]. This can lead to issues.`),lr}static flatten(or){return or.map(lr=>{const cr={name:lr.name,options:lr.options,storage:lr.storage},ur=getExtensionField(lr,"addExtensions",cr);return ur?[lr,...this.flatten(ur())]:lr}).flat(10)}static sort(or){return or.sort((cr,ur)=>{const dr=getExtensionField(cr,"priority")||100,hr=getExtensionField(ur,"priority")||100;return dr>hr?-1:dr<hr?1:0})}get commands(){return this.extensions.reduce((or,lr)=>{const cr={name:lr.name,options:lr.options,storage:lr.storage,editor:this.editor,type:getSchemaTypeByName(lr.name,this.schema)},ur=getExtensionField(lr,"addCommands",cr);return ur?{...or,...ur()}:or},{})}get plugins(){const{editor:or}=this,lr=ExtensionManager.sort([...this.extensions].reverse()),cr=[],ur=[],dr=lr.map(hr=>{const fr={name:hr.name,options:hr.options,storage:hr.storage,editor:or,type:getSchemaTypeByName(hr.name,this.schema)},pr=[],mr=getExtensionField(hr,"addKeyboardShortcuts",fr);let gr={};if(hr.type==="mark"&&getExtensionField(hr,"exitable",fr)&&(gr.ArrowRight=()=>Mark.handleExit({editor:or,mark:hr})),mr){const xr=Object.fromEntries(Object.entries(mr()).map(([Er,wr])=>[Er,()=>wr({editor:or})]));gr={...gr,...xr}}const yr=keymap(gr);pr.push(yr);const vr=getExtensionField(hr,"addInputRules",fr);isExtensionRulesEnabled(hr,or.options.enableInputRules)&&vr&&cr.push(...vr());const br=getExtensionField(hr,"addPasteRules",fr);isExtensionRulesEnabled(hr,or.options.enablePasteRules)&&br&&ur.push(...br());const Sr=getExtensionField(hr,"addProseMirrorPlugins",fr);if(Sr){const xr=Sr();pr.push(...xr)}return pr}).flat();return[inputRulesPlugin({editor:or,rules:cr}),...pasteRulesPlugin({editor:or,rules:ur}),...dr]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:or}=this,{nodeExtensions:lr}=splitExtensions(this.extensions);return Object.fromEntries(lr.filter(cr=>!!getExtensionField(cr,"addNodeView")).map(cr=>{const ur=this.attributes.filter(pr=>pr.type===cr.name),dr={name:cr.name,options:cr.options,storage:cr.storage,editor:or,type:getNodeType(cr.name,this.schema)},hr=getExtensionField(cr,"addNodeView",dr);if(!hr)return[];const fr=(pr,mr,gr,yr,vr)=>{const br=getRenderedAttributes(pr,ur);return hr()({node:pr,view:mr,getPos:gr,decorations:yr,innerDecorations:vr,editor:or,extension:cr,HTMLAttributes:br})};return[cr.name,fr]}))}setupExtensions(){this.extensions.forEach(or=>{var lr;this.editor.extensionStorage[or.name]=or.storage;const cr={name:or.name,options:or.options,storage:or.storage,editor:this.editor,type:getSchemaTypeByName(or.name,this.schema)};or.type==="mark"&&(!((lr=callOrReturn(getExtensionField(or,"keepOnSplit",cr)))!==null&&lr!==void 0)||lr)&&this.splittableMarks.push(or.name);const ur=getExtensionField(or,"onBeforeCreate",cr),dr=getExtensionField(or,"onCreate",cr),hr=getExtensionField(or,"onUpdate",cr),fr=getExtensionField(or,"onSelectionUpdate",cr),pr=getExtensionField(or,"onTransaction",cr),mr=getExtensionField(or,"onFocus",cr),gr=getExtensionField(or,"onBlur",cr),yr=getExtensionField(or,"onDestroy",cr);ur&&this.editor.on("beforeCreate",ur),dr&&this.editor.on("create",dr),hr&&this.editor.on("update",hr),fr&&this.editor.on("selectionUpdate",fr),pr&&this.editor.on("transaction",pr),mr&&this.editor.on("focus",mr),gr&&this.editor.on("blur",gr),yr&&this.editor.on("destroy",yr)})}}class Extension{constructor(or={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...or},this.name=this.config.name,or.defaultOptions&&Object.keys(or.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(or={}){return new Extension(or)}configure(or={}){const lr=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,or)});return lr.name=this.name,lr.parent=this.parent,lr}extend(or={}){const lr=new Extension({...this.config,...or});return lr.parent=this,this.child=lr,lr.name=or.name?or.name:lr.parent.name,or.defaultOptions&&Object.keys(or.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${lr.name}".`),lr.options=callOrReturn(getExtensionField(lr,"addOptions",{name:lr.name})),lr.storage=callOrReturn(getExtensionField(lr,"addStorage",{name:lr.name,options:lr.options})),lr}}function getTextBetween(ar,or,lr){const{from:cr,to:ur}=or,{blockSeparator:dr=`

`,textSerializers:hr={}}=lr||{};let fr="";return ar.nodesBetween(cr,ur,(pr,mr,gr,yr)=>{var vr;pr.isBlock&&mr>cr&&(fr+=dr);const br=hr==null?void 0:hr[pr.type.name];if(br)return gr&&(fr+=br({node:pr,pos:mr,parent:gr,index:yr,range:or})),!1;pr.isText&&(fr+=(vr=pr==null?void 0:pr.text)===null||vr===void 0?void 0:vr.slice(Math.max(cr,mr)-mr,ur-mr))}),fr}function getTextSerializersFromSchema(ar){return Object.fromEntries(Object.entries(ar.nodes).filter(([,or])=>or.spec.toText).map(([or,lr])=>[or,lr.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:ar}=this,{state:or,schema:lr}=ar,{doc:cr,selection:ur}=or,{ranges:dr}=ur,hr=Math.min(...dr.map(gr=>gr.$from.pos)),fr=Math.max(...dr.map(gr=>gr.$to.pos)),pr=getTextSerializersFromSchema(lr);return getTextBetween(cr,{from:hr,to:fr},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:pr})}}})]}}),blur=()=>({editor:ar,view:or})=>(requestAnimationFrame(()=>{var lr;ar.isDestroyed||(or.dom.blur(),(lr=window==null?void 0:window.getSelection())===null||lr===void 0||lr.removeAllRanges())}),!0),clearContent=(ar=!1)=>({commands:or})=>or.setContent("",ar),clearNodes=()=>({state:ar,tr:or,dispatch:lr})=>{const{selection:cr}=or,{ranges:ur}=cr;return lr&&ur.forEach(({$from:dr,$to:hr})=>{ar.doc.nodesBetween(dr.pos,hr.pos,(fr,pr)=>{if(fr.type.isText)return;const{doc:mr,mapping:gr}=or,yr=mr.resolve(gr.map(pr)),vr=mr.resolve(gr.map(pr+fr.nodeSize)),br=yr.blockRange(vr);if(!br)return;const Sr=liftTarget(br);if(fr.type.isTextblock){const{defaultType:xr}=yr.parent.contentMatchAt(yr.index());or.setNodeMarkup(br.start,xr)}(Sr||Sr===0)&&or.lift(br,Sr)})}),!0},command=ar=>or=>ar(or),createParagraphNear=()=>({state:ar,dispatch:or})=>createParagraphNear$1(ar,or),cut=(ar,or)=>({editor:lr,tr:cr})=>{const{state:ur}=lr,dr=ur.doc.slice(ar.from,ar.to);cr.deleteRange(ar.from,ar.to);const hr=cr.mapping.map(or);return cr.insert(hr,dr.content),cr.setSelection(new TextSelection(cr.doc.resolve(hr-1))),!0},deleteCurrentNode=()=>({tr:ar,dispatch:or})=>{const{selection:lr}=ar,cr=lr.$anchor.node();if(cr.content.size>0)return!1;const ur=ar.selection.$anchor;for(let dr=ur.depth;dr>0;dr-=1)if(ur.node(dr).type===cr.type){if(or){const fr=ur.before(dr),pr=ur.after(dr);ar.delete(fr,pr).scrollIntoView()}return!0}return!1},deleteNode=ar=>({tr:or,state:lr,dispatch:cr})=>{const ur=getNodeType(ar,lr.schema),dr=or.selection.$anchor;for(let hr=dr.depth;hr>0;hr-=1)if(dr.node(hr).type===ur){if(cr){const pr=dr.before(hr),mr=dr.after(hr);or.delete(pr,mr).scrollIntoView()}return!0}return!1},deleteRange=ar=>({tr:or,dispatch:lr})=>{const{from:cr,to:ur}=ar;return lr&&or.delete(cr,ur),!0},deleteSelection=()=>({state:ar,dispatch:or})=>deleteSelection$1(ar,or),enter=()=>({commands:ar})=>ar.keyboardShortcut("Enter"),exitCode=()=>({state:ar,dispatch:or})=>exitCode$1(ar,or);function objectIncludes(ar,or,lr={strict:!0}){const cr=Object.keys(or);return cr.length?cr.every(ur=>lr.strict?or[ur]===ar[ur]:isRegExp(or[ur])?or[ur].test(ar[ur]):or[ur]===ar[ur]):!0}function findMarkInSet(ar,or,lr={}){return ar.find(cr=>cr.type===or&&objectIncludes(Object.fromEntries(Object.keys(lr).map(ur=>[ur,cr.attrs[ur]])),lr))}function isMarkInSet(ar,or,lr={}){return!!findMarkInSet(ar,or,lr)}function getMarkRange(ar,or,lr){var cr;if(!ar||!or)return;let ur=ar.parent.childAfter(ar.parentOffset);if((!ur.node||!ur.node.marks.some(gr=>gr.type===or))&&(ur=ar.parent.childBefore(ar.parentOffset)),!ur.node||!ur.node.marks.some(gr=>gr.type===or)||(lr=lr||((cr=ur.node.marks[0])===null||cr===void 0?void 0:cr.attrs),!findMarkInSet([...ur.node.marks],or,lr)))return;let hr=ur.index,fr=ar.start()+ur.offset,pr=hr+1,mr=fr+ur.node.nodeSize;for(;hr>0&&isMarkInSet([...ar.parent.child(hr-1).marks],or,lr);)hr-=1,fr-=ar.parent.child(hr).nodeSize;for(;pr<ar.parent.childCount&&isMarkInSet([...ar.parent.child(pr).marks],or,lr);)mr+=ar.parent.child(pr).nodeSize,pr+=1;return{from:fr,to:mr}}function getMarkType(ar,or){if(typeof ar=="string"){if(!or.marks[ar])throw Error(`There is no mark type named '${ar}'. Maybe you forgot to add the extension?`);return or.marks[ar]}return ar}const extendMarkRange=(ar,or={})=>({tr:lr,state:cr,dispatch:ur})=>{const dr=getMarkType(ar,cr.schema),{doc:hr,selection:fr}=lr,{$from:pr,from:mr,to:gr}=fr;if(ur){const yr=getMarkRange(pr,dr,or);if(yr&&yr.from<=mr&&yr.to>=gr){const vr=TextSelection.create(hr,yr.from,yr.to);lr.setSelection(vr)}}return!0},first=ar=>or=>{const lr=typeof ar=="function"?ar(or):ar;for(let cr=0;cr<lr.length;cr+=1)if(lr[cr](or))return!0;return!1};function isTextSelection(ar){return ar instanceof TextSelection}function minMax(ar=0,or=0,lr=0){return Math.min(Math.max(ar,or),lr)}function resolveFocusPosition(ar,or=null){if(!or)return null;const lr=Selection.atStart(ar),cr=Selection.atEnd(ar);if(or==="start"||or===!0)return lr;if(or==="end")return cr;const ur=lr.from,dr=cr.to;return or==="all"?TextSelection.create(ar,minMax(0,ur,dr),minMax(ar.content.size,ur,dr)):TextSelection.create(ar,minMax(or,ur,dr),minMax(or,ur,dr))}function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(ar=null,or={})=>({editor:lr,view:cr,tr:ur,dispatch:dr})=>{or={scrollIntoView:!0,...or};const hr=()=>{(isiOS()||isAndroid())&&cr.dom.focus(),requestAnimationFrame(()=>{lr.isDestroyed||(cr.focus(),or!=null&&or.scrollIntoView&&lr.commands.scrollIntoView())})};if(cr.hasFocus()&&ar===null||ar===!1)return!0;if(dr&&ar===null&&!isTextSelection(lr.state.selection))return hr(),!0;const fr=resolveFocusPosition(ur.doc,ar)||lr.state.selection,pr=lr.state.selection.eq(fr);return dr&&(pr||ur.setSelection(fr),pr&&ur.storedMarks&&ur.setStoredMarks(ur.storedMarks),hr()),!0},forEach=(ar,or)=>lr=>ar.every((cr,ur)=>or(cr,{...lr,index:ur})),insertContent=(ar,or)=>({tr:lr,commands:cr})=>cr.insertContentAt({from:lr.selection.from,to:lr.selection.to},ar,or),removeWhitespaces=ar=>{const or=ar.childNodes;for(let lr=or.length-1;lr>=0;lr-=1){const cr=or[lr];cr.nodeType===3&&cr.nodeValue&&/^(\n\s\s|\n)$/.test(cr.nodeValue)?ar.removeChild(cr):cr.nodeType===1&&removeWhitespaces(cr)}return ar};function elementFromString(ar){const or=`<body>${ar}</body>`,lr=new window.DOMParser().parseFromString(or,"text/html").body;return removeWhitespaces(lr)}function createNodeFromContent(ar,or,lr){if(ar instanceof Node$1||ar instanceof Fragment)return ar;lr={slice:!0,parseOptions:{},...lr};const cr=typeof ar=="object"&&ar!==null,ur=typeof ar=="string";if(cr)try{if(Array.isArray(ar)&&ar.length>0)return Fragment.fromArray(ar.map(fr=>or.nodeFromJSON(fr)));const hr=or.nodeFromJSON(ar);return lr.errorOnInvalidContent&&hr.check(),hr}catch(dr){if(lr.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:dr});return console.warn("[tiptap warn]: Invalid content.","Passed value:",ar,"Error:",dr),createNodeFromContent("",or,lr)}if(ur){if(lr.errorOnInvalidContent){let hr=!1,fr="";const pr=new Schema({topNode:or.spec.topNode,marks:or.spec.marks,nodes:or.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:mr=>(hr=!0,fr=typeof mr=="string"?mr:mr.outerHTML,null)}]}})});if(lr.slice?DOMParser.fromSchema(pr).parseSlice(elementFromString(ar),lr.parseOptions):DOMParser.fromSchema(pr).parse(elementFromString(ar),lr.parseOptions),lr.errorOnInvalidContent&&hr)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${fr}`)})}const dr=DOMParser.fromSchema(or);return lr.slice?dr.parseSlice(elementFromString(ar),lr.parseOptions).content:dr.parse(elementFromString(ar),lr.parseOptions)}return createNodeFromContent("",or,lr)}function selectionToInsertionEnd(ar,or,lr){const cr=ar.steps.length-1;if(cr<or)return;const ur=ar.steps[cr];if(!(ur instanceof ReplaceStep||ur instanceof ReplaceAroundStep))return;const dr=ar.mapping.maps[cr];let hr=0;dr.forEach((fr,pr,mr,gr)=>{hr===0&&(hr=gr)}),ar.setSelection(Selection.near(ar.doc.resolve(hr),lr))}const isFragment=ar=>!("type"in ar),insertContentAt=(ar,or,lr)=>({tr:cr,dispatch:ur,editor:dr})=>{var hr;if(ur){lr={parseOptions:dr.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...lr};let fr;try{fr=createNodeFromContent(or,dr.schema,{parseOptions:{preserveWhitespace:"full",...lr.parseOptions},errorOnInvalidContent:(hr=lr.errorOnInvalidContent)!==null&&hr!==void 0?hr:dr.options.enableContentCheck})}catch(Sr){return dr.emit("contentError",{editor:dr,error:Sr,disableCollaboration:()=>{dr.storage.collaboration&&(dr.storage.collaboration.isDisabled=!0)}}),!1}let{from:pr,to:mr}=typeof ar=="number"?{from:ar,to:ar}:{from:ar.from,to:ar.to},gr=!0,yr=!0;if((isFragment(fr)?fr:[fr]).forEach(Sr=>{Sr.check(),gr=gr?Sr.isText&&Sr.marks.length===0:!1,yr=yr?Sr.isBlock:!1}),pr===mr&&yr){const{parent:Sr}=cr.doc.resolve(pr);Sr.isTextblock&&!Sr.type.spec.code&&!Sr.childCount&&(pr-=1,mr+=1)}let br;if(gr){if(Array.isArray(or))br=or.map(Sr=>Sr.text||"").join("");else if(or instanceof Fragment){let Sr="";or.forEach(xr=>{xr.text&&(Sr+=xr.text)}),br=Sr}else typeof or=="object"&&or&&or.text?br=or.text:br=or;cr.insertText(br,pr,mr)}else br=fr,cr.replaceWith(pr,mr,br);lr.updateSelection&&selectionToInsertionEnd(cr,cr.steps.length-1,-1),lr.applyInputRules&&cr.setMeta("applyInputRules",{from:pr,text:br}),lr.applyPasteRules&&cr.setMeta("applyPasteRules",{from:pr,text:br})}return!0},joinUp=()=>({state:ar,dispatch:or})=>joinUp$1(ar,or),joinDown=()=>({state:ar,dispatch:or})=>joinDown$1(ar,or),joinBackward=()=>({state:ar,dispatch:or})=>joinBackward$1(ar,or),joinForward=()=>({state:ar,dispatch:or})=>joinForward$1(ar,or),joinItemBackward=()=>({state:ar,dispatch:or,tr:lr})=>{try{const cr=joinPoint(ar.doc,ar.selection.$from.pos,-1);return cr==null?!1:(lr.join(cr,2),or&&or(lr),!0)}catch{return!1}},joinItemForward=()=>({state:ar,dispatch:or,tr:lr})=>{try{const cr=joinPoint(ar.doc,ar.selection.$from.pos,1);return cr==null?!1:(lr.join(cr,2),or&&or(lr),!0)}catch{return!1}},joinTextblockBackward=()=>({state:ar,dispatch:or})=>joinTextblockBackward$1(ar,or),joinTextblockForward=()=>({state:ar,dispatch:or})=>joinTextblockForward$1(ar,or);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(ar){const or=ar.split(/-(?!$)/);let lr=or[or.length-1];lr==="Space"&&(lr=" ");let cr,ur,dr,hr;for(let fr=0;fr<or.length-1;fr+=1){const pr=or[fr];if(/^(cmd|meta|m)$/i.test(pr))hr=!0;else if(/^a(lt)?$/i.test(pr))cr=!0;else if(/^(c|ctrl|control)$/i.test(pr))ur=!0;else if(/^s(hift)?$/i.test(pr))dr=!0;else if(/^mod$/i.test(pr))isiOS()||isMacOS()?hr=!0:ur=!0;else throw new Error(`Unrecognized modifier name: ${pr}`)}return cr&&(lr=`Alt-${lr}`),ur&&(lr=`Ctrl-${lr}`),hr&&(lr=`Meta-${lr}`),dr&&(lr=`Shift-${lr}`),lr}const keyboardShortcut=ar=>({editor:or,view:lr,tr:cr,dispatch:ur})=>{const dr=normalizeKeyName(ar).split(/-(?!$)/),hr=dr.find(mr=>!["Alt","Ctrl","Meta","Shift"].includes(mr)),fr=new KeyboardEvent("keydown",{key:hr==="Space"?" ":hr,altKey:dr.includes("Alt"),ctrlKey:dr.includes("Ctrl"),metaKey:dr.includes("Meta"),shiftKey:dr.includes("Shift"),bubbles:!0,cancelable:!0}),pr=or.captureTransaction(()=>{lr.someProp("handleKeyDown",mr=>mr(lr,fr))});return pr==null||pr.steps.forEach(mr=>{const gr=mr.map(cr.mapping);gr&&ur&&cr.maybeStep(gr)}),!0};function isNodeActive(ar,or,lr={}){const{from:cr,to:ur,empty:dr}=ar.selection,hr=or?getNodeType(or,ar.schema):null,fr=[];ar.doc.nodesBetween(cr,ur,(yr,vr)=>{if(yr.isText)return;const br=Math.max(cr,vr),Sr=Math.min(ur,vr+yr.nodeSize);fr.push({node:yr,from:br,to:Sr})});const pr=ur-cr,mr=fr.filter(yr=>hr?hr.name===yr.node.type.name:!0).filter(yr=>objectIncludes(yr.node.attrs,lr,{strict:!1}));return dr?!!mr.length:mr.reduce((yr,vr)=>yr+vr.to-vr.from,0)>=pr}const lift=(ar,or={})=>({state:lr,dispatch:cr})=>{const ur=getNodeType(ar,lr.schema);return isNodeActive(lr,ur,or)?lift$1(lr,cr):!1},liftEmptyBlock=()=>({state:ar,dispatch:or})=>liftEmptyBlock$1(ar,or),liftListItem=ar=>({state:or,dispatch:lr})=>{const cr=getNodeType(ar,or.schema);return liftListItem$1(cr)(or,lr)},newlineInCode=()=>({state:ar,dispatch:or})=>newlineInCode$1(ar,or);function getSchemaTypeNameByName(ar,or){return or.nodes[ar]?"node":or.marks[ar]?"mark":null}function deleteProps(ar,or){const lr=typeof or=="string"?[or]:or;return Object.keys(ar).reduce((cr,ur)=>(lr.includes(ur)||(cr[ur]=ar[ur]),cr),{})}const resetAttributes=(ar,or)=>({tr:lr,state:cr,dispatch:ur})=>{let dr=null,hr=null;const fr=getSchemaTypeNameByName(typeof ar=="string"?ar:ar.name,cr.schema);return fr?(fr==="node"&&(dr=getNodeType(ar,cr.schema)),fr==="mark"&&(hr=getMarkType(ar,cr.schema)),ur&&lr.selection.ranges.forEach(pr=>{cr.doc.nodesBetween(pr.$from.pos,pr.$to.pos,(mr,gr)=>{dr&&dr===mr.type&&lr.setNodeMarkup(gr,void 0,deleteProps(mr.attrs,or)),hr&&mr.marks.length&&mr.marks.forEach(yr=>{hr===yr.type&&lr.addMark(gr,gr+mr.nodeSize,hr.create(deleteProps(yr.attrs,or)))})})}),!0):!1},scrollIntoView=()=>({tr:ar,dispatch:or})=>(or&&ar.scrollIntoView(),!0),selectAll=()=>({tr:ar,dispatch:or})=>{if(or){const lr=new AllSelection(ar.doc);ar.setSelection(lr)}return!0},selectNodeBackward=()=>({state:ar,dispatch:or})=>selectNodeBackward$1(ar,or),selectNodeForward=()=>({state:ar,dispatch:or})=>selectNodeForward$1(ar,or),selectParentNode=()=>({state:ar,dispatch:or})=>selectParentNode$1(ar,or),selectTextblockEnd=()=>({state:ar,dispatch:or})=>selectTextblockEnd$1(ar,or),selectTextblockStart=()=>({state:ar,dispatch:or})=>selectTextblockStart$1(ar,or);function createDocument(ar,or,lr={},cr={}){return createNodeFromContent(ar,or,{slice:!1,parseOptions:lr,errorOnInvalidContent:cr.errorOnInvalidContent})}const setContent=(ar,or=!1,lr={},cr={})=>({editor:ur,tr:dr,dispatch:hr,commands:fr})=>{var pr,mr;const{doc:gr}=dr;if(lr.preserveWhitespace!=="full"){const yr=createDocument(ar,ur.schema,lr,{errorOnInvalidContent:(pr=cr.errorOnInvalidContent)!==null&&pr!==void 0?pr:ur.options.enableContentCheck});return hr&&dr.replaceWith(0,gr.content.size,yr).setMeta("preventUpdate",!or),!0}return hr&&dr.setMeta("preventUpdate",!or),fr.insertContentAt({from:0,to:gr.content.size},ar,{parseOptions:lr,errorOnInvalidContent:(mr=cr.errorOnInvalidContent)!==null&&mr!==void 0?mr:ur.options.enableContentCheck})};function getMarkAttributes(ar,or){const lr=getMarkType(or,ar.schema),{from:cr,to:ur,empty:dr}=ar.selection,hr=[];dr?(ar.storedMarks&&hr.push(...ar.storedMarks),hr.push(...ar.selection.$head.marks())):ar.doc.nodesBetween(cr,ur,pr=>{hr.push(...pr.marks)});const fr=hr.find(pr=>pr.type.name===lr.name);return fr?{...fr.attrs}:{}}function combineTransactionSteps(ar,or){const lr=new Transform(ar);return or.forEach(cr=>{cr.steps.forEach(ur=>{lr.step(ur)})}),lr}function defaultBlockAt(ar){for(let or=0;or<ar.edgeCount;or+=1){const{type:lr}=ar.edge(or);if(lr.isTextblock&&!lr.hasRequiredAttrs())return lr}return null}function findChildrenInRange(ar,or,lr){const cr=[];return ar.nodesBetween(or.from,or.to,(ur,dr)=>{lr(ur)&&cr.push({node:ur,pos:dr})}),cr}function findParentNodeClosestToPos(ar,or){for(let lr=ar.depth;lr>0;lr-=1){const cr=ar.node(lr);if(or(cr))return{pos:lr>0?ar.before(lr):0,start:ar.start(lr),depth:lr,node:cr}}}function findParentNode(ar){return or=>findParentNodeClosestToPos(or.$from,ar)}function getText(ar,or){const lr={from:0,to:ar.content.size};return getTextBetween(ar,lr,or)}function getNodeAttributes(ar,or){const lr=getNodeType(or,ar.schema),{from:cr,to:ur}=ar.selection,dr=[];ar.doc.nodesBetween(cr,ur,fr=>{dr.push(fr)});const hr=dr.reverse().find(fr=>fr.type.name===lr.name);return hr?{...hr.attrs}:{}}function getAttributes(ar,or){const lr=getSchemaTypeNameByName(typeof or=="string"?or:or.name,ar.schema);return lr==="node"?getNodeAttributes(ar,or):lr==="mark"?getMarkAttributes(ar,or):{}}function removeDuplicates(ar,or=JSON.stringify){const lr={};return ar.filter(cr=>{const ur=or(cr);return Object.prototype.hasOwnProperty.call(lr,ur)?!1:lr[ur]=!0})}function simplifyChangedRanges(ar){const or=removeDuplicates(ar);return or.length===1?or:or.filter((lr,cr)=>!or.filter((dr,hr)=>hr!==cr).some(dr=>lr.oldRange.from>=dr.oldRange.from&&lr.oldRange.to<=dr.oldRange.to&&lr.newRange.from>=dr.newRange.from&&lr.newRange.to<=dr.newRange.to))}function getChangedRanges(ar){const{mapping:or,steps:lr}=ar,cr=[];return or.maps.forEach((ur,dr)=>{const hr=[];if(ur.ranges.length)ur.forEach((fr,pr)=>{hr.push({from:fr,to:pr})});else{const{from:fr,to:pr}=lr[dr];if(fr===void 0||pr===void 0)return;hr.push({from:fr,to:pr})}hr.forEach(({from:fr,to:pr})=>{const mr=or.slice(dr).map(fr,-1),gr=or.slice(dr).map(pr),yr=or.invert().map(mr,-1),vr=or.invert().map(gr);cr.push({oldRange:{from:yr,to:vr},newRange:{from:mr,to:gr}})})}),simplifyChangedRanges(cr)}function getMarksBetween(ar,or,lr){const cr=[];return ar===or?lr.resolve(ar).marks().forEach(ur=>{const dr=lr.resolve(ar),hr=getMarkRange(dr,ur.type);hr&&cr.push({mark:ur,...hr})}):lr.nodesBetween(ar,or,(ur,dr)=>{!ur||(ur==null?void 0:ur.nodeSize)===void 0||cr.push(...ur.marks.map(hr=>({from:dr,to:dr+ur.nodeSize,mark:hr})))}),cr}function getSplittedAttributes(ar,or,lr){return Object.fromEntries(Object.entries(lr).filter(([cr])=>{const ur=ar.find(dr=>dr.type===or&&dr.name===cr);return ur?ur.attribute.keepOnSplit:!1}))}function isMarkActive(ar,or,lr={}){const{empty:cr,ranges:ur}=ar.selection,dr=or?getMarkType(or,ar.schema):null;if(cr)return!!(ar.storedMarks||ar.selection.$from.marks()).filter(yr=>dr?dr.name===yr.type.name:!0).find(yr=>objectIncludes(yr.attrs,lr,{strict:!1}));let hr=0;const fr=[];if(ur.forEach(({$from:yr,$to:vr})=>{const br=yr.pos,Sr=vr.pos;ar.doc.nodesBetween(br,Sr,(xr,Er)=>{if(!xr.isText&&!xr.marks.length)return;const wr=Math.max(br,Er),Ar=Math.min(Sr,Er+xr.nodeSize),Tr=Ar-wr;hr+=Tr,fr.push(...xr.marks.map(Cr=>({mark:Cr,from:wr,to:Ar})))})}),hr===0)return!1;const pr=fr.filter(yr=>dr?dr.name===yr.mark.type.name:!0).filter(yr=>objectIncludes(yr.mark.attrs,lr,{strict:!1})).reduce((yr,vr)=>yr+vr.to-vr.from,0),mr=fr.filter(yr=>dr?yr.mark.type!==dr&&yr.mark.type.excludes(dr):!0).reduce((yr,vr)=>yr+vr.to-vr.from,0);return(pr>0?pr+mr:pr)>=hr}function isActive(ar,or,lr={}){if(!or)return isNodeActive(ar,null,lr)||isMarkActive(ar,null,lr);const cr=getSchemaTypeNameByName(or,ar.schema);return cr==="node"?isNodeActive(ar,or,lr):cr==="mark"?isMarkActive(ar,or,lr):!1}function isList(ar,or){const{nodeExtensions:lr}=splitExtensions(or),cr=lr.find(hr=>hr.name===ar);if(!cr)return!1;const ur={name:cr.name,options:cr.options,storage:cr.storage},dr=callOrReturn(getExtensionField(cr,"group",ur));return typeof dr!="string"?!1:dr.split(" ").includes("list")}function isNodeEmpty(ar,{checkChildren:or=!0,ignoreWhitespace:lr=!1}={}){var cr;if(lr){if(ar.type.name==="hardBreak")return!0;if(ar.isText)return/^\s*$/m.test((cr=ar.text)!==null&&cr!==void 0?cr:"")}if(ar.isText)return!ar.text;if(ar.isAtom||ar.isLeaf)return!1;if(ar.content.childCount===0)return!0;if(or){let ur=!0;return ar.content.forEach(dr=>{ur!==!1&&(isNodeEmpty(dr,{ignoreWhitespace:lr,checkChildren:or})||(ur=!1))}),ur}return!1}function isNodeSelection(ar){return ar instanceof NodeSelection}function canSetMark(ar,or,lr){var cr;const{selection:ur}=or;let dr=null;if(isTextSelection(ur)&&(dr=ur.$cursor),dr){const fr=(cr=ar.storedMarks)!==null&&cr!==void 0?cr:dr.marks();return!!lr.isInSet(fr)||!fr.some(pr=>pr.type.excludes(lr))}const{ranges:hr}=ur;return hr.some(({$from:fr,$to:pr})=>{let mr=fr.depth===0?ar.doc.inlineContent&&ar.doc.type.allowsMarkType(lr):!1;return ar.doc.nodesBetween(fr.pos,pr.pos,(gr,yr,vr)=>{if(mr)return!1;if(gr.isInline){const br=!vr||vr.type.allowsMarkType(lr),Sr=!!lr.isInSet(gr.marks)||!gr.marks.some(xr=>xr.type.excludes(lr));mr=br&&Sr}return!mr}),mr})}const setMark=(ar,or={})=>({tr:lr,state:cr,dispatch:ur})=>{const{selection:dr}=lr,{empty:hr,ranges:fr}=dr,pr=getMarkType(ar,cr.schema);if(ur)if(hr){const mr=getMarkAttributes(cr,pr);lr.addStoredMark(pr.create({...mr,...or}))}else fr.forEach(mr=>{const gr=mr.$from.pos,yr=mr.$to.pos;cr.doc.nodesBetween(gr,yr,(vr,br)=>{const Sr=Math.max(br,gr),xr=Math.min(br+vr.nodeSize,yr);vr.marks.find(wr=>wr.type===pr)?vr.marks.forEach(wr=>{pr===wr.type&&lr.addMark(Sr,xr,pr.create({...wr.attrs,...or}))}):lr.addMark(Sr,xr,pr.create(or))})});return canSetMark(cr,lr,pr)},setMeta=(ar,or)=>({tr:lr})=>(lr.setMeta(ar,or),!0),setNode=(ar,or={})=>({state:lr,dispatch:cr,chain:ur})=>{const dr=getNodeType(ar,lr.schema);let hr;return lr.selection.$anchor.sameParent(lr.selection.$head)&&(hr=lr.selection.$anchor.parent.attrs),dr.isTextblock?ur().command(({commands:fr})=>setBlockType(dr,{...hr,...or})(lr)?!0:fr.clearNodes()).command(({state:fr})=>setBlockType(dr,{...hr,...or})(fr,cr)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=ar=>({tr:or,dispatch:lr})=>{if(lr){const{doc:cr}=or,ur=minMax(ar,0,cr.content.size),dr=NodeSelection.create(cr,ur);or.setSelection(dr)}return!0},setTextSelection=ar=>({tr:or,dispatch:lr})=>{if(lr){const{doc:cr}=or,{from:ur,to:dr}=typeof ar=="number"?{from:ar,to:ar}:ar,hr=TextSelection.atStart(cr).from,fr=TextSelection.atEnd(cr).to,pr=minMax(ur,hr,fr),mr=minMax(dr,hr,fr),gr=TextSelection.create(cr,pr,mr);or.setSelection(gr)}return!0},sinkListItem=ar=>({state:or,dispatch:lr})=>{const cr=getNodeType(ar,or.schema);return sinkListItem$1(cr)(or,lr)};function ensureMarks(ar,or){const lr=ar.storedMarks||ar.selection.$to.parentOffset&&ar.selection.$from.marks();if(lr){const cr=lr.filter(ur=>or==null?void 0:or.includes(ur.type.name));ar.tr.ensureMarks(cr)}}const splitBlock=({keepMarks:ar=!0}={})=>({tr:or,state:lr,dispatch:cr,editor:ur})=>{const{selection:dr,doc:hr}=or,{$from:fr,$to:pr}=dr,mr=ur.extensionManager.attributes,gr=getSplittedAttributes(mr,fr.node().type.name,fr.node().attrs);if(dr instanceof NodeSelection&&dr.node.isBlock)return!fr.parentOffset||!canSplit(hr,fr.pos)?!1:(cr&&(ar&&ensureMarks(lr,ur.extensionManager.splittableMarks),or.split(fr.pos).scrollIntoView()),!0);if(!fr.parent.isBlock)return!1;const yr=pr.parentOffset===pr.parent.content.size,vr=fr.depth===0?void 0:defaultBlockAt(fr.node(-1).contentMatchAt(fr.indexAfter(-1)));let br=yr&&vr?[{type:vr,attrs:gr}]:void 0,Sr=canSplit(or.doc,or.mapping.map(fr.pos),1,br);if(!br&&!Sr&&canSplit(or.doc,or.mapping.map(fr.pos),1,vr?[{type:vr}]:void 0)&&(Sr=!0,br=vr?[{type:vr,attrs:gr}]:void 0),cr){if(Sr&&(dr instanceof TextSelection&&or.deleteSelection(),or.split(or.mapping.map(fr.pos),1,br),vr&&!yr&&!fr.parentOffset&&fr.parent.type!==vr)){const xr=or.mapping.map(fr.before()),Er=or.doc.resolve(xr);fr.node(-1).canReplaceWith(Er.index(),Er.index()+1,vr)&&or.setNodeMarkup(or.mapping.map(fr.before()),vr)}ar&&ensureMarks(lr,ur.extensionManager.splittableMarks),or.scrollIntoView()}return Sr},splitListItem=(ar,or={})=>({tr:lr,state:cr,dispatch:ur,editor:dr})=>{var hr;const fr=getNodeType(ar,cr.schema),{$from:pr,$to:mr}=cr.selection,gr=cr.selection.node;if(gr&&gr.isBlock||pr.depth<2||!pr.sameParent(mr))return!1;const yr=pr.node(-1);if(yr.type!==fr)return!1;const vr=dr.extensionManager.attributes;if(pr.parent.content.size===0&&pr.node(-1).childCount===pr.indexAfter(-1)){if(pr.depth===2||pr.node(-3).type!==fr||pr.index(-2)!==pr.node(-2).childCount-1)return!1;if(ur){let wr=Fragment.empty;const Ar=pr.index(-1)?1:pr.index(-2)?2:3;for(let Nr=pr.depth-Ar;Nr>=pr.depth-3;Nr-=1)wr=Fragment.from(pr.node(Nr).copy(wr));const Tr=pr.indexAfter(-1)<pr.node(-2).childCount?1:pr.indexAfter(-2)<pr.node(-3).childCount?2:3,Cr={...getSplittedAttributes(vr,pr.node().type.name,pr.node().attrs),...or},kr=((hr=fr.contentMatch.defaultType)===null||hr===void 0?void 0:hr.createAndFill(Cr))||void 0;wr=wr.append(Fragment.from(fr.createAndFill(null,kr)||void 0));const Mr=pr.before(pr.depth-(Ar-1));lr.replace(Mr,pr.after(-Tr),new Slice(wr,4-Ar,0));let Rr=-1;lr.doc.nodesBetween(Mr,lr.doc.content.size,(Nr,_r)=>{if(Rr>-1)return!1;Nr.isTextblock&&Nr.content.size===0&&(Rr=_r+1)}),Rr>-1&&lr.setSelection(TextSelection.near(lr.doc.resolve(Rr))),lr.scrollIntoView()}return!0}const br=mr.pos===pr.end()?yr.contentMatchAt(0).defaultType:null,Sr={...getSplittedAttributes(vr,yr.type.name,yr.attrs),...or},xr={...getSplittedAttributes(vr,pr.node().type.name,pr.node().attrs),...or};lr.delete(pr.pos,mr.pos);const Er=br?[{type:fr,attrs:Sr},{type:br,attrs:xr}]:[{type:fr,attrs:Sr}];if(!canSplit(lr.doc,pr.pos,2))return!1;if(ur){const{selection:wr,storedMarks:Ar}=cr,{splittableMarks:Tr}=dr.extensionManager,Cr=Ar||wr.$to.parentOffset&&wr.$from.marks();if(lr.split(pr.pos,2,Er).scrollIntoView(),!Cr||!ur)return!0;const kr=Cr.filter(Mr=>Tr.includes(Mr.type.name));lr.ensureMarks(kr)}return!0},joinListBackwards=(ar,or)=>{const lr=findParentNode(hr=>hr.type===or)(ar.selection);if(!lr)return!0;const cr=ar.doc.resolve(Math.max(0,lr.pos-1)).before(lr.depth);if(cr===void 0)return!0;const ur=ar.doc.nodeAt(cr);return lr.node.type===(ur==null?void 0:ur.type)&&canJoin(ar.doc,lr.pos)&&ar.join(lr.pos),!0},joinListForwards=(ar,or)=>{const lr=findParentNode(hr=>hr.type===or)(ar.selection);if(!lr)return!0;const cr=ar.doc.resolve(lr.start).after(lr.depth);if(cr===void 0)return!0;const ur=ar.doc.nodeAt(cr);return lr.node.type===(ur==null?void 0:ur.type)&&canJoin(ar.doc,cr)&&ar.join(cr),!0},toggleList=(ar,or,lr,cr={})=>({editor:ur,tr:dr,state:hr,dispatch:fr,chain:pr,commands:mr,can:gr})=>{const{extensions:yr,splittableMarks:vr}=ur.extensionManager,br=getNodeType(ar,hr.schema),Sr=getNodeType(or,hr.schema),{selection:xr,storedMarks:Er}=hr,{$from:wr,$to:Ar}=xr,Tr=wr.blockRange(Ar),Cr=Er||xr.$to.parentOffset&&xr.$from.marks();if(!Tr)return!1;const kr=findParentNode(Mr=>isList(Mr.type.name,yr))(xr);if(Tr.depth>=1&&kr&&Tr.depth-kr.depth<=1){if(kr.node.type===br)return mr.liftListItem(Sr);if(isList(kr.node.type.name,yr)&&br.validContent(kr.node.content)&&fr)return pr().command(()=>(dr.setNodeMarkup(kr.pos,br),!0)).command(()=>joinListBackwards(dr,br)).command(()=>joinListForwards(dr,br)).run()}return!lr||!Cr||!fr?pr().command(()=>gr().wrapInList(br,cr)?!0:mr.clearNodes()).wrapInList(br,cr).command(()=>joinListBackwards(dr,br)).command(()=>joinListForwards(dr,br)).run():pr().command(()=>{const Mr=gr().wrapInList(br,cr),Rr=Cr.filter(Nr=>vr.includes(Nr.type.name));return dr.ensureMarks(Rr),Mr?!0:mr.clearNodes()}).wrapInList(br,cr).command(()=>joinListBackwards(dr,br)).command(()=>joinListForwards(dr,br)).run()},toggleMark=(ar,or={},lr={})=>({state:cr,commands:ur})=>{const{extendEmptyMarkRange:dr=!1}=lr,hr=getMarkType(ar,cr.schema);return isMarkActive(cr,hr,or)?ur.unsetMark(hr,{extendEmptyMarkRange:dr}):ur.setMark(hr,or)},toggleNode=(ar,or,lr={})=>({state:cr,commands:ur})=>{const dr=getNodeType(ar,cr.schema),hr=getNodeType(or,cr.schema),fr=isNodeActive(cr,dr,lr);let pr;return cr.selection.$anchor.sameParent(cr.selection.$head)&&(pr=cr.selection.$anchor.parent.attrs),fr?ur.setNode(hr,pr):ur.setNode(dr,{...pr,...lr})},toggleWrap=(ar,or={})=>({state:lr,commands:cr})=>{const ur=getNodeType(ar,lr.schema);return isNodeActive(lr,ur,or)?cr.lift(ur):cr.wrapIn(ur,or)},undoInputRule=()=>({state:ar,dispatch:or})=>{const lr=ar.plugins;for(let cr=0;cr<lr.length;cr+=1){const ur=lr[cr];let dr;if(ur.spec.isInputRules&&(dr=ur.getState(ar))){if(or){const hr=ar.tr,fr=dr.transform;for(let pr=fr.steps.length-1;pr>=0;pr-=1)hr.step(fr.steps[pr].invert(fr.docs[pr]));if(dr.text){const pr=hr.doc.resolve(dr.from).marks();hr.replaceWith(dr.from,dr.to,ar.schema.text(dr.text,pr))}else hr.delete(dr.from,dr.to)}return!0}}return!1},unsetAllMarks=()=>({tr:ar,dispatch:or})=>{const{selection:lr}=ar,{empty:cr,ranges:ur}=lr;return cr||or&&ur.forEach(dr=>{ar.removeMark(dr.$from.pos,dr.$to.pos)}),!0},unsetMark=(ar,or={})=>({tr:lr,state:cr,dispatch:ur})=>{var dr;const{extendEmptyMarkRange:hr=!1}=or,{selection:fr}=lr,pr=getMarkType(ar,cr.schema),{$from:mr,empty:gr,ranges:yr}=fr;if(!ur)return!0;if(gr&&hr){let{from:vr,to:br}=fr;const Sr=(dr=mr.marks().find(Er=>Er.type===pr))===null||dr===void 0?void 0:dr.attrs,xr=getMarkRange(mr,pr,Sr);xr&&(vr=xr.from,br=xr.to),lr.removeMark(vr,br,pr)}else yr.forEach(vr=>{lr.removeMark(vr.$from.pos,vr.$to.pos,pr)});return lr.removeStoredMark(pr),!0},updateAttributes=(ar,or={})=>({tr:lr,state:cr,dispatch:ur})=>{let dr=null,hr=null;const fr=getSchemaTypeNameByName(typeof ar=="string"?ar:ar.name,cr.schema);return fr?(fr==="node"&&(dr=getNodeType(ar,cr.schema)),fr==="mark"&&(hr=getMarkType(ar,cr.schema)),ur&&lr.selection.ranges.forEach(pr=>{const mr=pr.$from.pos,gr=pr.$to.pos;let yr,vr,br,Sr;lr.selection.empty?cr.doc.nodesBetween(mr,gr,(xr,Er)=>{dr&&dr===xr.type&&(br=Math.max(Er,mr),Sr=Math.min(Er+xr.nodeSize,gr),yr=Er,vr=xr)}):cr.doc.nodesBetween(mr,gr,(xr,Er)=>{Er<mr&&dr&&dr===xr.type&&(br=Math.max(Er,mr),Sr=Math.min(Er+xr.nodeSize,gr),yr=Er,vr=xr),Er>=mr&&Er<=gr&&(dr&&dr===xr.type&&lr.setNodeMarkup(Er,void 0,{...xr.attrs,...or}),hr&&xr.marks.length&&xr.marks.forEach(wr=>{if(hr===wr.type){const Ar=Math.max(Er,mr),Tr=Math.min(Er+xr.nodeSize,gr);lr.addMark(Ar,Tr,hr.create({...wr.attrs,...or}))}}))}),vr&&(yr!==void 0&&lr.setNodeMarkup(yr,void 0,{...vr.attrs,...or}),hr&&vr.marks.length&&vr.marks.forEach(xr=>{hr===xr.type&&lr.addMark(br,Sr,hr.create({...xr.attrs,...or}))}))}),!0):!1},wrapIn=(ar,or={})=>({state:lr,dispatch:cr})=>{const ur=getNodeType(ar,lr.schema);return wrapIn$1(ur,or)(lr,cr)},wrapInList=(ar,or={})=>({state:lr,dispatch:cr})=>{const ur=getNodeType(ar,lr.schema);return wrapInList$1(ur,or)(lr,cr)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,cut,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first,focus,forEach,insertContent,insertContentAt,joinBackward,joinDown,joinForward,joinItemBackward,joinItemForward,joinTextblockBackward,joinTextblockForward,joinUp,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(ar,or,lr,cr)=>{this.editor.emit("drop",{editor:this.editor,event:or,slice:lr,moved:cr})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),focusEventsPluginKey=new PluginKey("focusEvents"),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:ar}=this;return[new Plugin({key:focusEventsPluginKey,props:{handleDOMEvents:{focus:(or,lr)=>{ar.isFocused=!0;const cr=ar.state.tr.setMeta("focus",{event:lr}).setMeta("addToHistory",!1);return or.dispatch(cr),!1},blur:(or,lr)=>{ar.isFocused=!1;const cr=ar.state.tr.setMeta("blur",{event:lr}).setMeta("addToHistory",!1);return or.dispatch(cr),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const ar=()=>this.editor.commands.first(({commands:hr})=>[()=>hr.undoInputRule(),()=>hr.command(({tr:fr})=>{const{selection:pr,doc:mr}=fr,{empty:gr,$anchor:yr}=pr,{pos:vr,parent:br}=yr,Sr=yr.parent.isTextblock&&vr>0?fr.doc.resolve(vr-1):yr,xr=Sr.parent.type.spec.isolating,Er=yr.pos-yr.parentOffset,wr=xr&&Sr.parent.childCount===1?Er===yr.pos:Selection.atStart(mr).from===vr;return!gr||!br.type.isTextblock||br.textContent.length||!wr||wr&&yr.parent.type.name==="paragraph"?!1:hr.clearNodes()}),()=>hr.deleteSelection(),()=>hr.joinBackward(),()=>hr.selectNodeBackward()]),or=()=>this.editor.commands.first(({commands:hr})=>[()=>hr.deleteSelection(),()=>hr.deleteCurrentNode(),()=>hr.joinForward(),()=>hr.selectNodeForward()]),cr={Enter:()=>this.editor.commands.first(({commands:hr})=>[()=>hr.newlineInCode(),()=>hr.createParagraphNear(),()=>hr.liftEmptyBlock(),()=>hr.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:ar,"Mod-Backspace":ar,"Shift-Backspace":ar,Delete:or,"Mod-Delete":or,"Mod-a":()=>this.editor.commands.selectAll()},ur={...cr},dr={...cr,"Ctrl-h":ar,"Alt-Backspace":ar,"Ctrl-d":or,"Ctrl-Alt-Backspace":or,"Alt-Delete":or,"Alt-d":or,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?dr:ur},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(ar,or,lr)=>{if(ar.some(xr=>xr.getMeta("composition")))return;const cr=ar.some(xr=>xr.docChanged)&&!or.doc.eq(lr.doc),ur=ar.some(xr=>xr.getMeta("preventClearDocument"));if(!cr||ur)return;const{empty:dr,from:hr,to:fr}=or.selection,pr=Selection.atStart(or.doc).from,mr=Selection.atEnd(or.doc).to;if(dr||!(hr===pr&&fr===mr)||!isNodeEmpty(lr.doc))return;const vr=lr.tr,br=createChainableState({state:lr,transaction:vr}),{commands:Sr}=new CommandManager({editor:this.editor,state:br});if(Sr.clearNodes(),!!vr.steps.length)return vr}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(ar,or,lr)=>{this.editor.emit("paste",{editor:this.editor,event:or,slice:lr})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class NodePos{get name(){return this.node.type.name}constructor(or,lr,cr=!1,ur=null){this.currentNode=null,this.actualDepth=null,this.isBlock=cr,this.resolvedPos=or,this.editor=lr,this.currentNode=ur}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var or;return(or=this.actualDepth)!==null&&or!==void 0?or:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(or){let lr=this.from,cr=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}lr=this.from+1,cr=this.to-1}this.editor.commands.insertContentAt({from:lr,to:cr},or)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const or=this.resolvedPos.start(this.resolvedPos.depth-1),lr=this.resolvedPos.doc.resolve(or);return new NodePos(lr,this.editor)}get before(){let or=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return or.depth!==this.depth&&(or=this.resolvedPos.doc.resolve(this.from-3)),new NodePos(or,this.editor)}get after(){let or=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return or.depth!==this.depth&&(or=this.resolvedPos.doc.resolve(this.to+3)),new NodePos(or,this.editor)}get children(){const or=[];return this.node.content.forEach((lr,cr)=>{const ur=lr.isBlock&&!lr.isTextblock,dr=lr.isAtom&&!lr.isText,hr=this.pos+cr+(dr?0:1),fr=this.resolvedPos.doc.resolve(hr);if(!ur&&fr.depth<=this.depth)return;const pr=new NodePos(fr,this.editor,ur,ur?lr:null);ur&&(pr.actualDepth=this.depth+1),or.push(new NodePos(fr,this.editor,ur,ur?lr:null))}),or}get firstChild(){return this.children[0]||null}get lastChild(){const or=this.children;return or[or.length-1]||null}closest(or,lr={}){let cr=null,ur=this.parent;for(;ur&&!cr;){if(ur.node.type.name===or)if(Object.keys(lr).length>0){const dr=ur.node.attrs,hr=Object.keys(lr);for(let fr=0;fr<hr.length;fr+=1){const pr=hr[fr];if(dr[pr]!==lr[pr])break}}else cr=ur;ur=ur.parent}return cr}querySelector(or,lr={}){return this.querySelectorAll(or,lr,!0)[0]||null}querySelectorAll(or,lr={},cr=!1){let ur=[];if(!this.children||this.children.length===0)return ur;const dr=Object.keys(lr);return this.children.forEach(hr=>{cr&&ur.length>0||(hr.node.type.name===or&&dr.every(pr=>lr[pr]===hr.node.attrs[pr])&&ur.push(hr),!(cr&&ur.length>0)&&(ur=ur.concat(hr.querySelectorAll(or,lr,cr))))}),ur}setAttribute(or){const{tr:lr}=this.editor.state;lr.setNodeMarkup(this.from,void 0,{...this.node.attrs,...or}),this.editor.view.dispatch(lr)}}const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(ar,or,lr){const cr=document.querySelector("style[data-tiptap-style]");if(cr!==null)return cr;const ur=document.createElement("style");return or&&ur.setAttribute("nonce",or),ur.setAttribute("data-tiptap-style",""),ur.innerHTML=ar,document.getElementsByTagName("head")[0].appendChild(ur),ur}let Editor$1=class extends EventEmitter{constructor(or={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:lr})=>{throw lr},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(or),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:lr,slice:cr,moved:ur})=>this.options.onDrop(lr,cr,ur)),this.on("paste",({event:lr,slice:cr})=>this.options.onPaste(lr,cr)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(or={}){this.options={...this.options,...or},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(or,lr=!0){this.setOptions({editable:or}),lr&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(or,lr){const cr=isFunction(lr)?lr(or,[...this.state.plugins]):[...this.state.plugins,or],ur=this.state.reconfigure({plugins:cr});return this.view.updateState(ur),ur}unregisterPlugin(or){if(this.isDestroyed)return;const lr=this.state.plugins;let cr=lr;if([].concat(or).forEach(dr=>{const hr=typeof dr=="string"?`${dr}$`:dr.key;cr=cr.filter(fr=>!fr.key.startsWith(hr))}),lr.length===cr.length)return;const ur=this.state.reconfigure({plugins:cr});return this.view.updateState(ur),ur}createExtensionManager(){var or,lr;const ur=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(lr=(or=this.options.coreExtensionOptions)===null||or===void 0?void 0:or.clipboardTextSerializer)===null||lr===void 0?void 0:lr.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste].filter(dr=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[dr.name]!==!1:!0):[],...this.options.extensions].filter(dr=>["extension","node","mark"].includes(dr==null?void 0:dr.type));this.extensionManager=new ExtensionManager(ur,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var or;let lr;try{lr=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(hr){if(!(hr instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(hr.message))throw hr;this.emit("contentError",{editor:this,error:hr,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(fr=>fr.name!=="collaboration"),this.createExtensionManager()}}),lr=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const cr=resolveFocusPosition(lr,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(or=this.options.editorProps)===null||or===void 0?void 0:or.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:lr,selection:cr||void 0})});const ur=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(ur),this.createNodeViews(),this.prependClass();const dr=this.view.dom;dr.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(or){this.isCapturingTransaction=!0,or(),this.isCapturingTransaction=!1;const lr=this.capturedTransaction;return this.capturedTransaction=null,lr}dispatchTransaction(or){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=or;return}or.steps.forEach(hr=>{var fr;return(fr=this.capturedTransaction)===null||fr===void 0?void 0:fr.step(hr)});return}const lr=this.state.apply(or),cr=!this.state.selection.eq(lr.selection);this.emit("beforeTransaction",{editor:this,transaction:or,nextState:lr}),this.view.updateState(lr),this.emit("transaction",{editor:this,transaction:or}),cr&&this.emit("selectionUpdate",{editor:this,transaction:or});const ur=or.getMeta("focus"),dr=or.getMeta("blur");ur&&this.emit("focus",{editor:this,event:ur.event,transaction:or}),dr&&this.emit("blur",{editor:this,event:dr.event,transaction:or}),!(!or.docChanged||or.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:or})}getAttributes(or){return getAttributes(this.state,or)}isActive(or,lr){const cr=typeof or=="string"?or:null,ur=typeof or=="string"?lr:or;return isActive(this.state,cr,ur)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(or){const{blockSeparator:lr=`

`,textSerializers:cr={}}=or||{};return getText(this.state.doc,{blockSeparator:lr,textSerializers:{...getTextSerializersFromSchema(this.schema),...cr}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const or=this.view.dom;or&&or.editor&&delete or.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var or;return!(!((or=this.view)===null||or===void 0)&&or.docView)}$node(or,lr){var cr;return((cr=this.$doc)===null||cr===void 0?void 0:cr.querySelector(or,lr))||null}$nodes(or,lr){var cr;return((cr=this.$doc)===null||cr===void 0?void 0:cr.querySelectorAll(or,lr))||null}$pos(or){const lr=this.state.doc.resolve(or);return new NodePos(lr,this)}get $doc(){return this.$pos(0)}};function markInputRule(ar){return new InputRule({find:ar.find,handler:({state:or,range:lr,match:cr})=>{const ur=callOrReturn(ar.getAttributes,void 0,cr);if(ur===!1||ur===null)return null;const{tr:dr}=or,hr=cr[cr.length-1],fr=cr[0];if(hr){const pr=fr.search(/\S/),mr=lr.from+fr.indexOf(hr),gr=mr+hr.length;if(getMarksBetween(lr.from,lr.to,or.doc).filter(br=>br.mark.type.excluded.find(xr=>xr===ar.type&&xr!==br.mark.type)).filter(br=>br.to>mr).length)return null;gr<lr.to&&dr.delete(gr,lr.to),mr>lr.from&&dr.delete(lr.from+pr,mr);const vr=lr.from+pr+hr.length;dr.addMark(lr.from+pr,vr,ar.type.create(ur||{})),dr.removeStoredMark(ar.type)}}})}function nodeInputRule(ar){return new InputRule({find:ar.find,handler:({state:or,range:lr,match:cr})=>{const ur=callOrReturn(ar.getAttributes,void 0,cr)||{},{tr:dr}=or,hr=lr.from;let fr=lr.to;const pr=ar.type.create(ur);if(cr[1]){const mr=cr[0].lastIndexOf(cr[1]);let gr=hr+mr;gr>fr?gr=fr:fr=gr+cr[1].length;const yr=cr[0][cr[0].length-1];dr.insertText(yr,hr+cr[0].length-1),dr.replaceWith(gr,fr,pr)}else if(cr[0]){const mr=ar.type.isInline?hr:hr-1;dr.insert(mr,ar.type.create(ur)).delete(dr.mapping.map(hr),dr.mapping.map(fr))}dr.scrollIntoView()}})}function textblockTypeInputRule(ar){return new InputRule({find:ar.find,handler:({state:or,range:lr,match:cr})=>{const ur=or.doc.resolve(lr.from),dr=callOrReturn(ar.getAttributes,void 0,cr)||{};if(!ur.node(-1).canReplaceWith(ur.index(-1),ur.indexAfter(-1),ar.type))return null;or.tr.delete(lr.from,lr.to).setBlockType(lr.from,lr.from,ar.type,dr)}})}function wrappingInputRule(ar){return new InputRule({find:ar.find,handler:({state:or,range:lr,match:cr,chain:ur})=>{const dr=callOrReturn(ar.getAttributes,void 0,cr)||{},hr=or.tr.delete(lr.from,lr.to),pr=hr.doc.resolve(lr.from).blockRange(),mr=pr&&findWrapping(pr,ar.type,dr);if(!mr)return null;if(hr.wrap(pr,mr),ar.keepMarks&&ar.editor){const{selection:yr,storedMarks:vr}=or,{splittableMarks:br}=ar.editor.extensionManager,Sr=vr||yr.$to.parentOffset&&yr.$from.marks();if(Sr){const xr=Sr.filter(Er=>br.includes(Er.type.name));hr.ensureMarks(xr)}}if(ar.keepAttributes){const yr=ar.type.name==="bulletList"||ar.type.name==="orderedList"?"listItem":"taskList";ur().updateAttributes(yr,dr).run()}const gr=hr.doc.resolve(lr.from-1).nodeBefore;gr&&gr.type===ar.type&&canJoin(hr.doc,lr.from-1)&&(!ar.joinPredicate||ar.joinPredicate(cr,gr))&&hr.join(lr.from-1)}})}class Node{constructor(or={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...or},this.name=this.config.name,or.defaultOptions&&Object.keys(or.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(or={}){return new Node(or)}configure(or={}){const lr=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,or)});return lr.name=this.name,lr.parent=this.parent,lr}extend(or={}){const lr=new Node(or);return lr.parent=this,this.child=lr,lr.name=or.name?or.name:lr.parent.name,or.defaultOptions&&Object.keys(or.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${lr.name}".`),lr.options=callOrReturn(getExtensionField(lr,"addOptions",{name:lr.name})),lr.storage=callOrReturn(getExtensionField(lr,"addStorage",{name:lr.name,options:lr.options})),lr}}function markPasteRule(ar){return new PasteRule({find:ar.find,handler:({state:or,range:lr,match:cr,pasteEvent:ur})=>{const dr=callOrReturn(ar.getAttributes,void 0,cr,ur);if(dr===!1||dr===null)return null;const{tr:hr}=or,fr=cr[cr.length-1],pr=cr[0];let mr=lr.to;if(fr){const gr=pr.search(/\S/),yr=lr.from+pr.indexOf(fr),vr=yr+fr.length;if(getMarksBetween(lr.from,lr.to,or.doc).filter(Sr=>Sr.mark.type.excluded.find(Er=>Er===ar.type&&Er!==Sr.mark.type)).filter(Sr=>Sr.to>yr).length)return null;vr<lr.to&&hr.delete(vr,lr.to),yr>lr.from&&hr.delete(lr.from+gr,yr),mr=lr.from+gr+fr.length,hr.addMark(lr.from+gr,mr,ar.type.create(dr||{})),hr.removeStoredMark(ar.type)}}})}function useDebouncedRef(ar){return customRef((or,lr)=>({get(){return or(),ar},set(cr){ar=cr,requestAnimationFrame(()=>{requestAnimationFrame(()=>{lr()})})}}))}class Editor extends Editor$1{constructor(or={}){return super(or),this.contentComponent=null,this.appContext=null,this.reactiveState=useDebouncedRef(this.view.state),this.reactiveExtensionStorage=useDebouncedRef(this.extensionStorage),this.on("beforeTransaction",({nextState:lr})=>{this.reactiveState.value=lr,this.reactiveExtensionStorage.value=this.extensionStorage}),markRaw(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(or,lr){const cr=super.registerPlugin(or,lr);return this.reactiveState&&(this.reactiveState.value=cr),cr}unregisterPlugin(or){const lr=super.unregisterPlugin(or);return this.reactiveState&&lr&&(this.reactiveState.value=lr),lr}}const EditorContent=defineComponent({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(ar){const or=ref(),lr=getCurrentInstance();return watchEffect(()=>{const cr=ar.editor;cr&&cr.options.element&&or.value&&nextTick(()=>{if(!or.value||!cr.options.element.firstChild)return;const ur=unref(or.value);or.value.append(...cr.options.element.childNodes),cr.contentComponent=lr.ctx._,lr&&(cr.appContext={...lr.appContext,provides:lr.provides}),cr.setOptions({element:ur}),cr.createNodeViews()})}),onBeforeUnmount(()=>{const cr=ar.editor;cr&&(cr.contentComponent=null,cr.appContext=null)}),{rootEl:or}},render(){return h$1("div",{ref:ar=>{this.rootEl=ar}})}}),inputRegex$7=/^\s*>\s$/,Blockquote=Node.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:ar}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setBlockquote:()=>({commands:ar})=>ar.wrapIn(this.name),toggleBlockquote:()=>({commands:ar})=>ar.toggleWrap(this.name),unsetBlockquote:()=>({commands:ar})=>ar.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$7,type:this.type})]}}),starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:ar=>ar.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:ar=>ar.type.name===this.name},{style:"font-weight",getAttrs:ar=>/^(bold(er)?|[5-9]\d{2,})$/.test(ar)&&null}]},renderHTML({HTMLAttributes:ar}){return["strong",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setBold:()=>({commands:ar})=>ar.setMark(this.name),toggleBold:()=>({commands:ar})=>ar.toggleMark(this.name),unsetBold:()=>({commands:ar})=>ar.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItemName$1="listItem",TextStyleName$1="textStyle",inputRegex$6=/^\s*([-+*])\s$/,BulletList=Node.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:ar}){return["ul",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{toggleBulletList:()=>({commands:ar,chain:or})=>this.options.keepAttributes?or().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName$1,this.editor.getAttributes(TextStyleName$1)).run():ar.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let ar=wrappingInputRule({find:inputRegex$6,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(ar=wrappingInputRule({find:inputRegex$6,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyleName$1),editor:this.editor})),[ar]}}),inputRegex$5=/(^|[^`])`([^`]+)`(?!`)/,pasteRegex$2=/(^|[^`])`([^`]+)`(?!`)/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:ar}){return["code",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setCode:()=>({commands:ar})=>ar.setMark(this.name),toggleCode:()=>({commands:ar})=>ar.toggleMark(this.name),unsetCode:()=>({commands:ar})=>ar.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$5,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:ar=>{var or;const{languageClassPrefix:lr}=this.options,dr=[...((or=ar.firstElementChild)===null||or===void 0?void 0:or.classList)||[]].filter(hr=>hr.startsWith(lr)).map(hr=>hr.replace(lr,""))[0];return dr||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:ar,HTMLAttributes:or}){return["pre",mergeAttributes(this.options.HTMLAttributes,or),["code",{class:ar.attrs.language?this.options.languageClassPrefix+ar.attrs.language:null},0]]},addCommands(){return{setCodeBlock:ar=>({commands:or})=>or.setNode(this.name,ar),toggleCodeBlock:ar=>({commands:or})=>or.toggleNode(this.name,"paragraph",ar)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:ar,$anchor:or}=this.editor.state.selection,lr=or.pos===1;return!ar||or.parent.type.name!==this.name?!1:lr||!or.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:ar})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:or}=ar,{selection:lr}=or,{$from:cr,empty:ur}=lr;if(!ur||cr.parent.type!==this.type)return!1;const dr=cr.parentOffset===cr.parent.nodeSize-2,hr=cr.parent.textContent.endsWith(`

`);return!dr||!hr?!1:ar.chain().command(({tr:fr})=>(fr.delete(cr.pos-2,cr.pos),!0)).exitCode().run()},ArrowDown:({editor:ar})=>{if(!this.options.exitOnArrowDown)return!1;const{state:or}=ar,{selection:lr,doc:cr}=or,{$from:ur,empty:dr}=lr;if(!dr||ur.parent.type!==this.type||!(ur.parentOffset===ur.parent.nodeSize-2))return!1;const fr=ur.after();return fr===void 0?!1:cr.nodeAt(fr)?ar.commands.command(({tr:mr})=>(mr.setSelection(Selection.near(cr.resolve(fr))),!0)):ar.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:ar=>({language:ar[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:ar=>({language:ar[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(ar,or)=>{if(!or.clipboardData||this.editor.isActive(this.type.name))return!1;const lr=or.clipboardData.getData("text/plain"),cr=or.clipboardData.getData("vscode-editor-data"),ur=cr?JSON.parse(cr):void 0,dr=ur==null?void 0:ur.mode;if(!lr||!dr)return!1;const{tr:hr,schema:fr}=ar.state,pr=fr.text(lr.replace(/\r\n?/g,`
`));return hr.replaceSelectionWith(this.type.create({language:dr},pr)),hr.selection.$from.parent.type!==this.type&&hr.setSelection(TextSelection.near(hr.doc.resolve(Math.max(0,hr.selection.from-2)))),hr.setMeta("paste",!0),ar.dispatch(hr),!0}}})]}}),Document=Node.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(ar={}){return new Plugin({view(or){return new DropCursorView(or,ar)}})}class DropCursorView{constructor(or,lr){var cr;this.editorView=or,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(cr=lr.width)!==null&&cr!==void 0?cr:1,this.color=lr.color===!1?void 0:lr.color||"black",this.class=lr.class,this.handlers=["dragover","dragend","drop","dragleave"].map(ur=>{let dr=hr=>{this[ur](hr)};return or.dom.addEventListener(ur,dr),{name:ur,handler:dr}})}destroy(){this.handlers.forEach(({name:or,handler:lr})=>this.editorView.dom.removeEventListener(or,lr))}update(or,lr){this.cursorPos!=null&&lr.doc!=or.state.doc&&(this.cursorPos>or.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(or){or!=this.cursorPos&&(this.cursorPos=or,or==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let or=this.editorView.state.doc.resolve(this.cursorPos),lr=!or.parent.inlineContent,cr,ur=this.editorView.dom,dr=ur.getBoundingClientRect(),hr=dr.width/ur.offsetWidth,fr=dr.height/ur.offsetHeight;if(lr){let yr=or.nodeBefore,vr=or.nodeAfter;if(yr||vr){let br=this.editorView.nodeDOM(this.cursorPos-(yr?yr.nodeSize:0));if(br){let Sr=br.getBoundingClientRect(),xr=yr?Sr.bottom:Sr.top;yr&&vr&&(xr=(xr+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let Er=this.width/2*fr;cr={left:Sr.left,right:Sr.right,top:xr-Er,bottom:xr+Er}}}}if(!cr){let yr=this.editorView.coordsAtPos(this.cursorPos),vr=this.width/2*hr;cr={left:yr.left-vr,right:yr.left+vr,top:yr.top,bottom:yr.bottom}}let pr=this.editorView.dom.offsetParent;this.element||(this.element=pr.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",lr),this.element.classList.toggle("prosemirror-dropcursor-inline",!lr);let mr,gr;if(!pr||pr==document.body&&getComputedStyle(pr).position=="static")mr=-pageXOffset,gr=-pageYOffset;else{let yr=pr.getBoundingClientRect(),vr=yr.width/pr.offsetWidth,br=yr.height/pr.offsetHeight;mr=yr.left-pr.scrollLeft*vr,gr=yr.top-pr.scrollTop*br}this.element.style.left=(cr.left-mr)/hr+"px",this.element.style.top=(cr.top-gr)/fr+"px",this.element.style.width=(cr.right-cr.left)/hr+"px",this.element.style.height=(cr.bottom-cr.top)/fr+"px"}scheduleRemoval(or){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),or)}dragover(or){if(!this.editorView.editable)return;let lr=this.editorView.posAtCoords({left:or.clientX,top:or.clientY}),cr=lr&&lr.inside>=0&&this.editorView.state.doc.nodeAt(lr.inside),ur=cr&&cr.type.spec.disableDropCursor,dr=typeof ur=="function"?ur(this.editorView,lr,or):ur;if(lr&&!dr){let hr=lr.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let fr=dropPoint(this.editorView.state.doc,hr,this.editorView.dragging.slice);fr!=null&&(hr=fr)}this.setCursor(hr),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(or){this.editorView.dom.contains(or.relatedTarget)||this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection{constructor(or){super(or,or)}map(or,lr){let cr=or.resolve(lr.map(this.head));return GapCursor.valid(cr)?new GapCursor(cr):Selection.near(cr)}content(){return Slice.empty}eq(or){return or instanceof GapCursor&&or.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(or,lr){if(typeof lr.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(or.resolve(lr.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(or){let lr=or.parent;if(lr.isTextblock||!closedBefore(or)||!closedAfter(or))return!1;let cr=lr.type.spec.allowGapCursor;if(cr!=null)return cr;let ur=lr.contentMatchAt(or.index()).defaultType;return ur&&ur.isTextblock}static findGapCursorFrom(or,lr,cr=!1){e:for(;;){if(!cr&&GapCursor.valid(or))return or;let ur=or.pos,dr=null;for(let hr=or.depth;;hr--){let fr=or.node(hr);if(lr>0?or.indexAfter(hr)<fr.childCount:or.index(hr)>0){dr=fr.child(lr>0?or.indexAfter(hr):or.index(hr)-1);break}else if(hr==0)return null;ur+=lr;let pr=or.doc.resolve(ur);if(GapCursor.valid(pr))return pr}for(;;){let hr=lr>0?dr.firstChild:dr.lastChild;if(!hr){if(dr.isAtom&&!dr.isText&&!NodeSelection.isSelectable(dr)){or=or.doc.resolve(ur+dr.nodeSize*lr),cr=!1;continue e}break}dr=hr,ur+=lr;let fr=or.doc.resolve(ur);if(GapCursor.valid(fr))return fr}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(or){this.pos=or}map(or){return new GapBookmark(or.map(this.pos))}resolve(or){let lr=or.resolve(this.pos);return GapCursor.valid(lr)?new GapCursor(lr):Selection.near(lr)}}function closedBefore(ar){for(let or=ar.depth;or>=0;or--){let lr=ar.index(or),cr=ar.node(or);if(lr==0){if(cr.type.spec.isolating)return!0;continue}for(let ur=cr.child(lr-1);;ur=ur.lastChild){if(ur.childCount==0&&!ur.inlineContent||ur.isAtom||ur.type.spec.isolating)return!0;if(ur.inlineContent)return!1}}return!0}function closedAfter(ar){for(let or=ar.depth;or>=0;or--){let lr=ar.indexAfter(or),cr=ar.node(or);if(lr==cr.childCount){if(cr.type.spec.isolating)return!0;continue}for(let ur=cr.child(lr);;ur=ur.firstChild){if(ur.childCount==0&&!ur.inlineContent||ur.isAtom||ur.type.spec.isolating)return!0;if(ur.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(ar,or,lr){return or.pos==lr.pos&&GapCursor.valid(lr)?new GapCursor(lr):null},handleClick,handleKeyDown,handleDOMEvents:{beforeinput}}})}const handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1)});function arrow(ar,or){const lr=ar=="vert"?or>0?"down":"up":or>0?"right":"left";return function(cr,ur,dr){let hr=cr.selection,fr=or>0?hr.$to:hr.$from,pr=hr.empty;if(hr instanceof TextSelection){if(!dr.endOfTextblock(lr)||fr.depth==0)return!1;pr=!1,fr=cr.doc.resolve(or>0?fr.after():fr.before())}let mr=GapCursor.findGapCursorFrom(fr,or,pr);return mr?(ur&&ur(cr.tr.setSelection(new GapCursor(mr))),!0):!1}}function handleClick(ar,or,lr){if(!ar||!ar.editable)return!1;let cr=ar.state.doc.resolve(or);if(!GapCursor.valid(cr))return!1;let ur=ar.posAtCoords({left:lr.clientX,top:lr.clientY});return ur&&ur.inside>-1&&NodeSelection.isSelectable(ar.state.doc.nodeAt(ur.inside))?!1:(ar.dispatch(ar.state.tr.setSelection(new GapCursor(cr))),!0)}function beforeinput(ar,or){if(or.inputType!="insertCompositionText"||!(ar.state.selection instanceof GapCursor))return!1;let{$from:lr}=ar.state.selection,cr=lr.parent.contentMatchAt(lr.index()).findWrapping(ar.state.schema.nodes.text);if(!cr)return!1;let ur=Fragment.empty;for(let hr=cr.length-1;hr>=0;hr--)ur=Fragment.from(cr[hr].createAndFill(null,ur));let dr=ar.state.tr.replace(lr.pos,lr.pos,new Slice(ur,0,0));return dr.setSelection(TextSelection.near(dr.doc.resolve(lr.pos+1))),ar.dispatch(dr),!1}function drawGapCursor(ar){if(!(ar.selection instanceof GapCursor))return null;let or=document.createElement("div");return or.className="ProseMirror-gapcursor",DecorationSet.create(ar.doc,[Decoration.widget(ar.selection.head,or,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(ar){var or;const lr={name:ar.name,options:ar.options,storage:ar.storage};return{allowGapCursor:(or=callOrReturn(getExtensionField(ar,"allowGapCursor",lr)))!==null&&or!==void 0?or:null}}}),HardBreak=Node.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:ar}){return["br",mergeAttributes(this.options.HTMLAttributes,ar)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:ar,chain:or,state:lr,editor:cr})=>ar.first([()=>ar.exitCode(),()=>ar.command(()=>{const{selection:ur,storedMarks:dr}=lr;if(ur.$from.parent.type.spec.isolating)return!1;const{keepMarks:hr}=this.options,{splittableMarks:fr}=cr.extensionManager,pr=dr||ur.$to.parentOffset&&ur.$from.marks();return or().insertContent({type:this.name}).command(({tr:mr,dispatch:gr})=>{if(gr&&pr&&hr){const yr=pr.filter(vr=>fr.includes(vr.type.name));mr.ensureMarks(yr)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(ar=>({tag:`h${ar}`,attrs:{level:ar}}))},renderHTML({node:ar,HTMLAttributes:or}){return[`h${this.options.levels.includes(ar.attrs.level)?ar.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,or),0]},addCommands(){return{setHeading:ar=>({commands:or})=>this.options.levels.includes(ar.level)?or.setNode(this.name,ar):!1,toggleHeading:ar=>({commands:or})=>this.options.levels.includes(ar.level)?or.toggleNode(this.name,"paragraph",ar):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((ar,or)=>({...ar,[`Mod-Alt-${or}`]:()=>this.editor.commands.toggleHeading({level:or})}),{})},addInputRules(){return this.options.levels.map(ar=>textblockTypeInputRule({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${ar}})\\s$`),type:this.type,getAttributes:{level:ar}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function(){};RopeSequence.prototype.append=function(or){return or.length?(or=RopeSequence.from(or),!this.length&&or||or.length<GOOD_LEAF_SIZE&&this.leafAppend(or)||this.length<GOOD_LEAF_SIZE&&or.leafPrepend(this)||this.appendInner(or)):this};RopeSequence.prototype.prepend=function(or){return or.length?RopeSequence.from(or).append(this):this};RopeSequence.prototype.appendInner=function(or){return new Append(this,or)};RopeSequence.prototype.slice=function(or,lr){return or===void 0&&(or=0),lr===void 0&&(lr=this.length),or>=lr?RopeSequence.empty:this.sliceInner(Math.max(0,or),Math.min(this.length,lr))};RopeSequence.prototype.get=function(or){if(!(or<0||or>=this.length))return this.getInner(or)};RopeSequence.prototype.forEach=function(or,lr,cr){lr===void 0&&(lr=0),cr===void 0&&(cr=this.length),lr<=cr?this.forEachInner(or,lr,cr,0):this.forEachInvertedInner(or,lr,cr,0)};RopeSequence.prototype.map=function(or,lr,cr){lr===void 0&&(lr=0),cr===void 0&&(cr=this.length);var ur=[];return this.forEach(function(dr,hr){return ur.push(or(dr,hr))},lr,cr),ur};RopeSequence.from=function(or){return or instanceof RopeSequence?or:or&&or.length?new Leaf(or):RopeSequence.empty};var Leaf=function(ar){function or(cr){ar.call(this),this.values=cr}ar&&(or.__proto__=ar),or.prototype=Object.create(ar&&ar.prototype),or.prototype.constructor=or;var lr={length:{configurable:!0},depth:{configurable:!0}};return or.prototype.flatten=function(){return this.values},or.prototype.sliceInner=function(ur,dr){return ur==0&&dr==this.length?this:new or(this.values.slice(ur,dr))},or.prototype.getInner=function(ur){return this.values[ur]},or.prototype.forEachInner=function(ur,dr,hr,fr){for(var pr=dr;pr<hr;pr++)if(ur(this.values[pr],fr+pr)===!1)return!1},or.prototype.forEachInvertedInner=function(ur,dr,hr,fr){for(var pr=dr-1;pr>=hr;pr--)if(ur(this.values[pr],fr+pr)===!1)return!1},or.prototype.leafAppend=function(ur){if(this.length+ur.length<=GOOD_LEAF_SIZE)return new or(this.values.concat(ur.flatten()))},or.prototype.leafPrepend=function(ur){if(this.length+ur.length<=GOOD_LEAF_SIZE)return new or(ur.flatten().concat(this.values))},lr.length.get=function(){return this.values.length},lr.depth.get=function(){return 0},Object.defineProperties(or.prototype,lr),or}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(ar){function or(lr,cr){ar.call(this),this.left=lr,this.right=cr,this.length=lr.length+cr.length,this.depth=Math.max(lr.depth,cr.depth)+1}return ar&&(or.__proto__=ar),or.prototype=Object.create(ar&&ar.prototype),or.prototype.constructor=or,or.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},or.prototype.getInner=function(cr){return cr<this.left.length?this.left.get(cr):this.right.get(cr-this.left.length)},or.prototype.forEachInner=function(cr,ur,dr,hr){var fr=this.left.length;if(ur<fr&&this.left.forEachInner(cr,ur,Math.min(dr,fr),hr)===!1||dr>fr&&this.right.forEachInner(cr,Math.max(ur-fr,0),Math.min(this.length,dr)-fr,hr+fr)===!1)return!1},or.prototype.forEachInvertedInner=function(cr,ur,dr,hr){var fr=this.left.length;if(ur>fr&&this.right.forEachInvertedInner(cr,ur-fr,Math.max(dr,fr)-fr,hr+fr)===!1||dr<fr&&this.left.forEachInvertedInner(cr,Math.min(ur,fr),dr,hr)===!1)return!1},or.prototype.sliceInner=function(cr,ur){if(cr==0&&ur==this.length)return this;var dr=this.left.length;return ur<=dr?this.left.slice(cr,ur):cr>=dr?this.right.slice(cr-dr,ur-dr):this.left.slice(cr,dr).append(this.right.slice(0,ur-dr))},or.prototype.leafAppend=function(cr){var ur=this.right.leafAppend(cr);if(ur)return new or(this.left,ur)},or.prototype.leafPrepend=function(cr){var ur=this.left.leafPrepend(cr);if(ur)return new or(ur,this.right)},or.prototype.appendInner=function(cr){return this.left.depth>=Math.max(this.right.depth,cr.depth)+1?new or(this.left,new or(this.right,cr)):new or(this,cr)},or}(RopeSequence);const max_empty_items=500;class Branch{constructor(or,lr){this.items=or,this.eventCount=lr}popEvent(or,lr){if(this.eventCount==0)return null;let cr=this.items.length;for(;;cr--)if(this.items.get(cr-1).selection){--cr;break}let ur,dr;lr&&(ur=this.remapping(cr,this.items.length),dr=ur.maps.length);let hr=or.tr,fr,pr,mr=[],gr=[];return this.items.forEach((yr,vr)=>{if(!yr.step){ur||(ur=this.remapping(cr,vr+1),dr=ur.maps.length),dr--,gr.push(yr);return}if(ur){gr.push(new Item(yr.map));let br=yr.step.map(ur.slice(dr)),Sr;br&&hr.maybeStep(br).doc&&(Sr=hr.mapping.maps[hr.mapping.maps.length-1],mr.push(new Item(Sr,void 0,void 0,mr.length+gr.length))),dr--,Sr&&ur.appendMap(Sr,dr)}else hr.maybeStep(yr.step);if(yr.selection)return fr=ur?yr.selection.map(ur.slice(dr)):yr.selection,pr=new Branch(this.items.slice(0,cr).append(gr.reverse().concat(mr)),this.eventCount-1),!1},this.items.length,0),{remaining:pr,transform:hr,selection:fr}}addTransform(or,lr,cr,ur){let dr=[],hr=this.eventCount,fr=this.items,pr=!ur&&fr.length?fr.get(fr.length-1):null;for(let gr=0;gr<or.steps.length;gr++){let yr=or.steps[gr].invert(or.docs[gr]),vr=new Item(or.mapping.maps[gr],yr,lr),br;(br=pr&&pr.merge(vr))&&(vr=br,gr?dr.pop():fr=fr.slice(0,fr.length-1)),dr.push(vr),lr&&(hr++,lr=void 0),ur||(pr=vr)}let mr=hr-cr.depth;return mr>DEPTH_OVERFLOW&&(fr=cutOffEvents(fr,mr),hr-=mr),new Branch(fr.append(dr),hr)}remapping(or,lr){let cr=new Mapping;return this.items.forEach((ur,dr)=>{let hr=ur.mirrorOffset!=null&&dr-ur.mirrorOffset>=or?cr.maps.length-ur.mirrorOffset:void 0;cr.appendMap(ur.map,hr)},or,lr),cr}addMaps(or){return this.eventCount==0?this:new Branch(this.items.append(or.map(lr=>new Item(lr))),this.eventCount)}rebased(or,lr){if(!this.eventCount)return this;let cr=[],ur=Math.max(0,this.items.length-lr),dr=or.mapping,hr=or.steps.length,fr=this.eventCount;this.items.forEach(vr=>{vr.selection&&fr--},ur);let pr=lr;this.items.forEach(vr=>{let br=dr.getMirror(--pr);if(br==null)return;hr=Math.min(hr,br);let Sr=dr.maps[br];if(vr.step){let xr=or.steps[br].invert(or.docs[br]),Er=vr.selection&&vr.selection.map(dr.slice(pr+1,br));Er&&fr++,cr.push(new Item(Sr,xr,Er))}else cr.push(new Item(Sr))},ur);let mr=[];for(let vr=lr;vr<hr;vr++)mr.push(new Item(dr.maps[vr]));let gr=this.items.slice(0,ur).append(mr).append(cr),yr=new Branch(gr,fr);return yr.emptyItemCount()>max_empty_items&&(yr=yr.compress(this.items.length-cr.length)),yr}emptyItemCount(){let or=0;return this.items.forEach(lr=>{lr.step||or++}),or}compress(or=this.items.length){let lr=this.remapping(0,or),cr=lr.maps.length,ur=[],dr=0;return this.items.forEach((hr,fr)=>{if(fr>=or)ur.push(hr),hr.selection&&dr++;else if(hr.step){let pr=hr.step.map(lr.slice(cr)),mr=pr&&pr.getMap();if(cr--,mr&&lr.appendMap(mr,cr),pr){let gr=hr.selection&&hr.selection.map(lr.slice(cr));gr&&dr++;let yr=new Item(mr.invert(),pr,gr),vr,br=ur.length-1;(vr=ur.length&&ur[br].merge(yr))?ur[br]=vr:ur.push(yr)}}else hr.map&&cr--},this.items.length,0),new Branch(RopeSequence.from(ur.reverse()),dr)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(ar,or){let lr;return ar.forEach((cr,ur)=>{if(cr.selection&&or--==0)return lr=ur,!1}),ar.slice(lr)}class Item{constructor(or,lr,cr,ur){this.map=or,this.step=lr,this.selection=cr,this.mirrorOffset=ur}merge(or){if(this.step&&or.step&&!or.selection){let lr=or.step.merge(this.step);if(lr)return new Item(lr.getMap().invert(),lr,this.selection)}}}class HistoryState{constructor(or,lr,cr,ur,dr){this.done=or,this.undone=lr,this.prevRanges=cr,this.prevTime=ur,this.prevComposition=dr}}const DEPTH_OVERFLOW=20;function applyTransaction(ar,or,lr,cr){let ur=lr.getMeta(historyKey),dr;if(ur)return ur.historyState;lr.getMeta(closeHistoryKey)&&(ar=new HistoryState(ar.done,ar.undone,null,0,-1));let hr=lr.getMeta("appendedTransaction");if(lr.steps.length==0)return ar;if(hr&&hr.getMeta(historyKey))return hr.getMeta(historyKey).redo?new HistoryState(ar.done.addTransform(lr,void 0,cr,mustPreserveItems(or)),ar.undone,rangesFor(lr.mapping.maps),ar.prevTime,ar.prevComposition):new HistoryState(ar.done,ar.undone.addTransform(lr,void 0,cr,mustPreserveItems(or)),null,ar.prevTime,ar.prevComposition);if(lr.getMeta("addToHistory")!==!1&&!(hr&&hr.getMeta("addToHistory")===!1)){let fr=lr.getMeta("composition"),pr=ar.prevTime==0||!hr&&ar.prevComposition!=fr&&(ar.prevTime<(lr.time||0)-cr.newGroupDelay||!isAdjacentTo(lr,ar.prevRanges)),mr=hr?mapRanges(ar.prevRanges,lr.mapping):rangesFor(lr.mapping.maps);return new HistoryState(ar.done.addTransform(lr,pr?or.selection.getBookmark():void 0,cr,mustPreserveItems(or)),Branch.empty,mr,lr.time,fr??ar.prevComposition)}else return(dr=lr.getMeta("rebased"))?new HistoryState(ar.done.rebased(lr,dr),ar.undone.rebased(lr,dr),mapRanges(ar.prevRanges,lr.mapping),ar.prevTime,ar.prevComposition):new HistoryState(ar.done.addMaps(lr.mapping.maps),ar.undone.addMaps(lr.mapping.maps),mapRanges(ar.prevRanges,lr.mapping),ar.prevTime,ar.prevComposition)}function isAdjacentTo(ar,or){if(!or)return!1;if(!ar.docChanged)return!0;let lr=!1;return ar.mapping.maps[0].forEach((cr,ur)=>{for(let dr=0;dr<or.length;dr+=2)cr<=or[dr+1]&&ur>=or[dr]&&(lr=!0)}),lr}function rangesFor(ar){let or=[];for(let lr=ar.length-1;lr>=0&&or.length==0;lr--)ar[lr].forEach((cr,ur,dr,hr)=>or.push(dr,hr));return or}function mapRanges(ar,or){if(!ar)return null;let lr=[];for(let cr=0;cr<ar.length;cr+=2){let ur=or.map(ar[cr],1),dr=or.map(ar[cr+1],-1);ur<=dr&&lr.push(ur,dr)}return lr}function histTransaction(ar,or,lr){let cr=mustPreserveItems(or),ur=historyKey.get(or).spec.config,dr=(lr?ar.undone:ar.done).popEvent(or,cr);if(!dr)return null;let hr=dr.selection.resolve(dr.transform.doc),fr=(lr?ar.done:ar.undone).addTransform(dr.transform,or.selection.getBookmark(),ur,cr),pr=new HistoryState(lr?fr:dr.remaining,lr?dr.remaining:fr,null,0,-1);return dr.transform.setSelection(hr).setMeta(historyKey,{redo:lr,historyState:pr})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(ar){let or=ar.plugins;if(cachedPreserveItemsPlugins!=or){cachedPreserveItems=!1,cachedPreserveItemsPlugins=or;for(let lr=0;lr<or.length;lr++)if(or[lr].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history$1(ar={}){return ar={depth:ar.depth||100,newGroupDelay:ar.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(or,lr,cr){return applyTransaction(lr,cr,or,ar)}},config:ar,props:{handleDOMEvents:{beforeinput(or,lr){let cr=lr.inputType,ur=cr=="historyUndo"?undo:cr=="historyRedo"?redo:null;return ur?(lr.preventDefault(),ur(or.state,or.dispatch)):!1}}}})}function buildCommand(ar,or){return(lr,cr)=>{let ur=historyKey.getState(lr);if(!ur||(ar?ur.undone:ur.done).eventCount==0)return!1;if(cr){let dr=histTransaction(ur,lr,ar);dr&&cr(or?dr.scrollIntoView():dr)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0),History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:ar,dispatch:or})=>undo(ar,or),redo:()=>({state:ar,dispatch:or})=>redo(ar,or)}},addProseMirrorPlugins(){return[history$1(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),HorizontalRule=Node.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:ar}){return["hr",mergeAttributes(this.options.HTMLAttributes,ar)]},addCommands(){return{setHorizontalRule:()=>({chain:ar,state:or})=>{const{selection:lr}=or,{$from:cr,$to:ur}=lr,dr=ar();return cr.parentOffset===0?dr.insertContentAt({from:Math.max(cr.pos-1,0),to:ur.pos},{type:this.name}):isNodeSelection(lr)?dr.insertContentAt(ur.pos,{type:this.name}):dr.insertContent({type:this.name}),dr.command(({tr:hr,dispatch:fr})=>{var pr;if(fr){const{$to:mr}=hr.selection,gr=mr.end();if(mr.nodeAfter)mr.nodeAfter.isTextblock?hr.setSelection(TextSelection.create(hr.doc,mr.pos+1)):mr.nodeAfter.isBlock?hr.setSelection(NodeSelection.create(hr.doc,mr.pos)):hr.setSelection(TextSelection.create(hr.doc,mr.pos));else{const yr=(pr=mr.parent.type.contentMatch.defaultType)===null||pr===void 0?void 0:pr.create();yr&&(hr.insert(gr,yr),hr.setSelection(TextSelection.create(hr.doc,gr+1)))}hr.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:ar=>ar.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:ar=>ar.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:ar}){return["em",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setItalic:()=>({commands:ar})=>ar.setMark(this.name),toggleItalic:()=>({commands:ar})=>ar.toggleMark(this.name),unsetItalic:()=>({commands:ar})=>ar.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),ListItem=Node.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:ar}){return["li",mergeAttributes(this.options.HTMLAttributes,ar),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ListItemName="listItem",TextStyleName="textStyle",inputRegex$4=/^(\d+)\.\s$/,OrderedList=Node.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:ar=>ar.hasAttribute("start")?parseInt(ar.getAttribute("start")||"",10):1},type:{default:null,parseHTML:ar=>ar.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:ar}){const{start:or,...lr}=ar;return or===1?["ol",mergeAttributes(this.options.HTMLAttributes,lr),0]:["ol",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{toggleOrderedList:()=>({commands:ar,chain:or})=>this.options.keepAttributes?or().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItemName,this.editor.getAttributes(TextStyleName)).run():ar.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let ar=wrappingInputRule({find:inputRegex$4,type:this.type,getAttributes:or=>({start:+or[1]}),joinPredicate:(or,lr)=>lr.childCount+lr.attrs.start===+or[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(ar=wrappingInputRule({find:inputRegex$4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:or=>({start:+or[1],...this.editor.getAttributes(TextStyleName)}),joinPredicate:(or,lr)=>lr.childCount+lr.attrs.start===+or[1],editor:this.editor})),[ar]}}),Paragraph=Node.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:ar}){return["p",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setParagraph:()=>({commands:ar})=>ar.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$3=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:ar=>ar.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:ar}){return["s",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setStrike:()=>({commands:ar})=>ar.setMark(this.name),toggleStrike:()=>({commands:ar})=>ar.toggleMark(this.name),unsetStrike:()=>({commands:ar})=>ar.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$3,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text$1=Node.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){const ar=[];return this.options.bold!==!1&&ar.push(Bold.configure(this.options.bold)),this.options.blockquote!==!1&&ar.push(Blockquote.configure(this.options.blockquote)),this.options.bulletList!==!1&&ar.push(BulletList.configure(this.options.bulletList)),this.options.code!==!1&&ar.push(Code.configure(this.options.code)),this.options.codeBlock!==!1&&ar.push(CodeBlock.configure(this.options.codeBlock)),this.options.document!==!1&&ar.push(Document.configure(this.options.document)),this.options.dropcursor!==!1&&ar.push(Dropcursor.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&ar.push(Gapcursor.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&ar.push(HardBreak.configure(this.options.hardBreak)),this.options.heading!==!1&&ar.push(Heading.configure(this.options.heading)),this.options.history!==!1&&ar.push(History.configure(this.options.history)),this.options.horizontalRule!==!1&&ar.push(HorizontalRule.configure(this.options.horizontalRule)),this.options.italic!==!1&&ar.push(Italic.configure(this.options.italic)),this.options.listItem!==!1&&ar.push(ListItem.configure(this.options.listItem)),this.options.orderedList!==!1&&ar.push(OrderedList.configure(this.options.orderedList)),this.options.paragraph!==!1&&ar.push(Paragraph.configure(this.options.paragraph)),this.options.strike!==!1&&ar.push(Strike.configure(this.options.strike)),this.options.text!==!1&&ar.push(Text$1.configure(this.options.text)),ar}}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:ar=>ar.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:ar}){return["u",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setUnderline:()=>({commands:ar})=>ar.setMark(this.name),toggleUnderline:()=>({commands:ar})=>ar.toggleMark(this.name),unsetUnderline:()=>({commands:ar})=>ar.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Subscript=Mark.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(ar){return ar!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:ar}){return["sub",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setSubscript:()=>({commands:ar})=>ar.setMark(this.name),toggleSubscript:()=>({commands:ar})=>ar.toggleMark(this.name),unsetSubscript:()=>({commands:ar})=>ar.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),Superscript=Mark.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(ar){return ar!=="super"?!1:null}}]},renderHTML({HTMLAttributes:ar}){return["sup",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setSuperscript:()=>({commands:ar})=>ar.setMark(this.name),toggleSuperscript:()=>({commands:ar})=>ar.toggleMark(this.name),unsetSuperscript:()=>({commands:ar})=>ar.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:ar=>{const or=ar.style.textAlign;return this.options.alignments.includes(or)?or:this.options.defaultAlignment},renderHTML:ar=>ar.textAlign?{style:`text-align: ${ar.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:ar=>({commands:or})=>this.options.alignments.includes(ar)?this.options.types.map(lr=>or.updateAttributes(lr,{textAlign:ar})).every(lr=>lr):!1,unsetTextAlign:()=>({commands:ar})=>this.options.types.map(or=>ar.resetAttributes(or,"textAlign")).every(or=>or),toggleTextAlign:ar=>({editor:or,commands:lr})=>this.options.alignments.includes(ar)?or.isActive({textAlign:ar})?lr.unsetTextAlign():lr.setTextAlign(ar):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),mergeNestedSpanStyles=ar=>{if(!ar.children.length)return;const or=ar.querySelectorAll("span");or&&or.forEach(lr=>{var cr,ur;const dr=lr.getAttribute("style"),hr=(ur=(cr=lr.parentElement)===null||cr===void 0?void 0:cr.closest("span"))===null||ur===void 0?void 0:ur.getAttribute("style");lr.setAttribute("style",`${hr};${dr}`)})},TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:ar=>ar.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&mergeNestedSpanStyles(ar),{}):!1}]},renderHTML({HTMLAttributes:ar}){return["span",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:ar})=>{const{selection:or}=ar;return ar.doc.nodesBetween(or.from,or.to,(lr,cr)=>{if(lr.isTextblock)return!0;lr.marks.filter(ur=>ur.type===this.type).some(ur=>Object.values(ur.attrs).some(dr=>!!dr))||ar.removeMark(cr,cr+lr.nodeSize,this.type)}),!0}}}}),FontFamily=Extension.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:ar=>ar.style.fontFamily,renderHTML:ar=>ar.fontFamily?{style:`font-family: ${ar.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:ar=>({chain:or})=>or().setMark("textStyle",{fontFamily:ar}).run(),unsetFontFamily:()=>({chain:ar})=>ar().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),inputRegex$2=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$1=Node.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:ar}){return["img",mergeAttributes(this.options.HTMLAttributes,ar)]},addCommands(){return{setImage:ar=>({commands:or})=>or.insertContent({type:this.name,attrs:ar})}},addInputRules(){return[nodeInputRule({find:inputRegex$2,type:this.type,getAttributes:ar=>{const[,,or,lr,cr]=ar;return{src:lr,alt:or,title:cr}}})]}}),encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",assign=(ar,or)=>{for(const lr in or)ar[lr]=or[lr];return ar},numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(ar,or){return ar in or||(or[ar]=[]),or[ar]}function addToGroups(ar,or,lr){or[numeric]&&(or[asciinumeric]=!0,or[alphanumeric]=!0),or[ascii]&&(or[asciinumeric]=!0,or[alpha]=!0),or[asciinumeric]&&(or[alphanumeric]=!0),or[alpha]&&(or[alphanumeric]=!0),or[alphanumeric]&&(or[domain]=!0),or[emoji]&&(or[domain]=!0);for(const cr in or){const ur=registerGroup(cr,lr);ur.indexOf(ar)<0&&ur.push(ar)}}function flagsForToken(ar,or){const lr={};for(const cr in or)or[cr].indexOf(ar)>=0&&(lr[cr]=!0);return lr}function State(ar=null){this.j={},this.jr=[],this.jd=null,this.t=ar}State.groups={};State.prototype={accepts(){return!!this.t},go(ar){const or=this,lr=or.j[ar];if(lr)return lr;for(let cr=0;cr<or.jr.length;cr++){const ur=or.jr[cr][0],dr=or.jr[cr][1];if(dr&&ur.test(ar))return dr}return or.jd},has(ar,or=!1){return or?ar in this.j:!!this.go(ar)},ta(ar,or,lr,cr){for(let ur=0;ur<ar.length;ur++)this.tt(ar[ur],or,lr,cr)},tr(ar,or,lr,cr){cr=cr||State.groups;let ur;return or&&or.j?ur=or:(ur=new State(or),lr&&cr&&addToGroups(or,lr,cr)),this.jr.push([ar,ur]),ur},ts(ar,or,lr,cr){let ur=this;const dr=ar.length;if(!dr)return ur;for(let hr=0;hr<dr-1;hr++)ur=ur.tt(ar[hr]);return ur.tt(ar[dr-1],or,lr,cr)},tt(ar,or,lr,cr){cr=cr||State.groups;const ur=this;if(or&&or.j)return ur.j[ar]=or,or;const dr=or;let hr,fr=ur.go(ar);if(fr?(hr=new State,assign(hr.j,fr.j),hr.jr.push.apply(hr.jr,fr.jr),hr.jd=fr.jd,hr.t=fr.t):hr=new State,dr){if(cr)if(hr.t&&typeof hr.t=="string"){const pr=assign(flagsForToken(hr.t,cr),lr);addToGroups(dr,pr,cr)}else lr&&addToGroups(dr,lr,cr);hr.t=dr}return ur.j[ar]=hr,hr}};const ta=(ar,or,lr,cr,ur)=>ar.ta(or,lr,cr,ur),tr=(ar,or,lr,cr,ur)=>ar.tr(or,lr,cr,ur),ts=(ar,or,lr,cr,ur)=>ar.ts(or,lr,cr,ur),tt=(ar,or,lr,cr,ur)=>ar.tt(or,lr,cr,ur),WORD="WORD",UWORD="UWORD",ASCIINUMERICAL="ASCIINUMERICAL",ALPHANUMERICAL="ALPHANUMERICAL",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",FULLWIDTHMIDDLEDOT="FULLWIDTHMIDDLEDOT",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk=Object.freeze({__proto__:null,ALPHANUMERICAL,AMPERSAND,APOSTROPHE,ASCIINUMERICAL,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,CLOSEANGLEBRACKET,CLOSEBRACE,CLOSEBRACKET,CLOSEPAREN,COLON,COMMA,DOLLAR,DOT,EMOJI:EMOJI$1,EQUALS,EXCLAMATION,FULLWIDTHGREATERTHAN,FULLWIDTHLEFTPAREN,FULLWIDTHLESSTHAN,FULLWIDTHMIDDLEDOT,FULLWIDTHRIGHTPAREN,HYPHEN,LEFTCORNERBRACKET,LEFTWHITECORNERBRACKET,LOCALHOST,NL,NUM,OPENANGLEBRACKET,OPENBRACE,OPENBRACKET,OPENPAREN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,RIGHTCORNERBRACKET,RIGHTWHITECORNERBRACKET,SCHEME,SEMI,SLASH,SLASH_SCHEME,SYM,TILDE,TLD,UNDERSCORE,UTLD,UWORD,WORD,WS});const ASCII_LETTER=/[a-z]/,LETTER=new RegExp("\\p{L}","u"),EMOJI=new RegExp("\\p{Emoji}","u"),DIGIT=/\d/,SPACE=/\s/,CR="\r",LF=`
`,EMOJI_VARIATION="️",EMOJI_JOINER="‍",OBJECT_REPLACEMENT="￼";let tlds=null,utlds=null;function init$2(ar=[]){const or={};State.groups=or;const lr=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt(lr,"'",APOSTROPHE),tt(lr,"{",OPENBRACE),tt(lr,"}",CLOSEBRACE),tt(lr,"[",OPENBRACKET),tt(lr,"]",CLOSEBRACKET),tt(lr,"(",OPENPAREN),tt(lr,")",CLOSEPAREN),tt(lr,"<",OPENANGLEBRACKET),tt(lr,">",CLOSEANGLEBRACKET),tt(lr,"（",FULLWIDTHLEFTPAREN),tt(lr,"）",FULLWIDTHRIGHTPAREN),tt(lr,"「",LEFTCORNERBRACKET),tt(lr,"」",RIGHTCORNERBRACKET),tt(lr,"『",LEFTWHITECORNERBRACKET),tt(lr,"』",RIGHTWHITECORNERBRACKET),tt(lr,"＜",FULLWIDTHLESSTHAN),tt(lr,"＞",FULLWIDTHGREATERTHAN),tt(lr,"&",AMPERSAND),tt(lr,"*",ASTERISK),tt(lr,"@",AT),tt(lr,"`",BACKTICK),tt(lr,"^",CARET),tt(lr,":",COLON),tt(lr,",",COMMA),tt(lr,"$",DOLLAR),tt(lr,".",DOT),tt(lr,"=",EQUALS),tt(lr,"!",EXCLAMATION),tt(lr,"-",HYPHEN),tt(lr,"%",PERCENT),tt(lr,"|",PIPE),tt(lr,"+",PLUS),tt(lr,"#",POUND),tt(lr,"?",QUERY),tt(lr,'"',QUOTE),tt(lr,"/",SLASH),tt(lr,";",SEMI),tt(lr,"~",TILDE),tt(lr,"_",UNDERSCORE),tt(lr,"\\",BACKSLASH),tt(lr,"・",FULLWIDTHMIDDLEDOT);const cr=tr(lr,DIGIT,NUM,{[numeric]:!0});tr(cr,DIGIT,cr);const ur=tr(cr,ASCII_LETTER,ASCIINUMERICAL,{[asciinumeric]:!0}),dr=tr(cr,LETTER,ALPHANUMERICAL,{[alphanumeric]:!0}),hr=tr(lr,ASCII_LETTER,WORD,{[ascii]:!0});tr(hr,DIGIT,ur),tr(hr,ASCII_LETTER,hr),tr(ur,DIGIT,ur),tr(ur,ASCII_LETTER,ur);const fr=tr(lr,LETTER,UWORD,{[alpha]:!0});tr(fr,ASCII_LETTER),tr(fr,DIGIT,dr),tr(fr,LETTER,fr),tr(dr,DIGIT,dr),tr(dr,ASCII_LETTER),tr(dr,LETTER,dr);const pr=tt(lr,LF,NL,{[whitespace]:!0}),mr=tt(lr,CR,WS,{[whitespace]:!0}),gr=tr(lr,SPACE,WS,{[whitespace]:!0});tt(lr,OBJECT_REPLACEMENT,gr),tt(mr,LF,pr),tt(mr,OBJECT_REPLACEMENT,gr),tr(mr,SPACE,gr),tt(gr,CR),tt(gr,LF),tr(gr,SPACE,gr),tt(gr,OBJECT_REPLACEMENT,gr);const yr=tr(lr,EMOJI,EMOJI$1,{[emoji]:!0});tt(yr,"#"),tr(yr,EMOJI,yr),tt(yr,EMOJI_VARIATION,yr);const vr=tt(yr,EMOJI_JOINER);tt(vr,"#"),tr(vr,EMOJI,yr);const br=[[ASCII_LETTER,hr],[DIGIT,ur]],Sr=[[ASCII_LETTER,null],[LETTER,fr],[DIGIT,dr]];for(let xr=0;xr<tlds.length;xr++)fastts(lr,tlds[xr],TLD,WORD,br);for(let xr=0;xr<utlds.length;xr++)fastts(lr,utlds[xr],UTLD,UWORD,Sr);addToGroups(TLD,{tld:!0,ascii:!0},or),addToGroups(UTLD,{utld:!0,alpha:!0},or),fastts(lr,"file",SCHEME,WORD,br),fastts(lr,"mailto",SCHEME,WORD,br),fastts(lr,"http",SLASH_SCHEME,WORD,br),fastts(lr,"https",SLASH_SCHEME,WORD,br),fastts(lr,"ftp",SLASH_SCHEME,WORD,br),fastts(lr,"ftps",SLASH_SCHEME,WORD,br),addToGroups(SCHEME,{scheme:!0,ascii:!0},or),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},or),ar=ar.sort((xr,Er)=>xr[0]>Er[0]?1:-1);for(let xr=0;xr<ar.length;xr++){const Er=ar[xr][0],Ar=ar[xr][1]?{[scheme]:!0}:{[slashscheme]:!0};Er.indexOf("-")>=0?Ar[domain]=!0:ASCII_LETTER.test(Er)?DIGIT.test(Er)?Ar[asciinumeric]=!0:Ar[ascii]=!0:Ar[numeric]=!0,ts(lr,Er,Er,Ar)}return ts(lr,"localhost",LOCALHOST,{ascii:!0}),lr.jd=new State(SYM),{start:lr,tokens:assign({groups:or},tk)}}function run$1(ar,or){const lr=stringToArray(or.replace(/[A-Z]/g,fr=>fr.toLowerCase())),cr=lr.length,ur=[];let dr=0,hr=0;for(;hr<cr;){let fr=ar,pr=null,mr=0,gr=null,yr=-1,vr=-1;for(;hr<cr&&(pr=fr.go(lr[hr]));)fr=pr,fr.accepts()?(yr=0,vr=0,gr=fr):yr>=0&&(yr+=lr[hr].length,vr++),mr+=lr[hr].length,dr+=lr[hr].length,hr++;dr-=yr,hr-=vr,mr-=yr,ur.push({t:gr.t,v:or.slice(dr-mr,dr),s:dr-mr,e:dr})}return ur}function stringToArray(ar){const or=[],lr=ar.length;let cr=0;for(;cr<lr;){let ur=ar.charCodeAt(cr),dr,hr=ur<55296||ur>56319||cr+1===lr||(dr=ar.charCodeAt(cr+1))<56320||dr>57343?ar[cr]:ar.slice(cr,cr+2);or.push(hr),cr+=hr.length}return or}function fastts(ar,or,lr,cr,ur){let dr;const hr=or.length;for(let fr=0;fr<hr-1;fr++){const pr=or[fr];ar.j[pr]?dr=ar.j[pr]:(dr=new State(cr),dr.jr=ur.slice(),ar.j[pr]=dr),ar=dr}return dr=new State(lr),dr.jr=ur.slice(),ar.j[or[hr-1]]=dr,dr}function decodeTlds(ar){const or=[],lr=[];let cr=0,ur="0123456789";for(;cr<ar.length;){let dr=0;for(;ur.indexOf(ar[cr+dr])>=0;)dr++;if(dr>0){or.push(lr.join(""));for(let hr=parseInt(ar.substring(cr,cr+dr),10);hr>0;hr--)lr.pop();cr+=dr}else lr.push(ar[cr]),cr++}return or}const defaults$1={defaultProtocol:"http",events:null,format:noop,formatHref:noop,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options(ar,or=null){let lr=assign({},defaults$1);ar&&(lr=assign(lr,ar instanceof Options?ar.o:ar));const cr=lr.ignoreTags,ur=[];for(let dr=0;dr<cr.length;dr++)ur.push(cr[dr].toUpperCase());this.o=lr,or&&(this.defaultRender=or),this.ignoreTags=ur}Options.prototype={o:defaults$1,ignoreTags:[],defaultRender(ar){return ar},check(ar){return this.get("validate",ar.toString(),ar)},get(ar,or,lr){const cr=or!=null;let ur=this.o[ar];return ur&&(typeof ur=="object"?(ur=lr.t in ur?ur[lr.t]:defaults$1[ar],typeof ur=="function"&&cr&&(ur=ur(or,lr))):typeof ur=="function"&&cr&&(ur=ur(or,lr.t,lr)),ur)},getObj(ar,or,lr){let cr=this.o[ar];return typeof cr=="function"&&or!=null&&(cr=cr(or,lr.t,lr)),cr},render(ar){const or=ar.render(this);return(this.get("render",null,ar)||this.defaultRender)(or,ar.t,ar)}};function noop(ar){return ar}function MultiToken(ar,or){this.t="token",this.v=ar,this.tk=or}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(ar){return this.toString()},toFormattedString(ar){const or=this.toString(),lr=ar.get("truncate",or,this),cr=ar.get("format",or,this);return lr&&cr.length>lr?cr.substring(0,lr)+"…":cr},toFormattedHref(ar){return ar.get("formatHref",this.toHref(ar.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(ar=defaults$1.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(ar),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(ar){return{type:this.t,value:this.toFormattedString(ar),isLink:this.isLink,href:this.toFormattedHref(ar),start:this.startIndex(),end:this.endIndex()}},validate(ar){return ar.get("validate",this.toString(),this)},render(ar){const or=this,lr=this.toHref(ar.get("defaultProtocol")),cr=ar.get("formatHref",lr,this),ur=ar.get("tagName",lr,or),dr=this.toFormattedString(ar),hr={},fr=ar.get("className",lr,or),pr=ar.get("target",lr,or),mr=ar.get("rel",lr,or),gr=ar.getObj("attributes",lr,or),yr=ar.getObj("events",lr,or);return hr.href=cr,fr&&(hr.class=fr),pr&&(hr.target=pr),mr&&(hr.rel=mr),gr&&assign(hr,gr),{tagName:ur,attributes:hr,content:dr,eventListeners:yr}}};function createTokenClass(ar,or){class lr extends MultiToken{constructor(ur,dr){super(ur,dr),this.t=ar}}for(const cr in or)lr.prototype[cr]=or[cr];return lr.t=ar,lr}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text=createTokenClass("text"),Nl=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(ar=defaults$1.defaultProtocol){return this.hasProtocol()?this.v:`${ar}://${this.v}`},hasProtocol(){const ar=this.tk;return ar.length>=2&&ar[0].t!==LOCALHOST&&ar[1].t===COLON}}),makeState=ar=>new State(ar);function init$1({groups:ar}){const or=ar.domain.concat([AMPERSAND,ASTERISK,AT,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),lr=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,PERCENT,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],cr=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],ur=makeState(),dr=tt(ur,TILDE);ta(dr,cr,dr),ta(dr,ar.domain,dr);const hr=makeState(),fr=makeState(),pr=makeState();ta(ur,ar.domain,hr),ta(ur,ar.scheme,fr),ta(ur,ar.slashscheme,pr),ta(hr,cr,dr),ta(hr,ar.domain,hr);const mr=tt(hr,AT);tt(dr,AT,mr),tt(fr,AT,mr),tt(pr,AT,mr);const gr=tt(dr,DOT);ta(gr,cr,dr),ta(gr,ar.domain,dr);const yr=makeState();ta(mr,ar.domain,yr),ta(yr,ar.domain,yr);const vr=tt(yr,DOT);ta(vr,ar.domain,yr);const br=makeState(Email);ta(vr,ar.tld,br),ta(vr,ar.utld,br),tt(mr,LOCALHOST,br);const Sr=tt(yr,HYPHEN);tt(Sr,HYPHEN,Sr),ta(Sr,ar.domain,yr),ta(br,ar.domain,yr),tt(br,DOT,vr),tt(br,HYPHEN,Sr);const xr=tt(br,COLON);ta(xr,ar.numeric,Email);const Er=tt(hr,HYPHEN),wr=tt(hr,DOT);tt(Er,HYPHEN,Er),ta(Er,ar.domain,hr),ta(wr,cr,dr),ta(wr,ar.domain,hr);const Ar=makeState(Url);ta(wr,ar.tld,Ar),ta(wr,ar.utld,Ar),ta(Ar,ar.domain,hr),ta(Ar,cr,dr),tt(Ar,DOT,wr),tt(Ar,HYPHEN,Er),tt(Ar,AT,mr);const Tr=tt(Ar,COLON),Cr=makeState(Url);ta(Tr,ar.numeric,Cr);const kr=makeState(Url),Mr=makeState();ta(kr,or,kr),ta(kr,lr,Mr),ta(Mr,or,kr),ta(Mr,lr,Mr),tt(Ar,SLASH,kr),tt(Cr,SLASH,kr);const Rr=tt(fr,COLON),Nr=tt(pr,COLON),_r=tt(Nr,SLASH),Dr=tt(_r,SLASH);ta(fr,ar.domain,hr),tt(fr,DOT,wr),tt(fr,HYPHEN,Er),ta(pr,ar.domain,hr),tt(pr,DOT,wr),tt(pr,HYPHEN,Er),ta(Rr,ar.domain,kr),tt(Rr,SLASH,kr),tt(Rr,QUERY,kr),ta(Dr,ar.domain,kr),ta(Dr,or,kr),tt(Dr,SLASH,kr);const Pr=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let Ir=0;Ir<Pr.length;Ir++){const[$r,Zr]=Pr[Ir],rs=tt(kr,$r);tt(Mr,$r,rs),tt(rs,Zr,kr);const qr=makeState(Url);ta(rs,or,qr);const zr=makeState();ta(rs,lr),ta(qr,or,qr),ta(qr,lr,zr),ta(zr,or,qr),ta(zr,lr,zr),tt(qr,Zr,kr),tt(zr,Zr,kr)}return tt(ur,LOCALHOST,Ar),tt(ur,NL,Nl),{start:ur,tokens:tk}}function run(ar,or,lr){let cr=lr.length,ur=0,dr=[],hr=[];for(;ur<cr;){let fr=ar,pr=null,mr=null,gr=0,yr=null,vr=-1;for(;ur<cr&&!(pr=fr.go(lr[ur].t));)hr.push(lr[ur++]);for(;ur<cr&&(mr=pr||fr.go(lr[ur].t));)pr=null,fr=mr,fr.accepts()?(vr=0,yr=fr):vr>=0&&vr++,ur++,gr++;if(vr<0)ur-=gr,ur<cr&&(hr.push(lr[ur]),ur++);else{hr.length>0&&(dr.push(initMultiToken(Text,or,hr)),hr=[]),ur-=vr,gr-=vr;const br=yr.t,Sr=lr.slice(ur-gr,ur);dr.push(initMultiToken(br,or,Sr))}}return hr.length>0&&dr.push(initMultiToken(Text,or,hr)),dr}function initMultiToken(ar,or,lr){const cr=lr[0].s,ur=lr[lr.length-1].e,dr=or.slice(cr,ur);return new ar(dr,lr)}const warn=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){return State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1,INIT}function registerCustomProtocol(ar,or=!1){if(INIT.initialized&&warn(`linkifyjs: already initialized - will not register custom scheme "${ar}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(ar))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([ar,or])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let ar=0;ar<INIT.tokenQueue.length;ar++)INIT.tokenQueue[ar][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let ar=0;ar<INIT.pluginQueue.length;ar++)INIT.pluginQueue[ar][1]({scanner:INIT.scanner,parser:INIT.parser});return INIT.initialized=!0,INIT}function tokenize(ar){return INIT.initialized||init(),run(INIT.parser.start,ar,run$1(INIT.scanner.start,ar))}tokenize.scan=run$1;function find$1(ar,or=null,lr=null){if(or&&typeof or=="object"){if(lr)throw Error(`linkifyjs: Invalid link type ${or}; must be a string`);lr=or,or=null}const cr=new Options(lr),ur=tokenize(ar),dr=[];for(let hr=0;hr<ur.length;hr++){const fr=ur[hr];fr.isLink&&(!or||fr.t===or)&&cr.check(fr)&&dr.push(fr.toFormattedObject(cr))}return dr}function isValidLinkStructure(ar){return ar.length===1?ar[0].isLink:ar.length===3&&ar[1].isLink?["()","[]"].includes(ar[0].value+ar[2].value):!1}function autolink(ar){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(or,lr,cr)=>{const ur=or.some(mr=>mr.docChanged)&&!lr.doc.eq(cr.doc),dr=or.some(mr=>mr.getMeta("preventAutolink"));if(!ur||dr)return;const{tr:hr}=cr,fr=combineTransactionSteps(lr.doc,[...or]);if(getChangedRanges(fr).forEach(({newRange:mr})=>{const gr=findChildrenInRange(cr.doc,mr,br=>br.isTextblock);let yr,vr;if(gr.length>1?(yr=gr[0],vr=cr.doc.textBetween(yr.pos,yr.pos+yr.node.nodeSize,void 0," ")):gr.length&&cr.doc.textBetween(mr.from,mr.to," "," ").endsWith(" ")&&(yr=gr[0],vr=cr.doc.textBetween(yr.pos,mr.to,void 0," ")),yr&&vr){const br=vr.split(" ").filter(wr=>wr!=="");if(br.length<=0)return!1;const Sr=br[br.length-1],xr=yr.pos+vr.lastIndexOf(Sr);if(!Sr)return!1;const Er=tokenize(Sr).map(wr=>wr.toObject(ar.defaultProtocol));if(!isValidLinkStructure(Er))return!1;Er.filter(wr=>wr.isLink).map(wr=>({...wr,from:xr+wr.start+1,to:xr+wr.end+1})).filter(wr=>cr.schema.marks.code?!cr.doc.rangeHasMark(wr.from,wr.to,cr.schema.marks.code):!0).filter(wr=>ar.validate(wr.value)).filter(wr=>ar.shouldAutoLink(wr.value)).forEach(wr=>{getMarksBetween(wr.from,wr.to,cr.doc).some(Ar=>Ar.mark.type===ar.type)||hr.addMark(wr.from,wr.to,ar.type.create({href:wr.href}))})}}),!!hr.steps.length)return hr}})}function clickHandler(ar){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(or,lr,cr)=>{var ur,dr;if(cr.button!==0||!or.editable)return!1;let hr=cr.target;const fr=[];for(;hr.nodeName!=="DIV";)fr.push(hr),hr=hr.parentNode;if(!fr.find(vr=>vr.nodeName==="A"))return!1;const pr=getAttributes(or.state,ar.type.name),mr=cr.target,gr=(ur=mr==null?void 0:mr.href)!==null&&ur!==void 0?ur:pr.href,yr=(dr=mr==null?void 0:mr.target)!==null&&dr!==void 0?dr:pr.target;return mr&&gr?(window.open(gr,yr),!0):!1}}})}function pasteHandler(ar){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(or,lr,cr)=>{const{state:ur}=or,{selection:dr}=ur,{empty:hr}=dr;if(hr)return!1;let fr="";cr.content.forEach(mr=>{fr+=mr.textContent});const pr=find$1(fr,{defaultProtocol:ar.defaultProtocol}).find(mr=>mr.isLink&&mr.value===fr);return!fr||!pr?!1:ar.editor.commands.setMark(ar.type,{href:pr.href})}}})}const ATTR_WHITESPACE=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function isAllowedUri(ar,or){const lr=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return or&&or.forEach(cr=>{const ur=typeof cr=="string"?cr:cr.scheme;ur&&lr.push(ur)}),!ar||ar.replace(ATTR_WHITESPACE,"").match(new RegExp(`^(?:(?:${lr.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(ar=>{if(typeof ar=="string"){registerCustomProtocol(ar);return}registerCustomProtocol(ar.scheme,ar.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(ar,or)=>!!isAllowedUri(ar,or.protocols),validate:ar=>!!ar,shouldAutoLink:ar=>!!ar}},addAttributes(){return{href:{default:null,parseHTML(ar){return ar.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:ar=>{const or=ar.getAttribute("href");return!or||!this.options.isAllowedUri(or,{defaultValidate:lr=>!!isAllowedUri(lr,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:ar}){return this.options.isAllowedUri(ar.href,{defaultValidate:or=>!!isAllowedUri(or,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",mergeAttributes(this.options.HTMLAttributes,ar),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...ar,href:""}),0]},addCommands(){return{setLink:ar=>({chain:or})=>{const{href:lr}=ar;return this.options.isAllowedUri(lr,{defaultValidate:cr=>!!isAllowedUri(cr,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?or().setMark(this.name,ar).setMeta("preventAutolink",!0).run():!1},toggleLink:ar=>({chain:or})=>{const{href:lr}=ar;return this.options.isAllowedUri(lr,{defaultValidate:cr=>!!isAllowedUri(cr,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?or().toggleMark(this.name,ar,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:ar})=>ar().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:ar=>{const or=[];if(ar){const{protocols:lr,defaultProtocol:cr}=this.options,ur=find$1(ar).filter(dr=>dr.isLink&&this.options.isAllowedUri(dr.value,{defaultValidate:hr=>!!isAllowedUri(hr,lr),protocols:lr,defaultProtocol:cr}));ur.length&&ur.forEach(dr=>or.push({text:dr.value,data:{href:dr.href},index:dr.start}))}return or},type:this.type,getAttributes:ar=>{var or;return{href:(or=ar.data)===null||or===void 0?void 0:or.href}}})]},addProseMirrorPlugins(){const ar=[],{protocols:or,defaultProtocol:lr}=this.options;return this.options.autolink&&ar.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:cr=>this.options.isAllowedUri(cr,{defaultValidate:ur=>!!isAllowedUri(ur,or),protocols:or,defaultProtocol:lr}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&ar.push(clickHandler({type:this.type})),this.options.linkOnPaste&&ar.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),ar}}),TaskList=Node.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:ar}){return["ul",mergeAttributes(this.options.HTMLAttributes,ar,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:ar})=>ar.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),inputRegex$1=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:ar=>{const or=ar.getAttribute("data-checked");return or===""||or==="true"},renderHTML:ar=>({"data-checked":ar.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:ar,HTMLAttributes:or}){return["li",mergeAttributes(this.options.HTMLAttributes,or,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:ar.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const ar={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...ar,Tab:()=>this.editor.commands.sinkListItem(this.name)}:ar},addNodeView(){return({node:ar,HTMLAttributes:or,getPos:lr,editor:cr})=>{const ur=document.createElement("li"),dr=document.createElement("label"),hr=document.createElement("span"),fr=document.createElement("input"),pr=document.createElement("div");return dr.contentEditable="false",fr.type="checkbox",fr.addEventListener("mousedown",mr=>mr.preventDefault()),fr.addEventListener("change",mr=>{if(!cr.isEditable&&!this.options.onReadOnlyChecked){fr.checked=!fr.checked;return}const{checked:gr}=mr.target;cr.isEditable&&typeof lr=="function"&&cr.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:yr})=>{const vr=lr();if(typeof vr!="number")return!1;const br=yr.doc.nodeAt(vr);return yr.setNodeMarkup(vr,void 0,{...br==null?void 0:br.attrs,checked:gr}),!0}).run(),!cr.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(ar,gr)||(fr.checked=!fr.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([mr,gr])=>{ur.setAttribute(mr,gr)}),ur.dataset.checked=ar.attrs.checked,fr.checked=ar.attrs.checked,dr.append(fr,hr),ur.append(dr,pr),Object.entries(or).forEach(([mr,gr])=>{ur.setAttribute(mr,gr)}),{dom:ur,contentDOM:pr,update:mr=>mr.type!==this.type?!1:(ur.dataset.checked=mr.attrs.checked,fr.checked=mr.attrs.checked,!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$1,type:this.type,getAttributes:ar=>({checked:ar[ar.length-1]==="x"})})]}}),inputRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:ar=>ar.getAttribute("data-color")||ar.style.backgroundColor,renderHTML:ar=>ar.color?{"data-color":ar.color,style:`background-color: ${ar.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:ar}){return["mark",mergeAttributes(this.options.HTMLAttributes,ar),0]},addCommands(){return{setHighlight:ar=>({commands:or})=>or.setMark(this.name,ar),toggleHighlight:ar=>({commands:or})=>or.toggleMark(this.name,ar),unsetHighlight:()=>({commands:ar})=>ar.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),Color=Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:ar=>{var or;return(or=ar.style.color)===null||or===void 0?void 0:or.replace(/['"]+/g,"")},renderHTML:ar=>ar.color?{style:`color: ${ar.color}`}:{}}}}]},addCommands(){return{setColor:ar=>({chain:or})=>or().setMark("textStyle",{color:ar}).run(),unsetColor:()=>({chain:ar})=>ar().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),_hoisted_1$e={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},_hoisted_2$c={class:"flex min-h-screen items-center justify-center p-4 text-center"},_hoisted_3$c={class:"sm:flex sm:items-start"},_hoisted_4$b=["innerHTML"],_hoisted_5$a={class:"mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left"},_hoisted_6$a={class:"mt-2"},_hoisted_7$a={class:"text-sm text-gray-500 dark:text-gray-400"},_hoisted_8$a={class:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse"},_sfc_main$e={__name:"AlertModal",props:{show:{type:Boolean,default:!1},title:{type:String,required:!0},message:{type:String,required:!0},type:{type:String,default:"info",validator:ar=>["info","success","warning","error"].includes(ar)}},emits:["close","confirm"],setup(ar,{emit:or}){const lr=or,cr={info:`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>`,success:`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>`,warning:`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
  </svg>`,error:`<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
  </svg>`},ur={info:{bg:"bg-blue-50 dark:bg-blue-900/50",text:"text-blue-800 dark:text-blue-200",border:"border-blue-200 dark:border-blue-800",button:"bg-blue-600 hover:bg-blue-700 text-white"},success:{bg:"bg-green-50 dark:bg-green-900/50",text:"text-green-800 dark:text-green-200",border:"border-green-200 dark:border-green-800",button:"bg-green-600 hover:bg-green-700 text-white"},warning:{bg:"bg-yellow-50 dark:bg-yellow-900/50",text:"text-yellow-800 dark:text-yellow-200",border:"border-yellow-200 dark:border-yellow-800",button:"bg-yellow-600 hover:bg-yellow-700 text-white"},error:{bg:"bg-red-50 dark:bg-red-900/50",text:"text-red-800 dark:text-red-200",border:"border-red-200 dark:border-red-800",button:"bg-red-600 hover:bg-red-700 text-white"}},dr=()=>{lr("close")},hr=()=>{lr("confirm"),dr()};return(fr,pr)=>ar.show?(openBlock(),createElementBlock("div",_hoisted_1$e,[createBaseVNode("div",_hoisted_2$c,[createBaseVNode("div",{class:"fixed inset-0 bg-black bg-opacity-50 transition-opacity",onClick:dr}),createBaseVNode("div",{class:normalizeClass(["relative transform overflow-hidden rounded-lg bg-white dark:bg-slate-800 px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg sm:p-6",ur[ar.type].border])},[createBaseVNode("div",_hoisted_3$c,[createBaseVNode("div",{class:normalizeClass(["mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full sm:mx-0 sm:h-10 sm:w-10",ur[ar.type].bg])},[createBaseVNode("div",{innerHTML:cr[ar.type],class:normalizeClass(ur[ar.type].text)},null,10,_hoisted_4$b)],2),createBaseVNode("div",_hoisted_5$a,[createBaseVNode("h3",{class:normalizeClass(["text-lg font-medium leading-6",ur[ar.type].text])},toDisplayString(ar.title),3),createBaseVNode("div",_hoisted_6$a,[createBaseVNode("p",_hoisted_7$a,toDisplayString(ar.message),1)])])]),createBaseVNode("div",_hoisted_8$a,[createBaseVNode("button",{type:"button",class:normalizeClass(["inline-flex w-full justify-center rounded-md px-3 py-2 text-sm font-semibold shadow-sm sm:ml-3 sm:w-auto",ur[ar.type].button]),onClick:hr}," Aceptar ",2),createBaseVNode("button",{type:"button",class:"mt-3 inline-flex w-full justify-center rounded-md bg-white dark:bg-slate-700 px-3 py-2 text-sm font-semibold text-gray-900 dark:text-gray-200 shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-600 hover:bg-gray-50 dark:hover:bg-slate-600 sm:mt-0 sm:w-auto",onClick:dr}," Cancelar ")])],2)])])):createCommentVNode("",!0)}},_hoisted_1$d={class:"flex items-center justify-between mb-6"},_hoisted_2$b={class:"text-2xl font-bold text-gray-900 dark:text-white"},_hoisted_3$b={class:"flex space-x-2"},_hoisted_4$a=["disabled"],_hoisted_5$9={key:0,class:"text-center py-8"},_hoisted_6$9={key:1,class:"card"},_hoisted_7$9={class:"mb-4"},_hoisted_8$9={class:"mb-4"},_hoisted_9$9={class:"mb-4"},_hoisted_10$8={class:"flex items-center"},_hoisted_11$8=["onKeydown"],_hoisted_12$8={key:0,class:"mt-2 flex flex-wrap gap-2"},_hoisted_13$8=["onClick"],_hoisted_14$7={class:"mb-4"},_hoisted_15$7={class:"border border-gray-300 dark:border-gray-700 rounded-lg overflow-hidden bg-white dark:bg-slate-900"},_hoisted_16$6={class:"border-b border-gray-300 dark:border-gray-700 p-2"},_hoisted_17$5={class:"flex flex-wrap gap-1 mb-2"},_hoisted_18$4=["value"],_hoisted_19$3={class:"relative"},_hoisted_20$3={key:0,class:"absolute top-full left-0 mt-1 p-2 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-10"},_hoisted_21$3={class:"grid grid-cols-5 gap-1"},_hoisted_22$3=["onClick"],_hoisted_23$3={class:"flex flex-wrap gap-1"},_hoisted_24$2={class:"flex flex-wrap gap-1 mt-2"},_hoisted_25$1={class:"p-4 min-h-[300px] prose dark:prose-invert max-w-none"},_hoisted_26$1={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},_sfc_main$d={__name:"NoteEditor",setup(ar){const or=useRoute(),lr=useRouter(),cr=useNotesStore(),ur=useSubjectsStore(),dr=computed(()=>or.params.id==="new"),hr=computed(()=>dr.value?null:Number(or.params.id)),fr=ref(""),pr=ref(""),mr=ref(null),gr=ref([]),yr=ref(""),vr=ref(!1),br=ref(!1),Sr=ref(!1),xr=ref(!1),Er=ref("#000000"),wr=ref("Arial"),Ar=["Arial","Times New Roman","Courier New","Georgia","Verdana","Helvetica"],Tr=ref(null),Cr=ref(!1),kr=ref({title:"",message:"",type:"info"}),Mr=Hr=>{kr.value={title:"Error",message:Hr,type:"error"},Cr.value=!0};onMounted(async()=>{if(!dr.value){vr.value=!0;try{const Hr=await cr.getNoteById(hr.value);Hr?(fr.value=Hr.title,pr.value=Hr.content,mr.value=Hr.subjectId,gr.value=Hr.tags||[]):lr.push("/notes")}catch(Hr){console.error("Error loading note:",Hr)}finally{vr.value=!1}}Tr.value=new Editor({extensions:[StarterKit,Underline,Strike,Subscript,Superscript,TextAlign.configure({types:["heading","paragraph"]}),FontFamily.configure({types:["textStyle"]}),TextStyle,Link.configure({openOnClick:!1}),Image$1,TaskList,TaskItem.configure({nested:!0}),Highlight.configure({multicolor:!0}),Color],content:pr.value,onUpdate:({editor:Hr})=>{pr.value=Hr.getHTML()}})});const Rr=()=>{yr.value.trim()&&!gr.value.includes(yr.value.trim())&&(gr.value.push(yr.value.trim()),yr.value="")},Nr=Hr=>{gr.value.splice(Hr,1)},_r=async()=>{if(!fr.value.trim()){Mr("Por favor ingresa un título para la nota");return}if(!mr.value){Mr("Por favor selecciona una materia");return}br.value=!0;try{const Hr=ur.subjects.find(ys=>ys.id===mr.value),Kr={title:fr.value.trim(),content:Tr.value?Tr.value.getHTML():"",subjectId:mr.value,tags:[...gr.value],subjectName:Hr.name};dr.value?await cr.addNote(Kr):await cr.updateNote(hr.value,Kr),lr.push("/notes")}catch(Hr){console.error("Error saving note:",Hr),Mr("Error al guardar la nota: "+((Hr==null?void 0:Hr.message)||Hr))}finally{br.value=!1}},Dr=()=>{Sr.value=!0},Pr=()=>{Sr.value=!1},Ir=async()=>{kr.value={title:"Confirmar eliminación",message:"¿Estás seguro de que quieres eliminar esta nota?",type:"warning"},Cr.value=!0},$r=async()=>{try{await cr.deleteNote(hr.value),lr.push("/notes")}catch(Hr){console.error("Error deleting note:",Hr),Mr("Error al eliminar la nota")}},Zr=()=>{const Hr=prompt("URL");Hr?Tr.value.chain().focus().extendMarkRange("link").setLink({href:Hr}).run():Tr.value.chain().focus().extendMarkRange("link").unsetLink().run()},rs=()=>{const Hr=prompt("URL de la imagen");Hr&&Tr.value.chain().focus().setImage({src:Hr}).run()},qr=Hr=>{Tr.value.chain().focus().setTextAlign(Hr).run()},zr=Hr=>{wr.value=Hr,Tr.value.chain().focus().setFontFamily(Hr).run()},Jr=Hr=>{Er.value=Hr,Tr.value.chain().focus().setColor(Hr).run(),xr.value=!1};return(Hr,Kr)=>{var ys,Yr,Fr,Br,Ur,Qr,Vr,Gr,is,ps,As,Cs,jr,Wr,ds,ls,ss;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$d,[createBaseVNode("h1",_hoisted_2$b,toDisplayString(dr.value?"Nueva Nota":"Editar Nota"),1),createBaseVNode("div",_hoisted_3$b,[dr.value?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,onClick:Dr,class:"btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}," Eliminar ")),createBaseVNode("button",{onClick:_r,class:"btn btn-primary",disabled:br.value},toDisplayString(br.value?"Guardando...":"Guardar"),9,_hoisted_4$a)])]),vr.value?(openBlock(),createElementBlock("div",_hoisted_5$9,Kr[25]||(Kr[25]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando nota...",-1)]))):(openBlock(),createElementBlock("div",_hoisted_6$9,[createBaseVNode("div",_hoisted_7$9,[Kr[26]||(Kr[26]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Título "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":Kr[0]||(Kr[0]=Lr=>fr.value=Lr),placeholder:"Título de la nota",class:"input"},null,512),[[vModelText,fr.value]])]),createBaseVNode("div",_hoisted_8$9,[createVNode(_sfc_main$g,{modelValue:mr.value,"onUpdate:modelValue":Kr[1]||(Kr[1]=Lr=>mr.value=Lr),required:!0},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_9$9,[Kr[28]||(Kr[28]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Etiquetas ",-1)),createBaseVNode("div",_hoisted_10$8,[withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":Kr[2]||(Kr[2]=Lr=>yr.value=Lr),placeholder:"Añadir etiqueta",class:"input",onKeydown:withKeys(withModifiers(Rr,["prevent"]),["enter"])},null,40,_hoisted_11$8),[[vModelText,yr.value]]),createBaseVNode("button",{onClick:Rr,class:"ml-2 px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Añadir ")]),gr.value.length>0?(openBlock(),createElementBlock("div",_hoisted_12$8,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(gr.value,(Lr,Xr)=>(openBlock(),createElementBlock("div",{key:Xr,class:"inline-flex items-center px-3 py-1 rounded-full text-sm bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-200"},[createTextVNode(toDisplayString(Lr)+" ",1),createBaseVNode("button",{onClick:cs=>Nr(Xr),class:"ml-1 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},Kr[27]||(Kr[27]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,_hoisted_13$8)]))),128))])):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_14$7,[Kr[42]||(Kr[42]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Contenido "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),createBaseVNode("div",_hoisted_15$7,[createBaseVNode("div",_hoisted_16$6,[createBaseVNode("div",_hoisted_17$5,[createBaseVNode("button",{onClick:Kr[3]||(Kr[3]=Lr=>Tr.value.chain().focus().toggleBold().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(ys=Tr.value)==null?void 0:ys.isActive("bold")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Negrita"},Kr[29]||(Kr[29]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)]),2),createBaseVNode("button",{onClick:Kr[4]||(Kr[4]=Lr=>Tr.value.chain().focus().toggleItalic().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Yr=Tr.value)==null?void 0:Yr.isActive("italic")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Cursiva"},Kr[30]||(Kr[30]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"})],-1)]),2),createBaseVNode("button",{onClick:Kr[5]||(Kr[5]=Lr=>Tr.value.chain().focus().toggleUnderline().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Fr=Tr.value)==null?void 0:Fr.isActive("underline")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Subrayado"},Kr[31]||(Kr[31]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})],-1)]),2),createBaseVNode("button",{onClick:Kr[6]||(Kr[6]=Lr=>Tr.value.chain().focus().toggleStrike().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Br=Tr.value)==null?void 0:Br.isActive("strike")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Tachado"},Kr[32]||(Kr[32]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2"})],-1)]),2),createBaseVNode("button",{onClick:Kr[7]||(Kr[7]=Lr=>Tr.value.chain().focus().toggleSubscript().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Ur=Tr.value)==null?void 0:Ur.isActive("subscript")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Subíndice"}," x₂ ",2),createBaseVNode("button",{onClick:Kr[8]||(Kr[8]=Lr=>Tr.value.chain().focus().toggleSuperscript().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Qr=Tr.value)==null?void 0:Qr.isActive("superscript")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Superíndice"}," x² ",2),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Kr[9]||(Kr[9]=Lr=>wr.value=Lr),onChange:Kr[10]||(Kr[10]=Lr=>zr(Lr.target.value)),class:"p-2 rounded bg-white dark:bg-slate-800 border border-gray-300 dark:border-gray-700"},[(openBlock(),createElementBlock(Fragment$1,null,renderList(Ar,Lr=>createBaseVNode("option",{key:Lr,value:Lr},toDisplayString(Lr),9,_hoisted_18$4)),64))],544),[[vModelSelect,wr.value]]),createBaseVNode("div",_hoisted_19$3,[createBaseVNode("button",{onClick:Kr[11]||(Kr[11]=Lr=>xr.value=!xr.value),class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 flex items-center",title:"Color de texto"},[createBaseVNode("div",{class:"w-5 h-5 rounded",style:normalizeStyle({backgroundColor:Er.value})},null,4)]),xr.value?(openBlock(),createElementBlock("div",_hoisted_20$3,[createBaseVNode("div",_hoisted_21$3,[(openBlock(),createElementBlock(Fragment$1,null,renderList(["#000000","#FF0000","#00FF00","#0000FF","#FFFF00","#FF00FF","#00FFFF","#808080","#800000","#008000"],Lr=>createBaseVNode("button",{key:Lr,onClick:Xr=>Jr(Lr),class:"w-6 h-6 rounded",style:normalizeStyle({backgroundColor:Lr})},null,12,_hoisted_22$3)),64))]),withDirectives(createBaseVNode("input",{type:"color","onUpdate:modelValue":Kr[12]||(Kr[12]=Lr=>Er.value=Lr),onChange:Kr[13]||(Kr[13]=Lr=>Jr(Er.value)),class:"mt-2 w-full h-8"},null,544),[[vModelText,Er.value]])])):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_23$3,[createBaseVNode("button",{onClick:Kr[14]||(Kr[14]=Lr=>Tr.value.chain().focus().toggleHeading({level:1}).run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Vr=Tr.value)==null?void 0:Vr.isActive("heading",{level:1})},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Título 1"}," H1 ",2),createBaseVNode("button",{onClick:Kr[15]||(Kr[15]=Lr=>Tr.value.chain().focus().toggleHeading({level:2}).run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Gr=Tr.value)==null?void 0:Gr.isActive("heading",{level:2})},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Título 2"}," H2 ",2),createBaseVNode("button",{onClick:Kr[16]||(Kr[16]=Lr=>Tr.value.chain().focus().toggleHeading({level:3}).run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(is=Tr.value)==null?void 0:is.isActive("heading",{level:3})},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Título 3"}," H3 ",2),createBaseVNode("button",{onClick:Kr[17]||(Kr[17]=Lr=>qr("left")),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(ps=Tr.value)==null?void 0:ps.isActive({textAlign:"left"})},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Alinear a la izquierda"},Kr[33]||(Kr[33]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h10M4 18h16"})],-1)]),2),createBaseVNode("button",{onClick:Kr[18]||(Kr[18]=Lr=>qr("center")),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(As=Tr.value)==null?void 0:As.isActive({textAlign:"center"})},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Centrar"},Kr[34]||(Kr[34]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M6 12h12M4 18h16"})],-1)]),2),createBaseVNode("button",{onClick:Kr[19]||(Kr[19]=Lr=>qr("right")),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Cs=Tr.value)==null?void 0:Cs.isActive({textAlign:"right"})},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Alinear a la derecha"},Kr[35]||(Kr[35]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M10 12h10M4 18h16"})],-1)]),2),createBaseVNode("button",{onClick:Kr[20]||(Kr[20]=Lr=>qr("justify")),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(jr=Tr.value)==null?void 0:jr.isActive({textAlign:"justify"})},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Justificar"},Kr[36]||(Kr[36]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)]),2)]),createBaseVNode("div",_hoisted_24$2,[createBaseVNode("button",{onClick:Kr[21]||(Kr[21]=Lr=>Tr.value.chain().focus().toggleBulletList().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(Wr=Tr.value)==null?void 0:Wr.isActive("bulletList")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Lista con viñetas"},Kr[37]||(Kr[37]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)]),2),createBaseVNode("button",{onClick:Kr[22]||(Kr[22]=Lr=>Tr.value.chain().focus().toggleOrderedList().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(ds=Tr.value)==null?void 0:ds.isActive("orderedList")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Lista numerada"},Kr[38]||(Kr[38]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16m-7 6h7"})],-1)]),2),createBaseVNode("button",{onClick:Kr[23]||(Kr[23]=Lr=>Tr.value.chain().focus().toggleTaskList().run()),class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(ls=Tr.value)==null?void 0:ls.isActive("taskList")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Lista de tareas"},Kr[39]||(Kr[39]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})],-1)]),2),createBaseVNode("button",{onClick:Zr,class:normalizeClass([{"bg-gray-200 dark:bg-gray-700":(ss=Tr.value)==null?void 0:ss.isActive("link")},"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700"]),title:"Insertar enlace"},Kr[40]||(Kr[40]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})],-1)]),2),createBaseVNode("button",{onClick:rs,class:"p-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700",title:"Insertar imagen"},Kr[41]||(Kr[41]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)]))])]),createBaseVNode("div",_hoisted_25$1,[createVNode(unref(EditorContent),{editor:Tr.value},null,8,["editor"])])])])])),Sr.value?(openBlock(),createElementBlock("div",_hoisted_26$1,[createBaseVNode("div",{class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6"},[Kr[43]||(Kr[43]=createBaseVNode("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Confirmar Eliminación",-1)),Kr[44]||(Kr[44]=createBaseVNode("p",{class:"text-gray-600 dark:text-gray-300 mb-6"}," ¿Estás seguro de que deseas eliminar esta nota? Esta acción no se puede deshacer. ",-1)),createBaseVNode("div",{class:"flex justify-end space-x-3"},[createBaseVNode("button",{onClick:Pr,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Cancelar "),createBaseVNode("button",{onClick:Ir,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Eliminar ")])])])):createCommentVNode("",!0),createVNode(_sfc_main$e,{show:Cr.value,title:kr.value.title,message:kr.value.message,type:kr.value.type,onClose:Kr[24]||(Kr[24]=Lr=>Cr.value=!1),onConfirm:$r},null,8,["show","title","message","type"])])}}},_hoisted_1$c={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4"},_hoisted_2$a={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},_hoisted_3$a={class:"md:col-span-2"},_hoisted_4$9={key:0,class:"text-center py-8"},_hoisted_5$8={key:1,class:"text-center py-8"},_hoisted_6$8={key:2,class:"space-y-4"},_hoisted_7$8={class:"flex-grow"},_hoisted_8$8={class:"flex items-center gap-2 mb-1"},_hoisted_9$8={class:"text-xs text-gray-600 dark:text-gray-300"},_hoisted_10$7={class:"text-lg font-semibold text-gray-900 dark:text-white"},_hoisted_11$7={key:0,class:"text-sm text-gray-600 dark:text-gray-300 mt-1 line-clamp-2"},_hoisted_12$7={class:"flex flex-wrap items-center gap-2 mt-2"},_hoisted_13$7={class:"text-sm text-gray-500 dark:text-gray-400"},_hoisted_14$6={class:"flex flex-row md:flex-col gap-2"},_hoisted_15$6=["onClick"],_hoisted_16$5=["onClick"],_sfc_main$c={__name:"TasksPage",setup(ar){const or=useTasksStore(),lr=useSubjectsStore(),cr=ref(null),ur=ref(""),dr=ref("all");onMounted(async()=>{await lr.fetchSubjects(),await or.fetchTasks(),"Notification"in window&&Notification.permission==="default"&&await or.requestNotificationPermission()});const hr=computed(()=>{let Er=or.tasks;if(cr.value&&(Er=Er.filter(wr=>wr.subjectId===cr.value)),dr.value!=="all"&&(Er=Er.filter(wr=>wr.status===dr.value)),ur.value){const wr=ur.value.toLowerCase();Er=Er.filter(Ar=>Ar.title.toLowerCase().includes(wr)||Ar.description&&Ar.description.toLowerCase().includes(wr))}return[...Er].sort((wr,Ar)=>new Date(wr.dueDate)-new Date(Ar.dueDate))}),fr=Er=>format(new Date(Er),"d MMM, yyyy",{locale:es}),pr=Er=>lr.subjects.find(wr=>wr.id===Er)||{name:"Sin materia",color:"#94a3b8"},mr=Er=>{ur.value=Er},gr=()=>{cr.value=null,ur.value="",dr.value="all"},yr=Er=>{const wr={low:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800",medium:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-300 dark:border-yellow-800",high:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/30 dark:text-red-300 dark:border-red-800"};return wr[Er]||wr.medium},vr=Er=>{const wr={pending:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/30 dark:text-yellow-300 dark:border-yellow-800","in-progress":"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800",completed:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/30 dark:text-green-300 dark:border-green-800"};return wr[Er]||wr.pending},br=Er=>({low:"Baja",medium:"Media",high:"Alta"})[Er]||"Media",Sr=Er=>({pending:"Pendiente","in-progress":"En Progreso",completed:"Completada"})[Er]||"Pendiente",xr=async(Er,wr)=>{try{const Ar=await or.getTaskById(Er);Ar&&await or.updateTask(Er,{...Ar,status:wr})}catch(Ar){console.error("Error updating task status:",Ar)}};return(Er,wr)=>{const Ar=resolveComponent("router-link");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$c,[wr[3]||(wr[3]=createBaseVNode("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Tareas",-1)),createVNode(Ar,{to:"/tasks/new",class:"btn btn-primary flex items-center justify-center"},{default:withCtx(()=>wr[2]||(wr[2]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),createTextVNode(" Nueva Tarea ")])),_:1,__:[2]})]),createBaseVNode("div",_hoisted_2$a,[createBaseVNode("div",_hoisted_3$a,[createVNode(_sfc_main$h,{placeholder:"Buscar tarea...",onSearch:mr})]),createBaseVNode("div",null,[createVNode(_sfc_main$g,{modelValue:cr.value,"onUpdate:modelValue":wr[0]||(wr[0]=Tr=>cr.value=Tr)},null,8,["modelValue"])]),createBaseVNode("div",null,[wr[5]||(wr[5]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Estado ",-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":wr[1]||(wr[1]=Tr=>dr.value=Tr),class:"input"},wr[4]||(wr[4]=[createBaseVNode("option",{value:"all"},"Todos",-1),createBaseVNode("option",{value:"pending"},"Pendientes",-1),createBaseVNode("option",{value:"in-progress"},"En Progreso",-1),createBaseVNode("option",{value:"completed"},"Completadas",-1)]),512),[[vModelSelect,dr.value]])])]),unref(or).loading?(openBlock(),createElementBlock("div",_hoisted_4$9,wr[6]||(wr[6]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando tareas...",-1)]))):hr.value.length===0?(openBlock(),createElementBlock("div",_hoisted_5$8,[wr[7]||(wr[7]=createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"No se encontraron tareas",-1)),cr.value||ur.value||dr.value!=="all"?(openBlock(),createElementBlock("button",{key:0,onClick:gr,class:"mt-2 text-primary-600 dark:text-primary-400 hover:underline"}," Borrar filtros ")):createCommentVNode("",!0)])):(openBlock(),createElementBlock("div",_hoisted_6$8,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(hr.value,Tr=>(openBlock(),createElementBlock("div",{key:Tr.id,class:"card flex flex-col md:flex-row md:items-center gap-4"},[createBaseVNode("div",_hoisted_7$8,[createBaseVNode("div",_hoisted_8$8,[createBaseVNode("span",{class:"inline-block w-3 h-3 rounded-full",style:normalizeStyle({backgroundColor:pr(Tr.subjectId).color})},null,4),createBaseVNode("span",_hoisted_9$8,toDisplayString(pr(Tr.subjectId).name),1)]),createVNode(Ar,{to:`/tasks/${Tr.id}`,class:"block"},{default:withCtx(()=>[createBaseVNode("h3",_hoisted_10$7,toDisplayString(Tr.title),1)]),_:2},1032,["to"]),Tr.description?(openBlock(),createElementBlock("p",_hoisted_11$7,toDisplayString(Tr.description),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_12$7,[createBaseVNode("span",_hoisted_13$7," Vence: "+toDisplayString(fr(Tr.dueDate)),1),createBaseVNode("span",{class:normalizeClass(["inline-block px-2 py-1 text-xs rounded-full border",yr(Tr.priority)])},toDisplayString(br(Tr.priority)),3),createBaseVNode("span",{class:normalizeClass(["inline-block px-2 py-1 text-xs rounded-full border",vr(Tr.status)])},toDisplayString(Sr(Tr.status)),3)])]),createBaseVNode("div",_hoisted_14$6,[createVNode(Ar,{to:`/tasks/${Tr.id}`,class:"px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},{default:withCtx(()=>wr[8]||(wr[8]=[createTextVNode(" Editar ")])),_:2,__:[8]},1032,["to"]),Tr.status!=="completed"?(openBlock(),createElementBlock("button",{key:0,onClick:Cr=>xr(Tr.id,"completed"),class:"px-3 py-2 bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300 rounded-lg text-sm hover:bg-green-200 dark:hover:bg-green-800/30 transition-colors"}," Completar ",8,_hoisted_15$6)):(openBlock(),createElementBlock("button",{key:1,onClick:Cr=>xr(Tr.id,"pending"),class:"px-3 py-2 bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300 rounded-lg text-sm hover:bg-yellow-200 dark:hover:bg-yellow-800/30 transition-colors"}," Reabrir ",8,_hoisted_16$5))])]))),128))]))])}}},_hoisted_1$b={class:"flex items-center justify-between mb-6"},_hoisted_2$9={class:"text-2xl font-bold text-gray-900 dark:text-white"},_hoisted_3$9={class:"flex space-x-2"},_hoisted_4$8=["disabled"],_hoisted_5$7={key:0,class:"text-center py-8"},_hoisted_6$7={key:1,class:"card"},_hoisted_7$7={class:"mb-4"},_hoisted_8$7={class:"mb-4"},_hoisted_9$7={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},_hoisted_10$6={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},_hoisted_11$6={class:"text-sm text-gray-500 dark:text-gray-400 mt-4"},_hoisted_12$6={key:0},_hoisted_13$6={key:1},_sfc_main$b={__name:"TaskEditor",setup(ar){const or=useRoute(),lr=useRouter(),cr=useTasksStore(),ur=useSubjectsStore(),dr=computed(()=>or.params.id==="new"),hr=computed(()=>dr.value?null:Number(or.params.id)),fr=ref(""),pr=ref(""),mr=ref(""),gr=ref(null),yr=ref("medium"),vr=ref("pending"),br=ref(!1),Sr=ref(!1),xr=ref(!1),Er=ref(!1),wr=ref("default"),Ar=ref(!1),Tr=ref({title:"",message:"",type:"info"});onMounted(async()=>{if(dr.value){const Pr=new Date;Pr.setDate(Pr.getDate()+1),mr.value=Cr(Pr.toISOString())}else{br.value=!0;try{const Pr=await cr.getTaskById(hr.value);Pr?(fr.value=Pr.title,pr.value=Pr.description||"",mr.value=Cr(Pr.dueDate),gr.value=Pr.subjectId,yr.value=Pr.priority||"medium",vr.value=Pr.status||"pending"):lr.push("/tasks")}catch(Pr){console.error("Error loading task:",Pr)}finally{br.value=!1}}typeof window<"u"&&"Notification"in window&&(Er.value=!0,wr.value=Notification.permission)});const Cr=Pr=>format(new Date(Pr),"yyyy-MM-dd"),kr=Pr=>{Tr.value={title:"Error",message:Pr,type:"error"},Ar.value=!0},Mr=async()=>{try{if(!fr.value.trim()){kr("Por favor ingresa un título para la tarea");return}if(!mr.value){kr("Por favor selecciona una fecha de vencimiento");return}if(!gr.value){kr("Por favor selecciona una materia");return}const Pr=ur.subjects.find($r=>$r.id===gr.value),Ir={title:fr.value.trim(),description:pr.value.trim(),dueDate:new Date(mr.value).toISOString(),subjectId:gr.value,priority:yr.value,status:vr.value,subjectName:Pr.name};dr.value?await cr.addTask(Ir):await cr.updateTask(hr.value,Ir),lr.push("/tasks")}catch(Pr){console.error("Error saving task:",Pr),kr("Error al guardar la tarea")}},Rr=()=>{xr.value=!0},Nr=()=>{xr.value=!1},_r=async()=>{Tr.value={title:"Confirmar eliminación",message:"¿Estás seguro de que quieres eliminar esta tarea?",type:"warning"},Ar.value=!0;const Pr=watch(Ar,Ir=>{Ir||Pr()})},Dr=async()=>{if(Er.value){const Pr=await cr.requestNotificationPermission();wr.value=Pr}};return(Pr,Ir)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$b,[createBaseVNode("h1",_hoisted_2$9,toDisplayString(dr.value?"Nueva Tarea":"Editar Tarea"),1),createBaseVNode("div",_hoisted_3$9,[dr.value?createCommentVNode("",!0):(openBlock(),createElementBlock("button",{key:0,onClick:Rr,class:"btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}," Eliminar ")),createBaseVNode("button",{onClick:Mr,class:"btn btn-primary",disabled:Sr.value},toDisplayString(Sr.value?"Guardando...":"Guardar"),9,_hoisted_4$8)])]),br.value?(openBlock(),createElementBlock("div",_hoisted_5$7,Ir[7]||(Ir[7]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando tarea...",-1)]))):(openBlock(),createElementBlock("div",_hoisted_6$7,[createBaseVNode("div",_hoisted_7$7,[Ir[8]||(Ir[8]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Título "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":Ir[0]||(Ir[0]=$r=>fr.value=$r),placeholder:"Título de la tarea",class:"input"},null,512),[[vModelText,fr.value]])]),createBaseVNode("div",_hoisted_8$7,[Ir[9]||(Ir[9]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Descripción ",-1)),withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":Ir[1]||(Ir[1]=$r=>pr.value=$r),placeholder:"Descripción de la tarea",rows:"4",class:"input"},null,512),[[vModelText,pr.value]])]),createBaseVNode("div",_hoisted_9$7,[createBaseVNode("div",null,[Ir[10]||(Ir[10]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Fecha de vencimiento "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"date","onUpdate:modelValue":Ir[2]||(Ir[2]=$r=>mr.value=$r),class:"input"},null,512),[[vModelText,mr.value]])]),createBaseVNode("div",null,[createVNode(_sfc_main$g,{modelValue:gr.value,"onUpdate:modelValue":Ir[3]||(Ir[3]=$r=>gr.value=$r),required:!0},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_10$6,[createBaseVNode("div",null,[Ir[12]||(Ir[12]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Prioridad ",-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Ir[4]||(Ir[4]=$r=>yr.value=$r),class:"input"},Ir[11]||(Ir[11]=[createBaseVNode("option",{value:"low"},"Baja",-1),createBaseVNode("option",{value:"medium"},"Media",-1),createBaseVNode("option",{value:"high"},"Alta",-1)]),512),[[vModelSelect,yr.value]])]),createBaseVNode("div",null,[Ir[14]||(Ir[14]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Estado ",-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Ir[5]||(Ir[5]=$r=>vr.value=$r),class:"input"},Ir[13]||(Ir[13]=[createBaseVNode("option",{value:"pending"},"Pendiente",-1),createBaseVNode("option",{value:"in-progress"},"En Progreso",-1),createBaseVNode("option",{value:"completed"},"Completada",-1)]),512),[[vModelSelect,vr.value]])])]),createBaseVNode("div",_hoisted_11$6,[Er.value&&wr.value==="granted"?(openBlock(),createElementBlock("p",_hoisted_12$6," Se enviará una notificación un día antes de la fecha de vencimiento. ")):Er.value&&wr.value!=="denied"?(openBlock(),createElementBlock("p",_hoisted_13$6,[createBaseVNode("button",{onClick:Dr,class:"text-primary-600 dark:text-primary-400 hover:underline"}," Habilitar notificaciones "),Ir[15]||(Ir[15]=createTextVNode(" para recibir recordatorios de tareas. "))])):createCommentVNode("",!0)])])),xr.value?(openBlock(),createElementBlock("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:withModifiers(Nr,["self"])},[createBaseVNode("div",{class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6"},[Ir[16]||(Ir[16]=createBaseVNode("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Confirmar Eliminación",-1)),Ir[17]||(Ir[17]=createBaseVNode("p",{class:"text-gray-600 dark:text-gray-300 mb-6"}," ¿Estás seguro de que deseas eliminar esta tarea? Esta acción no se puede deshacer. ",-1)),createBaseVNode("div",{class:"flex justify-end space-x-3"},[createBaseVNode("button",{onClick:Nr,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Cancelar "),createBaseVNode("button",{onClick:_r,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Eliminar ")])])])):createCommentVNode("",!0),createVNode(_sfc_main$e,{show:Ar.value,title:Tr.value.title,message:Tr.value.message,type:Tr.value.type,onClose:Ir[6]||(Ir[6]=$r=>Ar.value=!1),onConfirm:Pr.handleConfirmDelete},null,8,["show","title","message","type","onConfirm"])]))}};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(ar){if(ar.__esModule)return ar;var or=ar.default;if(typeof or=="function"){var lr=function cr(){return this instanceof cr?Reflect.construct(or,arguments,this.constructor):or.apply(this,arguments)};lr.prototype=or.prototype}else lr={};return Object.defineProperty(lr,"__esModule",{value:!0}),Object.keys(ar).forEach(function(cr){var ur=Object.getOwnPropertyDescriptor(ar,cr);Object.defineProperty(lr,cr,ur.get?ur:{enumerable:!0,get:function(){return ar[cr]}})}),lr}var vuedraggable_umd={exports:{}};const require$$0=getAugmentedNamespace(vue_runtime_esmBundler);/**!
 * Sortable 1.14.0
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(ar,or){var lr=Object.keys(ar);if(Object.getOwnPropertySymbols){var cr=Object.getOwnPropertySymbols(ar);or&&(cr=cr.filter(function(ur){return Object.getOwnPropertyDescriptor(ar,ur).enumerable})),lr.push.apply(lr,cr)}return lr}function _objectSpread2(ar){for(var or=1;or<arguments.length;or++){var lr=arguments[or]!=null?arguments[or]:{};or%2?ownKeys(Object(lr),!0).forEach(function(cr){_defineProperty(ar,cr,lr[cr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ar,Object.getOwnPropertyDescriptors(lr)):ownKeys(Object(lr)).forEach(function(cr){Object.defineProperty(ar,cr,Object.getOwnPropertyDescriptor(lr,cr))})}return ar}function _typeof(ar){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(or){return typeof or}:_typeof=function(or){return or&&typeof Symbol=="function"&&or.constructor===Symbol&&or!==Symbol.prototype?"symbol":typeof or},_typeof(ar)}function _defineProperty(ar,or,lr){return or in ar?Object.defineProperty(ar,or,{value:lr,enumerable:!0,configurable:!0,writable:!0}):ar[or]=lr,ar}function _extends(){return _extends=Object.assign||function(ar){for(var or=1;or<arguments.length;or++){var lr=arguments[or];for(var cr in lr)Object.prototype.hasOwnProperty.call(lr,cr)&&(ar[cr]=lr[cr])}return ar},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(ar,or){if(ar==null)return{};var lr={},cr=Object.keys(ar),ur,dr;for(dr=0;dr<cr.length;dr++)ur=cr[dr],!(or.indexOf(ur)>=0)&&(lr[ur]=ar[ur]);return lr}function _objectWithoutProperties(ar,or){if(ar==null)return{};var lr=_objectWithoutPropertiesLoose(ar,or),cr,ur;if(Object.getOwnPropertySymbols){var dr=Object.getOwnPropertySymbols(ar);for(ur=0;ur<dr.length;ur++)cr=dr[ur],!(or.indexOf(cr)>=0)&&Object.prototype.propertyIsEnumerable.call(ar,cr)&&(lr[cr]=ar[cr])}return lr}function _toConsumableArray(ar){return _arrayWithoutHoles(ar)||_iterableToArray(ar)||_unsupportedIterableToArray(ar)||_nonIterableSpread()}function _arrayWithoutHoles(ar){if(Array.isArray(ar))return _arrayLikeToArray(ar)}function _iterableToArray(ar){if(typeof Symbol<"u"&&ar[Symbol.iterator]!=null||ar["@@iterator"]!=null)return Array.from(ar)}function _unsupportedIterableToArray(ar,or){if(ar){if(typeof ar=="string")return _arrayLikeToArray(ar,or);var lr=Object.prototype.toString.call(ar).slice(8,-1);if(lr==="Object"&&ar.constructor&&(lr=ar.constructor.name),lr==="Map"||lr==="Set")return Array.from(ar);if(lr==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(lr))return _arrayLikeToArray(ar,or)}}function _arrayLikeToArray(ar,or){(or==null||or>ar.length)&&(or=ar.length);for(var lr=0,cr=new Array(or);lr<or;lr++)cr[lr]=ar[lr];return cr}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var version="1.14.0";function userAgent(ar){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(ar)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(ar,or,lr){ar.addEventListener(or,lr,!IE11OrLess&&captureMode)}function off(ar,or,lr){ar.removeEventListener(or,lr,!IE11OrLess&&captureMode)}function matches(ar,or){if(or){if(or[0]===">"&&(or=or.substring(1)),ar)try{if(ar.matches)return ar.matches(or);if(ar.msMatchesSelector)return ar.msMatchesSelector(or);if(ar.webkitMatchesSelector)return ar.webkitMatchesSelector(or)}catch{return!1}return!1}}function getParentOrHost(ar){return ar.host&&ar!==document&&ar.host.nodeType?ar.host:ar.parentNode}function closest(ar,or,lr,cr){if(ar){lr=lr||document;do{if(or!=null&&(or[0]===">"?ar.parentNode===lr&&matches(ar,or):matches(ar,or))||cr&&ar===lr)return ar;if(ar===lr)break}while(ar=getParentOrHost(ar))}return null}var R_SPACE=/\s+/g;function toggleClass(ar,or,lr){if(ar&&or)if(ar.classList)ar.classList[lr?"add":"remove"](or);else{var cr=(" "+ar.className+" ").replace(R_SPACE," ").replace(" "+or+" "," ");ar.className=(cr+(lr?" "+or:"")).replace(R_SPACE," ")}}function css(ar,or,lr){var cr=ar&&ar.style;if(cr){if(lr===void 0)return document.defaultView&&document.defaultView.getComputedStyle?lr=document.defaultView.getComputedStyle(ar,""):ar.currentStyle&&(lr=ar.currentStyle),or===void 0?lr:lr[or];!(or in cr)&&or.indexOf("webkit")===-1&&(or="-webkit-"+or),cr[or]=lr+(typeof lr=="string"?"":"px")}}function matrix(ar,or){var lr="";if(typeof ar=="string")lr=ar;else do{var cr=css(ar,"transform");cr&&cr!=="none"&&(lr=cr+" "+lr)}while(!or&&(ar=ar.parentNode));var ur=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return ur&&new ur(lr)}function find(ar,or,lr){if(ar){var cr=ar.getElementsByTagName(or),ur=0,dr=cr.length;if(lr)for(;ur<dr;ur++)lr(cr[ur],ur);return cr}return[]}function getWindowScrollingElement(){var ar=document.scrollingElement;return ar||document.documentElement}function getRect(ar,or,lr,cr,ur){if(!(!ar.getBoundingClientRect&&ar!==window)){var dr,hr,fr,pr,mr,gr,yr;if(ar!==window&&ar.parentNode&&ar!==getWindowScrollingElement()?(dr=ar.getBoundingClientRect(),hr=dr.top,fr=dr.left,pr=dr.bottom,mr=dr.right,gr=dr.height,yr=dr.width):(hr=0,fr=0,pr=window.innerHeight,mr=window.innerWidth,gr=window.innerHeight,yr=window.innerWidth),(or||lr)&&ar!==window&&(ur=ur||ar.parentNode,!IE11OrLess))do if(ur&&ur.getBoundingClientRect&&(css(ur,"transform")!=="none"||lr&&css(ur,"position")!=="static")){var vr=ur.getBoundingClientRect();hr-=vr.top+parseInt(css(ur,"border-top-width")),fr-=vr.left+parseInt(css(ur,"border-left-width")),pr=hr+dr.height,mr=fr+dr.width;break}while(ur=ur.parentNode);if(cr&&ar!==window){var br=matrix(ur||ar),Sr=br&&br.a,xr=br&&br.d;br&&(hr/=xr,fr/=Sr,yr/=Sr,gr/=xr,pr=hr+gr,mr=fr+yr)}return{top:hr,left:fr,bottom:pr,right:mr,width:yr,height:gr}}}function isScrolledPast(ar,or,lr){for(var cr=getParentAutoScrollElement(ar,!0),ur=getRect(ar)[or];cr;){var dr=getRect(cr)[lr],hr=void 0;if(hr=ur>=dr,!hr)return cr;if(cr===getWindowScrollingElement())break;cr=getParentAutoScrollElement(cr,!1)}return!1}function getChild(ar,or,lr,cr){for(var ur=0,dr=0,hr=ar.children;dr<hr.length;){if(hr[dr].style.display!=="none"&&hr[dr]!==Sortable.ghost&&(cr||hr[dr]!==Sortable.dragged)&&closest(hr[dr],lr.draggable,ar,!1)){if(ur===or)return hr[dr];ur++}dr++}return null}function lastChild(ar,or){for(var lr=ar.lastElementChild;lr&&(lr===Sortable.ghost||css(lr,"display")==="none"||or&&!matches(lr,or));)lr=lr.previousElementSibling;return lr||null}function index(ar,or){var lr=0;if(!ar||!ar.parentNode)return-1;for(;ar=ar.previousElementSibling;)ar.nodeName.toUpperCase()!=="TEMPLATE"&&ar!==Sortable.clone&&(!or||matches(ar,or))&&lr++;return lr}function getRelativeScrollOffset(ar){var or=0,lr=0,cr=getWindowScrollingElement();if(ar)do{var ur=matrix(ar),dr=ur.a,hr=ur.d;or+=ar.scrollLeft*dr,lr+=ar.scrollTop*hr}while(ar!==cr&&(ar=ar.parentNode));return[or,lr]}function indexOfObject(ar,or){for(var lr in ar)if(ar.hasOwnProperty(lr)){for(var cr in or)if(or.hasOwnProperty(cr)&&or[cr]===ar[lr][cr])return Number(lr)}return-1}function getParentAutoScrollElement(ar,or){if(!ar||!ar.getBoundingClientRect)return getWindowScrollingElement();var lr=ar,cr=!1;do if(lr.clientWidth<lr.scrollWidth||lr.clientHeight<lr.scrollHeight){var ur=css(lr);if(lr.clientWidth<lr.scrollWidth&&(ur.overflowX=="auto"||ur.overflowX=="scroll")||lr.clientHeight<lr.scrollHeight&&(ur.overflowY=="auto"||ur.overflowY=="scroll")){if(!lr.getBoundingClientRect||lr===document.body)return getWindowScrollingElement();if(cr||or)return lr;cr=!0}}while(lr=lr.parentNode);return getWindowScrollingElement()}function extend(ar,or){if(ar&&or)for(var lr in or)or.hasOwnProperty(lr)&&(ar[lr]=or[lr]);return ar}function isRectEqual(ar,or){return Math.round(ar.top)===Math.round(or.top)&&Math.round(ar.left)===Math.round(or.left)&&Math.round(ar.height)===Math.round(or.height)&&Math.round(ar.width)===Math.round(or.width)}var _throttleTimeout;function throttle(ar,or){return function(){if(!_throttleTimeout){var lr=arguments,cr=this;lr.length===1?ar.call(cr,lr[0]):ar.apply(cr,lr),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},or)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(ar,or,lr){ar.scrollLeft+=or,ar.scrollTop+=lr}function clone(ar){var or=window.Polymer,lr=window.jQuery||window.Zepto;return or&&or.dom?or.dom(ar).cloneNode(!0):lr?lr(ar).clone(!0)[0]:ar.cloneNode(!0)}function setRect(ar,or){css(ar,"position","absolute"),css(ar,"top",or.top),css(ar,"left",or.left),css(ar,"width",or.width),css(ar,"height",or.height)}function unsetRect(ar){css(ar,"position",""),css(ar,"top",""),css(ar,"left",""),css(ar,"width",""),css(ar,"height","")}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var ar=[],or;return{captureAnimationState:function(){if(ar=[],!!this.options.animation){var cr=[].slice.call(this.el.children);cr.forEach(function(ur){if(!(css(ur,"display")==="none"||ur===Sortable.ghost)){ar.push({target:ur,rect:getRect(ur)});var dr=_objectSpread2({},ar[ar.length-1].rect);if(ur.thisAnimationDuration){var hr=matrix(ur,!0);hr&&(dr.top-=hr.f,dr.left-=hr.e)}ur.fromRect=dr}})}},addAnimationState:function(cr){ar.push(cr)},removeAnimationState:function(cr){ar.splice(indexOfObject(ar,{target:cr}),1)},animateAll:function(cr){var ur=this;if(!this.options.animation){clearTimeout(or),typeof cr=="function"&&cr();return}var dr=!1,hr=0;ar.forEach(function(fr){var pr=0,mr=fr.target,gr=mr.fromRect,yr=getRect(mr),vr=mr.prevFromRect,br=mr.prevToRect,Sr=fr.rect,xr=matrix(mr,!0);xr&&(yr.top-=xr.f,yr.left-=xr.e),mr.toRect=yr,mr.thisAnimationDuration&&isRectEqual(vr,yr)&&!isRectEqual(gr,yr)&&(Sr.top-yr.top)/(Sr.left-yr.left)===(gr.top-yr.top)/(gr.left-yr.left)&&(pr=calculateRealTime(Sr,vr,br,ur.options)),isRectEqual(yr,gr)||(mr.prevFromRect=gr,mr.prevToRect=yr,pr||(pr=ur.options.animation),ur.animate(mr,Sr,yr,pr)),pr&&(dr=!0,hr=Math.max(hr,pr),clearTimeout(mr.animationResetTimer),mr.animationResetTimer=setTimeout(function(){mr.animationTime=0,mr.prevFromRect=null,mr.fromRect=null,mr.prevToRect=null,mr.thisAnimationDuration=null},pr),mr.thisAnimationDuration=pr)}),clearTimeout(or),dr?or=setTimeout(function(){typeof cr=="function"&&cr()},hr):typeof cr=="function"&&cr(),ar=[]},animate:function(cr,ur,dr,hr){if(hr){css(cr,"transition",""),css(cr,"transform","");var fr=matrix(this.el),pr=fr&&fr.a,mr=fr&&fr.d,gr=(ur.left-dr.left)/(pr||1),yr=(ur.top-dr.top)/(mr||1);cr.animatingX=!!gr,cr.animatingY=!!yr,css(cr,"transform","translate3d("+gr+"px,"+yr+"px,0)"),this.forRepaintDummy=repaint(cr),css(cr,"transition","transform "+hr+"ms"+(this.options.easing?" "+this.options.easing:"")),css(cr,"transform","translate3d(0,0,0)"),typeof cr.animated=="number"&&clearTimeout(cr.animated),cr.animated=setTimeout(function(){css(cr,"transition",""),css(cr,"transform",""),cr.animated=!1,cr.animatingX=!1,cr.animatingY=!1},hr)}}}}function repaint(ar){return ar.offsetWidth}function calculateRealTime(ar,or,lr,cr){return Math.sqrt(Math.pow(or.top-ar.top,2)+Math.pow(or.left-ar.left,2))/Math.sqrt(Math.pow(or.top-lr.top,2)+Math.pow(or.left-lr.left,2))*cr.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(or){for(var lr in defaults)defaults.hasOwnProperty(lr)&&!(lr in or)&&(or[lr]=defaults[lr]);plugins.forEach(function(cr){if(cr.pluginName===or.pluginName)throw"Sortable: Cannot mount plugin ".concat(or.pluginName," more than once")}),plugins.push(or)},pluginEvent:function(or,lr,cr){var ur=this;this.eventCanceled=!1,cr.cancel=function(){ur.eventCanceled=!0};var dr=or+"Global";plugins.forEach(function(hr){lr[hr.pluginName]&&(lr[hr.pluginName][dr]&&lr[hr.pluginName][dr](_objectSpread2({sortable:lr},cr)),lr.options[hr.pluginName]&&lr[hr.pluginName][or]&&lr[hr.pluginName][or](_objectSpread2({sortable:lr},cr)))})},initializePlugins:function(or,lr,cr,ur){plugins.forEach(function(fr){var pr=fr.pluginName;if(!(!or.options[pr]&&!fr.initializeByDefault)){var mr=new fr(or,lr,or.options);mr.sortable=or,mr.options=or.options,or[pr]=mr,_extends(cr,mr.defaults)}});for(var dr in or.options)if(or.options.hasOwnProperty(dr)){var hr=this.modifyOption(or,dr,or.options[dr]);typeof hr<"u"&&(or.options[dr]=hr)}},getEventProperties:function(or,lr){var cr={};return plugins.forEach(function(ur){typeof ur.eventProperties=="function"&&_extends(cr,ur.eventProperties.call(lr[ur.pluginName],or))}),cr},modifyOption:function(or,lr,cr){var ur;return plugins.forEach(function(dr){or[dr.pluginName]&&dr.optionListeners&&typeof dr.optionListeners[lr]=="function"&&(ur=dr.optionListeners[lr].call(or[dr.pluginName],cr))}),ur}};function dispatchEvent$1(ar){var or=ar.sortable,lr=ar.rootEl,cr=ar.name,ur=ar.targetEl,dr=ar.cloneEl,hr=ar.toEl,fr=ar.fromEl,pr=ar.oldIndex,mr=ar.newIndex,gr=ar.oldDraggableIndex,yr=ar.newDraggableIndex,vr=ar.originalEvent,br=ar.putSortable,Sr=ar.extraEventProperties;if(or=or||lr&&lr[expando],!!or){var xr,Er=or.options,wr="on"+cr.charAt(0).toUpperCase()+cr.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?xr=new CustomEvent(cr,{bubbles:!0,cancelable:!0}):(xr=document.createEvent("Event"),xr.initEvent(cr,!0,!0)),xr.to=hr||lr,xr.from=fr||lr,xr.item=ur||lr,xr.clone=dr,xr.oldIndex=pr,xr.newIndex=mr,xr.oldDraggableIndex=gr,xr.newDraggableIndex=yr,xr.originalEvent=vr,xr.pullMode=br?br.lastPutMode:void 0;var Ar=_objectSpread2(_objectSpread2({},Sr),PluginManager.getEventProperties(cr,or));for(var Tr in Ar)xr[Tr]=Ar[Tr];lr&&lr.dispatchEvent(xr),Er[wr]&&Er[wr].call(or,xr)}}var _excluded=["evt"],pluginEvent=function(or,lr){var cr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ur=cr.evt,dr=_objectWithoutProperties(cr,_excluded);PluginManager.pluginEvent.bind(Sortable)(or,lr,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:ur,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(fr){_dispatchEvent({sortable:lr,name:fr,originalEvent:ur})}},dr))};function _dispatchEvent(ar){dispatchEvent$1(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},ar))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var ar=document.createElement("x");return ar.style.cssText="pointer-events:auto",ar.style.pointerEvents==="auto"}}(),_detectDirection=function(or,lr){var cr=css(or),ur=parseInt(cr.width)-parseInt(cr.paddingLeft)-parseInt(cr.paddingRight)-parseInt(cr.borderLeftWidth)-parseInt(cr.borderRightWidth),dr=getChild(or,0,lr),hr=getChild(or,1,lr),fr=dr&&css(dr),pr=hr&&css(hr),mr=fr&&parseInt(fr.marginLeft)+parseInt(fr.marginRight)+getRect(dr).width,gr=pr&&parseInt(pr.marginLeft)+parseInt(pr.marginRight)+getRect(hr).width;if(cr.display==="flex")return cr.flexDirection==="column"||cr.flexDirection==="column-reverse"?"vertical":"horizontal";if(cr.display==="grid")return cr.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(dr&&fr.float&&fr.float!=="none"){var yr=fr.float==="left"?"left":"right";return hr&&(pr.clear==="both"||pr.clear===yr)?"vertical":"horizontal"}return dr&&(fr.display==="block"||fr.display==="flex"||fr.display==="table"||fr.display==="grid"||mr>=ur&&cr[CSSFloatProperty]==="none"||hr&&cr[CSSFloatProperty]==="none"&&mr+gr>ur)?"vertical":"horizontal"},_dragElInRowColumn=function(or,lr,cr){var ur=cr?or.left:or.top,dr=cr?or.right:or.bottom,hr=cr?or.width:or.height,fr=cr?lr.left:lr.top,pr=cr?lr.right:lr.bottom,mr=cr?lr.width:lr.height;return ur===fr||dr===pr||ur+hr/2===fr+mr/2},_detectNearestEmptySortable=function(or,lr){var cr;return sortables.some(function(ur){var dr=ur[expando].options.emptyInsertThreshold;if(!(!dr||lastChild(ur))){var hr=getRect(ur),fr=or>=hr.left-dr&&or<=hr.right+dr,pr=lr>=hr.top-dr&&lr<=hr.bottom+dr;if(fr&&pr)return cr=ur}}),cr},_prepareGroup=function(or){function lr(dr,hr){return function(fr,pr,mr,gr){var yr=fr.options.group.name&&pr.options.group.name&&fr.options.group.name===pr.options.group.name;if(dr==null&&(hr||yr))return!0;if(dr==null||dr===!1)return!1;if(hr&&dr==="clone")return dr;if(typeof dr=="function")return lr(dr(fr,pr,mr,gr),hr)(fr,pr,mr,gr);var vr=(hr?fr:pr).options.group.name;return dr===!0||typeof dr=="string"&&dr===vr||dr.join&&dr.indexOf(vr)>-1}}var cr={},ur=or.group;(!ur||_typeof(ur)!="object")&&(ur={name:ur}),cr.name=ur.name,cr.checkPull=lr(ur.pull,!0),cr.checkPut=lr(ur.put),cr.revertClone=ur.revertClone,or.group=cr},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&document.addEventListener("click",function(ar){if(ignoreNextClick)return ar.preventDefault(),ar.stopPropagation&&ar.stopPropagation(),ar.stopImmediatePropagation&&ar.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(or){if(dragEl){or=or.touches?or.touches[0]:or;var lr=_detectNearestEmptySortable(or.clientX,or.clientY);if(lr){var cr={};for(var ur in or)or.hasOwnProperty(ur)&&(cr[ur]=or[ur]);cr.target=cr.rootEl=lr,cr.preventDefault=void 0,cr.stopPropagation=void 0,lr[expando]._onDragOver(cr)}}},_checkOutsideTargetEl=function(or){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(or.target)};function Sortable(ar,or){if(!(ar&&ar.nodeType&&ar.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(ar));this.el=ar,this.options=or=_extends({},or),ar[expando]=this;var lr={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(ar.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(ar,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(hr,fr){hr.setData("Text",fr.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,ar,lr);for(var cr in lr)!(cr in or)&&(or[cr]=lr[cr]);_prepareGroup(or);for(var ur in this)ur.charAt(0)==="_"&&typeof this[ur]=="function"&&(this[ur]=this[ur].bind(this));this.nativeDraggable=or.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),or.supportPointer?on(ar,"pointerdown",this._onTapStart):(on(ar,"mousedown",this._onTapStart),on(ar,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(ar,"dragover",this),on(ar,"dragenter",this)),sortables.push(this.el),or.store&&or.store.get&&this.sort(or.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(or){!this.el.contains(or)&&or!==this.el&&(lastTarget=null)},_getDirection:function(or,lr){return typeof this.options.direction=="function"?this.options.direction.call(this,or,lr,dragEl):this.options.direction},_onTapStart:function(or){if(or.cancelable){var lr=this,cr=this.el,ur=this.options,dr=ur.preventOnFilter,hr=or.type,fr=or.touches&&or.touches[0]||or.pointerType&&or.pointerType==="touch"&&or,pr=(fr||or).target,mr=or.target.shadowRoot&&(or.path&&or.path[0]||or.composedPath&&or.composedPath()[0])||pr,gr=ur.filter;if(_saveInputCheckedState(cr),!dragEl&&!(/mousedown|pointerdown/.test(hr)&&or.button!==0||ur.disabled)&&!mr.isContentEditable&&!(!this.nativeDraggable&&Safari&&pr&&pr.tagName.toUpperCase()==="SELECT")&&(pr=closest(pr,ur.draggable,cr,!1),!(pr&&pr.animated)&&lastDownEl!==pr)){if(oldIndex=index(pr),oldDraggableIndex=index(pr,ur.draggable),typeof gr=="function"){if(gr.call(this,or,pr,this)){_dispatchEvent({sortable:lr,rootEl:mr,name:"filter",targetEl:pr,toEl:cr,fromEl:cr}),pluginEvent("filter",lr,{evt:or}),dr&&or.cancelable&&or.preventDefault();return}}else if(gr&&(gr=gr.split(",").some(function(yr){if(yr=closest(mr,yr.trim(),cr,!1),yr)return _dispatchEvent({sortable:lr,rootEl:yr,name:"filter",targetEl:pr,fromEl:cr,toEl:cr}),pluginEvent("filter",lr,{evt:or}),!0}),gr)){dr&&or.cancelable&&or.preventDefault();return}ur.handle&&!closest(mr,ur.handle,cr,!1)||this._prepareDragStart(or,fr,pr)}}},_prepareDragStart:function(or,lr,cr){var ur=this,dr=ur.el,hr=ur.options,fr=dr.ownerDocument,pr;if(cr&&!dragEl&&cr.parentNode===dr){var mr=getRect(cr);if(rootEl=dr,dragEl=cr,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=cr,activeGroup=hr.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(lr||or).clientX,clientY:(lr||or).clientY},tapDistanceLeft=tapEvt.clientX-mr.left,tapDistanceTop=tapEvt.clientY-mr.top,this._lastX=(lr||or).clientX,this._lastY=(lr||or).clientY,dragEl.style["will-change"]="all",pr=function(){if(pluginEvent("delayEnded",ur,{evt:or}),Sortable.eventCanceled){ur._onDrop();return}ur._disableDelayedDragEvents(),!FireFox&&ur.nativeDraggable&&(dragEl.draggable=!0),ur._triggerDragStart(or,lr),_dispatchEvent({sortable:ur,name:"choose",originalEvent:or}),toggleClass(dragEl,hr.chosenClass,!0)},hr.ignore.split(",").forEach(function(gr){find(dragEl,gr.trim(),_disableDraggable)}),on(fr,"dragover",nearestEmptyInsertDetectEvent),on(fr,"mousemove",nearestEmptyInsertDetectEvent),on(fr,"touchmove",nearestEmptyInsertDetectEvent),on(fr,"mouseup",ur._onDrop),on(fr,"touchend",ur._onDrop),on(fr,"touchcancel",ur._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:or}),hr.delay&&(!hr.delayOnTouchOnly||lr)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(fr,"mouseup",ur._disableDelayedDrag),on(fr,"touchend",ur._disableDelayedDrag),on(fr,"touchcancel",ur._disableDelayedDrag),on(fr,"mousemove",ur._delayedDragTouchMoveHandler),on(fr,"touchmove",ur._delayedDragTouchMoveHandler),hr.supportPointer&&on(fr,"pointermove",ur._delayedDragTouchMoveHandler),ur._dragStartTimer=setTimeout(pr,hr.delay)}else pr()}},_delayedDragTouchMoveHandler:function(or){var lr=or.touches?or.touches[0]:or;Math.max(Math.abs(lr.clientX-this._lastX),Math.abs(lr.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var or=this.el.ownerDocument;off(or,"mouseup",this._disableDelayedDrag),off(or,"touchend",this._disableDelayedDrag),off(or,"touchcancel",this._disableDelayedDrag),off(or,"mousemove",this._delayedDragTouchMoveHandler),off(or,"touchmove",this._delayedDragTouchMoveHandler),off(or,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(or,lr){lr=lr||or.pointerType=="touch"&&or,!this.nativeDraggable||lr?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):lr?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(or,lr){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:lr}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var cr=this.options;!or&&toggleClass(dragEl,cr.dragClass,!1),toggleClass(dragEl,cr.ghostClass,!0),Sortable.active=this,or&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:lr})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var or=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),lr=or;or&&or.shadowRoot&&(or=or.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),or!==lr);)lr=or;if(dragEl.parentNode[expando]._isOutsideThisEl(or),lr)do{if(lr[expando]){var cr=void 0;if(cr=lr[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:or,rootEl:lr}),cr&&!this.options.dragoverBubble)break}or=lr}while(lr=lr.parentNode);_unhideGhostForTarget()}},_onTouchMove:function(or){if(tapEvt){var lr=this.options,cr=lr.fallbackTolerance,ur=lr.fallbackOffset,dr=or.touches?or.touches[0]:or,hr=ghostEl&&matrix(ghostEl,!0),fr=ghostEl&&hr&&hr.a,pr=ghostEl&&hr&&hr.d,mr=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),gr=(dr.clientX-tapEvt.clientX+ur.x)/(fr||1)+(mr?mr[0]-ghostRelativeParentInitialScroll[0]:0)/(fr||1),yr=(dr.clientY-tapEvt.clientY+ur.y)/(pr||1)+(mr?mr[1]-ghostRelativeParentInitialScroll[1]:0)/(pr||1);if(!Sortable.active&&!awaitingDragStarted){if(cr&&Math.max(Math.abs(dr.clientX-this._lastX),Math.abs(dr.clientY-this._lastY))<cr)return;this._onDragStart(or,!0)}if(ghostEl){hr?(hr.e+=gr-(lastDx||0),hr.f+=yr-(lastDy||0)):hr={a:1,b:0,c:0,d:1,e:gr,f:yr};var vr="matrix(".concat(hr.a,",").concat(hr.b,",").concat(hr.c,",").concat(hr.d,",").concat(hr.e,",").concat(hr.f,")");css(ghostEl,"webkitTransform",vr),css(ghostEl,"mozTransform",vr),css(ghostEl,"msTransform",vr),css(ghostEl,"transform",vr),lastDx=gr,lastDy=yr,touchEvt=dr}or.cancelable&&or.preventDefault()}},_appendGhost:function(){if(!ghostEl){var or=this.options.fallbackOnBody?document.body:rootEl,lr=getRect(dragEl,!0,PositionGhostAbsolutely,!0,or),cr=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=or;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),lr.top+=ghostRelativeParent.scrollTop,lr.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,cr.ghostClass,!1),toggleClass(ghostEl,cr.fallbackClass,!0),toggleClass(ghostEl,cr.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",lr.top),css(ghostEl,"left",lr.left),css(ghostEl,"width",lr.width),css(ghostEl,"height",lr.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,or.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(or,lr){var cr=this,ur=or.dataTransfer,dr=cr.options;if(pluginEvent("dragStart",this,{evt:or}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),cr.cloneId=_nextTick(function(){pluginEvent("clone",cr),!Sortable.eventCanceled&&(cr.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),cr._hideClone(),_dispatchEvent({sortable:cr,name:"clone"}))}),!lr&&toggleClass(dragEl,dr.dragClass,!0),lr?(ignoreNextClick=!0,cr._loopId=setInterval(cr._emulateDragOver,50)):(off(document,"mouseup",cr._onDrop),off(document,"touchend",cr._onDrop),off(document,"touchcancel",cr._onDrop),ur&&(ur.effectAllowed="move",dr.setData&&dr.setData.call(cr,ur,dragEl)),on(document,"drop",cr),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,cr._dragStartId=_nextTick(cr._dragStarted.bind(cr,lr,or)),on(document,"selectstart",cr),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(or){var lr=this.el,cr=or.target,ur,dr,hr,fr=this.options,pr=fr.group,mr=Sortable.active,gr=activeGroup===pr,yr=fr.sort,vr=putSortable||mr,br,Sr=this,xr=!1;if(_silent)return;function Er(Jr,Hr){pluginEvent(Jr,Sr,_objectSpread2({evt:or,isOwner:gr,axis:br?"vertical":"horizontal",revert:hr,dragRect:ur,targetRect:dr,canSort:yr,fromSortable:vr,target:cr,completed:Ar,onMove:function(ys,Yr){return _onMove(rootEl,lr,dragEl,ur,ys,getRect(ys),or,Yr)},changed:Tr},Hr))}function wr(){Er("dragOverAnimationCapture"),Sr.captureAnimationState(),Sr!==vr&&vr.captureAnimationState()}function Ar(Jr){return Er("dragOverCompleted",{insertion:Jr}),Jr&&(gr?mr._hideClone():mr._showClone(Sr),Sr!==vr&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:mr.options.ghostClass,!1),toggleClass(dragEl,fr.ghostClass,!0)),putSortable!==Sr&&Sr!==Sortable.active?putSortable=Sr:Sr===Sortable.active&&putSortable&&(putSortable=null),vr===Sr&&(Sr._ignoreWhileAnimating=cr),Sr.animateAll(function(){Er("dragOverAnimationComplete"),Sr._ignoreWhileAnimating=null}),Sr!==vr&&(vr.animateAll(),vr._ignoreWhileAnimating=null)),(cr===dragEl&&!dragEl.animated||cr===lr&&!cr.animated)&&(lastTarget=null),!fr.dragoverBubble&&!or.rootEl&&cr!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(or.target),!Jr&&nearestEmptyInsertDetectEvent(or)),!fr.dragoverBubble&&or.stopPropagation&&or.stopPropagation(),xr=!0}function Tr(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,fr.draggable),_dispatchEvent({sortable:Sr,name:"change",toEl:lr,newIndex,newDraggableIndex,originalEvent:or})}if(or.preventDefault!==void 0&&or.cancelable&&or.preventDefault(),cr=closest(cr,fr.draggable,lr,!0),Er("dragOver"),Sortable.eventCanceled)return xr;if(dragEl.contains(or.target)||cr.animated&&cr.animatingX&&cr.animatingY||Sr._ignoreWhileAnimating===cr)return Ar(!1);if(ignoreNextClick=!1,mr&&!fr.disabled&&(gr?yr||(hr=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,mr,dragEl,or))&&pr.checkPut(this,mr,dragEl,or))){if(br=this._getDirection(or,cr)==="vertical",ur=getRect(dragEl),Er("dragOverValid"),Sortable.eventCanceled)return xr;if(hr)return parentEl=rootEl,wr(),this._hideClone(),Er("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),Ar(!0);var Cr=lastChild(lr,fr.draggable);if(!Cr||_ghostIsLast(or,br,this)&&!Cr.animated){if(Cr===dragEl)return Ar(!1);if(Cr&&lr===or.target&&(cr=Cr),cr&&(dr=getRect(cr)),_onMove(rootEl,lr,dragEl,ur,cr,dr,or,!!cr)!==!1)return wr(),lr.appendChild(dragEl),parentEl=lr,Tr(),Ar(!0)}else if(Cr&&_ghostIsFirst(or,br,this)){var kr=getChild(lr,0,fr,!0);if(kr===dragEl)return Ar(!1);if(cr=kr,dr=getRect(cr),_onMove(rootEl,lr,dragEl,ur,cr,dr,or,!1)!==!1)return wr(),lr.insertBefore(dragEl,kr),parentEl=lr,Tr(),Ar(!0)}else if(cr.parentNode===lr){dr=getRect(cr);var Mr=0,Rr,Nr=dragEl.parentNode!==lr,_r=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||ur,cr.animated&&cr.toRect||dr,br),Dr=br?"top":"left",Pr=isScrolledPast(cr,"top","top")||isScrolledPast(dragEl,"top","top"),Ir=Pr?Pr.scrollTop:void 0;lastTarget!==cr&&(Rr=dr[Dr],pastFirstInvertThresh=!1,isCircumstantialInvert=!_r&&fr.invertSwap||Nr),Mr=_getSwapDirection(or,cr,dr,br,_r?1:fr.swapThreshold,fr.invertedSwapThreshold==null?fr.swapThreshold:fr.invertedSwapThreshold,isCircumstantialInvert,lastTarget===cr);var $r;if(Mr!==0){var Zr=index(dragEl);do Zr-=Mr,$r=parentEl.children[Zr];while($r&&(css($r,"display")==="none"||$r===ghostEl))}if(Mr===0||$r===cr)return Ar(!1);lastTarget=cr,lastDirection=Mr;var rs=cr.nextElementSibling,qr=!1;qr=Mr===1;var zr=_onMove(rootEl,lr,dragEl,ur,cr,dr,or,qr);if(zr!==!1)return(zr===1||zr===-1)&&(qr=zr===1),_silent=!0,setTimeout(_unsilent,30),wr(),qr&&!rs?lr.appendChild(dragEl):cr.parentNode.insertBefore(dragEl,qr?rs:cr),Pr&&scrollBy(Pr,0,Ir-Pr.scrollTop),parentEl=dragEl.parentNode,Rr!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(Rr-getRect(cr)[Dr])),Tr(),Ar(!0)}if(lr.contains(dragEl))return Ar(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var or=this.el.ownerDocument;off(or,"mouseup",this._onDrop),off(or,"touchend",this._onDrop),off(or,"pointerup",this._onDrop),off(or,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(or){var lr=this.el,cr=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,cr.draggable),pluginEvent("drop",this,{evt:or}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,cr.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(lr,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),or&&(moved&&(or.cancelable&&or.preventDefault(),!cr.dropBubble&&or.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:or}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:or}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:or}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:or}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:or})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:or}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:or})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:or}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(or){or.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(or){switch(or.type){case"drop":case"dragend":this._onDrop(or);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(or),_globalDragOver(or));break;case"selectstart":or.preventDefault();break}},toArray:function(){for(var or=[],lr,cr=this.el.children,ur=0,dr=cr.length,hr=this.options;ur<dr;ur++)lr=cr[ur],closest(lr,hr.draggable,this.el,!1)&&or.push(lr.getAttribute(hr.dataIdAttr)||_generateId(lr));return or},sort:function(or,lr){var cr={},ur=this.el;this.toArray().forEach(function(dr,hr){var fr=ur.children[hr];closest(fr,this.options.draggable,ur,!1)&&(cr[dr]=fr)},this),lr&&this.captureAnimationState(),or.forEach(function(dr){cr[dr]&&(ur.removeChild(cr[dr]),ur.appendChild(cr[dr]))}),lr&&this.animateAll()},save:function(){var or=this.options.store;or&&or.set&&or.set(this)},closest:function(or,lr){return closest(or,lr||this.options.draggable,this.el,!1)},option:function(or,lr){var cr=this.options;if(lr===void 0)return cr[or];var ur=PluginManager.modifyOption(this,or,lr);typeof ur<"u"?cr[or]=ur:cr[or]=lr,or==="group"&&_prepareGroup(cr)},destroy:function(){pluginEvent("destroy",this);var or=this.el;or[expando]=null,off(or,"mousedown",this._onTapStart),off(or,"touchstart",this._onTapStart),off(or,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(or,"dragover",this),off(or,"dragenter",this)),Array.prototype.forEach.call(or.querySelectorAll("[draggable]"),function(lr){lr.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=or=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(or){if(or.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(ar){ar.dataTransfer&&(ar.dataTransfer.dropEffect="move"),ar.cancelable&&ar.preventDefault()}function _onMove(ar,or,lr,cr,ur,dr,hr,fr){var pr,mr=ar[expando],gr=mr.options.onMove,yr;return window.CustomEvent&&!IE11OrLess&&!Edge?pr=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(pr=document.createEvent("Event"),pr.initEvent("move",!0,!0)),pr.to=or,pr.from=ar,pr.dragged=lr,pr.draggedRect=cr,pr.related=ur||or,pr.relatedRect=dr||getRect(or),pr.willInsertAfter=fr,pr.originalEvent=hr,ar.dispatchEvent(pr),gr&&(yr=gr.call(mr,pr,hr)),yr}function _disableDraggable(ar){ar.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(ar,or,lr){var cr=getRect(getChild(lr.el,0,lr.options,!0)),ur=10;return or?ar.clientX<cr.left-ur||ar.clientY<cr.top&&ar.clientX<cr.right:ar.clientY<cr.top-ur||ar.clientY<cr.bottom&&ar.clientX<cr.left}function _ghostIsLast(ar,or,lr){var cr=getRect(lastChild(lr.el,lr.options.draggable)),ur=10;return or?ar.clientX>cr.right+ur||ar.clientX<=cr.right&&ar.clientY>cr.bottom&&ar.clientX>=cr.left:ar.clientX>cr.right&&ar.clientY>cr.top||ar.clientX<=cr.right&&ar.clientY>cr.bottom+ur}function _getSwapDirection(ar,or,lr,cr,ur,dr,hr,fr){var pr=cr?ar.clientY:ar.clientX,mr=cr?lr.height:lr.width,gr=cr?lr.top:lr.left,yr=cr?lr.bottom:lr.right,vr=!1;if(!hr){if(fr&&targetMoveDistance<mr*ur){if(!pastFirstInvertThresh&&(lastDirection===1?pr>gr+mr*dr/2:pr<yr-mr*dr/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)vr=!0;else if(lastDirection===1?pr<gr+targetMoveDistance:pr>yr-targetMoveDistance)return-lastDirection}else if(pr>gr+mr*(1-ur)/2&&pr<yr-mr*(1-ur)/2)return _getInsertDirection(or)}return vr=vr||hr,vr&&(pr<gr+mr*dr/2||pr>yr-mr*dr/2)?pr>gr+mr/2?1:-1:0}function _getInsertDirection(ar){return index(dragEl)<index(ar)?1:-1}function _generateId(ar){for(var or=ar.tagName+ar.className+ar.src+ar.href+ar.textContent,lr=or.length,cr=0;lr--;)cr+=or.charCodeAt(lr);return cr.toString(36)}function _saveInputCheckedState(ar){savedInputChecked.length=0;for(var or=ar.getElementsByTagName("input"),lr=or.length;lr--;){var cr=or[lr];cr.checked&&savedInputChecked.push(cr)}}function _nextTick(ar){return setTimeout(ar,0)}function _cancelNextTick(ar){return clearTimeout(ar)}documentExists&&on(document,"touchmove",function(ar){(Sortable.active||awaitingDragStarted)&&ar.cancelable&&ar.preventDefault()});Sortable.utils={on,off,css,find,is:function(or,lr){return!!closest(or,lr,or,!1)},extend,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild};Sortable.get=function(ar){return ar[expando]};Sortable.mount=function(){for(var ar=arguments.length,or=new Array(ar),lr=0;lr<ar;lr++)or[lr]=arguments[lr];or[0].constructor===Array&&(or=or[0]),or.forEach(function(cr){if(!cr.prototype||!cr.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(cr));cr.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),cr.utils)),PluginManager.mount(cr)})};Sortable.create=function(ar,or){return new Sortable(ar,or)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function ar(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var or in this)or.charAt(0)==="_"&&typeof this[or]=="function"&&(this[or]=this[or].bind(this))}return ar.prototype={dragStarted:function(lr){var cr=lr.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):cr.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(lr){var cr=lr.originalEvent;!this.options.dragOverBubble&&!cr.rootEl&&this._handleAutoScroll(cr)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(lr){this._handleAutoScroll(lr,!0)},_handleAutoScroll:function(lr,cr){var ur=this,dr=(lr.touches?lr.touches[0]:lr).clientX,hr=(lr.touches?lr.touches[0]:lr).clientY,fr=document.elementFromPoint(dr,hr);if(touchEvt$1=lr,cr||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(lr,this.options,fr,cr);var pr=getParentAutoScrollElement(fr,!0);scrolling&&(!pointerElemChangedInterval||dr!==lastAutoScrollX||hr!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var mr=getParentAutoScrollElement(document.elementFromPoint(dr,hr),!0);mr!==pr&&(pr=mr,clearAutoScrolls()),autoScroll(lr,ur.options,mr,cr)},10),lastAutoScrollX=dr,lastAutoScrollY=hr)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(fr,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(lr,this.options,getParentAutoScrollElement(fr,!1),!1)}}},_extends(ar,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(ar){clearInterval(ar.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(ar,or,lr,cr){if(or.scroll){var ur=(ar.touches?ar.touches[0]:ar).clientX,dr=(ar.touches?ar.touches[0]:ar).clientY,hr=or.scrollSensitivity,fr=or.scrollSpeed,pr=getWindowScrollingElement(),mr=!1,gr;scrollRootEl!==lr&&(scrollRootEl=lr,clearAutoScrolls(),scrollEl=or.scroll,gr=or.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(lr,!0)));var yr=0,vr=scrollEl;do{var br=vr,Sr=getRect(br),xr=Sr.top,Er=Sr.bottom,wr=Sr.left,Ar=Sr.right,Tr=Sr.width,Cr=Sr.height,kr=void 0,Mr=void 0,Rr=br.scrollWidth,Nr=br.scrollHeight,_r=css(br),Dr=br.scrollLeft,Pr=br.scrollTop;br===pr?(kr=Tr<Rr&&(_r.overflowX==="auto"||_r.overflowX==="scroll"||_r.overflowX==="visible"),Mr=Cr<Nr&&(_r.overflowY==="auto"||_r.overflowY==="scroll"||_r.overflowY==="visible")):(kr=Tr<Rr&&(_r.overflowX==="auto"||_r.overflowX==="scroll"),Mr=Cr<Nr&&(_r.overflowY==="auto"||_r.overflowY==="scroll"));var Ir=kr&&(Math.abs(Ar-ur)<=hr&&Dr+Tr<Rr)-(Math.abs(wr-ur)<=hr&&!!Dr),$r=Mr&&(Math.abs(Er-dr)<=hr&&Pr+Cr<Nr)-(Math.abs(xr-dr)<=hr&&!!Pr);if(!autoScrolls[yr])for(var Zr=0;Zr<=yr;Zr++)autoScrolls[Zr]||(autoScrolls[Zr]={});(autoScrolls[yr].vx!=Ir||autoScrolls[yr].vy!=$r||autoScrolls[yr].el!==br)&&(autoScrolls[yr].el=br,autoScrolls[yr].vx=Ir,autoScrolls[yr].vy=$r,clearInterval(autoScrolls[yr].pid),(Ir!=0||$r!=0)&&(mr=!0,autoScrolls[yr].pid=setInterval((function(){cr&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var rs=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*fr:0,qr=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*fr:0;typeof gr=="function"&&gr.call(Sortable.dragged.parentNode[expando],qr,rs,ar,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,qr,rs)}).bind({layer:yr}),24))),yr++}while(or.bubbleScroll&&vr!==pr&&(vr=getParentAutoScrollElement(vr,!1)));scrolling=mr}},30),drop=function(or){var lr=or.originalEvent,cr=or.putSortable,ur=or.dragEl,dr=or.activeSortable,hr=or.dispatchSortableEvent,fr=or.hideGhostForTarget,pr=or.unhideGhostForTarget;if(lr){var mr=cr||dr;fr();var gr=lr.changedTouches&&lr.changedTouches.length?lr.changedTouches[0]:lr,yr=document.elementFromPoint(gr.clientX,gr.clientY);pr(),mr&&!mr.el.contains(yr)&&(hr("spill"),this.onSpill({dragEl:ur,putSortable:cr}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(or){var lr=or.oldDraggableIndex;this.startIndex=lr},onSpill:function(or){var lr=or.dragEl,cr=or.putSortable;this.sortable.captureAnimationState(),cr&&cr.captureAnimationState();var ur=getChild(this.sortable.el,this.startIndex,this.options);ur?this.sortable.el.insertBefore(lr,ur):this.sortable.el.appendChild(lr),this.sortable.animateAll(),cr&&cr.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(or){var lr=or.dragEl,cr=or.putSortable,ur=cr||this.sortable;ur.captureAnimationState(),lr.parentNode&&lr.parentNode.removeChild(lr),ur.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});var lastSwapEl;function SwapPlugin(){function ar(){this.defaults={swapClass:"sortable-swap-highlight"}}return ar.prototype={dragStart:function(lr){var cr=lr.dragEl;lastSwapEl=cr},dragOverValid:function(lr){var cr=lr.completed,ur=lr.target,dr=lr.onMove,hr=lr.activeSortable,fr=lr.changed,pr=lr.cancel;if(hr.options.swap){var mr=this.sortable.el,gr=this.options;if(ur&&ur!==mr){var yr=lastSwapEl;dr(ur)!==!1?(toggleClass(ur,gr.swapClass,!0),lastSwapEl=ur):lastSwapEl=null,yr&&yr!==lastSwapEl&&toggleClass(yr,gr.swapClass,!1)}fr(),cr(!0),pr()}},drop:function(lr){var cr=lr.activeSortable,ur=lr.putSortable,dr=lr.dragEl,hr=ur||this.sortable,fr=this.options;lastSwapEl&&toggleClass(lastSwapEl,fr.swapClass,!1),lastSwapEl&&(fr.swap||ur&&ur.options.swap)&&dr!==lastSwapEl&&(hr.captureAnimationState(),hr!==cr&&cr.captureAnimationState(),swapNodes(dr,lastSwapEl),hr.animateAll(),hr!==cr&&cr.animateAll())},nulling:function(){lastSwapEl=null}},_extends(ar,{pluginName:"swap",eventProperties:function(){return{swapItem:lastSwapEl}}})}function swapNodes(ar,or){var lr=ar.parentNode,cr=or.parentNode,ur,dr;!lr||!cr||lr.isEqualNode(or)||cr.isEqualNode(ar)||(ur=index(ar),dr=index(or),lr.isEqualNode(cr)&&ur<dr&&dr++,lr.insertBefore(or,lr.children[ur]),cr.insertBefore(ar,cr.children[dr]))}var multiDragElements=[],multiDragClones=[],lastMultiDragSelect,multiDragSortable,initialFolding=!1,folding=!1,dragStarted=!1,dragEl$1,clonesFromRect,clonesHidden;function MultiDragPlugin(){function ar(or){for(var lr in this)lr.charAt(0)==="_"&&typeof this[lr]=="function"&&(this[lr]=this[lr].bind(this));or.options.supportPointer?on(document,"pointerup",this._deselectMultiDrag):(on(document,"mouseup",this._deselectMultiDrag),on(document,"touchend",this._deselectMultiDrag)),on(document,"keydown",this._checkKeyDown),on(document,"keyup",this._checkKeyUp),this.defaults={selectedClass:"sortable-selected",multiDragKey:null,setData:function(ur,dr){var hr="";multiDragElements.length&&multiDragSortable===or?multiDragElements.forEach(function(fr,pr){hr+=(pr?", ":"")+fr.textContent}):hr=dr.textContent,ur.setData("Text",hr)}}}return ar.prototype={multiDragKeyDown:!1,isMultiDrag:!1,delayStartGlobal:function(lr){var cr=lr.dragEl;dragEl$1=cr},delayEnded:function(){this.isMultiDrag=~multiDragElements.indexOf(dragEl$1)},setupClone:function(lr){var cr=lr.sortable,ur=lr.cancel;if(this.isMultiDrag){for(var dr=0;dr<multiDragElements.length;dr++)multiDragClones.push(clone(multiDragElements[dr])),multiDragClones[dr].sortableIndex=multiDragElements[dr].sortableIndex,multiDragClones[dr].draggable=!1,multiDragClones[dr].style["will-change"]="",toggleClass(multiDragClones[dr],this.options.selectedClass,!1),multiDragElements[dr]===dragEl$1&&toggleClass(multiDragClones[dr],this.options.chosenClass,!1);cr._hideClone(),ur()}},clone:function(lr){var cr=lr.sortable,ur=lr.rootEl,dr=lr.dispatchSortableEvent,hr=lr.cancel;this.isMultiDrag&&(this.options.removeCloneOnHide||multiDragElements.length&&multiDragSortable===cr&&(insertMultiDragClones(!0,ur),dr("clone"),hr()))},showClone:function(lr){var cr=lr.cloneNowShown,ur=lr.rootEl,dr=lr.cancel;this.isMultiDrag&&(insertMultiDragClones(!1,ur),multiDragClones.forEach(function(hr){css(hr,"display","")}),cr(),clonesHidden=!1,dr())},hideClone:function(lr){var cr=this;lr.sortable;var ur=lr.cloneNowHidden,dr=lr.cancel;this.isMultiDrag&&(multiDragClones.forEach(function(hr){css(hr,"display","none"),cr.options.removeCloneOnHide&&hr.parentNode&&hr.parentNode.removeChild(hr)}),ur(),clonesHidden=!0,dr())},dragStartGlobal:function(lr){lr.sortable,!this.isMultiDrag&&multiDragSortable&&multiDragSortable.multiDrag._deselectMultiDrag(),multiDragElements.forEach(function(cr){cr.sortableIndex=index(cr)}),multiDragElements=multiDragElements.sort(function(cr,ur){return cr.sortableIndex-ur.sortableIndex}),dragStarted=!0},dragStarted:function(lr){var cr=this,ur=lr.sortable;if(this.isMultiDrag){if(this.options.sort&&(ur.captureAnimationState(),this.options.animation)){multiDragElements.forEach(function(hr){hr!==dragEl$1&&css(hr,"position","absolute")});var dr=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(hr){hr!==dragEl$1&&setRect(hr,dr)}),folding=!0,initialFolding=!0}ur.animateAll(function(){folding=!1,initialFolding=!1,cr.options.animation&&multiDragElements.forEach(function(hr){unsetRect(hr)}),cr.options.sort&&removeMultiDragElements()})}},dragOver:function(lr){var cr=lr.target,ur=lr.completed,dr=lr.cancel;folding&&~multiDragElements.indexOf(cr)&&(ur(!1),dr())},revert:function(lr){var cr=lr.fromSortable,ur=lr.rootEl,dr=lr.sortable,hr=lr.dragRect;multiDragElements.length>1&&(multiDragElements.forEach(function(fr){dr.addAnimationState({target:fr,rect:folding?getRect(fr):hr}),unsetRect(fr),fr.fromRect=hr,cr.removeAnimationState(fr)}),folding=!1,insertMultiDragElements(!this.options.removeCloneOnHide,ur))},dragOverCompleted:function(lr){var cr=lr.sortable,ur=lr.isOwner,dr=lr.insertion,hr=lr.activeSortable,fr=lr.parentEl,pr=lr.putSortable,mr=this.options;if(dr){if(ur&&hr._hideClone(),initialFolding=!1,mr.animation&&multiDragElements.length>1&&(folding||!ur&&!hr.options.sort&&!pr)){var gr=getRect(dragEl$1,!1,!0,!0);multiDragElements.forEach(function(vr){vr!==dragEl$1&&(setRect(vr,gr),fr.appendChild(vr))}),folding=!0}if(!ur)if(folding||removeMultiDragElements(),multiDragElements.length>1){var yr=clonesHidden;hr._showClone(cr),hr.options.animation&&!clonesHidden&&yr&&multiDragClones.forEach(function(vr){hr.addAnimationState({target:vr,rect:clonesFromRect}),vr.fromRect=clonesFromRect,vr.thisAnimationDuration=null})}else hr._showClone(cr)}},dragOverAnimationCapture:function(lr){var cr=lr.dragRect,ur=lr.isOwner,dr=lr.activeSortable;if(multiDragElements.forEach(function(fr){fr.thisAnimationDuration=null}),dr.options.animation&&!ur&&dr.multiDrag.isMultiDrag){clonesFromRect=_extends({},cr);var hr=matrix(dragEl$1,!0);clonesFromRect.top-=hr.f,clonesFromRect.left-=hr.e}},dragOverAnimationComplete:function(){folding&&(folding=!1,removeMultiDragElements())},drop:function(lr){var cr=lr.originalEvent,ur=lr.rootEl,dr=lr.parentEl,hr=lr.sortable,fr=lr.dispatchSortableEvent,pr=lr.oldIndex,mr=lr.putSortable,gr=mr||this.sortable;if(cr){var yr=this.options,vr=dr.children;if(!dragStarted)if(yr.multiDragKey&&!this.multiDragKeyDown&&this._deselectMultiDrag(),toggleClass(dragEl$1,yr.selectedClass,!~multiDragElements.indexOf(dragEl$1)),~multiDragElements.indexOf(dragEl$1))multiDragElements.splice(multiDragElements.indexOf(dragEl$1),1),lastMultiDragSelect=null,dispatchEvent$1({sortable:hr,rootEl:ur,name:"deselect",targetEl:dragEl$1});else{if(multiDragElements.push(dragEl$1),dispatchEvent$1({sortable:hr,rootEl:ur,name:"select",targetEl:dragEl$1}),cr.shiftKey&&lastMultiDragSelect&&hr.el.contains(lastMultiDragSelect)){var br=index(lastMultiDragSelect),Sr=index(dragEl$1);if(~br&&~Sr&&br!==Sr){var xr,Er;for(Sr>br?(Er=br,xr=Sr):(Er=Sr,xr=br+1);Er<xr;Er++)~multiDragElements.indexOf(vr[Er])||(toggleClass(vr[Er],yr.selectedClass,!0),multiDragElements.push(vr[Er]),dispatchEvent$1({sortable:hr,rootEl:ur,name:"select",targetEl:vr[Er]}))}}else lastMultiDragSelect=dragEl$1;multiDragSortable=gr}if(dragStarted&&this.isMultiDrag){if(folding=!1,(dr[expando].options.sort||dr!==ur)&&multiDragElements.length>1){var wr=getRect(dragEl$1),Ar=index(dragEl$1,":not(."+this.options.selectedClass+")");if(!initialFolding&&yr.animation&&(dragEl$1.thisAnimationDuration=null),gr.captureAnimationState(),!initialFolding&&(yr.animation&&(dragEl$1.fromRect=wr,multiDragElements.forEach(function(Cr){if(Cr.thisAnimationDuration=null,Cr!==dragEl$1){var kr=folding?getRect(Cr):wr;Cr.fromRect=kr,gr.addAnimationState({target:Cr,rect:kr})}})),removeMultiDragElements(),multiDragElements.forEach(function(Cr){vr[Ar]?dr.insertBefore(Cr,vr[Ar]):dr.appendChild(Cr),Ar++}),pr===index(dragEl$1))){var Tr=!1;multiDragElements.forEach(function(Cr){if(Cr.sortableIndex!==index(Cr)){Tr=!0;return}}),Tr&&fr("update")}multiDragElements.forEach(function(Cr){unsetRect(Cr)}),gr.animateAll()}multiDragSortable=gr}(ur===dr||mr&&mr.lastPutMode!=="clone")&&multiDragClones.forEach(function(Cr){Cr.parentNode&&Cr.parentNode.removeChild(Cr)})}},nullingGlobal:function(){this.isMultiDrag=dragStarted=!1,multiDragClones.length=0},destroyGlobal:function(){this._deselectMultiDrag(),off(document,"pointerup",this._deselectMultiDrag),off(document,"mouseup",this._deselectMultiDrag),off(document,"touchend",this._deselectMultiDrag),off(document,"keydown",this._checkKeyDown),off(document,"keyup",this._checkKeyUp)},_deselectMultiDrag:function(lr){if(!(typeof dragStarted<"u"&&dragStarted)&&multiDragSortable===this.sortable&&!(lr&&closest(lr.target,this.options.draggable,this.sortable.el,!1))&&!(lr&&lr.button!==0))for(;multiDragElements.length;){var cr=multiDragElements[0];toggleClass(cr,this.options.selectedClass,!1),multiDragElements.shift(),dispatchEvent$1({sortable:this.sortable,rootEl:this.sortable.el,name:"deselect",targetEl:cr})}},_checkKeyDown:function(lr){lr.key===this.options.multiDragKey&&(this.multiDragKeyDown=!0)},_checkKeyUp:function(lr){lr.key===this.options.multiDragKey&&(this.multiDragKeyDown=!1)}},_extends(ar,{pluginName:"multiDrag",utils:{select:function(lr){var cr=lr.parentNode[expando];!cr||!cr.options.multiDrag||~multiDragElements.indexOf(lr)||(multiDragSortable&&multiDragSortable!==cr&&(multiDragSortable.multiDrag._deselectMultiDrag(),multiDragSortable=cr),toggleClass(lr,cr.options.selectedClass,!0),multiDragElements.push(lr))},deselect:function(lr){var cr=lr.parentNode[expando],ur=multiDragElements.indexOf(lr);!cr||!cr.options.multiDrag||!~ur||(toggleClass(lr,cr.options.selectedClass,!1),multiDragElements.splice(ur,1))}},eventProperties:function(){var lr=this,cr=[],ur=[];return multiDragElements.forEach(function(dr){cr.push({multiDragElement:dr,index:dr.sortableIndex});var hr;folding&&dr!==dragEl$1?hr=-1:folding?hr=index(dr,":not(."+lr.options.selectedClass+")"):hr=index(dr),ur.push({multiDragElement:dr,index:hr})}),{items:_toConsumableArray(multiDragElements),clones:[].concat(multiDragClones),oldIndicies:cr,newIndicies:ur}},optionListeners:{multiDragKey:function(lr){return lr=lr.toLowerCase(),lr==="ctrl"?lr="Control":lr.length>1&&(lr=lr.charAt(0).toUpperCase()+lr.substr(1)),lr}}})}function insertMultiDragElements(ar,or){multiDragElements.forEach(function(lr,cr){var ur=or.children[lr.sortableIndex+(ar?Number(cr):0)];ur?or.insertBefore(lr,ur):or.appendChild(lr)})}function insertMultiDragClones(ar,or){multiDragClones.forEach(function(lr,cr){var ur=or.children[lr.sortableIndex+(ar?Number(cr):0)];ur?or.insertBefore(lr,ur):or.appendChild(lr)})}function removeMultiDragElements(){multiDragElements.forEach(function(ar){ar!==dragEl$1&&ar.parentNode&&ar.parentNode.removeChild(ar)})}Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);const sortable_esm=Object.freeze(Object.defineProperty({__proto__:null,MultiDrag:MultiDragPlugin,Sortable,Swap:SwapPlugin,default:Sortable},Symbol.toStringTag,{value:"Module"})),require$$1=getAugmentedNamespace(sortable_esm);(function(ar,or){(function(cr,ur){ar.exports=ur(require$$0,require$$1)})(typeof self<"u"?self:commonjsGlobal,function(lr,cr){return function(ur){var dr={};function hr(fr){if(dr[fr])return dr[fr].exports;var pr=dr[fr]={i:fr,l:!1,exports:{}};return ur[fr].call(pr.exports,pr,pr.exports,hr),pr.l=!0,pr.exports}return hr.m=ur,hr.c=dr,hr.d=function(fr,pr,mr){hr.o(fr,pr)||Object.defineProperty(fr,pr,{enumerable:!0,get:mr})},hr.r=function(fr){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(fr,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(fr,"__esModule",{value:!0})},hr.t=function(fr,pr){if(pr&1&&(fr=hr(fr)),pr&8||pr&4&&typeof fr=="object"&&fr&&fr.__esModule)return fr;var mr=Object.create(null);if(hr.r(mr),Object.defineProperty(mr,"default",{enumerable:!0,value:fr}),pr&2&&typeof fr!="string")for(var gr in fr)hr.d(mr,gr,(function(yr){return fr[yr]}).bind(null,gr));return mr},hr.n=function(fr){var pr=fr&&fr.__esModule?function(){return fr.default}:function(){return fr};return hr.d(pr,"a",pr),pr},hr.o=function(fr,pr){return Object.prototype.hasOwnProperty.call(fr,pr)},hr.p="",hr(hr.s="fb15")}({"00ee":function(ur,dr,hr){var fr=hr("b622"),pr=fr("toStringTag"),mr={};mr[pr]="z",ur.exports=String(mr)==="[object z]"},"0366":function(ur,dr,hr){var fr=hr("1c0b");ur.exports=function(pr,mr,gr){if(fr(pr),mr===void 0)return pr;switch(gr){case 0:return function(){return pr.call(mr)};case 1:return function(yr){return pr.call(mr,yr)};case 2:return function(yr,vr){return pr.call(mr,yr,vr)};case 3:return function(yr,vr,br){return pr.call(mr,yr,vr,br)}}return function(){return pr.apply(mr,arguments)}}},"057f":function(ur,dr,hr){var fr=hr("fc6a"),pr=hr("241c").f,mr={}.toString,gr=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],yr=function(vr){try{return pr(vr)}catch{return gr.slice()}};ur.exports.f=function(br){return gr&&mr.call(br)=="[object Window]"?yr(br):pr(fr(br))}},"06cf":function(ur,dr,hr){var fr=hr("83ab"),pr=hr("d1e7"),mr=hr("5c6c"),gr=hr("fc6a"),yr=hr("c04e"),vr=hr("5135"),br=hr("0cfb"),Sr=Object.getOwnPropertyDescriptor;dr.f=fr?Sr:function(Er,wr){if(Er=gr(Er),wr=yr(wr,!0),br)try{return Sr(Er,wr)}catch{}if(vr(Er,wr))return mr(!pr.f.call(Er,wr),Er[wr])}},"0cfb":function(ur,dr,hr){var fr=hr("83ab"),pr=hr("d039"),mr=hr("cc12");ur.exports=!fr&&!pr(function(){return Object.defineProperty(mr("div"),"a",{get:function(){return 7}}).a!=7})},"13d5":function(ur,dr,hr){var fr=hr("23e7"),pr=hr("d58f").left,mr=hr("a640"),gr=hr("ae40"),yr=mr("reduce"),vr=gr("reduce",{1:0});fr({target:"Array",proto:!0,forced:!yr||!vr},{reduce:function(Sr){return pr(this,Sr,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"14c3":function(ur,dr,hr){var fr=hr("c6b6"),pr=hr("9263");ur.exports=function(mr,gr){var yr=mr.exec;if(typeof yr=="function"){var vr=yr.call(mr,gr);if(typeof vr!="object")throw TypeError("RegExp exec method returned something other than an Object or null");return vr}if(fr(mr)!=="RegExp")throw TypeError("RegExp#exec called on incompatible receiver");return pr.call(mr,gr)}},"159b":function(ur,dr,hr){var fr=hr("da84"),pr=hr("fdbc"),mr=hr("17c2"),gr=hr("9112");for(var yr in pr){var vr=fr[yr],br=vr&&vr.prototype;if(br&&br.forEach!==mr)try{gr(br,"forEach",mr)}catch{br.forEach=mr}}},"17c2":function(ur,dr,hr){var fr=hr("b727").forEach,pr=hr("a640"),mr=hr("ae40"),gr=pr("forEach"),yr=mr("forEach");ur.exports=!gr||!yr?function(br){return fr(this,br,arguments.length>1?arguments[1]:void 0)}:[].forEach},"1be4":function(ur,dr,hr){var fr=hr("d066");ur.exports=fr("document","documentElement")},"1c0b":function(ur,dr){ur.exports=function(hr){if(typeof hr!="function")throw TypeError(String(hr)+" is not a function");return hr}},"1c7e":function(ur,dr,hr){var fr=hr("b622"),pr=fr("iterator"),mr=!1;try{var gr=0,yr={next:function(){return{done:!!gr++}},return:function(){mr=!0}};yr[pr]=function(){return this},Array.from(yr,function(){throw 2})}catch{}ur.exports=function(vr,br){if(!br&&!mr)return!1;var Sr=!1;try{var xr={};xr[pr]=function(){return{next:function(){return{done:Sr=!0}}}},vr(xr)}catch{}return Sr}},"1d80":function(ur,dr){ur.exports=function(hr){if(hr==null)throw TypeError("Can't call method on "+hr);return hr}},"1dde":function(ur,dr,hr){var fr=hr("d039"),pr=hr("b622"),mr=hr("2d00"),gr=pr("species");ur.exports=function(yr){return mr>=51||!fr(function(){var vr=[],br=vr.constructor={};return br[gr]=function(){return{foo:1}},vr[yr](Boolean).foo!==1})}},"23cb":function(ur,dr,hr){var fr=hr("a691"),pr=Math.max,mr=Math.min;ur.exports=function(gr,yr){var vr=fr(gr);return vr<0?pr(vr+yr,0):mr(vr,yr)}},"23e7":function(ur,dr,hr){var fr=hr("da84"),pr=hr("06cf").f,mr=hr("9112"),gr=hr("6eeb"),yr=hr("ce4e"),vr=hr("e893"),br=hr("94ca");ur.exports=function(Sr,xr){var Er=Sr.target,wr=Sr.global,Ar=Sr.stat,Tr,Cr,kr,Mr,Rr,Nr;if(wr?Cr=fr:Ar?Cr=fr[Er]||yr(Er,{}):Cr=(fr[Er]||{}).prototype,Cr)for(kr in xr){if(Rr=xr[kr],Sr.noTargetGet?(Nr=pr(Cr,kr),Mr=Nr&&Nr.value):Mr=Cr[kr],Tr=br(wr?kr:Er+(Ar?".":"#")+kr,Sr.forced),!Tr&&Mr!==void 0){if(typeof Rr==typeof Mr)continue;vr(Rr,Mr)}(Sr.sham||Mr&&Mr.sham)&&mr(Rr,"sham",!0),gr(Cr,kr,Rr,Sr)}}},"241c":function(ur,dr,hr){var fr=hr("ca84"),pr=hr("7839"),mr=pr.concat("length","prototype");dr.f=Object.getOwnPropertyNames||function(yr){return fr(yr,mr)}},"25f0":function(ur,dr,hr){var fr=hr("6eeb"),pr=hr("825a"),mr=hr("d039"),gr=hr("ad6d"),yr="toString",vr=RegExp.prototype,br=vr[yr],Sr=mr(function(){return br.call({source:"a",flags:"b"})!="/a/b"}),xr=br.name!=yr;(Sr||xr)&&fr(RegExp.prototype,yr,function(){var wr=pr(this),Ar=String(wr.source),Tr=wr.flags,Cr=String(Tr===void 0&&wr instanceof RegExp&&!("flags"in vr)?gr.call(wr):Tr);return"/"+Ar+"/"+Cr},{unsafe:!0})},"2ca0":function(ur,dr,hr){var fr=hr("23e7"),pr=hr("06cf").f,mr=hr("50c4"),gr=hr("5a34"),yr=hr("1d80"),vr=hr("ab13"),br=hr("c430"),Sr="".startsWith,xr=Math.min,Er=vr("startsWith"),wr=!br&&!Er&&!!function(){var Ar=pr(String.prototype,"startsWith");return Ar&&!Ar.writable}();fr({target:"String",proto:!0,forced:!wr&&!Er},{startsWith:function(Tr){var Cr=String(yr(this));gr(Tr);var kr=mr(xr(arguments.length>1?arguments[1]:void 0,Cr.length)),Mr=String(Tr);return Sr?Sr.call(Cr,Mr,kr):Cr.slice(kr,kr+Mr.length)===Mr}})},"2d00":function(ur,dr,hr){var fr=hr("da84"),pr=hr("342f"),mr=fr.process,gr=mr&&mr.versions,yr=gr&&gr.v8,vr,br;yr?(vr=yr.split("."),br=vr[0]+vr[1]):pr&&(vr=pr.match(/Edge\/(\d+)/),(!vr||vr[1]>=74)&&(vr=pr.match(/Chrome\/(\d+)/),vr&&(br=vr[1]))),ur.exports=br&&+br},"342f":function(ur,dr,hr){var fr=hr("d066");ur.exports=fr("navigator","userAgent")||""},"35a1":function(ur,dr,hr){var fr=hr("f5df"),pr=hr("3f8c"),mr=hr("b622"),gr=mr("iterator");ur.exports=function(yr){if(yr!=null)return yr[gr]||yr["@@iterator"]||pr[fr(yr)]}},"37e8":function(ur,dr,hr){var fr=hr("83ab"),pr=hr("9bf2"),mr=hr("825a"),gr=hr("df75");ur.exports=fr?Object.defineProperties:function(vr,br){mr(vr);for(var Sr=gr(br),xr=Sr.length,Er=0,wr;xr>Er;)pr.f(vr,wr=Sr[Er++],br[wr]);return vr}},"3bbe":function(ur,dr,hr){var fr=hr("861d");ur.exports=function(pr){if(!fr(pr)&&pr!==null)throw TypeError("Can't set "+String(pr)+" as a prototype");return pr}},"3ca3":function(ur,dr,hr){var fr=hr("6547").charAt,pr=hr("69f3"),mr=hr("7dd0"),gr="String Iterator",yr=pr.set,vr=pr.getterFor(gr);mr(String,"String",function(br){yr(this,{type:gr,string:String(br),index:0})},function(){var Sr=vr(this),xr=Sr.string,Er=Sr.index,wr;return Er>=xr.length?{value:void 0,done:!0}:(wr=fr(xr,Er),Sr.index+=wr.length,{value:wr,done:!1})})},"3f8c":function(ur,dr){ur.exports={}},4160:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("17c2");fr({target:"Array",proto:!0,forced:[].forEach!=pr},{forEach:pr})},"428f":function(ur,dr,hr){var fr=hr("da84");ur.exports=fr},"44ad":function(ur,dr,hr){var fr=hr("d039"),pr=hr("c6b6"),mr="".split;ur.exports=fr(function(){return!Object("z").propertyIsEnumerable(0)})?function(gr){return pr(gr)=="String"?mr.call(gr,""):Object(gr)}:Object},"44d2":function(ur,dr,hr){var fr=hr("b622"),pr=hr("7c73"),mr=hr("9bf2"),gr=fr("unscopables"),yr=Array.prototype;yr[gr]==null&&mr.f(yr,gr,{configurable:!0,value:pr(null)}),ur.exports=function(vr){yr[gr][vr]=!0}},"44e7":function(ur,dr,hr){var fr=hr("861d"),pr=hr("c6b6"),mr=hr("b622"),gr=mr("match");ur.exports=function(yr){var vr;return fr(yr)&&((vr=yr[gr])!==void 0?!!vr:pr(yr)=="RegExp")}},4930:function(ur,dr,hr){var fr=hr("d039");ur.exports=!!Object.getOwnPropertySymbols&&!fr(function(){return!String(Symbol())})},"4d64":function(ur,dr,hr){var fr=hr("fc6a"),pr=hr("50c4"),mr=hr("23cb"),gr=function(yr){return function(vr,br,Sr){var xr=fr(vr),Er=pr(xr.length),wr=mr(Sr,Er),Ar;if(yr&&br!=br){for(;Er>wr;)if(Ar=xr[wr++],Ar!=Ar)return!0}else for(;Er>wr;wr++)if((yr||wr in xr)&&xr[wr]===br)return yr||wr||0;return!yr&&-1}};ur.exports={includes:gr(!0),indexOf:gr(!1)}},"4de4":function(ur,dr,hr){var fr=hr("23e7"),pr=hr("b727").filter,mr=hr("1dde"),gr=hr("ae40"),yr=mr("filter"),vr=gr("filter");fr({target:"Array",proto:!0,forced:!yr||!vr},{filter:function(Sr){return pr(this,Sr,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(ur,dr,hr){var fr=hr("0366"),pr=hr("7b0b"),mr=hr("9bdd"),gr=hr("e95a"),yr=hr("50c4"),vr=hr("8418"),br=hr("35a1");ur.exports=function(xr){var Er=pr(xr),wr=typeof this=="function"?this:Array,Ar=arguments.length,Tr=Ar>1?arguments[1]:void 0,Cr=Tr!==void 0,kr=br(Er),Mr=0,Rr,Nr,_r,Dr,Pr,Ir;if(Cr&&(Tr=fr(Tr,Ar>2?arguments[2]:void 0,2)),kr!=null&&!(wr==Array&&gr(kr)))for(Dr=kr.call(Er),Pr=Dr.next,Nr=new wr;!(_r=Pr.call(Dr)).done;Mr++)Ir=Cr?mr(Dr,Tr,[_r.value,Mr],!0):_r.value,vr(Nr,Mr,Ir);else for(Rr=yr(Er.length),Nr=new wr(Rr);Rr>Mr;Mr++)Ir=Cr?Tr(Er[Mr],Mr):Er[Mr],vr(Nr,Mr,Ir);return Nr.length=Mr,Nr}},"4fad":function(ur,dr,hr){var fr=hr("23e7"),pr=hr("6f53").entries;fr({target:"Object",stat:!0},{entries:function(gr){return pr(gr)}})},"50c4":function(ur,dr,hr){var fr=hr("a691"),pr=Math.min;ur.exports=function(mr){return mr>0?pr(fr(mr),9007199254740991):0}},5135:function(ur,dr){var hr={}.hasOwnProperty;ur.exports=function(fr,pr){return hr.call(fr,pr)}},5319:function(ur,dr,hr){var fr=hr("d784"),pr=hr("825a"),mr=hr("7b0b"),gr=hr("50c4"),yr=hr("a691"),vr=hr("1d80"),br=hr("8aa5"),Sr=hr("14c3"),xr=Math.max,Er=Math.min,wr=Math.floor,Ar=/\$([$&'`]|\d\d?|<[^>]*>)/g,Tr=/\$([$&'`]|\d\d?)/g,Cr=function(kr){return kr===void 0?kr:String(kr)};fr("replace",2,function(kr,Mr,Rr,Nr){var _r=Nr.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,Dr=Nr.REPLACE_KEEPS_$0,Pr=_r?"$":"$0";return[function(Zr,rs){var qr=vr(this),zr=Zr==null?void 0:Zr[kr];return zr!==void 0?zr.call(Zr,qr,rs):Mr.call(String(qr),Zr,rs)},function($r,Zr){if(!_r&&Dr||typeof Zr=="string"&&Zr.indexOf(Pr)===-1){var rs=Rr(Mr,$r,this,Zr);if(rs.done)return rs.value}var qr=pr($r),zr=String(this),Jr=typeof Zr=="function";Jr||(Zr=String(Zr));var Hr=qr.global;if(Hr){var Kr=qr.unicode;qr.lastIndex=0}for(var ys=[];;){var Yr=Sr(qr,zr);if(Yr===null||(ys.push(Yr),!Hr))break;var Fr=String(Yr[0]);Fr===""&&(qr.lastIndex=br(zr,gr(qr.lastIndex),Kr))}for(var Br="",Ur=0,Qr=0;Qr<ys.length;Qr++){Yr=ys[Qr];for(var Vr=String(Yr[0]),Gr=xr(Er(yr(Yr.index),zr.length),0),is=[],ps=1;ps<Yr.length;ps++)is.push(Cr(Yr[ps]));var As=Yr.groups;if(Jr){var Cs=[Vr].concat(is,Gr,zr);As!==void 0&&Cs.push(As);var jr=String(Zr.apply(void 0,Cs))}else jr=Ir(Vr,zr,Gr,is,As,Zr);Gr>=Ur&&(Br+=zr.slice(Ur,Gr)+jr,Ur=Gr+Vr.length)}return Br+zr.slice(Ur)}];function Ir($r,Zr,rs,qr,zr,Jr){var Hr=rs+$r.length,Kr=qr.length,ys=Tr;return zr!==void 0&&(zr=mr(zr),ys=Ar),Mr.call(Jr,ys,function(Yr,Fr){var Br;switch(Fr.charAt(0)){case"$":return"$";case"&":return $r;case"`":return Zr.slice(0,rs);case"'":return Zr.slice(Hr);case"<":Br=zr[Fr.slice(1,-1)];break;default:var Ur=+Fr;if(Ur===0)return Yr;if(Ur>Kr){var Qr=wr(Ur/10);return Qr===0?Yr:Qr<=Kr?qr[Qr-1]===void 0?Fr.charAt(1):qr[Qr-1]+Fr.charAt(1):Yr}Br=qr[Ur-1]}return Br===void 0?"":Br})}})},5692:function(ur,dr,hr){var fr=hr("c430"),pr=hr("c6cd");(ur.exports=function(mr,gr){return pr[mr]||(pr[mr]=gr!==void 0?gr:{})})("versions",[]).push({version:"3.6.5",mode:fr?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"56ef":function(ur,dr,hr){var fr=hr("d066"),pr=hr("241c"),mr=hr("7418"),gr=hr("825a");ur.exports=fr("Reflect","ownKeys")||function(vr){var br=pr.f(gr(vr)),Sr=mr.f;return Sr?br.concat(Sr(vr)):br}},"5a34":function(ur,dr,hr){var fr=hr("44e7");ur.exports=function(pr){if(fr(pr))throw TypeError("The method doesn't accept regular expressions");return pr}},"5c6c":function(ur,dr){ur.exports=function(hr,fr){return{enumerable:!(hr&1),configurable:!(hr&2),writable:!(hr&4),value:fr}}},"5db7":function(ur,dr,hr){var fr=hr("23e7"),pr=hr("a2bf"),mr=hr("7b0b"),gr=hr("50c4"),yr=hr("1c0b"),vr=hr("65f0");fr({target:"Array",proto:!0},{flatMap:function(Sr){var xr=mr(this),Er=gr(xr.length),wr;return yr(Sr),wr=vr(xr,0),wr.length=pr(wr,xr,xr,Er,0,1,Sr,arguments.length>1?arguments[1]:void 0),wr}})},6547:function(ur,dr,hr){var fr=hr("a691"),pr=hr("1d80"),mr=function(gr){return function(yr,vr){var br=String(pr(yr)),Sr=fr(vr),xr=br.length,Er,wr;return Sr<0||Sr>=xr?gr?"":void 0:(Er=br.charCodeAt(Sr),Er<55296||Er>56319||Sr+1===xr||(wr=br.charCodeAt(Sr+1))<56320||wr>57343?gr?br.charAt(Sr):Er:gr?br.slice(Sr,Sr+2):(Er-55296<<10)+(wr-56320)+65536)}};ur.exports={codeAt:mr(!1),charAt:mr(!0)}},"65f0":function(ur,dr,hr){var fr=hr("861d"),pr=hr("e8b5"),mr=hr("b622"),gr=mr("species");ur.exports=function(yr,vr){var br;return pr(yr)&&(br=yr.constructor,typeof br=="function"&&(br===Array||pr(br.prototype))?br=void 0:fr(br)&&(br=br[gr],br===null&&(br=void 0))),new(br===void 0?Array:br)(vr===0?0:vr)}},"69f3":function(ur,dr,hr){var fr=hr("7f9a"),pr=hr("da84"),mr=hr("861d"),gr=hr("9112"),yr=hr("5135"),vr=hr("f772"),br=hr("d012"),Sr=pr.WeakMap,xr,Er,wr,Ar=function(_r){return wr(_r)?Er(_r):xr(_r,{})},Tr=function(_r){return function(Dr){var Pr;if(!mr(Dr)||(Pr=Er(Dr)).type!==_r)throw TypeError("Incompatible receiver, "+_r+" required");return Pr}};if(fr){var Cr=new Sr,kr=Cr.get,Mr=Cr.has,Rr=Cr.set;xr=function(_r,Dr){return Rr.call(Cr,_r,Dr),Dr},Er=function(_r){return kr.call(Cr,_r)||{}},wr=function(_r){return Mr.call(Cr,_r)}}else{var Nr=vr("state");br[Nr]=!0,xr=function(_r,Dr){return gr(_r,Nr,Dr),Dr},Er=function(_r){return yr(_r,Nr)?_r[Nr]:{}},wr=function(_r){return yr(_r,Nr)}}ur.exports={set:xr,get:Er,has:wr,enforce:Ar,getterFor:Tr}},"6eeb":function(ur,dr,hr){var fr=hr("da84"),pr=hr("9112"),mr=hr("5135"),gr=hr("ce4e"),yr=hr("8925"),vr=hr("69f3"),br=vr.get,Sr=vr.enforce,xr=String(String).split("String");(ur.exports=function(Er,wr,Ar,Tr){var Cr=Tr?!!Tr.unsafe:!1,kr=Tr?!!Tr.enumerable:!1,Mr=Tr?!!Tr.noTargetGet:!1;if(typeof Ar=="function"&&(typeof wr=="string"&&!mr(Ar,"name")&&pr(Ar,"name",wr),Sr(Ar).source=xr.join(typeof wr=="string"?wr:"")),Er===fr){kr?Er[wr]=Ar:gr(wr,Ar);return}else Cr?!Mr&&Er[wr]&&(kr=!0):delete Er[wr];kr?Er[wr]=Ar:pr(Er,wr,Ar)})(Function.prototype,"toString",function(){return typeof this=="function"&&br(this).source||yr(this)})},"6f53":function(ur,dr,hr){var fr=hr("83ab"),pr=hr("df75"),mr=hr("fc6a"),gr=hr("d1e7").f,yr=function(vr){return function(br){for(var Sr=mr(br),xr=pr(Sr),Er=xr.length,wr=0,Ar=[],Tr;Er>wr;)Tr=xr[wr++],(!fr||gr.call(Sr,Tr))&&Ar.push(vr?[Tr,Sr[Tr]]:Sr[Tr]);return Ar}};ur.exports={entries:yr(!0),values:yr(!1)}},"73d9":function(ur,dr,hr){var fr=hr("44d2");fr("flatMap")},7418:function(ur,dr){dr.f=Object.getOwnPropertySymbols},"746f":function(ur,dr,hr){var fr=hr("428f"),pr=hr("5135"),mr=hr("e538"),gr=hr("9bf2").f;ur.exports=function(yr){var vr=fr.Symbol||(fr.Symbol={});pr(vr,yr)||gr(vr,yr,{value:mr.f(yr)})}},7839:function(ur,dr){ur.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"7b0b":function(ur,dr,hr){var fr=hr("1d80");ur.exports=function(pr){return Object(fr(pr))}},"7c73":function(ur,dr,hr){var fr=hr("825a"),pr=hr("37e8"),mr=hr("7839"),gr=hr("d012"),yr=hr("1be4"),vr=hr("cc12"),br=hr("f772"),Sr=">",xr="<",Er="prototype",wr="script",Ar=br("IE_PROTO"),Tr=function(){},Cr=function(_r){return xr+wr+Sr+_r+xr+"/"+wr+Sr},kr=function(_r){_r.write(Cr("")),_r.close();var Dr=_r.parentWindow.Object;return _r=null,Dr},Mr=function(){var _r=vr("iframe"),Dr="java"+wr+":",Pr;return _r.style.display="none",yr.appendChild(_r),_r.src=String(Dr),Pr=_r.contentWindow.document,Pr.open(),Pr.write(Cr("document.F=Object")),Pr.close(),Pr.F},Rr,Nr=function(){try{Rr=document.domain&&new ActiveXObject("htmlfile")}catch{}Nr=Rr?kr(Rr):Mr();for(var _r=mr.length;_r--;)delete Nr[Er][mr[_r]];return Nr()};gr[Ar]=!0,ur.exports=Object.create||function(Dr,Pr){var Ir;return Dr!==null?(Tr[Er]=fr(Dr),Ir=new Tr,Tr[Er]=null,Ir[Ar]=Dr):Ir=Nr(),Pr===void 0?Ir:pr(Ir,Pr)}},"7dd0":function(ur,dr,hr){var fr=hr("23e7"),pr=hr("9ed3"),mr=hr("e163"),gr=hr("d2bb"),yr=hr("d44e"),vr=hr("9112"),br=hr("6eeb"),Sr=hr("b622"),xr=hr("c430"),Er=hr("3f8c"),wr=hr("ae93"),Ar=wr.IteratorPrototype,Tr=wr.BUGGY_SAFARI_ITERATORS,Cr=Sr("iterator"),kr="keys",Mr="values",Rr="entries",Nr=function(){return this};ur.exports=function(_r,Dr,Pr,Ir,$r,Zr,rs){pr(Pr,Dr,Ir);var qr=function(Qr){if(Qr===$r&&ys)return ys;if(!Tr&&Qr in Hr)return Hr[Qr];switch(Qr){case kr:return function(){return new Pr(this,Qr)};case Mr:return function(){return new Pr(this,Qr)};case Rr:return function(){return new Pr(this,Qr)}}return function(){return new Pr(this)}},zr=Dr+" Iterator",Jr=!1,Hr=_r.prototype,Kr=Hr[Cr]||Hr["@@iterator"]||$r&&Hr[$r],ys=!Tr&&Kr||qr($r),Yr=Dr=="Array"&&Hr.entries||Kr,Fr,Br,Ur;if(Yr&&(Fr=mr(Yr.call(new _r)),Ar!==Object.prototype&&Fr.next&&(!xr&&mr(Fr)!==Ar&&(gr?gr(Fr,Ar):typeof Fr[Cr]!="function"&&vr(Fr,Cr,Nr)),yr(Fr,zr,!0,!0),xr&&(Er[zr]=Nr))),$r==Mr&&Kr&&Kr.name!==Mr&&(Jr=!0,ys=function(){return Kr.call(this)}),(!xr||rs)&&Hr[Cr]!==ys&&vr(Hr,Cr,ys),Er[Dr]=ys,$r)if(Br={values:qr(Mr),keys:Zr?ys:qr(kr),entries:qr(Rr)},rs)for(Ur in Br)(Tr||Jr||!(Ur in Hr))&&br(Hr,Ur,Br[Ur]);else fr({target:Dr,proto:!0,forced:Tr||Jr},Br);return Br}},"7f9a":function(ur,dr,hr){var fr=hr("da84"),pr=hr("8925"),mr=fr.WeakMap;ur.exports=typeof mr=="function"&&/native code/.test(pr(mr))},"825a":function(ur,dr,hr){var fr=hr("861d");ur.exports=function(pr){if(!fr(pr))throw TypeError(String(pr)+" is not an object");return pr}},"83ab":function(ur,dr,hr){var fr=hr("d039");ur.exports=!fr(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},8418:function(ur,dr,hr){var fr=hr("c04e"),pr=hr("9bf2"),mr=hr("5c6c");ur.exports=function(gr,yr,vr){var br=fr(yr);br in gr?pr.f(gr,br,mr(0,vr)):gr[br]=vr}},"861d":function(ur,dr){ur.exports=function(hr){return typeof hr=="object"?hr!==null:typeof hr=="function"}},8875:function(ur,dr,hr){var fr,pr,mr;(function(gr,yr){pr=[],fr=yr,mr=typeof fr=="function"?fr.apply(dr,pr):fr,mr!==void 0&&(ur.exports=mr)})(typeof self<"u"?self:this,function(){function gr(){var yr=Object.getOwnPropertyDescriptor(document,"currentScript");if(!yr&&"currentScript"in document&&document.currentScript||yr&&yr.get!==gr&&document.currentScript)return document.currentScript;try{throw new Error}catch(Rr){var vr=/.*at [^(]*\((.*):(.+):(.+)\)$/ig,br=/@([^@]*):(\d+):(\d+)\s*$/ig,Sr=vr.exec(Rr.stack)||br.exec(Rr.stack),xr=Sr&&Sr[1]||!1,Er=Sr&&Sr[2]||!1,wr=document.location.href.replace(document.location.hash,""),Ar,Tr,Cr,kr=document.getElementsByTagName("script");xr===wr&&(Ar=document.documentElement.outerHTML,Tr=new RegExp("(?:[^\\n]+?\\n){0,"+(Er-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),Cr=Ar.replace(Tr,"$1").trim());for(var Mr=0;Mr<kr.length;Mr++)if(kr[Mr].readyState==="interactive"||kr[Mr].src===xr||xr===wr&&kr[Mr].innerHTML&&kr[Mr].innerHTML.trim()===Cr)return kr[Mr];return null}}return gr})},8925:function(ur,dr,hr){var fr=hr("c6cd"),pr=Function.toString;typeof fr.inspectSource!="function"&&(fr.inspectSource=function(mr){return pr.call(mr)}),ur.exports=fr.inspectSource},"8aa5":function(ur,dr,hr){var fr=hr("6547").charAt;ur.exports=function(pr,mr,gr){return mr+(gr?fr(pr,mr).length:1)}},"8bbf":function(ur,dr){ur.exports=lr},"90e3":function(ur,dr){var hr=0,fr=Math.random();ur.exports=function(pr){return"Symbol("+String(pr===void 0?"":pr)+")_"+(++hr+fr).toString(36)}},9112:function(ur,dr,hr){var fr=hr("83ab"),pr=hr("9bf2"),mr=hr("5c6c");ur.exports=fr?function(gr,yr,vr){return pr.f(gr,yr,mr(1,vr))}:function(gr,yr,vr){return gr[yr]=vr,gr}},9263:function(ur,dr,hr){var fr=hr("ad6d"),pr=hr("9f7f"),mr=RegExp.prototype.exec,gr=String.prototype.replace,yr=mr,vr=function(){var Er=/a/,wr=/b*/g;return mr.call(Er,"a"),mr.call(wr,"a"),Er.lastIndex!==0||wr.lastIndex!==0}(),br=pr.UNSUPPORTED_Y||pr.BROKEN_CARET,Sr=/()??/.exec("")[1]!==void 0,xr=vr||Sr||br;xr&&(yr=function(wr){var Ar=this,Tr,Cr,kr,Mr,Rr=br&&Ar.sticky,Nr=fr.call(Ar),_r=Ar.source,Dr=0,Pr=wr;return Rr&&(Nr=Nr.replace("y",""),Nr.indexOf("g")===-1&&(Nr+="g"),Pr=String(wr).slice(Ar.lastIndex),Ar.lastIndex>0&&(!Ar.multiline||Ar.multiline&&wr[Ar.lastIndex-1]!==`
`)&&(_r="(?: "+_r+")",Pr=" "+Pr,Dr++),Cr=new RegExp("^(?:"+_r+")",Nr)),Sr&&(Cr=new RegExp("^"+_r+"$(?!\\s)",Nr)),vr&&(Tr=Ar.lastIndex),kr=mr.call(Rr?Cr:Ar,Pr),Rr?kr?(kr.input=kr.input.slice(Dr),kr[0]=kr[0].slice(Dr),kr.index=Ar.lastIndex,Ar.lastIndex+=kr[0].length):Ar.lastIndex=0:vr&&kr&&(Ar.lastIndex=Ar.global?kr.index+kr[0].length:Tr),Sr&&kr&&kr.length>1&&gr.call(kr[0],Cr,function(){for(Mr=1;Mr<arguments.length-2;Mr++)arguments[Mr]===void 0&&(kr[Mr]=void 0)}),kr}),ur.exports=yr},"94ca":function(ur,dr,hr){var fr=hr("d039"),pr=/#|\.prototype\./,mr=function(Sr,xr){var Er=yr[gr(Sr)];return Er==br?!0:Er==vr?!1:typeof xr=="function"?fr(xr):!!xr},gr=mr.normalize=function(Sr){return String(Sr).replace(pr,".").toLowerCase()},yr=mr.data={},vr=mr.NATIVE="N",br=mr.POLYFILL="P";ur.exports=mr},"99af":function(ur,dr,hr){var fr=hr("23e7"),pr=hr("d039"),mr=hr("e8b5"),gr=hr("861d"),yr=hr("7b0b"),vr=hr("50c4"),br=hr("8418"),Sr=hr("65f0"),xr=hr("1dde"),Er=hr("b622"),wr=hr("2d00"),Ar=Er("isConcatSpreadable"),Tr=9007199254740991,Cr="Maximum allowed index exceeded",kr=wr>=51||!pr(function(){var _r=[];return _r[Ar]=!1,_r.concat()[0]!==_r}),Mr=xr("concat"),Rr=function(_r){if(!gr(_r))return!1;var Dr=_r[Ar];return Dr!==void 0?!!Dr:mr(_r)},Nr=!kr||!Mr;fr({target:"Array",proto:!0,forced:Nr},{concat:function(Dr){var Pr=yr(this),Ir=Sr(Pr,0),$r=0,Zr,rs,qr,zr,Jr;for(Zr=-1,qr=arguments.length;Zr<qr;Zr++)if(Jr=Zr===-1?Pr:arguments[Zr],Rr(Jr)){if(zr=vr(Jr.length),$r+zr>Tr)throw TypeError(Cr);for(rs=0;rs<zr;rs++,$r++)rs in Jr&&br(Ir,$r,Jr[rs])}else{if($r>=Tr)throw TypeError(Cr);br(Ir,$r++,Jr)}return Ir.length=$r,Ir}})},"9bdd":function(ur,dr,hr){var fr=hr("825a");ur.exports=function(pr,mr,gr,yr){try{return yr?mr(fr(gr)[0],gr[1]):mr(gr)}catch(br){var vr=pr.return;throw vr!==void 0&&fr(vr.call(pr)),br}}},"9bf2":function(ur,dr,hr){var fr=hr("83ab"),pr=hr("0cfb"),mr=hr("825a"),gr=hr("c04e"),yr=Object.defineProperty;dr.f=fr?yr:function(br,Sr,xr){if(mr(br),Sr=gr(Sr,!0),mr(xr),pr)try{return yr(br,Sr,xr)}catch{}if("get"in xr||"set"in xr)throw TypeError("Accessors not supported");return"value"in xr&&(br[Sr]=xr.value),br}},"9ed3":function(ur,dr,hr){var fr=hr("ae93").IteratorPrototype,pr=hr("7c73"),mr=hr("5c6c"),gr=hr("d44e"),yr=hr("3f8c"),vr=function(){return this};ur.exports=function(br,Sr,xr){var Er=Sr+" Iterator";return br.prototype=pr(fr,{next:mr(1,xr)}),gr(br,Er,!1,!0),yr[Er]=vr,br}},"9f7f":function(ur,dr,hr){var fr=hr("d039");function pr(mr,gr){return RegExp(mr,gr)}dr.UNSUPPORTED_Y=fr(function(){var mr=pr("a","y");return mr.lastIndex=2,mr.exec("abcd")!=null}),dr.BROKEN_CARET=fr(function(){var mr=pr("^r","gy");return mr.lastIndex=2,mr.exec("str")!=null})},a2bf:function(ur,dr,hr){var fr=hr("e8b5"),pr=hr("50c4"),mr=hr("0366"),gr=function(yr,vr,br,Sr,xr,Er,wr,Ar){for(var Tr=xr,Cr=0,kr=wr?mr(wr,Ar,3):!1,Mr;Cr<Sr;){if(Cr in br){if(Mr=kr?kr(br[Cr],Cr,vr):br[Cr],Er>0&&fr(Mr))Tr=gr(yr,vr,Mr,pr(Mr.length),Tr,Er-1)-1;else{if(Tr>=9007199254740991)throw TypeError("Exceed the acceptable array length");yr[Tr]=Mr}Tr++}Cr++}return Tr};ur.exports=gr},a352:function(ur,dr){ur.exports=cr},a434:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("23cb"),mr=hr("a691"),gr=hr("50c4"),yr=hr("7b0b"),vr=hr("65f0"),br=hr("8418"),Sr=hr("1dde"),xr=hr("ae40"),Er=Sr("splice"),wr=xr("splice",{ACCESSORS:!0,0:0,1:2}),Ar=Math.max,Tr=Math.min,Cr=9007199254740991,kr="Maximum allowed length exceeded";fr({target:"Array",proto:!0,forced:!Er||!wr},{splice:function(Rr,Nr){var _r=yr(this),Dr=gr(_r.length),Pr=pr(Rr,Dr),Ir=arguments.length,$r,Zr,rs,qr,zr,Jr;if(Ir===0?$r=Zr=0:Ir===1?($r=0,Zr=Dr-Pr):($r=Ir-2,Zr=Tr(Ar(mr(Nr),0),Dr-Pr)),Dr+$r-Zr>Cr)throw TypeError(kr);for(rs=vr(_r,Zr),qr=0;qr<Zr;qr++)zr=Pr+qr,zr in _r&&br(rs,qr,_r[zr]);if(rs.length=Zr,$r<Zr){for(qr=Pr;qr<Dr-Zr;qr++)zr=qr+Zr,Jr=qr+$r,zr in _r?_r[Jr]=_r[zr]:delete _r[Jr];for(qr=Dr;qr>Dr-Zr+$r;qr--)delete _r[qr-1]}else if($r>Zr)for(qr=Dr-Zr;qr>Pr;qr--)zr=qr+Zr-1,Jr=qr+$r-1,zr in _r?_r[Jr]=_r[zr]:delete _r[Jr];for(qr=0;qr<$r;qr++)_r[qr+Pr]=arguments[qr+2];return _r.length=Dr-Zr+$r,rs}})},a4d3:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("da84"),mr=hr("d066"),gr=hr("c430"),yr=hr("83ab"),vr=hr("4930"),br=hr("fdbf"),Sr=hr("d039"),xr=hr("5135"),Er=hr("e8b5"),wr=hr("861d"),Ar=hr("825a"),Tr=hr("7b0b"),Cr=hr("fc6a"),kr=hr("c04e"),Mr=hr("5c6c"),Rr=hr("7c73"),Nr=hr("df75"),_r=hr("241c"),Dr=hr("057f"),Pr=hr("7418"),Ir=hr("06cf"),$r=hr("9bf2"),Zr=hr("d1e7"),rs=hr("9112"),qr=hr("6eeb"),zr=hr("5692"),Jr=hr("f772"),Hr=hr("d012"),Kr=hr("90e3"),ys=hr("b622"),Yr=hr("e538"),Fr=hr("746f"),Br=hr("d44e"),Ur=hr("69f3"),Qr=hr("b727").forEach,Vr=Jr("hidden"),Gr="Symbol",is="prototype",ps=ys("toPrimitive"),As=Ur.set,Cs=Ur.getterFor(Gr),jr=Object[is],Wr=pr.Symbol,ds=mr("JSON","stringify"),ls=Ir.f,ss=$r.f,Lr=Dr.f,Xr=Zr.f,cs=zr("symbols"),hs=zr("op-symbols"),ms=zr("string-to-symbol-registry"),Ts=zr("symbol-to-string-registry"),ks=zr("wks"),fs=pr.QObject,Is=!fs||!fs[is]||!fs[is].findChild,Fs=yr&&Sr(function(){return Rr(ss({},"a",{get:function(){return ss(this,"a",{value:7}).a}})).a!=7})?function(Ls,Hs,Us){var as=ls(jr,Hs);as&&delete jr[Hs],ss(Ls,Hs,Us),as&&Ls!==jr&&ss(jr,Hs,as)}:ss,Gs=function(Ls,Hs){var Us=cs[Ls]=Rr(Wr[is]);return As(Us,{type:Gr,tag:Ls,description:Hs}),yr||(Us.description=Hs),Us},gs=br?function(Ls){return typeof Ls=="symbol"}:function(Ls){return Object(Ls)instanceof Wr},xs=function(Hs,Us,as){Hs===jr&&xs(hs,Us,as),Ar(Hs);var Rs=kr(Us,!0);return Ar(as),xr(cs,Rs)?(as.enumerable?(xr(Hs,Vr)&&Hs[Vr][Rs]&&(Hs[Vr][Rs]=!1),as=Rr(as,{enumerable:Mr(0,!1)})):(xr(Hs,Vr)||ss(Hs,Vr,Mr(1,{})),Hs[Vr][Rs]=!0),Fs(Hs,Rs,as)):ss(Hs,Rs,as)},Ss=function(Hs,Us){Ar(Hs);var as=Cr(Us),Rs=Nr(as).concat(vs(as));return Qr(Rs,function(js){(!yr||$s.call(as,js))&&xs(Hs,js,as[js])}),Hs},Ps=function(Hs,Us){return Us===void 0?Rr(Hs):Ss(Rr(Hs),Us)},$s=function(Hs){var Us=kr(Hs,!0),as=Xr.call(this,Us);return this===jr&&xr(cs,Us)&&!xr(hs,Us)?!1:as||!xr(this,Us)||!xr(cs,Us)||xr(this,Vr)&&this[Vr][Us]?as:!0},Ws=function(Hs,Us){var as=Cr(Hs),Rs=kr(Us,!0);if(!(as===jr&&xr(cs,Rs)&&!xr(hs,Rs))){var js=ls(as,Rs);return js&&xr(cs,Rs)&&!(xr(as,Vr)&&as[Vr][Rs])&&(js.enumerable=!0),js}},Ns=function(Hs){var Us=Lr(Cr(Hs)),as=[];return Qr(Us,function(Rs){!xr(cs,Rs)&&!xr(Hr,Rs)&&as.push(Rs)}),as},vs=function(Hs){var Us=Hs===jr,as=Lr(Us?hs:Cr(Hs)),Rs=[];return Qr(as,function(js){xr(cs,js)&&(!Us||xr(jr,js))&&Rs.push(cs[js])}),Rs};if(vr||(Wr=function(){if(this instanceof Wr)throw TypeError("Symbol is not a constructor");var Hs=!arguments.length||arguments[0]===void 0?void 0:String(arguments[0]),Us=Kr(Hs),as=function(Rs){this===jr&&as.call(hs,Rs),xr(this,Vr)&&xr(this[Vr],Us)&&(this[Vr][Us]=!1),Fs(this,Us,Mr(1,Rs))};return yr&&Is&&Fs(jr,Us,{configurable:!0,set:as}),Gs(Us,Hs)},qr(Wr[is],"toString",function(){return Cs(this).tag}),qr(Wr,"withoutSetter",function(Ls){return Gs(Kr(Ls),Ls)}),Zr.f=$s,$r.f=xs,Ir.f=Ws,_r.f=Dr.f=Ns,Pr.f=vs,Yr.f=function(Ls){return Gs(ys(Ls),Ls)},yr&&(ss(Wr[is],"description",{configurable:!0,get:function(){return Cs(this).description}}),gr||qr(jr,"propertyIsEnumerable",$s,{unsafe:!0}))),fr({global:!0,wrap:!0,forced:!vr,sham:!vr},{Symbol:Wr}),Qr(Nr(ks),function(Ls){Fr(Ls)}),fr({target:Gr,stat:!0,forced:!vr},{for:function(Ls){var Hs=String(Ls);if(xr(ms,Hs))return ms[Hs];var Us=Wr(Hs);return ms[Hs]=Us,Ts[Us]=Hs,Us},keyFor:function(Hs){if(!gs(Hs))throw TypeError(Hs+" is not a symbol");if(xr(Ts,Hs))return Ts[Hs]},useSetter:function(){Is=!0},useSimple:function(){Is=!1}}),fr({target:"Object",stat:!0,forced:!vr,sham:!yr},{create:Ps,defineProperty:xs,defineProperties:Ss,getOwnPropertyDescriptor:Ws}),fr({target:"Object",stat:!0,forced:!vr},{getOwnPropertyNames:Ns,getOwnPropertySymbols:vs}),fr({target:"Object",stat:!0,forced:Sr(function(){Pr.f(1)})},{getOwnPropertySymbols:function(Hs){return Pr.f(Tr(Hs))}}),ds){var ws=!vr||Sr(function(){var Ls=Wr();return ds([Ls])!="[null]"||ds({a:Ls})!="{}"||ds(Object(Ls))!="{}"});fr({target:"JSON",stat:!0,forced:ws},{stringify:function(Hs,Us,as){for(var Rs=[Hs],js=1,Ys;arguments.length>js;)Rs.push(arguments[js++]);if(Ys=Us,!(!wr(Us)&&Hs===void 0||gs(Hs)))return Er(Us)||(Us=function(Qs,Ks){if(typeof Ys=="function"&&(Ks=Ys.call(this,Qs,Ks)),!gs(Ks))return Ks}),Rs[1]=Us,ds.apply(null,Rs)}})}Wr[is][ps]||rs(Wr[is],ps,Wr[is].valueOf),Br(Wr,Gr),Hr[Vr]=!0},a630:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("4df4"),mr=hr("1c7e"),gr=!mr(function(yr){Array.from(yr)});fr({target:"Array",stat:!0,forced:gr},{from:pr})},a640:function(ur,dr,hr){var fr=hr("d039");ur.exports=function(pr,mr){var gr=[][pr];return!!gr&&fr(function(){gr.call(null,mr||function(){throw 1},1)})}},a691:function(ur,dr){var hr=Math.ceil,fr=Math.floor;ur.exports=function(pr){return isNaN(pr=+pr)?0:(pr>0?fr:hr)(pr)}},ab13:function(ur,dr,hr){var fr=hr("b622"),pr=fr("match");ur.exports=function(mr){var gr=/./;try{"/./"[mr](gr)}catch{try{return gr[pr]=!1,"/./"[mr](gr)}catch{}}return!1}},ac1f:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("9263");fr({target:"RegExp",proto:!0,forced:/./.exec!==pr},{exec:pr})},ad6d:function(ur,dr,hr){var fr=hr("825a");ur.exports=function(){var pr=fr(this),mr="";return pr.global&&(mr+="g"),pr.ignoreCase&&(mr+="i"),pr.multiline&&(mr+="m"),pr.dotAll&&(mr+="s"),pr.unicode&&(mr+="u"),pr.sticky&&(mr+="y"),mr}},ae40:function(ur,dr,hr){var fr=hr("83ab"),pr=hr("d039"),mr=hr("5135"),gr=Object.defineProperty,yr={},vr=function(br){throw br};ur.exports=function(br,Sr){if(mr(yr,br))return yr[br];Sr||(Sr={});var xr=[][br],Er=mr(Sr,"ACCESSORS")?Sr.ACCESSORS:!1,wr=mr(Sr,0)?Sr[0]:vr,Ar=mr(Sr,1)?Sr[1]:void 0;return yr[br]=!!xr&&!pr(function(){if(Er&&!fr)return!0;var Tr={length:-1};Er?gr(Tr,1,{enumerable:!0,get:vr}):Tr[1]=1,xr.call(Tr,wr,Ar)})}},ae93:function(ur,dr,hr){var fr=hr("e163"),pr=hr("9112"),mr=hr("5135"),gr=hr("b622"),yr=hr("c430"),vr=gr("iterator"),br=!1,Sr=function(){return this},xr,Er,wr;[].keys&&(wr=[].keys(),"next"in wr?(Er=fr(fr(wr)),Er!==Object.prototype&&(xr=Er)):br=!0),xr==null&&(xr={}),!yr&&!mr(xr,vr)&&pr(xr,vr,Sr),ur.exports={IteratorPrototype:xr,BUGGY_SAFARI_ITERATORS:br}},b041:function(ur,dr,hr){var fr=hr("00ee"),pr=hr("f5df");ur.exports=fr?{}.toString:function(){return"[object "+pr(this)+"]"}},b0c0:function(ur,dr,hr){var fr=hr("83ab"),pr=hr("9bf2").f,mr=Function.prototype,gr=mr.toString,yr=/^\s*function ([^ (]*)/,vr="name";fr&&!(vr in mr)&&pr(mr,vr,{configurable:!0,get:function(){try{return gr.call(this).match(yr)[1]}catch{return""}}})},b622:function(ur,dr,hr){var fr=hr("da84"),pr=hr("5692"),mr=hr("5135"),gr=hr("90e3"),yr=hr("4930"),vr=hr("fdbf"),br=pr("wks"),Sr=fr.Symbol,xr=vr?Sr:Sr&&Sr.withoutSetter||gr;ur.exports=function(Er){return mr(br,Er)||(yr&&mr(Sr,Er)?br[Er]=Sr[Er]:br[Er]=xr("Symbol."+Er)),br[Er]}},b64b:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("7b0b"),mr=hr("df75"),gr=hr("d039"),yr=gr(function(){mr(1)});fr({target:"Object",stat:!0,forced:yr},{keys:function(br){return mr(pr(br))}})},b727:function(ur,dr,hr){var fr=hr("0366"),pr=hr("44ad"),mr=hr("7b0b"),gr=hr("50c4"),yr=hr("65f0"),vr=[].push,br=function(Sr){var xr=Sr==1,Er=Sr==2,wr=Sr==3,Ar=Sr==4,Tr=Sr==6,Cr=Sr==5||Tr;return function(kr,Mr,Rr,Nr){for(var _r=mr(kr),Dr=pr(_r),Pr=fr(Mr,Rr,3),Ir=gr(Dr.length),$r=0,Zr=Nr||yr,rs=xr?Zr(kr,Ir):Er?Zr(kr,0):void 0,qr,zr;Ir>$r;$r++)if((Cr||$r in Dr)&&(qr=Dr[$r],zr=Pr(qr,$r,_r),Sr)){if(xr)rs[$r]=zr;else if(zr)switch(Sr){case 3:return!0;case 5:return qr;case 6:return $r;case 2:vr.call(rs,qr)}else if(Ar)return!1}return Tr?-1:wr||Ar?Ar:rs}};ur.exports={forEach:br(0),map:br(1),filter:br(2),some:br(3),every:br(4),find:br(5),findIndex:br(6)}},c04e:function(ur,dr,hr){var fr=hr("861d");ur.exports=function(pr,mr){if(!fr(pr))return pr;var gr,yr;if(mr&&typeof(gr=pr.toString)=="function"&&!fr(yr=gr.call(pr))||typeof(gr=pr.valueOf)=="function"&&!fr(yr=gr.call(pr))||!mr&&typeof(gr=pr.toString)=="function"&&!fr(yr=gr.call(pr)))return yr;throw TypeError("Can't convert object to primitive value")}},c430:function(ur,dr){ur.exports=!1},c6b6:function(ur,dr){var hr={}.toString;ur.exports=function(fr){return hr.call(fr).slice(8,-1)}},c6cd:function(ur,dr,hr){var fr=hr("da84"),pr=hr("ce4e"),mr="__core-js_shared__",gr=fr[mr]||pr(mr,{});ur.exports=gr},c740:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("b727").findIndex,mr=hr("44d2"),gr=hr("ae40"),yr="findIndex",vr=!0,br=gr(yr);yr in[]&&Array(1)[yr](function(){vr=!1}),fr({target:"Array",proto:!0,forced:vr||!br},{findIndex:function(xr){return pr(this,xr,arguments.length>1?arguments[1]:void 0)}}),mr(yr)},c8ba:function(ur,dr){var hr;hr=function(){return this}();try{hr=hr||new Function("return this")()}catch{typeof window=="object"&&(hr=window)}ur.exports=hr},c975:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("4d64").indexOf,mr=hr("a640"),gr=hr("ae40"),yr=[].indexOf,vr=!!yr&&1/[1].indexOf(1,-0)<0,br=mr("indexOf"),Sr=gr("indexOf",{ACCESSORS:!0,1:0});fr({target:"Array",proto:!0,forced:vr||!br||!Sr},{indexOf:function(Er){return vr?yr.apply(this,arguments)||0:pr(this,Er,arguments.length>1?arguments[1]:void 0)}})},ca84:function(ur,dr,hr){var fr=hr("5135"),pr=hr("fc6a"),mr=hr("4d64").indexOf,gr=hr("d012");ur.exports=function(yr,vr){var br=pr(yr),Sr=0,xr=[],Er;for(Er in br)!fr(gr,Er)&&fr(br,Er)&&xr.push(Er);for(;vr.length>Sr;)fr(br,Er=vr[Sr++])&&(~mr(xr,Er)||xr.push(Er));return xr}},caad:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("4d64").includes,mr=hr("44d2"),gr=hr("ae40"),yr=gr("indexOf",{ACCESSORS:!0,1:0});fr({target:"Array",proto:!0,forced:!yr},{includes:function(br){return pr(this,br,arguments.length>1?arguments[1]:void 0)}}),mr("includes")},cc12:function(ur,dr,hr){var fr=hr("da84"),pr=hr("861d"),mr=fr.document,gr=pr(mr)&&pr(mr.createElement);ur.exports=function(yr){return gr?mr.createElement(yr):{}}},ce4e:function(ur,dr,hr){var fr=hr("da84"),pr=hr("9112");ur.exports=function(mr,gr){try{pr(fr,mr,gr)}catch{fr[mr]=gr}return gr}},d012:function(ur,dr){ur.exports={}},d039:function(ur,dr){ur.exports=function(hr){try{return!!hr()}catch{return!0}}},d066:function(ur,dr,hr){var fr=hr("428f"),pr=hr("da84"),mr=function(gr){return typeof gr=="function"?gr:void 0};ur.exports=function(gr,yr){return arguments.length<2?mr(fr[gr])||mr(pr[gr]):fr[gr]&&fr[gr][yr]||pr[gr]&&pr[gr][yr]}},d1e7:function(ur,dr,hr){var fr={}.propertyIsEnumerable,pr=Object.getOwnPropertyDescriptor,mr=pr&&!fr.call({1:2},1);dr.f=mr?function(yr){var vr=pr(this,yr);return!!vr&&vr.enumerable}:fr},d28b:function(ur,dr,hr){var fr=hr("746f");fr("iterator")},d2bb:function(ur,dr,hr){var fr=hr("825a"),pr=hr("3bbe");ur.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var mr=!1,gr={},yr;try{yr=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,yr.call(gr,[]),mr=gr instanceof Array}catch{}return function(br,Sr){return fr(br),pr(Sr),mr?yr.call(br,Sr):br.__proto__=Sr,br}}():void 0)},d3b7:function(ur,dr,hr){var fr=hr("00ee"),pr=hr("6eeb"),mr=hr("b041");fr||pr(Object.prototype,"toString",mr,{unsafe:!0})},d44e:function(ur,dr,hr){var fr=hr("9bf2").f,pr=hr("5135"),mr=hr("b622"),gr=mr("toStringTag");ur.exports=function(yr,vr,br){yr&&!pr(yr=br?yr:yr.prototype,gr)&&fr(yr,gr,{configurable:!0,value:vr})}},d58f:function(ur,dr,hr){var fr=hr("1c0b"),pr=hr("7b0b"),mr=hr("44ad"),gr=hr("50c4"),yr=function(vr){return function(br,Sr,xr,Er){fr(Sr);var wr=pr(br),Ar=mr(wr),Tr=gr(wr.length),Cr=vr?Tr-1:0,kr=vr?-1:1;if(xr<2)for(;;){if(Cr in Ar){Er=Ar[Cr],Cr+=kr;break}if(Cr+=kr,vr?Cr<0:Tr<=Cr)throw TypeError("Reduce of empty array with no initial value")}for(;vr?Cr>=0:Tr>Cr;Cr+=kr)Cr in Ar&&(Er=Sr(Er,Ar[Cr],Cr,wr));return Er}};ur.exports={left:yr(!1),right:yr(!0)}},d784:function(ur,dr,hr){hr("ac1f");var fr=hr("6eeb"),pr=hr("d039"),mr=hr("b622"),gr=hr("9263"),yr=hr("9112"),vr=mr("species"),br=!pr(function(){var Ar=/./;return Ar.exec=function(){var Tr=[];return Tr.groups={a:"7"},Tr},"".replace(Ar,"$<a>")!=="7"}),Sr=function(){return"a".replace(/./,"$0")==="$0"}(),xr=mr("replace"),Er=function(){return/./[xr]?/./[xr]("a","$0")==="":!1}(),wr=!pr(function(){var Ar=/(?:)/,Tr=Ar.exec;Ar.exec=function(){return Tr.apply(this,arguments)};var Cr="ab".split(Ar);return Cr.length!==2||Cr[0]!=="a"||Cr[1]!=="b"});ur.exports=function(Ar,Tr,Cr,kr){var Mr=mr(Ar),Rr=!pr(function(){var $r={};return $r[Mr]=function(){return 7},""[Ar]($r)!=7}),Nr=Rr&&!pr(function(){var $r=!1,Zr=/a/;return Ar==="split"&&(Zr={},Zr.constructor={},Zr.constructor[vr]=function(){return Zr},Zr.flags="",Zr[Mr]=/./[Mr]),Zr.exec=function(){return $r=!0,null},Zr[Mr](""),!$r});if(!Rr||!Nr||Ar==="replace"&&!(br&&Sr&&!Er)||Ar==="split"&&!wr){var _r=/./[Mr],Dr=Cr(Mr,""[Ar],function($r,Zr,rs,qr,zr){return Zr.exec===gr?Rr&&!zr?{done:!0,value:_r.call(Zr,rs,qr)}:{done:!0,value:$r.call(rs,Zr,qr)}:{done:!1}},{REPLACE_KEEPS_$0:Sr,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Er}),Pr=Dr[0],Ir=Dr[1];fr(String.prototype,Ar,Pr),fr(RegExp.prototype,Mr,Tr==2?function($r,Zr){return Ir.call($r,this,Zr)}:function($r){return Ir.call($r,this)})}kr&&yr(RegExp.prototype[Mr],"sham",!0)}},d81d:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("b727").map,mr=hr("1dde"),gr=hr("ae40"),yr=mr("map"),vr=gr("map");fr({target:"Array",proto:!0,forced:!yr||!vr},{map:function(Sr){return pr(this,Sr,arguments.length>1?arguments[1]:void 0)}})},da84:function(ur,dr,hr){(function(fr){var pr=function(mr){return mr&&mr.Math==Math&&mr};ur.exports=pr(typeof globalThis=="object"&&globalThis)||pr(typeof window=="object"&&window)||pr(typeof self=="object"&&self)||pr(typeof fr=="object"&&fr)||Function("return this")()}).call(this,hr("c8ba"))},dbb4:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("83ab"),mr=hr("56ef"),gr=hr("fc6a"),yr=hr("06cf"),vr=hr("8418");fr({target:"Object",stat:!0,sham:!pr},{getOwnPropertyDescriptors:function(Sr){for(var xr=gr(Sr),Er=yr.f,wr=mr(xr),Ar={},Tr=0,Cr,kr;wr.length>Tr;)kr=Er(xr,Cr=wr[Tr++]),kr!==void 0&&vr(Ar,Cr,kr);return Ar}})},dbf1:function(ur,dr,hr){(function(fr){hr.d(dr,"a",function(){return mr});function pr(){return typeof window<"u"?window.console:fr.console}var mr=pr()}).call(this,hr("c8ba"))},ddb0:function(ur,dr,hr){var fr=hr("da84"),pr=hr("fdbc"),mr=hr("e260"),gr=hr("9112"),yr=hr("b622"),vr=yr("iterator"),br=yr("toStringTag"),Sr=mr.values;for(var xr in pr){var Er=fr[xr],wr=Er&&Er.prototype;if(wr){if(wr[vr]!==Sr)try{gr(wr,vr,Sr)}catch{wr[vr]=Sr}if(wr[br]||gr(wr,br,xr),pr[xr]){for(var Ar in mr)if(wr[Ar]!==mr[Ar])try{gr(wr,Ar,mr[Ar])}catch{wr[Ar]=mr[Ar]}}}}},df75:function(ur,dr,hr){var fr=hr("ca84"),pr=hr("7839");ur.exports=Object.keys||function(gr){return fr(gr,pr)}},e01a:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("83ab"),mr=hr("da84"),gr=hr("5135"),yr=hr("861d"),vr=hr("9bf2").f,br=hr("e893"),Sr=mr.Symbol;if(pr&&typeof Sr=="function"&&(!("description"in Sr.prototype)||Sr().description!==void 0)){var xr={},Er=function(){var Mr=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),Rr=this instanceof Er?new Sr(Mr):Mr===void 0?Sr():Sr(Mr);return Mr===""&&(xr[Rr]=!0),Rr};br(Er,Sr);var wr=Er.prototype=Sr.prototype;wr.constructor=Er;var Ar=wr.toString,Tr=String(Sr("test"))=="Symbol(test)",Cr=/^Symbol\((.*)\)[^)]+$/;vr(wr,"description",{configurable:!0,get:function(){var Mr=yr(this)?this.valueOf():this,Rr=Ar.call(Mr);if(gr(xr,Mr))return"";var Nr=Tr?Rr.slice(7,-1):Rr.replace(Cr,"$1");return Nr===""?void 0:Nr}}),fr({global:!0,forced:!0},{Symbol:Er})}},e163:function(ur,dr,hr){var fr=hr("5135"),pr=hr("7b0b"),mr=hr("f772"),gr=hr("e177"),yr=mr("IE_PROTO"),vr=Object.prototype;ur.exports=gr?Object.getPrototypeOf:function(br){return br=pr(br),fr(br,yr)?br[yr]:typeof br.constructor=="function"&&br instanceof br.constructor?br.constructor.prototype:br instanceof Object?vr:null}},e177:function(ur,dr,hr){var fr=hr("d039");ur.exports=!fr(function(){function pr(){}return pr.prototype.constructor=null,Object.getPrototypeOf(new pr)!==pr.prototype})},e260:function(ur,dr,hr){var fr=hr("fc6a"),pr=hr("44d2"),mr=hr("3f8c"),gr=hr("69f3"),yr=hr("7dd0"),vr="Array Iterator",br=gr.set,Sr=gr.getterFor(vr);ur.exports=yr(Array,"Array",function(xr,Er){br(this,{type:vr,target:fr(xr),index:0,kind:Er})},function(){var xr=Sr(this),Er=xr.target,wr=xr.kind,Ar=xr.index++;return!Er||Ar>=Er.length?(xr.target=void 0,{value:void 0,done:!0}):wr=="keys"?{value:Ar,done:!1}:wr=="values"?{value:Er[Ar],done:!1}:{value:[Ar,Er[Ar]],done:!1}},"values"),mr.Arguments=mr.Array,pr("keys"),pr("values"),pr("entries")},e439:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("d039"),mr=hr("fc6a"),gr=hr("06cf").f,yr=hr("83ab"),vr=pr(function(){gr(1)}),br=!yr||vr;fr({target:"Object",stat:!0,forced:br,sham:!yr},{getOwnPropertyDescriptor:function(xr,Er){return gr(mr(xr),Er)}})},e538:function(ur,dr,hr){var fr=hr("b622");dr.f=fr},e893:function(ur,dr,hr){var fr=hr("5135"),pr=hr("56ef"),mr=hr("06cf"),gr=hr("9bf2");ur.exports=function(yr,vr){for(var br=pr(vr),Sr=gr.f,xr=mr.f,Er=0;Er<br.length;Er++){var wr=br[Er];fr(yr,wr)||Sr(yr,wr,xr(vr,wr))}}},e8b5:function(ur,dr,hr){var fr=hr("c6b6");ur.exports=Array.isArray||function(mr){return fr(mr)=="Array"}},e95a:function(ur,dr,hr){var fr=hr("b622"),pr=hr("3f8c"),mr=fr("iterator"),gr=Array.prototype;ur.exports=function(yr){return yr!==void 0&&(pr.Array===yr||gr[mr]===yr)}},f5df:function(ur,dr,hr){var fr=hr("00ee"),pr=hr("c6b6"),mr=hr("b622"),gr=mr("toStringTag"),yr=pr(function(){return arguments}())=="Arguments",vr=function(br,Sr){try{return br[Sr]}catch{}};ur.exports=fr?pr:function(br){var Sr,xr,Er;return br===void 0?"Undefined":br===null?"Null":typeof(xr=vr(Sr=Object(br),gr))=="string"?xr:yr?pr(Sr):(Er=pr(Sr))=="Object"&&typeof Sr.callee=="function"?"Arguments":Er}},f772:function(ur,dr,hr){var fr=hr("5692"),pr=hr("90e3"),mr=fr("keys");ur.exports=function(gr){return mr[gr]||(mr[gr]=pr(gr))}},fb15:function(ur,dr,hr){if(hr.r(dr),typeof window<"u"){var fr=window.document.currentScript;{var pr=hr("8875");fr=pr(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:pr})}var mr=fr&&fr.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);mr&&(hr.p=mr[1])}hr("99af"),hr("4de4"),hr("4160"),hr("c975"),hr("d81d"),hr("a434"),hr("159b"),hr("a4d3"),hr("e439"),hr("dbb4"),hr("b64b");function gr(gs,xs,Ss){return xs in gs?Object.defineProperty(gs,xs,{value:Ss,enumerable:!0,configurable:!0,writable:!0}):gs[xs]=Ss,gs}function yr(gs,xs){var Ss=Object.keys(gs);if(Object.getOwnPropertySymbols){var Ps=Object.getOwnPropertySymbols(gs);xs&&(Ps=Ps.filter(function($s){return Object.getOwnPropertyDescriptor(gs,$s).enumerable})),Ss.push.apply(Ss,Ps)}return Ss}function vr(gs){for(var xs=1;xs<arguments.length;xs++){var Ss=arguments[xs]!=null?arguments[xs]:{};xs%2?yr(Object(Ss),!0).forEach(function(Ps){gr(gs,Ps,Ss[Ps])}):Object.getOwnPropertyDescriptors?Object.defineProperties(gs,Object.getOwnPropertyDescriptors(Ss)):yr(Object(Ss)).forEach(function(Ps){Object.defineProperty(gs,Ps,Object.getOwnPropertyDescriptor(Ss,Ps))})}return gs}function br(gs){if(Array.isArray(gs))return gs}hr("e01a"),hr("d28b"),hr("e260"),hr("d3b7"),hr("3ca3"),hr("ddb0");function Sr(gs,xs){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(gs)))){var Ss=[],Ps=!0,$s=!1,Ws=void 0;try{for(var Ns=gs[Symbol.iterator](),vs;!(Ps=(vs=Ns.next()).done)&&(Ss.push(vs.value),!(xs&&Ss.length===xs));Ps=!0);}catch(ws){$s=!0,Ws=ws}finally{try{!Ps&&Ns.return!=null&&Ns.return()}finally{if($s)throw Ws}}return Ss}}hr("a630"),hr("fb6a"),hr("b0c0"),hr("25f0");function xr(gs,xs){(xs==null||xs>gs.length)&&(xs=gs.length);for(var Ss=0,Ps=new Array(xs);Ss<xs;Ss++)Ps[Ss]=gs[Ss];return Ps}function Er(gs,xs){if(gs){if(typeof gs=="string")return xr(gs,xs);var Ss=Object.prototype.toString.call(gs).slice(8,-1);if(Ss==="Object"&&gs.constructor&&(Ss=gs.constructor.name),Ss==="Map"||Ss==="Set")return Array.from(gs);if(Ss==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ss))return xr(gs,xs)}}function wr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(gs,xs){return br(gs)||Sr(gs,xs)||Er(gs,xs)||wr()}function Tr(gs){if(Array.isArray(gs))return xr(gs)}function Cr(gs){if(typeof Symbol<"u"&&Symbol.iterator in Object(gs))return Array.from(gs)}function kr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mr(gs){return Tr(gs)||Cr(gs)||Er(gs)||kr()}var Rr=hr("a352"),Nr=hr.n(Rr);function _r(gs){gs.parentElement!==null&&gs.parentElement.removeChild(gs)}function Dr(gs,xs,Ss){var Ps=Ss===0?gs.children[0]:gs.children[Ss-1].nextSibling;gs.insertBefore(xs,Ps)}var Pr=hr("dbf1");hr("13d5"),hr("4fad"),hr("ac1f"),hr("5319");function Ir(gs){var xs=Object.create(null);return function(Ps){var $s=xs[Ps];return $s||(xs[Ps]=gs(Ps))}}var $r=/-(\w)/g,Zr=Ir(function(gs){return gs.replace($r,function(xs,Ss){return Ss.toUpperCase()})});hr("5db7"),hr("73d9");var rs=["Start","Add","Remove","Update","End"],qr=["Choose","Unchoose","Sort","Filter","Clone"],zr=["Move"],Jr=[zr,rs,qr].flatMap(function(gs){return gs}).map(function(gs){return"on".concat(gs)}),Hr={manage:zr,manageAndEmit:rs,emit:qr};function Kr(gs){return Jr.indexOf(gs)!==-1}hr("caad"),hr("2ca0");var ys=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"];function Yr(gs){return ys.includes(gs)}function Fr(gs){return["transition-group","TransitionGroup"].includes(gs)}function Br(gs){return["id","class","role","style"].includes(gs)||gs.startsWith("data-")||gs.startsWith("aria-")||gs.startsWith("on")}function Ur(gs){return gs.reduce(function(xs,Ss){var Ps=Ar(Ss,2),$s=Ps[0],Ws=Ps[1];return xs[$s]=Ws,xs},{})}function Qr(gs){var xs=gs.$attrs,Ss=gs.componentData,Ps=Ss===void 0?{}:Ss,$s=Ur(Object.entries(xs).filter(function(Ws){var Ns=Ar(Ws,2),vs=Ns[0];return Ns[1],Br(vs)}));return vr(vr({},$s),Ps)}function Vr(gs){var xs=gs.$attrs,Ss=gs.callBackBuilder,Ps=Ur(Gr(xs));Object.entries(Ss).forEach(function(Ws){var Ns=Ar(Ws,2),vs=Ns[0],ws=Ns[1];Hr[vs].forEach(function(Ls){Ps["on".concat(Ls)]=ws(Ls)})});var $s="[data-draggable]".concat(Ps.draggable||"");return vr(vr({},Ps),{},{draggable:$s})}function Gr(gs){return Object.entries(gs).filter(function(xs){var Ss=Ar(xs,2),Ps=Ss[0];return Ss[1],!Br(Ps)}).map(function(xs){var Ss=Ar(xs,2),Ps=Ss[0],$s=Ss[1];return[Zr(Ps),$s]}).filter(function(xs){var Ss=Ar(xs,2),Ps=Ss[0];return Ss[1],!Kr(Ps)})}hr("c740");function is(gs,xs){if(!(gs instanceof xs))throw new TypeError("Cannot call a class as a function")}function ps(gs,xs){for(var Ss=0;Ss<xs.length;Ss++){var Ps=xs[Ss];Ps.enumerable=Ps.enumerable||!1,Ps.configurable=!0,"value"in Ps&&(Ps.writable=!0),Object.defineProperty(gs,Ps.key,Ps)}}function As(gs,xs,Ss){return xs&&ps(gs.prototype,xs),gs}var Cs=function(xs){var Ss=xs.el;return Ss},jr=function(xs,Ss){return xs.__draggable_context=Ss},Wr=function(xs){return xs.__draggable_context},ds=function(){function gs(xs){var Ss=xs.nodes,Ps=Ss.header,$s=Ss.default,Ws=Ss.footer,Ns=xs.root,vs=xs.realList;is(this,gs),this.defaultNodes=$s,this.children=[].concat(Mr(Ps),Mr($s),Mr(Ws)),this.externalComponent=Ns.externalComponent,this.rootTransition=Ns.transition,this.tag=Ns.tag,this.realList=vs}return As(gs,[{key:"render",value:function(Ss,Ps){var $s=this.tag,Ws=this.children,Ns=this._isRootComponent,vs=Ns?{default:function(){return Ws}}:Ws;return Ss($s,Ps,vs)}},{key:"updated",value:function(){var Ss=this.defaultNodes,Ps=this.realList;Ss.forEach(function($s,Ws){jr(Cs($s),{element:Ps[Ws],index:Ws})})}},{key:"getUnderlyingVm",value:function(Ss){return Wr(Ss)}},{key:"getVmIndexFromDomIndex",value:function(Ss,Ps){var $s=this.defaultNodes,Ws=$s.length,Ns=Ps.children,vs=Ns.item(Ss);if(vs===null)return Ws;var ws=Wr(vs);if(ws)return ws.index;if(Ws===0)return 0;var Ls=Cs($s[0]),Hs=Mr(Ns).findIndex(function(Us){return Us===Ls});return Ss<Hs?0:Ws}},{key:"_isRootComponent",get:function(){return this.externalComponent||this.rootTransition}}]),gs}(),ls=hr("8bbf");function ss(gs,xs){var Ss=gs[xs];return Ss?Ss():[]}function Lr(gs){var xs=gs.$slots,Ss=gs.realList,Ps=gs.getKey,$s=Ss||[],Ws=["header","footer"].map(function(Us){return ss(xs,Us)}),Ns=Ar(Ws,2),vs=Ns[0],ws=Ns[1],Ls=xs.item;if(!Ls)throw new Error("draggable element must have an item slot");var Hs=$s.flatMap(function(Us,as){return Ls({element:Us,index:as}).map(function(Rs){return Rs.key=Ps(Us),Rs.props=vr(vr({},Rs.props||{}),{},{"data-draggable":!0}),Rs})});if(Hs.length!==$s.length)throw new Error("Item slot must have only one child");return{header:vs,footer:ws,default:Hs}}function Xr(gs){var xs=Fr(gs),Ss=!Yr(gs)&&!xs;return{transition:xs,externalComponent:Ss,tag:Ss?Object(ls.resolveComponent)(gs):xs?ls.TransitionGroup:gs}}function cs(gs){var xs=gs.$slots,Ss=gs.tag,Ps=gs.realList,$s=gs.getKey,Ws=Lr({$slots:xs,realList:Ps,getKey:$s}),Ns=Xr(Ss);return new ds({nodes:Ws,root:Ns,realList:Ps})}function hs(gs,xs){var Ss=this;Object(ls.nextTick)(function(){return Ss.$emit(gs.toLowerCase(),xs)})}function ms(gs){var xs=this;return function(Ss,Ps){if(xs.realList!==null)return xs["onDrag".concat(gs)](Ss,Ps)}}function Ts(gs){var xs=this,Ss=ms.call(this,gs);return function(Ps,$s){Ss.call(xs,Ps,$s),hs.call(xs,gs,Ps)}}var ks=null,fs={list:{type:Array,required:!1,default:null},modelValue:{type:Array,required:!1,default:null},itemKey:{type:[String,Function],required:!0},clone:{type:Function,default:function(xs){return xs}},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null}},Is=["update:modelValue","change"].concat(Mr([].concat(Mr(Hr.manageAndEmit),Mr(Hr.emit)).map(function(gs){return gs.toLowerCase()}))),Fs=Object(ls.defineComponent)({name:"draggable",inheritAttrs:!1,props:fs,emits:Is,data:function(){return{error:!1}},render:function(){try{this.error=!1;var xs=this.$slots,Ss=this.$attrs,Ps=this.tag,$s=this.componentData,Ws=this.realList,Ns=this.getKey,vs=cs({$slots:xs,tag:Ps,realList:Ws,getKey:Ns});this.componentStructure=vs;var ws=Qr({$attrs:Ss,componentData:$s});return vs.render(ls.h,ws)}catch(Ls){return this.error=!0,Object(ls.h)("pre",{style:{color:"red"}},Ls.stack)}},created:function(){this.list!==null&&this.modelValue!==null&&Pr.a.error("modelValue and list props are mutually exclusive! Please set one or another.")},mounted:function(){var xs=this;if(!this.error){var Ss=this.$attrs,Ps=this.$el,$s=this.componentStructure;$s.updated();var Ws=Vr({$attrs:Ss,callBackBuilder:{manageAndEmit:function(ws){return Ts.call(xs,ws)},emit:function(ws){return hs.bind(xs,ws)},manage:function(ws){return ms.call(xs,ws)}}}),Ns=Ps.nodeType===1?Ps:Ps.parentElement;this._sortable=new Nr.a(Ns,Ws),this.targetDomElement=Ns,Ns.__draggable_component__=this}},updated:function(){this.componentStructure.updated()},beforeUnmount:function(){this._sortable!==void 0&&this._sortable.destroy()},computed:{realList:function(){var xs=this.list;return xs||this.modelValue},getKey:function(){var xs=this.itemKey;return typeof xs=="function"?xs:function(Ss){return Ss[xs]}}},watch:{$attrs:{handler:function(xs){var Ss=this._sortable;Ss&&Gr(xs).forEach(function(Ps){var $s=Ar(Ps,2),Ws=$s[0],Ns=$s[1];Ss.option(Ws,Ns)})},deep:!0}},methods:{getUnderlyingVm:function(xs){return this.componentStructure.getUnderlyingVm(xs)||null},getUnderlyingPotencialDraggableComponent:function(xs){return xs.__draggable_component__},emitChanges:function(xs){var Ss=this;Object(ls.nextTick)(function(){return Ss.$emit("change",xs)})},alterList:function(xs){if(this.list){xs(this.list);return}var Ss=Mr(this.modelValue);xs(Ss),this.$emit("update:modelValue",Ss)},spliceList:function(){var xs=arguments,Ss=function($s){return $s.splice.apply($s,Mr(xs))};this.alterList(Ss)},updatePosition:function(xs,Ss){var Ps=function(Ws){return Ws.splice(Ss,0,Ws.splice(xs,1)[0])};this.alterList(Ps)},getRelatedContextFromMoveEvent:function(xs){var Ss=xs.to,Ps=xs.related,$s=this.getUnderlyingPotencialDraggableComponent(Ss);if(!$s)return{component:$s};var Ws=$s.realList,Ns={list:Ws,component:$s};if(Ss!==Ps&&Ws){var vs=$s.getUnderlyingVm(Ps)||{};return vr(vr({},vs),Ns)}return Ns},getVmIndexFromDomIndex:function(xs){return this.componentStructure.getVmIndexFromDomIndex(xs,this.targetDomElement)},onDragStart:function(xs){this.context=this.getUnderlyingVm(xs.item),xs.item._underlying_vm_=this.clone(this.context.element),ks=xs.item},onDragAdd:function(xs){var Ss=xs.item._underlying_vm_;if(Ss!==void 0){_r(xs.item);var Ps=this.getVmIndexFromDomIndex(xs.newIndex);this.spliceList(Ps,0,Ss);var $s={element:Ss,newIndex:Ps};this.emitChanges({added:$s})}},onDragRemove:function(xs){if(Dr(this.$el,xs.item,xs.oldIndex),xs.pullMode==="clone"){_r(xs.clone);return}var Ss=this.context,Ps=Ss.index,$s=Ss.element;this.spliceList(Ps,1);var Ws={element:$s,oldIndex:Ps};this.emitChanges({removed:Ws})},onDragUpdate:function(xs){_r(xs.item),Dr(xs.from,xs.item,xs.oldIndex);var Ss=this.context.index,Ps=this.getVmIndexFromDomIndex(xs.newIndex);this.updatePosition(Ss,Ps);var $s={element:this.context.element,oldIndex:Ss,newIndex:Ps};this.emitChanges({moved:$s})},computeFutureIndex:function(xs,Ss){if(!xs.element)return 0;var Ps=Mr(Ss.to.children).filter(function(vs){return vs.style.display!=="none"}),$s=Ps.indexOf(Ss.related),Ws=xs.component.getVmIndexFromDomIndex($s),Ns=Ps.indexOf(ks)!==-1;return Ns||!Ss.willInsertAfter?Ws:Ws+1},onDragMove:function(xs,Ss){var Ps=this.move,$s=this.realList;if(!Ps||!$s)return!0;var Ws=this.getRelatedContextFromMoveEvent(xs),Ns=this.computeFutureIndex(Ws,xs),vs=vr(vr({},this.context),{},{futureIndex:Ns}),ws=vr(vr({},xs),{},{relatedContext:Ws,draggedContext:vs});return Ps(ws,Ss)},onDragEnd:function(){ks=null}}}),Gs=Fs;dr.default=Gs},fb6a:function(ur,dr,hr){var fr=hr("23e7"),pr=hr("861d"),mr=hr("e8b5"),gr=hr("23cb"),yr=hr("50c4"),vr=hr("fc6a"),br=hr("8418"),Sr=hr("b622"),xr=hr("1dde"),Er=hr("ae40"),wr=xr("slice"),Ar=Er("slice",{ACCESSORS:!0,0:0,1:2}),Tr=Sr("species"),Cr=[].slice,kr=Math.max;fr({target:"Array",proto:!0,forced:!wr||!Ar},{slice:function(Rr,Nr){var _r=vr(this),Dr=yr(_r.length),Pr=gr(Rr,Dr),Ir=gr(Nr===void 0?Dr:Nr,Dr),$r,Zr,rs;if(mr(_r)&&($r=_r.constructor,typeof $r=="function"&&($r===Array||mr($r.prototype))?$r=void 0:pr($r)&&($r=$r[Tr],$r===null&&($r=void 0)),$r===Array||$r===void 0))return Cr.call(_r,Pr,Ir);for(Zr=new($r===void 0?Array:$r)(kr(Ir-Pr,0)),rs=0;Pr<Ir;Pr++,rs++)Pr in _r&&br(Zr,rs,_r[Pr]);return Zr.length=rs,Zr}})},fc6a:function(ur,dr,hr){var fr=hr("44ad"),pr=hr("1d80");ur.exports=function(mr){return fr(pr(mr))}},fdbc:function(ur,dr){ur.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(ur,dr,hr){var fr=hr("4930");ur.exports=fr&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}).default})})(vuedraggable_umd);const _hoisted_1$a={class:"mb-6 flex overflow-x-auto pb-2"},_hoisted_2$8=["onClick"],_hoisted_3$8={key:0,class:"text-center py-8"},_hoisted_4$7={key:1,class:"card relative overflow-hidden"},_hoisted_5$6={class:"relative min-h-[900px]"},_hoisted_6$6={class:"absolute top-0 left-0 w-20 h-full border-r border-gray-200 dark:border-gray-700"},_hoisted_7$6={class:"ml-20 relative"},_hoisted_8$6={class:"absolute top-0 left-0 w-full h-full p-2"},_hoisted_9$6=["onClick"],_hoisted_10$5={class:"flex justify-between items-start h-full"},_hoisted_11$5={class:"font-medium text-gray-900 dark:text-white text-sm"},_hoisted_12$5={class:"text-xs text-gray-600 dark:text-gray-300 mt-1"},_hoisted_13$5={key:0,class:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2"},_hoisted_14$5=["onClick"],_hoisted_15$5={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},_hoisted_16$4={class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6"},_hoisted_17$4={class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},_hoisted_18$3={class:"space-y-4"},_hoisted_19$2={class:"grid grid-cols-2 gap-4"},_hoisted_20$2={class:"grid grid-cols-2 gap-4"},_hoisted_21$2=["value"],_hoisted_22$2={key:0,value:null,disabled:""},_hoisted_23$2=["value"],_sfc_main$a={__name:"PlannerPage",setup(ar){const or=usePlannerStore(),lr=useSubjectsStore(),cr=[{name:"Lunes",value:"lunes"},{name:"Martes",value:"martes"},{name:"Miércoles",value:"miércoles"},{name:"Jueves",value:"jueves"},{name:"Viernes",value:"viernes"},{name:"Sábado",value:"sábado"},{name:"Domingo",value:"domingo"}],ur=ref(vr()),dr=yr(),hr=ref(!1),fr=ref(null),pr=ref({title:"",description:"",startTime:"08:00",endTime:"09:00",day:vr(),subjectId:null}),mr=ref(!1),gr=ref({title:"",message:"",type:"info"});function yr(){const Nr=[];for(let _r=7;_r<=22;_r++){const Dr=_r.toString().padStart(2,"0")+":00";Nr.push(Dr)}return Nr}function vr(){const Nr=new Date().getDay();return cr[[6,0,1,2,3,4,5][Nr]].value}onMounted(async()=>{await lr.fetchSubjects(),await or.fetchEvents()});const br=computed(()=>or.events.filter(_r=>_r.day===ur.value).sort((_r,Dr)=>_r.startTime.localeCompare(Dr.startTime)));computed(()=>{const Nr={};return dr.forEach(_r=>{Nr[_r]=[]}),br.value.forEach(_r=>{const Dr=_r.startTime.substring(0,5),Pr=dr.find(Ir=>Ir<=Dr)||dr[0];Nr[Pr]&&Nr[Pr].push(_r)}),Nr});const Sr=Nr=>lr.subjects.find(_r=>_r.id===Nr)||{name:"Sin materia",color:"#94a3b8"},xr=()=>{pr.value={title:"",description:"",startTime:"08:00",endTime:"09:00",day:ur.value,subjectId:null},hr.value=!0,fr.value=null},Er=Nr=>{pr.value={...Nr},hr.value=!0,fr.value=Nr.id},wr=()=>{hr.value=!1,fr.value=null},Ar=Nr=>{gr.value={title:"Error",message:Nr,type:"error"},mr.value=!0},Tr=async()=>{try{if(!pr.value.title){Ar("Por favor ingresa un título para el evento");return}if(!pr.value.subjectId){Ar("Por favor selecciona una materia");return}if(pr.value.startTime>=pr.value.endTime){Ar("La hora de inicio debe ser anterior a la hora de fin");return}const Nr=lr.subjects.find(_r=>_r.id===pr.value.subjectId);await or.addEvent({...pr.value,subjectName:Nr.name}),wr()}catch(Nr){console.error("Error saving event:",Nr),Ar("Error al guardar el evento")}},Cr=async Nr=>{gr.value={title:"Confirmar eliminación",message:"¿Estás seguro de que quieres eliminar este evento?",type:"warning"},mr.value=!0;const _r=watch(mr,Dr=>{Dr||_r()})},kr=Nr=>{const _r=Rr(Nr.startTime);return`${Rr(Nr.endTime)-_r}px`},Mr=Nr=>{const _r=Rr("07:00");return`${Rr(Nr.startTime)-_r}px`},Rr=Nr=>{const[_r,Dr]=Nr.split(":").map(Number);return _r*60+Dr};return(Nr,_r)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4"},[_r[8]||(_r[8]=createBaseVNode("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Planificador de Estudio",-1)),createBaseVNode("button",{onClick:xr,class:"btn btn-primary flex items-center justify-center"},_r[7]||(_r[7]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),createTextVNode(" Nuevo Evento ")]))]),createBaseVNode("div",_hoisted_1$a,[(openBlock(),createElementBlock(Fragment$1,null,renderList(cr,Dr=>createBaseVNode("button",{key:Dr.value,onClick:Pr=>ur.value=Dr.value,class:normalizeClass(["px-4 py-2 mx-1 rounded-lg text-center min-w-[100px] whitespace-nowrap transition-colors",ur.value===Dr.value?"bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 font-medium":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},toDisplayString(Dr.name),11,_hoisted_2$8)),64))]),unref(or).loading?(openBlock(),createElementBlock("div",_hoisted_3$8,_r[9]||(_r[9]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando horario...",-1)]))):(openBlock(),createElementBlock("div",_hoisted_4$7,[createBaseVNode("div",_hoisted_5$6,[createBaseVNode("div",_hoisted_6$6,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(dr),Dr=>(openBlock(),createElementBlock("div",{key:Dr,class:"h-[60px] flex items-start px-2 pt-2 text-sm text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700"},toDisplayString(Dr),1))),128))]),createBaseVNode("div",_hoisted_7$6,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(dr),Dr=>(openBlock(),createElementBlock("div",{key:Dr,class:"h-[60px] border-t border-gray-200 dark:border-gray-700"}))),128)),createBaseVNode("div",_hoisted_8$6,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(br.value,Dr=>(openBlock(),createElementBlock("div",{key:Dr.id,class:"absolute p-2 rounded-lg w-[calc(100%-16px)] cursor-pointer transition-all hover:shadow-md",style:normalizeStyle({top:Mr(Dr),height:kr(Dr),backgroundColor:Sr(Dr.subjectId).color+"20",borderLeft:`4px solid ${Sr(Dr.subjectId).color}`}),onClick:Pr=>Er(Dr)},[createBaseVNode("div",_hoisted_10$5,[createBaseVNode("div",null,[createBaseVNode("h3",_hoisted_11$5,toDisplayString(Dr.title),1),createBaseVNode("p",_hoisted_12$5,toDisplayString(Dr.startTime.substring(0,5))+" - "+toDisplayString(Dr.endTime.substring(0,5)),1),Dr.description?(openBlock(),createElementBlock("p",_hoisted_13$5,toDisplayString(Dr.description),1)):createCommentVNode("",!0)]),createBaseVNode("button",{onClick:withModifiers(Pr=>Cr(Dr.id),["stop"]),class:"p-1 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700"},_r[10]||(_r[10]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,_hoisted_14$5)])],12,_hoisted_9$6))),128))])])])])),hr.value?(openBlock(),createElementBlock("div",_hoisted_15$5,[createBaseVNode("div",_hoisted_16$4,[createBaseVNode("h3",_hoisted_17$4,toDisplayString(fr.value?"Editar Evento":"Nuevo Evento"),1),createBaseVNode("div",_hoisted_18$3,[createBaseVNode("div",null,[_r[11]||(_r[11]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Título "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":_r[0]||(_r[0]=Dr=>pr.value.title=Dr),placeholder:"Ej: Clase de Matemáticas",class:"input"},null,512),[[vModelText,pr.value.title]])]),createBaseVNode("div",null,[_r[12]||(_r[12]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Descripción ",-1)),withDirectives(createBaseVNode("textarea",{"onUpdate:modelValue":_r[1]||(_r[1]=Dr=>pr.value.description=Dr),placeholder:"Descripción o notas adicionales",rows:"2",class:"input"},null,512),[[vModelText,pr.value.description]])]),createBaseVNode("div",_hoisted_19$2,[createBaseVNode("div",null,[_r[13]||(_r[13]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Hora de inicio "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"time","onUpdate:modelValue":_r[2]||(_r[2]=Dr=>pr.value.startTime=Dr),class:"input"},null,512),[[vModelText,pr.value.startTime]])]),createBaseVNode("div",null,[_r[14]||(_r[14]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Hora de fin "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"time","onUpdate:modelValue":_r[3]||(_r[3]=Dr=>pr.value.endTime=Dr),class:"input"},null,512),[[vModelText,pr.value.endTime]])])]),createBaseVNode("div",_hoisted_20$2,[createBaseVNode("div",null,[_r[15]||(_r[15]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Día "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":_r[4]||(_r[4]=Dr=>pr.value.day=Dr),class:"input"},[(openBlock(),createElementBlock(Fragment$1,null,renderList(cr,Dr=>createBaseVNode("option",{key:Dr.value,value:Dr.value},toDisplayString(Dr.name),9,_hoisted_21$2)),64))],512),[[vModelSelect,pr.value.day]])]),createBaseVNode("div",null,[_r[16]||(_r[16]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Materia "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":_r[5]||(_r[5]=Dr=>pr.value.subjectId=Dr),class:"input",required:!0},[pr.value.subjectId?createCommentVNode("",!0):(openBlock(),createElementBlock("option",_hoisted_22$2,"Selecciona una materia")),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(lr).subjects,Dr=>(openBlock(),createElementBlock("option",{key:Dr.id,value:Dr.id},toDisplayString(Dr.name),9,_hoisted_23$2))),128))],512),[[vModelSelect,pr.value.subjectId]])])])]),createBaseVNode("div",{class:"flex justify-end space-x-3 mt-6"},[createBaseVNode("button",{onClick:wr,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Cancelar "),createBaseVNode("button",{onClick:Tr,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"}," Guardar ")])])])):createCommentVNode("",!0),createVNode(_sfc_main$e,{show:mr.value,title:gr.value.title,message:gr.value.message,type:gr.value.type,onClose:_r[6]||(_r[6]=Dr=>mr.value=!1),onConfirm:Nr.handleConfirmDelete},null,8,["show","title","message","type","onConfirm"])]))}},useGradesStore=defineStore("grades",()=>{const ar=ref([]),or=ref(!1),lr=ref(null);async function cr(){or.value=!0;try{ar.value=await db.grades.toArray(),lr.value=null}catch(mr){console.error("Error fetching grades:",mr),lr.value="Error al cargar las calificaciones"}finally{or.value=!1}}async function ur(mr){or.value=!0;try{ar.value=await db.grades.where("subjectId").equals(mr).toArray(),lr.value=null}catch(gr){console.error("Error fetching grades by subject:",gr),lr.value="Error al cargar las calificaciones de la materia"}finally{or.value=!1}}async function dr(mr){try{const gr=new Date().toISOString(),yr={...mr,createdAt:gr},vr=await db.grades.add(yr);return await cr(),vr}catch(gr){throw console.error("Error adding grade:",gr),lr.value="Error al añadir la calificación",gr}}async function hr(mr,gr){try{await db.grades.update(mr,gr),await cr()}catch(yr){throw console.error("Error updating grade:",yr),lr.value="Error al actualizar la calificación",yr}}async function fr(mr){try{await db.grades.delete(mr),await cr()}catch(gr){throw console.error("Error deleting grade:",gr),lr.value="Error al eliminar la calificación",gr}}const pr=computed(()=>mr=>{const gr=ar.value.filter(vr=>vr.subjectId===mr);if(gr.length===0)return 0;if(gr.every(vr=>vr.weight!==void 0&&vr.weight!==null)){const vr=gr.reduce((Sr,xr)=>Sr+(xr.weight||0),0),br=gr.reduce((Sr,xr)=>{const Er=xr.score/xr.maxScore;return Sr+Er*(xr.weight||0)},0);return vr>0?br/vr*100:0}else return gr.reduce((br,Sr)=>br+Sr.score/Sr.maxScore,0)/gr.length*100});return{grades:ar,loading:or,error:lr,fetchGrades:cr,fetchGradesBySubject:ur,addGrade:dr,updateGrade:hr,deleteGrade:fr,calculateSubjectAverage:pr}}),_hoisted_1$9={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4"},_hoisted_2$7={class:"flex items-center gap-2"},_hoisted_3$7=["value"],_hoisted_4$6={key:0,class:"text-center py-8"},_hoisted_5$5={key:1,class:"text-center py-8"},_hoisted_6$5={key:2,class:"space-y-6"},_hoisted_7$5={class:"flex flex-col md:flex-row md:items-center justify-between mb-4"},_hoisted_8$5={class:"flex items-center"},_hoisted_9$5={class:"text-xl font-semibold text-gray-900 dark:text-white"},_hoisted_10$4={class:"mt-2 md:mt-0 flex items-center"},_hoisted_11$4={class:"text-lg font-semibold mr-3"},_hoisted_12$4=["onClick"],_hoisted_13$4={class:"overflow-x-auto"},_hoisted_14$4={class:"w-full"},_hoisted_15$4={class:"py-3 px-4 text-gray-900 dark:text-white"},_hoisted_16$3={class:"py-3 px-4 text-gray-900 dark:text-white"},_hoisted_17$3={class:"py-3 px-4"},_hoisted_18$2={class:"py-3 px-4 text-gray-900 dark:text-white"},_hoisted_19$1={class:"py-3 px-4 text-gray-600 dark:text-gray-400"},_hoisted_20$1={class:"py-3 px-4"},_hoisted_21$1={class:"flex items-center space-x-2"},_hoisted_22$1=["onClick"],_hoisted_23$1=["onClick"],_hoisted_24$1={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},_hoisted_25={class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6"},_hoisted_26={class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},_hoisted_27={class:"space-y-4"},_hoisted_28={class:"grid grid-cols-2 gap-4"},_hoisted_29=["max"],_hoisted_30={class:"grid grid-cols-2 gap-4"},_hoisted_31={key:0},_hoisted_32={key:0,value:null,disabled:""},_hoisted_33=["value"],_sfc_main$9={__name:"GradesPage",setup(ar){const or=useGradesStore(),lr=useSubjectsStore(),cr=ref(null),ur=ref({title:"",score:null,maxScore:100,weight:1,date:format(new Date,"yyyy-MM-dd"),subjectId:null}),dr=ref(!1),hr=ref(null),fr=ref(!1),pr=ref({title:"",message:"",type:"info"});onMounted(async()=>{await lr.fetchSubjects(),await or.fetchGrades()});const mr=computed(()=>{const Tr={};if(lr.subjects.forEach(Cr=>{const kr=or.grades.filter(Mr=>Mr.subjectId===Cr.id);(kr.length>0||!cr.value||cr.value===Cr.id)&&(Tr[Cr.id]={subject:Cr,grades:kr.sort((Mr,Rr)=>new Date(Rr.date)-new Date(Mr.date)),average:or.calculateSubjectAverage(Cr.id)})}),cr.value){const Cr={};return Tr[cr.value]&&(Cr[cr.value]=Tr[cr.value]),Cr}return Tr}),gr=Tr=>format(new Date(Tr),"d MMM, yyyy",{locale:es}),yr=Tr=>Tr.toFixed(1)+"%",vr=Tr=>Tr>=90?"A":Tr>=80?"B":Tr>=70?"C":Tr>=60?"D":"F",br=Tr=>{ur.value={title:"",score:null,maxScore:100,weight:1,date:format(new Date,"yyyy-MM-dd"),subjectId:Tr},dr.value=!0,hr.value=null},Sr=()=>{dr.value=!1,hr.value=null},xr=async Tr=>{const Cr=or.grades.find(kr=>kr.id===Tr);Cr&&(ur.value={...Cr,date:format(new Date(Cr.date),"yyyy-MM-dd")},dr.value=!0,hr.value=Tr)},Er=Tr=>{pr.value={title:"Error",message:Tr,type:"error"},fr.value=!0},wr=async()=>{try{if(!ur.value.title){Er("Por favor ingresa un título para la calificación");return}if(!ur.value.score||ur.value.score<0){Er("Por favor ingresa una calificación válida");return}if(!ur.value.maxScore||ur.value.maxScore<=0){Er("La calificación máxima debe ser mayor a 0");return}const Tr=lr.subjects.find(Cr=>Cr.id===ur.value.subjectId);await or.addGrade({...ur.value,subjectName:Tr.name}),Sr()}catch(Tr){console.error("Error saving grade:",Tr),Er("Error al guardar la calificación")}},Ar=async Tr=>{pr.value={title:"Confirmar eliminación",message:"¿Estás seguro de que quieres eliminar esta calificación?",type:"warning"},fr.value=!0;const Cr=watch(fr,kr=>{kr||Cr()})};return(Tr,Cr)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$9,[Cr[12]||(Cr[12]=createBaseVNode("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Calificaciones",-1)),createBaseVNode("div",_hoisted_2$7,[withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Cr[0]||(Cr[0]=kr=>cr.value=kr),class:"px-3 py-2 bg-white dark:bg-slate-800 border border-gray-300 dark:border-gray-700 rounded-lg text-gray-700 dark:text-gray-300"},[Cr[10]||(Cr[10]=createBaseVNode("option",{value:null},"Todas las materias",-1)),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(lr).subjects,kr=>(openBlock(),createElementBlock("option",{key:kr.id,value:kr.id},toDisplayString(kr.name),9,_hoisted_3$7))),128))],512),[[vModelSelect,cr.value]]),createBaseVNode("button",{onClick:Cr[1]||(Cr[1]=kr=>br(cr.value)),class:"btn btn-primary flex items-center"},Cr[11]||(Cr[11]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),createTextVNode(" Nueva Calificación ")]))])]),unref(or).loading?(openBlock(),createElementBlock("div",_hoisted_4$6,Cr[13]||(Cr[13]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando calificaciones...",-1)]))):Object.keys(mr.value).length===0?(openBlock(),createElementBlock("div",_hoisted_5$5,[Cr[14]||(Cr[14]=createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"No hay calificaciones registradas",-1)),createBaseVNode("button",{onClick:Cr[2]||(Cr[2]=kr=>br(null)),class:"mt-4 btn btn-primary"}," Añadir primera calificación ")])):(openBlock(),createElementBlock("div",_hoisted_6$5,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(mr.value,(kr,Mr)=>(openBlock(),createElementBlock("div",{key:Mr,class:"card"},[createBaseVNode("div",_hoisted_7$5,[createBaseVNode("div",_hoisted_8$5,[createBaseVNode("span",{class:"inline-block w-4 h-4 rounded-full mr-2",style:normalizeStyle({backgroundColor:kr.subject.color})},null,4),createBaseVNode("h2",_hoisted_9$5,toDisplayString(kr.subject.name),1)]),createBaseVNode("div",_hoisted_10$4,[createBaseVNode("div",_hoisted_11$4,[Cr[15]||(Cr[15]=createTextVNode(" Promedio: ")),createBaseVNode("span",{class:normalizeClass(kr.average>=70?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},toDisplayString(yr(kr.average))+" ("+toDisplayString(vr(kr.average))+") ",3)]),createBaseVNode("button",{onClick:Rr=>br(Number(Mr)),class:"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"},Cr[16]||(Cr[16]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)]),8,_hoisted_12$4)])]),createBaseVNode("div",_hoisted_13$4,[createBaseVNode("table",_hoisted_14$4,[Cr[19]||(Cr[19]=createBaseVNode("thead",null,[createBaseVNode("tr",{class:"text-left border-b border-gray-200 dark:border-gray-700"},[createBaseVNode("th",{class:"py-2 px-4 text-gray-600 dark:text-gray-300"},"Título"),createBaseVNode("th",{class:"py-2 px-4 text-gray-600 dark:text-gray-300"},"Calificación"),createBaseVNode("th",{class:"py-2 px-4 text-gray-600 dark:text-gray-300"},"Porcentaje"),createBaseVNode("th",{class:"py-2 px-4 text-gray-600 dark:text-gray-300"},"Peso"),createBaseVNode("th",{class:"py-2 px-4 text-gray-600 dark:text-gray-300"},"Fecha"),createBaseVNode("th",{class:"py-2 px-4 text-gray-600 dark:text-gray-300"},"Acciones")])],-1)),createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(kr.grades,Rr=>(openBlock(),createElementBlock("tr",{key:Rr.id,class:"border-b border-gray-100 dark:border-gray-800"},[createBaseVNode("td",_hoisted_15$4,toDisplayString(Rr.title),1),createBaseVNode("td",_hoisted_16$3,toDisplayString(Rr.score)+"/"+toDisplayString(Rr.maxScore),1),createBaseVNode("td",_hoisted_17$3,[createBaseVNode("span",{class:normalizeClass(Rr.score/Rr.maxScore*100>=70?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400")},toDisplayString(yr(Rr.score/Rr.maxScore*100)),3)]),createBaseVNode("td",_hoisted_18$2,toDisplayString(Rr.weight),1),createBaseVNode("td",_hoisted_19$1,toDisplayString(gr(Rr.date)),1),createBaseVNode("td",_hoisted_20$1,[createBaseVNode("div",_hoisted_21$1,[createBaseVNode("button",{onClick:Nr=>xr(Rr.id),class:"p-1 text-gray-500 dark:text-gray-400 hover:text-primary-600 dark:hover:text-primary-400"},Cr[17]||(Cr[17]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)]),8,_hoisted_22$1),createBaseVNode("button",{onClick:Nr=>Ar(Rr.id),class:"p-1 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400"},Cr[18]||(Cr[18]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,_hoisted_23$1)])])]))),128))])])])]))),128))])),dr.value?(openBlock(),createElementBlock("div",_hoisted_24$1,[createBaseVNode("div",_hoisted_25,[createBaseVNode("h3",_hoisted_26,toDisplayString(hr.value?"Editar Calificación":"Nueva Calificación"),1),createBaseVNode("div",_hoisted_27,[createBaseVNode("div",null,[Cr[20]||(Cr[20]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Título "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":Cr[3]||(Cr[3]=kr=>ur.value.title=kr),placeholder:"Ej: Examen Parcial",class:"input"},null,512),[[vModelText,ur.value.title]])]),createBaseVNode("div",_hoisted_28,[createBaseVNode("div",null,[Cr[21]||(Cr[21]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Calificación "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":Cr[4]||(Cr[4]=kr=>ur.value.score=kr),min:"0",max:ur.value.maxScore,class:"input"},null,8,_hoisted_29),[[vModelText,ur.value.score,void 0,{number:!0}]])]),createBaseVNode("div",null,[Cr[22]||(Cr[22]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Máximo "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":Cr[5]||(Cr[5]=kr=>ur.value.maxScore=kr),min:"1",class:"input"},null,512),[[vModelText,ur.value.maxScore,void 0,{number:!0}]])])]),createBaseVNode("div",_hoisted_30,[createBaseVNode("div",null,[Cr[23]||(Cr[23]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Peso ",-1)),withDirectives(createBaseVNode("input",{type:"number","onUpdate:modelValue":Cr[6]||(Cr[6]=kr=>ur.value.weight=kr),min:"0.1",step:"0.1",class:"input"},null,512),[[vModelText,ur.value.weight,void 0,{number:!0}]])]),createBaseVNode("div",null,[Cr[24]||(Cr[24]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"}," Fecha ",-1)),withDirectives(createBaseVNode("input",{type:"date","onUpdate:modelValue":Cr[7]||(Cr[7]=kr=>ur.value.date=kr),class:"input"},null,512),[[vModelText,ur.value.date]])])]),hr.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_31,[Cr[25]||(Cr[25]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Materia "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":Cr[8]||(Cr[8]=kr=>ur.value.subjectId=kr),class:"input",required:!0},[ur.value.subjectId?createCommentVNode("",!0):(openBlock(),createElementBlock("option",_hoisted_32,"Selecciona una materia")),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(lr).subjects,kr=>(openBlock(),createElementBlock("option",{key:kr.id,value:kr.id},toDisplayString(kr.name),9,_hoisted_33))),128))],512),[[vModelSelect,ur.value.subjectId]])]))]),createBaseVNode("div",{class:"flex justify-end space-x-3 mt-6"},[createBaseVNode("button",{onClick:Sr,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Cancelar "),createBaseVNode("button",{onClick:wr,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"}," Guardar ")])])])):createCommentVNode("",!0),createVNode(_sfc_main$e,{show:fr.value,title:pr.value.title,message:pr.value.message,type:pr.value.type,onClose:Cr[9]||(Cr[9]=kr=>fr.value=!1),onConfirm:Tr.handleConfirmDelete},null,8,["show","title","message","type","onConfirm"])]))}},usePdfsStore=defineStore("pdfs",()=>{const ar=ref([]),or=ref(!1),lr=ref(null);async function cr(){or.value=!0;try{ar.value=await db.pdfs.toArray(),lr.value=null}catch(gr){console.error("Error fetching PDFs:",gr),lr.value="Error al cargar los PDFs"}finally{or.value=!1}}async function ur(gr){or.value=!0;try{ar.value=await db.pdfs.where("subjectId").equals(gr).toArray(),lr.value=null}catch(yr){console.error("Error fetching PDFs by subject:",yr),lr.value="Error al cargar los PDFs de la materia"}finally{or.value=!1}}async function dr(gr,yr){try{const vr=new Date().toISOString(),br=await yr.arrayBuffer(),Sr={...gr,file:br,size:yr.size,createdAt:vr,updatedAt:vr},xr=await db.pdfs.add(Sr);return await cr(),xr}catch(vr){throw console.error("Error adding PDF:",vr),lr.value="Error al añadir el PDF",vr}}async function hr(gr,yr,vr){try{const br=new Date().toISOString(),Sr=await db.pdfs.get(gr);let xr={...yr,updatedAt:br};if(vr){const Er=await vr.arrayBuffer();xr={...xr,file:Er,size:vr.size}}await db.pdfs.update(gr,xr),await cr()}catch(br){throw console.error("Error updating PDF:",br),lr.value="Error al actualizar el PDF",br}}async function fr(gr){try{await db.pdfs.delete(gr),await cr()}catch(yr){throw console.error("Error deleting PDF:",yr),lr.value="Error al eliminar el PDF",yr}}const pr=computed(()=>async gr=>gr?await db.pdfs.get(Number(gr)):null);async function mr(gr){or.value=!0;try{const yr=await db.pdfs.toArray(),vr=gr.toLowerCase();ar.value=yr.filter(br=>br.title.toLowerCase().includes(vr)),lr.value=null}catch(yr){console.error("Error searching PDFs:",yr),lr.value="Error al buscar los PDFs"}finally{or.value=!1}}return{pdfs:ar,loading:or,error:lr,fetchPdfs:cr,fetchPdfsBySubject:ur,addPdf:dr,updatePdf:hr,deletePdf:fr,getPdfById:pr,searchPdfs:mr}}),_hoisted_1$8={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},_hoisted_2$6={class:"md:col-span-2"},_hoisted_3$6={key:0,class:"text-center py-8"},_hoisted_4$5={key:1,class:"text-center py-8"},_hoisted_5$4={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},_hoisted_6$4={class:"mb-2 flex items-center"},_hoisted_7$4={class:"text-xs text-gray-600 dark:text-gray-300"},_hoisted_8$4={class:"flex items-start gap-3"},_hoisted_9$4={class:"flex-grow"},_hoisted_10$3={class:"text-lg font-semibold text-gray-900 dark:text-white mb-1"},_hoisted_11$3={class:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400"},_hoisted_12$3={class:"mt-4 flex justify-between"},_hoisted_13$3=["onClick"],_hoisted_14$3={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},_hoisted_15$3={class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6"},_hoisted_16$2={class:"space-y-4"},_hoisted_17$2={key:0},_hoisted_18$1={key:1,class:"text-left"},_hoisted_19={class:"flex items-start gap-3"},_hoisted_20={class:"flex-grow"},_hoisted_21={class:"text-base font-medium text-gray-900 dark:text-white"},_hoisted_22={class:"text-sm text-gray-500 dark:text-gray-400"},_hoisted_23={class:"flex justify-end space-x-3 mt-6"},_hoisted_24=["disabled"],_sfc_main$8={__name:"PdfsPage",setup(ar){const or=usePdfsStore(),lr=useSubjectsStore(),cr=ref(null),ur=ref(""),dr=ref(!1),hr=ref(null),fr=ref(null),pr=ref({title:"",subjectId:null}),mr=ref(!1),gr=ref({title:"",message:"",type:"info"});onMounted(async()=>{await lr.fetchSubjects(),await or.fetchPdfs()});const yr=computed(()=>{let Rr=or.pdfs;if(cr.value&&(Rr=Rr.filter(Nr=>Nr.subjectId===cr.value)),ur.value){const Nr=ur.value.toLowerCase();Rr=Rr.filter(_r=>_r.title.toLowerCase().includes(Nr))}return[...Rr].sort((Nr,_r)=>new Date(_r.createdAt)-new Date(Nr.createdAt))}),vr=Rr=>format(new Date(Rr),"d MMM, yyyy",{locale:es}),br=Rr=>Rr<1024?Rr+" bytes":Rr<1048576?(Rr/1024).toFixed(1)+" KB":(Rr/1048576).toFixed(1)+" MB",Sr=Rr=>lr.subjects.find(Nr=>Nr.id===Rr)||{name:"Sin materia",color:"#94a3b8"},xr=Rr=>{ur.value=Rr},Er=()=>{cr.value=null,ur.value=""},wr=()=>{pr.value={title:"",subjectId:null},hr.value=null,dr.value=!0},Ar=()=>{dr.value=!1},Tr=Rr=>{const Nr=Rr.target.files[0];Nr&&Nr.type==="application/pdf"?(hr.value=Nr,pr.value.title||(pr.value.title=Nr.name.replace(".pdf",""))):(alert("Por favor selecciona un archivo PDF válido"),hr.value=null,fr.value&&(fr.value.value=""))},Cr=Rr=>{gr.value={title:"Error",message:Rr,type:"error"},mr.value=!0},kr=async()=>{try{if(!hr.value){Cr("Por favor selecciona un archivo PDF");return}if(!pr.value.title){Cr("Por favor ingresa un título para el documento");return}if(!pr.value.subjectId){Cr("Por favor selecciona una materia");return}const Rr=lr.subjects.find(Nr=>Nr.id===pr.value.subjectId);await or.addPdf({...pr.value,file:hr.value,subjectName:Rr.name}),Ar()}catch(Rr){console.error("Error uploading PDF:",Rr),Cr("Error al subir el PDF")}},Mr=async Rr=>{gr.value={title:"Confirmar eliminación",message:"¿Estás seguro de que quieres eliminar este PDF?",type:"warning"},mr.value=!0;const Nr=watch(mr,_r=>{_r||Nr()})};return(Rr,Nr)=>{const _r=resolveComponent("router-link");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4"},[Nr[6]||(Nr[6]=createBaseVNode("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Documentos PDF",-1)),createBaseVNode("button",{onClick:wr,class:"btn btn-primary flex items-center justify-center"},Nr[5]||(Nr[5]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0l-4 4m4-4v12"})],-1),createTextVNode(" Subir PDF ")]))]),createBaseVNode("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$6,[createVNode(_sfc_main$h,{placeholder:"Buscar documentos...",onSearch:xr})]),createBaseVNode("div",null,[createVNode(_sfc_main$g,{modelValue:cr.value,"onUpdate:modelValue":Nr[0]||(Nr[0]=Dr=>cr.value=Dr)},null,8,["modelValue"])])]),unref(or).loading?(openBlock(),createElementBlock("div",_hoisted_3$6,Nr[7]||(Nr[7]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando documentos...",-1)]))):yr.value.length===0?(openBlock(),createElementBlock("div",_hoisted_4$5,[Nr[8]||(Nr[8]=createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"No se encontraron documentos",-1)),cr.value||ur.value?(openBlock(),createElementBlock("button",{key:0,onClick:Er,class:"mt-2 text-primary-600 dark:text-primary-400 hover:underline"}," Borrar filtros ")):createCommentVNode("",!0),createBaseVNode("button",{onClick:wr,class:"mt-4 btn btn-primary"}," Subir tu primer PDF ")])):(openBlock(),createElementBlock("div",_hoisted_5$4,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(yr.value,Dr=>(openBlock(),createElementBlock("div",{key:Dr.id,class:"card hover:shadow-lg transition-shadow cursor-pointer"},[createBaseVNode("div",_hoisted_6$4,[createBaseVNode("span",{class:"inline-block w-3 h-3 rounded-full mr-2",style:normalizeStyle({backgroundColor:Sr(Dr.subjectId).color})},null,4),createBaseVNode("span",_hoisted_7$4,toDisplayString(Sr(Dr.subjectId).name),1)]),createBaseVNode("div",_hoisted_8$4,[Nr[9]||(Nr[9]=createBaseVNode("div",{class:"flex-shrink-0 w-10 h-12 bg-red-100 dark:bg-red-900/30 rounded flex items-center justify-center"},[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})])],-1)),createBaseVNode("div",_hoisted_9$4,[createVNode(_r,{to:`/pdfs/${Dr.id}`},{default:withCtx(()=>[createBaseVNode("h3",_hoisted_10$3,toDisplayString(Dr.title),1)]),_:2},1032,["to"]),createBaseVNode("div",_hoisted_11$3,[createBaseVNode("span",null,toDisplayString(br(Dr.size)),1),createBaseVNode("span",null,toDisplayString(vr(Dr.createdAt)),1)])])]),createBaseVNode("div",_hoisted_12$3,[createVNode(_r,{to:`/pdfs/${Dr.id}`,class:"px-3 py-1.5 bg-primary-100 text-primary-700 dark:bg-primary-900/30 dark:text-primary-300 rounded-lg text-sm hover:bg-primary-200 dark:hover:bg-primary-800/30 transition-colors"},{default:withCtx(()=>Nr[10]||(Nr[10]=[createTextVNode(" Abrir ")])),_:2,__:[10]},1032,["to"]),createBaseVNode("button",{onClick:withModifiers(Pr=>Mr(Dr.id),["stop"]),class:"px-3 py-1.5 bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors"}," Eliminar ",8,_hoisted_13$3)])]))),128))])),dr.value?(openBlock(),createElementBlock("div",_hoisted_14$3,[createBaseVNode("div",_hoisted_15$3,[Nr[16]||(Nr[16]=createBaseVNode("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"}," Subir Nuevo PDF ",-1)),createBaseVNode("div",_hoisted_16$2,[createBaseVNode("div",{class:normalizeClass(["border-2 border-dashed border-gray-300 dark:border-gray-700 rounded-lg p-6 text-center",{"border-primary-500 dark:border-primary-500":hr.value}])},[hr.value?(openBlock(),createElementBlock("div",_hoisted_18$1,[createBaseVNode("div",_hoisted_19,[Nr[14]||(Nr[14]=createBaseVNode("div",{class:"flex-shrink-0 w-10 h-12 bg-red-100 dark:bg-red-900/30 rounded flex items-center justify-center"},[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})])],-1)),createBaseVNode("div",_hoisted_20,[createBaseVNode("h4",_hoisted_21,toDisplayString(hr.value.name),1),createBaseVNode("p",_hoisted_22,toDisplayString(br(hr.value.size)),1)]),createBaseVNode("button",{onClick:Nr[1]||(Nr[1]=Dr=>{hr.value=null,fr.value.value&&(fr.value.value.value="")}),class:"p-1 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700"},Nr[13]||(Nr[13]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])])):(openBlock(),createElementBlock("div",_hoisted_17$2,[Nr[11]||(Nr[11]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1)),Nr[12]||(Nr[12]=createBaseVNode("p",{class:"mt-2 text-sm text-gray-600 dark:text-gray-300"}," Arrastra y suelta un archivo PDF aquí, o haz clic para seleccionar ",-1)),createBaseVNode("input",{type:"file",ref_key:"fileInputRef",ref:fr,onChange:Tr,accept:"application/pdf",class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"},null,544)]))],2),createBaseVNode("div",null,[Nr[15]||(Nr[15]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Título "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"text","onUpdate:modelValue":Nr[2]||(Nr[2]=Dr=>pr.value.title=Dr),placeholder:"Título del documento",class:"input"},null,512),[[vModelText,pr.value.title]])]),createBaseVNode("div",null,[createVNode(_sfc_main$g,{modelValue:pr.value.subjectId,"onUpdate:modelValue":Nr[3]||(Nr[3]=Dr=>pr.value.subjectId=Dr),required:!0},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_23,[createBaseVNode("button",{onClick:Ar,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Cancelar "),createBaseVNode("button",{onClick:kr,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",disabled:!hr.value}," Subir ",8,_hoisted_24)])])])):createCommentVNode("",!0),createVNode(_sfc_main$e,{show:mr.value,title:gr.value.title,message:gr.value.message,type:gr.value.type,onClose:Nr[4]||(Nr[4]=Dr=>mr.value=!1),onConfirm:Rr.handleConfirmDelete},null,8,["show","title","message","type","onConfirm"])])}}},scriptRel="modulepreload",assetsURL=function(ar){return"/Focus-App/"+ar},seen={},__vitePreload=function(or,lr,cr){let ur=Promise.resolve();if(lr&&lr.length>0){document.getElementsByTagName("link");const hr=document.querySelector("meta[property=csp-nonce]"),fr=(hr==null?void 0:hr.nonce)||(hr==null?void 0:hr.getAttribute("nonce"));ur=Promise.allSettled(lr.map(pr=>{if(pr=assetsURL(pr),pr in seen)return;seen[pr]=!0;const mr=pr.endsWith(".css"),gr=mr?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${pr}"]${gr}`))return;const yr=document.createElement("link");if(yr.rel=mr?"stylesheet":scriptRel,mr||(yr.as="script"),yr.crossOrigin="",yr.href=pr,fr&&yr.setAttribute("nonce",fr),document.head.appendChild(yr),mr)return new Promise((vr,br)=>{yr.addEventListener("load",vr),yr.addEventListener("error",()=>br(new Error(`Unable to preload CSS for ${pr}`)))})}))}function dr(hr){const fr=new Event("vite:preloadError",{cancelable:!0});if(fr.payload=hr,window.dispatchEvent(fr),!fr.defaultPrevented)throw hr}return ur.then(hr=>{for(const fr of hr||[])fr.status==="rejected"&&dr(fr.reason);return or().catch(dr)})};function commonjsRequire(ar){throw new Error('Could not dynamically require "'+ar+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(or,lr){module.exports=or.pdfjsLib=lr()})(globalThis,()=>(()=>{var __webpack_modules__=[,(ar,or)=>{var Ws;Object.defineProperty(or,"__esModule",{value:!0}),or.VerbosityLevel=or.Util=or.UnknownErrorException=or.UnexpectedResponseException=or.TextRenderingMode=or.RenderingIntentFlag=or.PromiseCapability=or.PermissionFlag=or.PasswordResponses=or.PasswordException=or.PageActionEventType=or.OPS=or.MissingPDFException=or.MAX_IMAGE_SIZE_TO_CACHE=or.LINE_FACTOR=or.LINE_DESCENT_FACTOR=or.InvalidPDFException=or.ImageKind=or.IDENTITY_MATRIX=or.FormatError=or.FeatureTest=or.FONT_IDENTITY_MATRIX=or.DocumentActionEventType=or.CMapCompressionType=or.BaseException=or.BASELINE_FACTOR=or.AnnotationType=or.AnnotationReplyType=or.AnnotationPrefix=or.AnnotationMode=or.AnnotationFlag=or.AnnotationFieldFlag=or.AnnotationEditorType=or.AnnotationEditorPrefix=or.AnnotationEditorParamsType=or.AnnotationBorderStyleType=or.AnnotationActionEventType=or.AbortException=void 0,or.assert=Hr,or.bytesToString=As,or.createValidAbsoluteUrl=ys,or.getModificationDate=Fs,or.getUuid=Ps,or.getVerbosityLevel=rs,or.info=qr,or.isArrayBuffer=fs,or.isArrayEqual=Is,or.isNodeJS=void 0,or.normalizeUnicode=Ss,or.objectFromMap=ds,or.objectSize=Wr,or.setVerbosityLevel=Zr,or.shadow=Yr,or.string32=jr,or.stringToBytes=Cs,or.stringToPDFString=ms,or.stringToUTF8String=Ts,or.unreachable=Jr,or.utf8StringToString=ks,or.warn=zr;const lr=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");or.isNodeJS=lr;const cr=[1,0,0,1,0,0];or.IDENTITY_MATRIX=cr;const ur=[.001,0,0,.001,0,0];or.FONT_IDENTITY_MATRIX=ur;const dr=1e7;or.MAX_IMAGE_SIZE_TO_CACHE=dr;const hr=1.35;or.LINE_FACTOR=hr;const fr=.35;or.LINE_DESCENT_FACTOR=fr;const pr=fr/hr;or.BASELINE_FACTOR=pr;const mr={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};or.RenderingIntentFlag=mr;const gr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};or.AnnotationMode=gr;const yr="pdfjs_internal_editor_";or.AnnotationEditorPrefix=yr;const vr={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};or.AnnotationEditorType=vr;const br={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};or.AnnotationEditorParamsType=br;const Sr={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};or.PermissionFlag=Sr;const xr={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};or.TextRenderingMode=xr;const Er={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};or.ImageKind=Er;const wr={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};or.AnnotationType=wr;const Ar={GROUP:"Group",REPLY:"R"};or.AnnotationReplyType=Ar;const Tr={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};or.AnnotationFlag=Tr;const Cr={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};or.AnnotationFieldFlag=Cr;const kr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};or.AnnotationBorderStyleType=kr;const Mr={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};or.AnnotationActionEventType=Mr;const Rr={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};or.DocumentActionEventType=Rr;const Nr={O:"PageOpen",C:"PageClose"};or.PageActionEventType=Nr;const _r={ERRORS:0,WARNINGS:1,INFOS:5};or.VerbosityLevel=_r;const Dr={NONE:0,BINARY:1};or.CMapCompressionType=Dr;const Pr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};or.OPS=Pr;const Ir={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};or.PasswordResponses=Ir;let $r=_r.WARNINGS;function Zr(Ns){Number.isInteger(Ns)&&($r=Ns)}function rs(){return $r}function qr(Ns){$r>=_r.INFOS&&console.log(`Info: ${Ns}`)}function zr(Ns){$r>=_r.WARNINGS&&console.log(`Warning: ${Ns}`)}function Jr(Ns){throw new Error(Ns)}function Hr(Ns,vs){Ns||Jr(vs)}function Kr(Ns){switch(Ns==null?void 0:Ns.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ys(Ns,vs=null,ws=null){if(!Ns)return null;try{if(ws&&typeof Ns=="string"){if(ws.addDefaultProtocol&&Ns.startsWith("www.")){const Hs=Ns.match(/\./g);(Hs==null?void 0:Hs.length)>=2&&(Ns=`http://${Ns}`)}if(ws.tryConvertEncoding)try{Ns=Ts(Ns)}catch{}}const Ls=vs?new URL(Ns,vs):new URL(Ns);if(Kr(Ls))return Ls}catch{}return null}function Yr(Ns,vs,ws,Ls=!1){return Object.defineProperty(Ns,vs,{value:ws,enumerable:!Ls,configurable:!0,writable:!1}),ws}const Fr=function(){function vs(ws,Ls){this.constructor===vs&&Jr("Cannot initialize BaseException."),this.message=ws,this.name=Ls}return vs.prototype=new Error,vs.constructor=vs,vs}();or.BaseException=Fr;class Br extends Fr{constructor(vs,ws){super(vs,"PasswordException"),this.code=ws}}or.PasswordException=Br;class Ur extends Fr{constructor(vs,ws){super(vs,"UnknownErrorException"),this.details=ws}}or.UnknownErrorException=Ur;class Qr extends Fr{constructor(vs){super(vs,"InvalidPDFException")}}or.InvalidPDFException=Qr;class Vr extends Fr{constructor(vs){super(vs,"MissingPDFException")}}or.MissingPDFException=Vr;class Gr extends Fr{constructor(vs,ws){super(vs,"UnexpectedResponseException"),this.status=ws}}or.UnexpectedResponseException=Gr;class is extends Fr{constructor(vs){super(vs,"FormatError")}}or.FormatError=is;class ps extends Fr{constructor(vs){super(vs,"AbortException")}}or.AbortException=ps;function As(Ns){(typeof Ns!="object"||(Ns==null?void 0:Ns.length)===void 0)&&Jr("Invalid argument for bytesToString");const vs=Ns.length,ws=8192;if(vs<ws)return String.fromCharCode.apply(null,Ns);const Ls=[];for(let Hs=0;Hs<vs;Hs+=ws){const Us=Math.min(Hs+ws,vs),as=Ns.subarray(Hs,Us);Ls.push(String.fromCharCode.apply(null,as))}return Ls.join("")}function Cs(Ns){typeof Ns!="string"&&Jr("Invalid argument for stringToBytes");const vs=Ns.length,ws=new Uint8Array(vs);for(let Ls=0;Ls<vs;++Ls)ws[Ls]=Ns.charCodeAt(Ls)&255;return ws}function jr(Ns){return String.fromCharCode(Ns>>24&255,Ns>>16&255,Ns>>8&255,Ns&255)}function Wr(Ns){return Object.keys(Ns).length}function ds(Ns){const vs=Object.create(null);for(const[ws,Ls]of Ns)vs[ws]=Ls;return vs}function ls(){const Ns=new Uint8Array(4);return Ns[0]=1,new Uint32Array(Ns.buffer,0,1)[0]===1}function ss(){try{return new Function(""),!0}catch{return!1}}class Lr{static get isLittleEndian(){return Yr(this,"isLittleEndian",ls())}static get isEvalSupported(){return Yr(this,"isEvalSupported",ss())}static get isOffscreenCanvasSupported(){return Yr(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Yr(this,"platform",{isWin:!1,isMac:!1}):Yr(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var vs,ws;return Yr(this,"isCSSRoundSupported",(ws=(vs=globalThis.CSS)==null?void 0:vs.supports)==null?void 0:ws.call(vs,"width: round(1.5px, 1px)"))}}or.FeatureTest=Lr;const Xr=[...Array(256).keys()].map(Ns=>Ns.toString(16).padStart(2,"0"));class cs{static makeHexColor(vs,ws,Ls){return`#${Xr[vs]}${Xr[ws]}${Xr[Ls]}`}static scaleMinMax(vs,ws){let Ls;vs[0]?(vs[0]<0&&(Ls=ws[0],ws[0]=ws[1],ws[1]=Ls),ws[0]*=vs[0],ws[1]*=vs[0],vs[3]<0&&(Ls=ws[2],ws[2]=ws[3],ws[3]=Ls),ws[2]*=vs[3],ws[3]*=vs[3]):(Ls=ws[0],ws[0]=ws[2],ws[2]=Ls,Ls=ws[1],ws[1]=ws[3],ws[3]=Ls,vs[1]<0&&(Ls=ws[2],ws[2]=ws[3],ws[3]=Ls),ws[2]*=vs[1],ws[3]*=vs[1],vs[2]<0&&(Ls=ws[0],ws[0]=ws[1],ws[1]=Ls),ws[0]*=vs[2],ws[1]*=vs[2]),ws[0]+=vs[4],ws[1]+=vs[4],ws[2]+=vs[5],ws[3]+=vs[5]}static transform(vs,ws){return[vs[0]*ws[0]+vs[2]*ws[1],vs[1]*ws[0]+vs[3]*ws[1],vs[0]*ws[2]+vs[2]*ws[3],vs[1]*ws[2]+vs[3]*ws[3],vs[0]*ws[4]+vs[2]*ws[5]+vs[4],vs[1]*ws[4]+vs[3]*ws[5]+vs[5]]}static applyTransform(vs,ws){const Ls=vs[0]*ws[0]+vs[1]*ws[2]+ws[4],Hs=vs[0]*ws[1]+vs[1]*ws[3]+ws[5];return[Ls,Hs]}static applyInverseTransform(vs,ws){const Ls=ws[0]*ws[3]-ws[1]*ws[2],Hs=(vs[0]*ws[3]-vs[1]*ws[2]+ws[2]*ws[5]-ws[4]*ws[3])/Ls,Us=(-vs[0]*ws[1]+vs[1]*ws[0]+ws[4]*ws[1]-ws[5]*ws[0])/Ls;return[Hs,Us]}static getAxialAlignedBoundingBox(vs,ws){const Ls=this.applyTransform(vs,ws),Hs=this.applyTransform(vs.slice(2,4),ws),Us=this.applyTransform([vs[0],vs[3]],ws),as=this.applyTransform([vs[2],vs[1]],ws);return[Math.min(Ls[0],Hs[0],Us[0],as[0]),Math.min(Ls[1],Hs[1],Us[1],as[1]),Math.max(Ls[0],Hs[0],Us[0],as[0]),Math.max(Ls[1],Hs[1],Us[1],as[1])]}static inverseTransform(vs){const ws=vs[0]*vs[3]-vs[1]*vs[2];return[vs[3]/ws,-vs[1]/ws,-vs[2]/ws,vs[0]/ws,(vs[2]*vs[5]-vs[4]*vs[3])/ws,(vs[4]*vs[1]-vs[5]*vs[0])/ws]}static singularValueDecompose2dScale(vs){const ws=[vs[0],vs[2],vs[1],vs[3]],Ls=vs[0]*ws[0]+vs[1]*ws[2],Hs=vs[0]*ws[1]+vs[1]*ws[3],Us=vs[2]*ws[0]+vs[3]*ws[2],as=vs[2]*ws[1]+vs[3]*ws[3],Rs=(Ls+as)/2,js=Math.sqrt((Ls+as)**2-4*(Ls*as-Us*Hs))/2,Ys=Rs+js||1,Qs=Rs-js||1;return[Math.sqrt(Ys),Math.sqrt(Qs)]}static normalizeRect(vs){const ws=vs.slice(0);return vs[0]>vs[2]&&(ws[0]=vs[2],ws[2]=vs[0]),vs[1]>vs[3]&&(ws[1]=vs[3],ws[3]=vs[1]),ws}static intersect(vs,ws){const Ls=Math.max(Math.min(vs[0],vs[2]),Math.min(ws[0],ws[2])),Hs=Math.min(Math.max(vs[0],vs[2]),Math.max(ws[0],ws[2]));if(Ls>Hs)return null;const Us=Math.max(Math.min(vs[1],vs[3]),Math.min(ws[1],ws[3])),as=Math.min(Math.max(vs[1],vs[3]),Math.max(ws[1],ws[3]));return Us>as?null:[Ls,Us,Hs,as]}static bezierBoundingBox(vs,ws,Ls,Hs,Us,as,Rs,js){const Ys=[],Qs=[[],[]];let Ks,us,ns,bs,Os,Ds,Bs,Vs;for(let ti=0;ti<2;++ti){if(ti===0?(us=6*vs-12*Ls+6*Us,Ks=-3*vs+9*Ls-9*Us+3*Rs,ns=3*Ls-3*vs):(us=6*ws-12*Hs+6*as,Ks=-3*ws+9*Hs-9*as+3*js,ns=3*Hs-3*ws),Math.abs(Ks)<1e-12){if(Math.abs(us)<1e-12)continue;bs=-ns/us,0<bs&&bs<1&&Ys.push(bs);continue}Bs=us*us-4*ns*Ks,Vs=Math.sqrt(Bs),!(Bs<0)&&(Os=(-us+Vs)/(2*Ks),0<Os&&Os<1&&Ys.push(Os),Ds=(-us-Vs)/(2*Ks),0<Ds&&Ds<1&&Ys.push(Ds))}let Js=Ys.length,Xs;const zs=Js;for(;Js--;)bs=Ys[Js],Xs=1-bs,Qs[0][Js]=Xs*Xs*Xs*vs+3*Xs*Xs*bs*Ls+3*Xs*bs*bs*Us+bs*bs*bs*Rs,Qs[1][Js]=Xs*Xs*Xs*ws+3*Xs*Xs*bs*Hs+3*Xs*bs*bs*as+bs*bs*bs*js;return Qs[0][zs]=vs,Qs[1][zs]=ws,Qs[0][zs+1]=Rs,Qs[1][zs+1]=js,Qs[0].length=Qs[1].length=zs+2,[Math.min(...Qs[0]),Math.min(...Qs[1]),Math.max(...Qs[0]),Math.max(...Qs[1])]}}or.Util=cs;const hs=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ms(Ns){if(Ns[0]>="ï"){let ws;if(Ns[0]==="þ"&&Ns[1]==="ÿ"?ws="utf-16be":Ns[0]==="ÿ"&&Ns[1]==="þ"?ws="utf-16le":Ns[0]==="ï"&&Ns[1]==="»"&&Ns[2]==="¿"&&(ws="utf-8"),ws)try{const Ls=new TextDecoder(ws,{fatal:!0}),Hs=Cs(Ns);return Ls.decode(Hs)}catch(Ls){zr(`stringToPDFString: "${Ls}".`)}}const vs=[];for(let ws=0,Ls=Ns.length;ws<Ls;ws++){const Hs=hs[Ns.charCodeAt(ws)];vs.push(Hs?String.fromCharCode(Hs):Ns.charAt(ws))}return vs.join("")}function Ts(Ns){return decodeURIComponent(escape(Ns))}function ks(Ns){return unescape(encodeURIComponent(Ns))}function fs(Ns){return typeof Ns=="object"&&(Ns==null?void 0:Ns.byteLength)!==void 0}function Is(Ns,vs){if(Ns.length!==vs.length)return!1;for(let ws=0,Ls=Ns.length;ws<Ls;ws++)if(Ns[ws]!==vs[ws])return!1;return!0}function Fs(Ns=new Date){return[Ns.getUTCFullYear().toString(),(Ns.getUTCMonth()+1).toString().padStart(2,"0"),Ns.getUTCDate().toString().padStart(2,"0"),Ns.getUTCHours().toString().padStart(2,"0"),Ns.getUTCMinutes().toString().padStart(2,"0"),Ns.getUTCSeconds().toString().padStart(2,"0")].join("")}class Gs{constructor(){_s(this,Ws,!1);this.promise=new Promise((vs,ws)=>{this.resolve=Ls=>{Ms(this,Ws,!0),vs(Ls)},this.reject=Ls=>{Ms(this,Ws,!0),ws(Ls)}})}get settled(){return Or(this,Ws)}}Ws=new WeakMap,or.PromiseCapability=Gs;let gs=null,xs=null;function Ss(Ns){return gs||(gs=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,xs=new Map([["ﬅ","ſt"]])),Ns.replaceAll(gs,(vs,ws,Ls)=>ws?ws.normalize("NFKC"):xs.get(Ls))}function Ps(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const Ns=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(Ns);else for(let vs=0;vs<32;vs++)Ns[vs]=Math.floor(Math.random()*255);return As(Ns)}const $s="pdfjs_internal_id_";or.AnnotationPrefix=$s},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var ar,lr,cr,ur,pi,Ti,fr,pr,mr,gr,yr,vr,br,Sr,xr,_i,wr,Ar,zi,Cr,kr;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Rr){if(typeof Rr=="string"||Rr instanceof URL?Rr={url:Rr}:(0,_util.isArrayBuffer)(Rr)&&(Rr={data:Rr}),typeof Rr!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Rr.url&&!Rr.data&&!Rr.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const Nr=new PDFDocumentLoadingTask,{docId:_r}=Nr,Dr=Rr.url?getUrlProp(Rr.url):null,Pr=Rr.data?getDataProp(Rr.data):null,Ir=Rr.httpHeaders||null,$r=Rr.withCredentials===!0,Zr=Rr.password??null,rs=Rr.range instanceof PDFDataRangeTransport?Rr.range:null,qr=Number.isInteger(Rr.rangeChunkSize)&&Rr.rangeChunkSize>0?Rr.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let zr=Rr.worker instanceof PDFWorker?Rr.worker:null;const Jr=Rr.verbosity,Hr=typeof Rr.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Rr.docBaseUrl)?Rr.docBaseUrl:null,Kr=typeof Rr.cMapUrl=="string"?Rr.cMapUrl:null,ys=Rr.cMapPacked!==!1,Yr=Rr.CMapReaderFactory||DefaultCMapReaderFactory,Fr=typeof Rr.standardFontDataUrl=="string"?Rr.standardFontDataUrl:null,Br=Rr.StandardFontDataFactory||DefaultStandardFontDataFactory,Ur=Rr.stopAtErrors!==!0,Qr=Number.isInteger(Rr.maxImageSize)&&Rr.maxImageSize>-1?Rr.maxImageSize:-1,Vr=Rr.isEvalSupported!==!1,Gr=typeof Rr.isOffscreenCanvasSupported=="boolean"?Rr.isOffscreenCanvasSupported:!_util.isNodeJS,is=Number.isInteger(Rr.canvasMaxAreaInBytes)?Rr.canvasMaxAreaInBytes:-1,ps=typeof Rr.disableFontFace=="boolean"?Rr.disableFontFace:_util.isNodeJS,As=Rr.fontExtraProperties===!0,Cs=Rr.enableXfa===!0,jr=Rr.ownerDocument||globalThis.document,Wr=Rr.disableRange===!0,ds=Rr.disableStream===!0,ls=Rr.disableAutoFetch===!0,ss=Rr.pdfBug===!0,Lr=rs?rs.length:Rr.length??NaN,Xr=typeof Rr.useSystemFonts=="boolean"?Rr.useSystemFonts:!_util.isNodeJS&&!ps,cs=typeof Rr.useWorkerFetch=="boolean"?Rr.useWorkerFetch:Yr===_display_utils.DOMCMapReaderFactory&&Br===_display_utils.DOMStandardFontDataFactory&&Kr&&Fr&&(0,_display_utils.isValidFetchUrl)(Kr,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Fr,document.baseURI),hs=Rr.canvasFactory||new DefaultCanvasFactory({ownerDocument:jr}),ms=Rr.filterFactory||new DefaultFilterFactory({docId:_r,ownerDocument:jr}),Ts=null;(0,_util.setVerbosityLevel)(Jr);const ks={canvasFactory:hs,filterFactory:ms};if(cs||(ks.cMapReaderFactory=new Yr({baseUrl:Kr,isCompressed:ys}),ks.standardFontDataFactory=new Br({baseUrl:Fr})),!zr){const Fs={verbosity:Jr,port:_worker_options.GlobalWorkerOptions.workerPort};zr=Fs.port?PDFWorker.fromPort(Fs):new PDFWorker(Fs),Nr._worker=zr}const fs={docId:_r,apiVersion:"3.11.174",data:Pr,password:Zr,disableAutoFetch:ls,rangeChunkSize:qr,length:Lr,docBaseUrl:Hr,enableXfa:Cs,evaluatorOptions:{maxImageSize:Qr,disableFontFace:ps,ignoreErrors:Ur,isEvalSupported:Vr,isOffscreenCanvasSupported:Gr,canvasMaxAreaInBytes:is,fontExtraProperties:As,useSystemFonts:Xr,cMapUrl:cs?Kr:null,standardFontDataUrl:cs?Fr:null}},Is={ignoreErrors:Ur,isEvalSupported:Vr,disableFontFace:ps,fontExtraProperties:As,enableXfa:Cs,ownerDocument:jr,disableAutoFetch:ls,pdfBug:ss,styleElement:Ts};return zr.promise.then(function(){if(Nr.destroyed)throw new Error("Loading aborted");const Fs=_fetchDocument(zr,fs),Gs=new Promise(function(gs){let xs;rs?xs=new _transport_stream.PDFDataTransportStream({length:Lr,initialData:rs.initialData,progressiveDone:rs.progressiveDone,contentDispositionFilename:rs.contentDispositionFilename,disableRange:Wr,disableStream:ds},rs):Pr||(xs=(Ps=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Ps):(0,_display_utils.isValidFetchUrl)(Ps.url)?new _displayFetch_stream.PDFFetchStream(Ps):new _displayNetwork.PDFNetworkStream(Ps))({url:Dr,length:Lr,httpHeaders:Ir,withCredentials:$r,rangeChunkSize:qr,disableRange:Wr,disableStream:ds})),gs(xs)});return Promise.all([Fs,Gs]).then(function([gs,xs]){if(Nr.destroyed)throw new Error("Loading aborted");const Ss=new _message_handler.MessageHandler(_r,gs,zr.port),Ps=new WorkerTransport(Ss,Nr,xs,Is,ks);Nr._transport=Ps,Ss.send("Ready",null)})}).catch(Nr._capability.reject),Nr}async function _fetchDocument(Rr,Nr){if(Rr.destroyed)throw new Error("Worker was destroyed");const _r=await Rr.messageHandler.sendWithPromise("GetDocRequest",Nr,Nr.data?[Nr.data.buffer]:null);if(Rr.destroyed)throw new Error("Worker was destroyed");return _r}function getUrlProp(Rr){if(Rr instanceof URL)return Rr.href;try{return new URL(Rr,window.location).href}catch{if(_util.isNodeJS&&typeof Rr=="string")return Rr}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Rr){if(_util.isNodeJS&&typeof Buffer<"u"&&Rr instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Rr instanceof Uint8Array&&Rr.byteLength===Rr.buffer.byteLength)return Rr;if(typeof Rr=="string")return(0,_util.stringToBytes)(Rr);if(typeof Rr=="object"&&!isNaN(Rr==null?void 0:Rr.length)||(0,_util.isArrayBuffer)(Rr))return new Uint8Array(Rr);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const or=class or{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${bi(or,ar)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var Nr,_r,Dr;this.destroyed=!0;try{(Nr=this._worker)!=null&&Nr.port&&(this._worker._pendingDestroy=!0),await((_r=this._transport)==null?void 0:_r.destroy())}catch(Pr){throw(Dr=this._worker)!=null&&Dr.port&&delete this._worker._pendingDestroy,Pr}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};ar=new WeakMap,_s(or,ar,0);let PDFDocumentLoadingTask=or;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(Nr,_r,Dr=!1,Pr=null){this.length=Nr,this.initialData=_r,this.progressiveDone=Dr,this.contentDispositionFilename=Pr,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(Nr){this._rangeListeners.push(Nr)}addProgressListener(Nr){this._progressListeners.push(Nr)}addProgressiveReadListener(Nr){this._progressiveReadListeners.push(Nr)}addProgressiveDoneListener(Nr){this._progressiveDoneListeners.push(Nr)}onDataRange(Nr,_r){for(const Dr of this._rangeListeners)Dr(Nr,_r)}onDataProgress(Nr,_r){this._readyCapability.promise.then(()=>{for(const Dr of this._progressListeners)Dr(Nr,_r)})}onDataProgressiveRead(Nr){this._readyCapability.promise.then(()=>{for(const _r of this._progressiveReadListeners)_r(Nr)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const Nr of this._progressiveDoneListeners)Nr()})}transportReady(){this._readyCapability.resolve()}requestDataRange(Nr,_r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(Nr,_r){this._pdfInfo=Nr,this._transport=_r,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Dr=>{if(!Dr)return Dr;const Pr=[];for(const Ir in Dr)Pr.push(...Dr[Ir]);return Pr}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(Nr){return this._transport.getPage(Nr)}getPageIndex(Nr){return this._transport.getPageIndex(Nr)}getDestinations(){return this._transport.getDestinations()}getDestination(Nr){return this._transport.getDestination(Nr)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(Nr=!1){return this._transport.startCleanup(Nr||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(Nr,_r,Dr,Pr=!1){_s(this,ur);_s(this,lr,null);_s(this,cr,!1);this._pageIndex=Nr,this._pageInfo=_r,this._transport=Dr,this._stats=Pr?new _display_utils.StatTimer:null,this._pdfBug=Pr,this.commonObjs=Dr.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:Nr,rotation:_r=this.rotate,offsetX:Dr=0,offsetY:Pr=0,dontFlip:Ir=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:Nr,rotation:_r,offsetX:Dr,offsetY:Pr,dontFlip:Ir})}getAnnotations({intent:Nr="display"}={}){const _r=this._transport.getRenderingIntent(Nr);return this._transport.getAnnotations(this._pageIndex,_r.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var Nr;return((Nr=this._transport._htmlForXfa)==null?void 0:Nr.children[this._pageIndex])||null}render({canvasContext:Nr,viewport:_r,intent:Dr="display",annotationMode:Pr=_util.AnnotationMode.ENABLE,transform:Ir=null,background:$r=null,optionalContentConfigPromise:Zr=null,annotationCanvasMap:rs=null,pageColors:qr=null,printAnnotationStorage:zr=null}){var Br,Ur;(Br=this._stats)==null||Br.time("Overall");const Jr=this._transport.getRenderingIntent(Dr,Pr,zr);Ms(this,cr,!1),Es(this,ur,Ti).call(this),Zr||(Zr=this._transport.getOptionalContentConfig());let Hr=this._intentStates.get(Jr.cacheKey);Hr||(Hr=Object.create(null),this._intentStates.set(Jr.cacheKey,Hr)),Hr.streamReaderCancelTimeout&&(clearTimeout(Hr.streamReaderCancelTimeout),Hr.streamReaderCancelTimeout=null);const Kr=!!(Jr.renderingIntent&_util.RenderingIntentFlag.PRINT);Hr.displayReadyCapability||(Hr.displayReadyCapability=new _util.PromiseCapability,Hr.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ur=this._stats)==null||Ur.time("Page Request"),this._pumpOperatorList(Jr));const ys=Qr=>{var Vr,Gr;Hr.renderTasks.delete(Yr),(this._maybeCleanupAfterRender||Kr)&&Ms(this,cr,!0),Es(this,ur,pi).call(this,!Kr),Qr?(Yr.capability.reject(Qr),this._abortOperatorList({intentState:Hr,reason:Qr instanceof Error?Qr:new Error(Qr)})):Yr.capability.resolve(),(Vr=this._stats)==null||Vr.timeEnd("Rendering"),(Gr=this._stats)==null||Gr.timeEnd("Overall")},Yr=new InternalRenderTask({callback:ys,params:{canvasContext:Nr,viewport:_r,transform:Ir,background:$r},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:rs,operatorList:Hr.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!Kr,pdfBug:this._pdfBug,pageColors:qr});(Hr.renderTasks||(Hr.renderTasks=new Set)).add(Yr);const Fr=Yr.task;return Promise.all([Hr.displayReadyCapability.promise,Zr]).then(([Qr,Vr])=>{var Gr;if(this.destroyed){ys();return}(Gr=this._stats)==null||Gr.time("Rendering"),Yr.initializeGraphics({transparency:Qr,optionalContentConfig:Vr}),Yr.operatorListChanged()}).catch(ys),Fr}getOperatorList({intent:Nr="display",annotationMode:_r=_util.AnnotationMode.ENABLE,printAnnotationStorage:Dr=null}={}){var rs;function Pr(){$r.operatorList.lastChunk&&($r.opListReadCapability.resolve($r.operatorList),$r.renderTasks.delete(Zr))}const Ir=this._transport.getRenderingIntent(Nr,_r,Dr,!0);let $r=this._intentStates.get(Ir.cacheKey);$r||($r=Object.create(null),this._intentStates.set(Ir.cacheKey,$r));let Zr;return $r.opListReadCapability||(Zr=Object.create(null),Zr.operatorListChanged=Pr,$r.opListReadCapability=new _util.PromiseCapability,($r.renderTasks||($r.renderTasks=new Set)).add(Zr),$r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(rs=this._stats)==null||rs.time("Page Request"),this._pumpOperatorList(Ir)),$r.opListReadCapability.promise}streamTextContent({includeMarkedContent:Nr=!1,disableNormalization:_r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:Nr===!0,disableNormalization:_r===!0},{highWaterMark:100,size(Pr){return Pr.items.length}})}getTextContent(Nr={}){if(this._transport._htmlForXfa)return this.getXfa().then(Dr=>_xfa_text.XfaText.textContent(Dr));const _r=this.streamTextContent(Nr);return new Promise(function(Dr,Pr){function Ir(){$r.read().then(function({value:rs,done:qr}){if(qr){Dr(Zr);return}Object.assign(Zr.styles,rs.styles),Zr.items.push(...rs.items),Ir()},Pr)}const $r=_r.getReader(),Zr={items:[],styles:Object.create(null)};Ir()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const Nr=[];for(const _r of this._intentStates.values())if(this._abortOperatorList({intentState:_r,reason:new Error("Page was destroyed."),force:!0}),!_r.opListReadCapability)for(const Dr of _r.renderTasks)Nr.push(Dr.completed),Dr.cancel();return this.objs.clear(),Ms(this,cr,!1),Es(this,ur,Ti).call(this),Promise.all(Nr)}cleanup(Nr=!1){Ms(this,cr,!0);const _r=Es(this,ur,pi).call(this,!1);return Nr&&_r&&this._stats&&(this._stats=new _display_utils.StatTimer),_r}_startRenderPage(Nr,_r){var Pr,Ir;const Dr=this._intentStates.get(_r);Dr&&((Pr=this._stats)==null||Pr.timeEnd("Page Request"),(Ir=Dr.displayReadyCapability)==null||Ir.resolve(Nr))}_renderPageChunk(Nr,_r){for(let Dr=0,Pr=Nr.length;Dr<Pr;Dr++)_r.operatorList.fnArray.push(Nr.fnArray[Dr]),_r.operatorList.argsArray.push(Nr.argsArray[Dr]);_r.operatorList.lastChunk=Nr.lastChunk,_r.operatorList.separateAnnots=Nr.separateAnnots;for(const Dr of _r.renderTasks)Dr.operatorListChanged();Nr.lastChunk&&Es(this,ur,pi).call(this,!0)}_pumpOperatorList({renderingIntent:Nr,cacheKey:_r,annotationStorageSerializable:Dr}){const{map:Pr,transfers:Ir}=Dr,Zr=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Nr,cacheKey:_r,annotationStorage:Pr},Ir).getReader(),rs=this._intentStates.get(_r);rs.streamReader=Zr;const qr=()=>{Zr.read().then(({value:zr,done:Jr})=>{if(Jr){rs.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(zr,rs),qr())},zr=>{if(rs.streamReader=null,!this._transport.destroyed){if(rs.operatorList){rs.operatorList.lastChunk=!0;for(const Jr of rs.renderTasks)Jr.operatorListChanged();Es(this,ur,pi).call(this,!0)}if(rs.displayReadyCapability)rs.displayReadyCapability.reject(zr);else if(rs.opListReadCapability)rs.opListReadCapability.reject(zr);else throw zr}})};qr()}_abortOperatorList({intentState:Nr,reason:_r,force:Dr=!1}){if(Nr.streamReader){if(Nr.streamReaderCancelTimeout&&(clearTimeout(Nr.streamReaderCancelTimeout),Nr.streamReaderCancelTimeout=null),!Dr){if(Nr.renderTasks.size>0)return;if(_r instanceof _display_utils.RenderingCancelledException){let Pr=RENDERING_CANCELLED_TIMEOUT;_r.extraDelay>0&&_r.extraDelay<1e3&&(Pr+=_r.extraDelay),Nr.streamReaderCancelTimeout=setTimeout(()=>{Nr.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:Nr,reason:_r,force:!0})},Pr);return}}if(Nr.streamReader.cancel(new _util.AbortException(_r.message)).catch(()=>{}),Nr.streamReader=null,!this._transport.destroyed){for(const[Pr,Ir]of this._intentStates)if(Ir===Nr){this._intentStates.delete(Pr);break}this.cleanup()}}}get stats(){return this._stats}}lr=new WeakMap,cr=new WeakMap,ur=new WeakSet,pi=function(Nr=!1){if(Es(this,ur,Ti).call(this),!Or(this,cr)||this.destroyed)return!1;if(Nr)return Ms(this,lr,setTimeout(()=>{Ms(this,lr,null),Es(this,ur,pi).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:_r,operatorList:Dr}of this._intentStates.values())if(_r.size>0||!Dr.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),Ms(this,cr,!1),!0},Ti=function(){Or(this,lr)&&(clearTimeout(Or(this,lr)),Ms(this,lr,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){_s(this,fr,new Set);_s(this,pr,Promise.resolve())}postMessage(Nr,_r){const Dr={data:structuredClone(Nr,_r?{transfer:_r}:null)};Or(this,pr).then(()=>{for(const Pr of Or(this,fr))Pr.call(this,Dr)})}addEventListener(Nr,_r){Or(this,fr).add(_r)}removeEventListener(Nr,_r){Or(this,fr).delete(_r)}terminate(){Or(this,fr).clear()}}fr=new WeakMap,pr=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Rr=(mr=document==null?void 0:document.currentScript)==null?void 0:mr.src;Rr&&(PDFWorkerUtil.fallbackWorkerSrc=Rr.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Rr,Nr){let _r;try{if(_r=new URL(Rr),!_r.origin||_r.origin==="null")return!1}catch{return!1}const Dr=new URL(Nr,_r);return _r.origin===Dr.origin},PDFWorkerUtil.createCDNWrapper=function(Rr){const Nr=`importScripts("${Rr}");`;return URL.createObjectURL(new Blob([Nr]))}}const _PDFWorker=class _PDFWorker{constructor({name:Rr=null,port:Nr=null,verbosity:_r=(0,_util.getVerbosityLevel)()}={}){var Dr;if(this.name=Rr,this.destroyed=!1,this.verbosity=_r,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,Nr){if((Dr=Or(_PDFWorker,gr))!=null&&Dr.has(Nr))throw new Error("Cannot use more than one PDFWorker per port.");(Or(_PDFWorker,gr)||Ms(_PDFWorker,gr,new WeakMap)).set(Nr,this),this._initializeFromPort(Nr);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Rr){this._port=Rr,this._messageHandler=new _message_handler.MessageHandler("main","worker",Rr),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Rr}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Rr)||(Rr=PDFWorkerUtil.createCDNWrapper(new URL(Rr,window.location).href));const Nr=new Worker(Rr),_r=new _message_handler.MessageHandler("main","worker",Nr),Dr=()=>{Nr.removeEventListener("error",Pr),_r.destroy(),Nr.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Pr=()=>{this._webWorker||Dr()};Nr.addEventListener("error",Pr),_r.on("test",$r=>{if(Nr.removeEventListener("error",Pr),this.destroyed){Dr();return}$r?(this._messageHandler=_r,this._port=Nr,this._webWorker=Nr,this._readyCapability.resolve(),_r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),_r.destroy(),Nr.terminate())}),_r.on("ready",$r=>{if(Nr.removeEventListener("error",Pr),this.destroyed){Dr();return}try{Ir()}catch{this._setupFakeWorker()}});const Ir=()=>{const $r=new Uint8Array;_r.send("test",$r,[$r.buffer])};Ir();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Rr=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const Nr=new LoopbackPort;this._port=Nr;const _r=`fake${PDFWorkerUtil.fakeWorkerId++}`,Dr=new _message_handler.MessageHandler(_r+"_worker",_r,Nr);Rr.setup(Dr,Nr);const Pr=new _message_handler.MessageHandler(_r,_r+"_worker",Nr);this._messageHandler=Pr,this._readyCapability.resolve(),Pr.send("configure",{verbosity:this.verbosity})}).catch(Rr=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Rr.message}".`))})}destroy(){var Rr;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Rr=Or(_PDFWorker,gr))==null||Rr.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Rr){var _r;if(!(Rr!=null&&Rr.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const Nr=(_r=Or(this,gr))==null?void 0:_r.get(Rr.port);if(Nr){if(Nr._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return Nr}return new _PDFWorker(Rr)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Rr;try{return((Rr=globalThis.pdfjsWorker)==null?void 0:Rr.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};gr=new WeakMap,_s(_PDFWorker,gr);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(Nr,_r,Dr,Pr,Ir){_s(this,xr);_s(this,yr,new Map);_s(this,vr,new Map);_s(this,br,new Map);_s(this,Sr,null);this.messageHandler=Nr,this.loadingTask=_r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Pr.ownerDocument,styleElement:Pr.styleElement}),this._params=Pr,this.canvasFactory=Ir.canvasFactory,this.filterFactory=Ir.filterFactory,this.cMapReaderFactory=Ir.cMapReaderFactory,this.standardFontDataFactory=Ir.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Dr,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(Nr,_r=_util.AnnotationMode.ENABLE,Dr=null,Pr=!1){let Ir=_util.RenderingIntentFlag.DISPLAY,$r=_annotation_storage.SerializableEmpty;switch(Nr){case"any":Ir=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":Ir=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${Nr}`)}switch(_r){case _util.AnnotationMode.DISABLE:Ir+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:Ir+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:Ir+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,$r=(Ir&_util.RenderingIntentFlag.PRINT&&Dr instanceof _annotation_storage.PrintAnnotationStorage?Dr:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${_r}`)}return Pr&&(Ir+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:Ir,cacheKey:`${Ir}_${$r.hash}`,annotationStorageSerializable:$r}}destroy(){var Dr;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Dr=Or(this,Sr))==null||Dr.reject(new Error("Worker was destroyed during onPassword callback"));const Nr=[];for(const Pr of Or(this,vr).values())Nr.push(Pr._destroy());Or(this,vr).clear(),Or(this,br).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const _r=this.messageHandler.sendWithPromise("Terminate",null);return Nr.push(_r),Promise.all(Nr).then(()=>{var Pr;this.commonObjs.clear(),this.fontLoader.clear(),Or(this,yr).clear(),this.filterFactory.destroy(),(Pr=this._networkStream)==null||Pr.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:Nr,loadingTask:_r}=this;Nr.on("GetReader",(Dr,Pr)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=Ir=>{this._lastProgress={loaded:Ir.loaded,total:Ir.total}},Pr.onPull=()=>{this._fullReader.read().then(function({value:Ir,done:$r}){if($r){Pr.close();return}(0,_util.assert)(Ir instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Pr.enqueue(new Uint8Array(Ir),1,[Ir])}).catch(Ir=>{Pr.error(Ir)})},Pr.onCancel=Ir=>{this._fullReader.cancel(Ir),Pr.ready.catch($r=>{if(!this.destroyed)throw $r})}}),Nr.on("ReaderHeadersReady",Dr=>{const Pr=new _util.PromiseCapability,Ir=this._fullReader;return Ir.headersReady.then(()=>{var $r;(!Ir.isStreamingSupported||!Ir.isRangeSupported)&&(this._lastProgress&&(($r=_r.onProgress)==null||$r.call(_r,this._lastProgress)),Ir.onProgress=Zr=>{var rs;(rs=_r.onProgress)==null||rs.call(_r,{loaded:Zr.loaded,total:Zr.total})}),Pr.resolve({isStreamingSupported:Ir.isStreamingSupported,isRangeSupported:Ir.isRangeSupported,contentLength:Ir.contentLength})},Pr.reject),Pr.promise}),Nr.on("GetRangeReader",(Dr,Pr)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const Ir=this._networkStream.getRangeReader(Dr.begin,Dr.end);if(!Ir){Pr.close();return}Pr.onPull=()=>{Ir.read().then(function({value:$r,done:Zr}){if(Zr){Pr.close();return}(0,_util.assert)($r instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Pr.enqueue(new Uint8Array($r),1,[$r])}).catch($r=>{Pr.error($r)})},Pr.onCancel=$r=>{Ir.cancel($r),Pr.ready.catch(Zr=>{if(!this.destroyed)throw Zr})}}),Nr.on("GetDoc",({pdfInfo:Dr})=>{this._numPages=Dr.numPages,this._htmlForXfa=Dr.htmlForXfa,delete Dr.htmlForXfa,_r._capability.resolve(new PDFDocumentProxy(Dr,this))}),Nr.on("DocException",function(Dr){let Pr;switch(Dr.name){case"PasswordException":Pr=new _util.PasswordException(Dr.message,Dr.code);break;case"InvalidPDFException":Pr=new _util.InvalidPDFException(Dr.message);break;case"MissingPDFException":Pr=new _util.MissingPDFException(Dr.message);break;case"UnexpectedResponseException":Pr=new _util.UnexpectedResponseException(Dr.message,Dr.status);break;case"UnknownErrorException":Pr=new _util.UnknownErrorException(Dr.message,Dr.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}_r._capability.reject(Pr)}),Nr.on("PasswordRequest",Dr=>{if(Ms(this,Sr,new _util.PromiseCapability),_r.onPassword){const Pr=Ir=>{Ir instanceof Error?Or(this,Sr).reject(Ir):Or(this,Sr).resolve({password:Ir})};try{_r.onPassword(Pr,Dr.code)}catch(Ir){Or(this,Sr).reject(Ir)}}else Or(this,Sr).reject(new _util.PasswordException(Dr.message,Dr.code));return Or(this,Sr).promise}),Nr.on("DataLoaded",Dr=>{var Pr;(Pr=_r.onProgress)==null||Pr.call(_r,{loaded:Dr.length,total:Dr.length}),this.downloadInfoCapability.resolve(Dr)}),Nr.on("StartRenderPage",Dr=>{if(this.destroyed)return;Or(this,vr).get(Dr.pageIndex)._startRenderPage(Dr.transparency,Dr.cacheKey)}),Nr.on("commonobj",([Dr,Pr,Ir])=>{var $r;if(!this.destroyed&&!this.commonObjs.has(Dr))switch(Pr){case"Font":const Zr=this._params;if("error"in Ir){const zr=Ir.error;(0,_util.warn)(`Error during font loading: ${zr}`),this.commonObjs.resolve(Dr,zr);break}const rs=Zr.pdfBug&&(($r=globalThis.FontInspector)!=null&&$r.enabled)?(zr,Jr)=>globalThis.FontInspector.fontAdded(zr,Jr):null,qr=new _font_loader.FontFaceObject(Ir,{isEvalSupported:Zr.isEvalSupported,disableFontFace:Zr.disableFontFace,ignoreErrors:Zr.ignoreErrors,inspectFont:rs});this.fontLoader.bind(qr).catch(zr=>Nr.sendWithPromise("FontFallback",{id:Dr})).finally(()=>{!Zr.fontExtraProperties&&qr.data&&(qr.data=null),this.commonObjs.resolve(Dr,qr)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Dr,Ir);break;default:throw new Error(`Got unknown common object type ${Pr}`)}}),Nr.on("obj",([Dr,Pr,Ir,$r])=>{var rs;if(this.destroyed)return;const Zr=Or(this,vr).get(Pr);if(!Zr.objs.has(Dr))switch(Ir){case"Image":if(Zr.objs.resolve(Dr,$r),$r){let qr;if($r.bitmap){const{width:zr,height:Jr}=$r;qr=zr*Jr*4}else qr=((rs=$r.data)==null?void 0:rs.length)||0;qr>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Zr._maybeCleanupAfterRender=!0)}break;case"Pattern":Zr.objs.resolve(Dr,$r);break;default:throw new Error(`Got unknown object type ${Ir}`)}}),Nr.on("DocProgress",Dr=>{var Pr;this.destroyed||(Pr=_r.onProgress)==null||Pr.call(_r,{loaded:Dr.loaded,total:Dr.total})}),Nr.on("FetchBuiltInCMap",Dr=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Dr):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),Nr.on("FetchStandardFontData",Dr=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Dr):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Dr;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:Nr,transfers:_r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:Nr,filename:((Dr=this._fullReader)==null?void 0:Dr.filename)??null},_r).finally(()=>{this.annotationStorage.resetModified()})}getPage(Nr){if(!Number.isInteger(Nr)||Nr<=0||Nr>this._numPages)return Promise.reject(new Error("Invalid page request."));const _r=Nr-1,Dr=Or(this,br).get(_r);if(Dr)return Dr;const Pr=this.messageHandler.sendWithPromise("GetPage",{pageIndex:_r}).then(Ir=>{if(this.destroyed)throw new Error("Transport destroyed");const $r=new PDFPageProxy(_r,Ir,this,this._params.pdfBug);return Or(this,vr).set(_r,$r),$r});return Or(this,br).set(_r,Pr),Pr}getPageIndex(Nr){return typeof Nr!="object"||Nr===null||!Number.isInteger(Nr.num)||Nr.num<0||!Number.isInteger(Nr.gen)||Nr.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:Nr.num,gen:Nr.gen})}getAnnotations(Nr,_r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:Nr,intent:_r})}getFieldObjects(){return Es(this,xr,_i).call(this,"GetFieldObjects")}hasJSActions(){return Es(this,xr,_i).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(Nr){return typeof Nr!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:Nr})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return Es(this,xr,_i).call(this,"GetDocJSActions")}getPageJSActions(Nr){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:Nr})}getStructTree(Nr){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:Nr})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(Nr=>new _optional_content_config.OptionalContentConfig(Nr))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const Nr="GetMetadata",_r=Or(this,yr).get(Nr);if(_r)return _r;const Dr=this.messageHandler.sendWithPromise(Nr,null).then(Pr=>{var Ir,$r;return{info:Pr[0],metadata:Pr[1]?new _metadata.Metadata(Pr[1]):null,contentDispositionFilename:((Ir=this._fullReader)==null?void 0:Ir.filename)??null,contentLength:(($r=this._fullReader)==null?void 0:$r.contentLength)??null}});return Or(this,yr).set(Nr,Dr),Dr}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(Nr=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const _r of Or(this,vr).values())if(!_r.cleanup())throw new Error(`startCleanup: Page ${_r.pageNumber} is currently rendering.`);this.commonObjs.clear(),Nr||this.fontLoader.clear(),Or(this,yr).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:Nr,enableXfa:_r}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:Nr,enableXfa:_r})}}yr=new WeakMap,vr=new WeakMap,br=new WeakMap,Sr=new WeakMap,xr=new WeakSet,_i=function(Nr,_r=null){const Dr=Or(this,yr).get(Nr);if(Dr)return Dr;const Pr=this.messageHandler.sendWithPromise(Nr,_r);return Or(this,yr).set(Nr,Pr),Pr};class PDFObjects{constructor(){_s(this,Ar);_s(this,wr,Object.create(null))}get(Nr,_r=null){if(_r){const Pr=Es(this,Ar,zi).call(this,Nr);return Pr.capability.promise.then(()=>_r(Pr.data)),null}const Dr=Or(this,wr)[Nr];if(!(Dr!=null&&Dr.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${Nr}.`);return Dr.data}has(Nr){const _r=Or(this,wr)[Nr];return(_r==null?void 0:_r.capability.settled)||!1}resolve(Nr,_r=null){const Dr=Es(this,Ar,zi).call(this,Nr);Dr.data=_r,Dr.capability.resolve()}clear(){var Nr;for(const _r in Or(this,wr)){const{data:Dr}=Or(this,wr)[_r];(Nr=Dr==null?void 0:Dr.bitmap)==null||Nr.close()}Ms(this,wr,Object.create(null))}}wr=new WeakMap,Ar=new WeakSet,zi=function(Nr){var _r;return(_r=Or(this,wr))[Nr]||(_r[Nr]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(Nr){_s(this,Cr,null);Ms(this,Cr,Nr),this.onContinue=null}get promise(){return Or(this,Cr).capability.promise}cancel(Nr=0){Or(this,Cr).cancel(null,Nr)}get separateAnnots(){const{separateAnnots:Nr}=Or(this,Cr).operatorList;if(!Nr)return!1;const{annotationCanvasMap:_r}=Or(this,Cr);return Nr.form||Nr.canvas&&(_r==null?void 0:_r.size)>0}}Cr=new WeakMap,exports.RenderTask=RenderTask;const Mr=class Mr{constructor({callback:Nr,params:_r,objs:Dr,commonObjs:Pr,annotationCanvasMap:Ir,operatorList:$r,pageIndex:Zr,canvasFactory:rs,filterFactory:qr,useRequestAnimationFrame:zr=!1,pdfBug:Jr=!1,pageColors:Hr=null}){this.callback=Nr,this.params=_r,this.objs=Dr,this.commonObjs=Pr,this.annotationCanvasMap=Ir,this.operatorListIdx=null,this.operatorList=$r,this._pageIndex=Zr,this.canvasFactory=rs,this.filterFactory=qr,this._pdfBug=Jr,this.pageColors=Hr,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=zr===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=_r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Nr=!1,optionalContentConfig:_r}){var Zr,rs;if(this.cancelled)return;if(this._canvas){if(Or(Mr,kr).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Or(Mr,kr).add(this._canvas)}this._pdfBug&&((Zr=globalThis.StepperManager)!=null&&Zr.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Dr,viewport:Pr,transform:Ir,background:$r}=this.params;this.gfx=new _canvas.CanvasGraphics(Dr,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:_r},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:Ir,viewport:Pr,transparency:Nr,background:$r}),this.operatorListIdx=0,this.graphicsReady=!0,(rs=this.graphicsReadyCallback)==null||rs.call(this)}cancel(Nr=null,_r=0){var Dr;this.running=!1,this.cancelled=!0,(Dr=this.gfx)==null||Dr.endDrawing(),Or(Mr,kr).delete(this._canvas),this.callback(Nr||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,_r))}operatorListChanged(){var Nr;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(Nr=this.stepper)==null||Nr.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Or(Mr,kr).delete(this._canvas),this.callback())))}};kr=new WeakMap,_s(Mr,kr,new WeakSet);let InternalRenderTask=Mr;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(ar,or,lr)=>{var mr,gr,yr,_o,br;Object.defineProperty(or,"__esModule",{value:!0}),or.SerializableEmpty=or.PrintAnnotationStorage=or.AnnotationStorage=void 0;var cr=lr(1),ur=lr(4),dr=lr(8);const hr=Object.freeze({map:null,hash:"",transfers:void 0});or.SerializableEmpty=hr;class fr{constructor(){_s(this,yr);_s(this,mr,!1);_s(this,gr,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(xr,Er){const wr=Or(this,gr).get(xr);return wr===void 0?Er:Object.assign(Er,wr)}getRawValue(xr){return Or(this,gr).get(xr)}remove(xr){if(Or(this,gr).delete(xr),Or(this,gr).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Er of Or(this,gr).values())if(Er instanceof ur.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(xr,Er){const wr=Or(this,gr).get(xr);let Ar=!1;if(wr!==void 0)for(const[Tr,Cr]of Object.entries(Er))wr[Tr]!==Cr&&(Ar=!0,wr[Tr]=Cr);else Ar=!0,Or(this,gr).set(xr,Er);Ar&&Es(this,yr,_o).call(this),Er instanceof ur.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Er.constructor._type)}has(xr){return Or(this,gr).has(xr)}getAll(){return Or(this,gr).size>0?(0,cr.objectFromMap)(Or(this,gr)):null}setAll(xr){for(const[Er,wr]of Object.entries(xr))this.setValue(Er,wr)}get size(){return Or(this,gr).size}resetModified(){Or(this,mr)&&(Ms(this,mr,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new pr(this)}get serializable(){if(Or(this,gr).size===0)return hr;const xr=new Map,Er=new dr.MurmurHash3_64,wr=[],Ar=Object.create(null);let Tr=!1;for(const[Cr,kr]of Or(this,gr)){const Mr=kr instanceof ur.AnnotationEditor?kr.serialize(!1,Ar):kr;Mr&&(xr.set(Cr,Mr),Er.update(`${Cr}:${JSON.stringify(Mr)}`),Tr||(Tr=!!Mr.bitmap))}if(Tr)for(const Cr of xr.values())Cr.bitmap&&wr.push(Cr.bitmap);return xr.size>0?{map:xr,hash:Er.hexdigest(),transfers:wr}:hr}}mr=new WeakMap,gr=new WeakMap,yr=new WeakSet,_o=function(){Or(this,mr)||(Ms(this,mr,!0),typeof this.onSetModified=="function"&&this.onSetModified())},or.AnnotationStorage=fr;class pr extends fr{constructor(Er){super();_s(this,br);const{map:wr,hash:Ar,transfers:Tr}=Er.serializable,Cr=structuredClone(wr,Tr?{transfer:Tr}:null);Ms(this,br,{map:Cr,hash:Ar,transfers:Tr})}get print(){(0,cr.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return Or(this,br)}}br=new WeakMap,or.PrintAnnotationStorage=pr},(ar,or,lr)=>{var pr,mr,gr,yr,vr,br,Sr,xr,Er,wr,Ar,Tr,Cr,kr,Mr,Wi,Ki,_r,Gi,Yi,Mo,Ro,No,Xi,Po;Object.defineProperty(or,"__esModule",{value:!0}),or.AnnotationEditor=void 0;var cr=lr(5),ur=lr(1),dr=lr(6);const zr=class zr{constructor(Hr){_s(this,Mr);_s(this,pr,"");_s(this,mr,!1);_s(this,gr,null);_s(this,yr,null);_s(this,vr,null);_s(this,br,!1);_s(this,Sr,null);_s(this,xr,this.focusin.bind(this));_s(this,Er,this.focusout.bind(this));_s(this,wr,!1);_s(this,Ar,!1);_s(this,Tr,!1);ii(this,"_initialOptions",Object.create(null));ii(this,"_uiManager",null);ii(this,"_focusEventsAllowed",!0);ii(this,"_l10nPromise",null);_s(this,Cr,!1);_s(this,kr,zr._zIndex++);this.constructor===zr&&(0,ur.unreachable)("Cannot initialize AnnotationEditor."),this.parent=Hr.parent,this.id=Hr.id,this.width=this.height=null,this.pageIndex=Hr.parent.pageIndex,this.name=Hr.name,this.div=null,this._uiManager=Hr.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=Hr.isCentered,this._structTreeParentId=null;const{rotation:Kr,rawDims:{pageWidth:ys,pageHeight:Yr,pageX:Fr,pageY:Br}}=this.parent.viewport;this.rotation=Kr,this.pageRotation=(360+Kr-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[ys,Yr],this.pageTranslation=[Fr,Br];const[Ur,Qr]=this.parentDimensions;this.x=Hr.x/Ur,this.y=Hr.y/Qr,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,ur.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(Hr){const Kr=new fr({id:Hr.parent.getNextId(),parent:Hr.parent,uiManager:Hr._uiManager});Kr.annotationElementId=Hr.annotationElementId,Kr.deleted=!0,Kr._uiManager.addToAnnotationStorage(Kr)}static initialize(Hr,Kr=null){if(zr._l10nPromise||(zr._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(Yr=>[Yr,Hr.get(Yr)]))),Kr!=null&&Kr.strings)for(const Yr of Kr.strings)zr._l10nPromise.set(Yr,Hr.get(Yr));if(zr._borderLineWidth!==-1)return;const ys=getComputedStyle(document.documentElement);zr._borderLineWidth=parseFloat(ys.getPropertyValue("--outline-width"))||0}static updateDefaultParams(Hr,Kr){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(Hr){return!1}static paste(Hr,Kr){(0,ur.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Or(this,Cr)}set _isDraggable(Hr){var Kr;Ms(this,Cr,Hr),(Kr=this.div)==null||Kr.classList.toggle("draggable",Hr)}center(){const[Hr,Kr]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Kr/(Hr*2),this.y+=this.width*Hr/(Kr*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Kr/(Hr*2),this.y-=this.width*Hr/(Kr*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(Hr){this._uiManager.addCommands(Hr)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Or(this,kr)}setParent(Hr){Hr!==null&&(this.pageIndex=Hr.pageIndex,this.pageDimensions=Hr.pageDimensions),this.parent=Hr}focusin(Hr){this._focusEventsAllowed&&(Or(this,wr)?Ms(this,wr,!1):this.parent.setSelected(this))}focusout(Hr){var ys;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Kr=Hr.relatedTarget;Kr!=null&&Kr.closest(`#${this.id}`)||(Hr.preventDefault(),(ys=this.parent)!=null&&ys.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(Hr,Kr,ys,Yr){const[Fr,Br]=this.parentDimensions;[ys,Yr]=this.screenToPageTranslation(ys,Yr),this.x=(Hr+ys)/Fr,this.y=(Kr+Yr)/Br,this.fixAndSetPosition()}translate(Hr,Kr){Es(this,Mr,Wi).call(this,this.parentDimensions,Hr,Kr)}translateInPage(Hr,Kr){Es(this,Mr,Wi).call(this,this.pageDimensions,Hr,Kr),this.div.scrollIntoView({block:"nearest"})}drag(Hr,Kr){const[ys,Yr]=this.parentDimensions;if(this.x+=Hr/ys,this.y+=Kr/Yr,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:Vr,y:Gr}=this.div.getBoundingClientRect();this.parent.findNewParent(this,Vr,Gr)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Fr,y:Br}=this;const[Ur,Qr]=Es(this,Mr,Ki).call(this);Fr+=Ur,Br+=Qr,this.div.style.left=`${(100*Fr).toFixed(2)}%`,this.div.style.top=`${(100*Br).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[Hr,Kr]=this.pageDimensions;let{x:ys,y:Yr,width:Fr,height:Br}=this;switch(Fr*=Hr,Br*=Kr,ys*=Hr,Yr*=Kr,this.rotation){case 0:ys=Math.max(0,Math.min(Hr-Fr,ys)),Yr=Math.max(0,Math.min(Kr-Br,Yr));break;case 90:ys=Math.max(0,Math.min(Hr-Br,ys)),Yr=Math.min(Kr,Math.max(Fr,Yr));break;case 180:ys=Math.min(Hr,Math.max(Fr,ys)),Yr=Math.min(Kr,Math.max(Br,Yr));break;case 270:ys=Math.min(Hr,Math.max(Br,ys)),Yr=Math.max(0,Math.min(Kr-Fr,Yr));break}this.x=ys/=Hr,this.y=Yr/=Kr;const[Ur,Qr]=Es(this,Mr,Ki).call(this);ys+=Ur,Yr+=Qr;const{style:Vr}=this.div;Vr.left=`${(100*ys).toFixed(2)}%`,Vr.top=`${(100*Yr).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(Hr,Kr){var ys;return Es(ys=zr,_r,Gi).call(ys,Hr,Kr,this.parentRotation)}pageTranslationToScreen(Hr,Kr){var ys;return Es(ys=zr,_r,Gi).call(ys,Hr,Kr,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:Hr,pageDimensions:[Kr,ys]}=this,Yr=Kr*Hr,Fr=ys*Hr;return ur.FeatureTest.isCSSRoundSupported?[Math.round(Yr),Math.round(Fr)]:[Yr,Fr]}setDims(Hr,Kr){var Fr;const[ys,Yr]=this.parentDimensions;this.div.style.width=`${(100*Hr/ys).toFixed(2)}%`,Or(this,br)||(this.div.style.height=`${(100*Kr/Yr).toFixed(2)}%`),(Fr=Or(this,gr))==null||Fr.classList.toggle("small",Hr<zr.SMALL_EDITOR_SIZE||Kr<zr.SMALL_EDITOR_SIZE)}fixDims(){const{style:Hr}=this.div,{height:Kr,width:ys}=Hr,Yr=ys.endsWith("%"),Fr=!Or(this,br)&&Kr.endsWith("%");if(Yr&&Fr)return;const[Br,Ur]=this.parentDimensions;Yr||(Hr.width=`${(100*parseFloat(ys)/Br).toFixed(2)}%`),!Or(this,br)&&!Fr&&(Hr.height=`${(100*parseFloat(Kr)/Ur).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(Or(this,gr))return;const Hr=Ms(this,gr,document.createElement("button"));Hr.className="altText";const Kr=await zr._l10nPromise.get("editor_alt_text_button_label");Hr.textContent=Kr,Hr.setAttribute("aria-label",Kr),Hr.tabIndex="0",Hr.addEventListener("contextmenu",dr.noContextMenu),Hr.addEventListener("pointerdown",ys=>ys.stopPropagation()),Hr.addEventListener("click",ys=>{ys.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),Hr.addEventListener("keydown",ys=>{ys.target===Hr&&ys.key==="Enter"&&(ys.preventDefault(),this._uiManager.editAltText(this))}),Es(this,Mr,Xi).call(this),this.div.append(Hr),zr.SMALL_EDITOR_SIZE||(zr.SMALL_EDITOR_SIZE=Math.min(128,Math.round(Hr.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:Or(this,pr),decorative:Or(this,mr)}}set altTextData({altText:Hr,decorative:Kr}){Or(this,pr)===Hr&&Or(this,mr)===Kr||(Ms(this,pr,Hr),Ms(this,mr,Kr),Es(this,Mr,Xi).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",Or(this,xr)),this.div.addEventListener("focusout",Or(this,Er));const[Hr,Kr]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Kr/Hr).toFixed(2)}%`,this.div.style.maxHeight=`${(100*Hr/Kr).toFixed(2)}%`);const[ys,Yr]=this.getInitialTranslation();return this.translate(ys,Yr),(0,cr.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(Hr){const{isMac:Kr}=ur.FeatureTest.platform;if(Hr.button!==0||Hr.ctrlKey&&Kr){Hr.preventDefault();return}Ms(this,wr,!0),Es(this,Mr,Po).call(this,Hr)}moveInDOM(){var Hr;(Hr=this.parent)==null||Hr.moveEditorInDOM(this)}_setParentAndPosition(Hr,Kr,ys){Hr.changeParent(this),this.x=Kr,this.y=ys,this.fixAndSetPosition()}getRect(Hr,Kr){const ys=this.parentScale,[Yr,Fr]=this.pageDimensions,[Br,Ur]=this.pageTranslation,Qr=Hr/ys,Vr=Kr/ys,Gr=this.x*Yr,is=this.y*Fr,ps=this.width*Yr,As=this.height*Fr;switch(this.rotation){case 0:return[Gr+Qr+Br,Fr-is-Vr-As+Ur,Gr+Qr+ps+Br,Fr-is-Vr+Ur];case 90:return[Gr+Vr+Br,Fr-is+Qr+Ur,Gr+Vr+As+Br,Fr-is+Qr+ps+Ur];case 180:return[Gr-Qr-ps+Br,Fr-is+Vr+Ur,Gr-Qr+Br,Fr-is+Vr+As+Ur];case 270:return[Gr-Vr-As+Br,Fr-is-Qr-ps+Ur,Gr-Vr+Br,Fr-is-Qr+Ur];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(Hr,Kr){const[ys,Yr,Fr,Br]=Hr,Ur=Fr-ys,Qr=Br-Yr;switch(this.rotation){case 0:return[ys,Kr-Br,Ur,Qr];case 90:return[ys,Kr-Yr,Qr,Ur];case 180:return[Fr,Kr-Yr,Ur,Qr];case 270:return[Fr,Kr-Br,Qr,Ur];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){Ms(this,Tr,!0)}disableEditMode(){Ms(this,Tr,!1)}isInEditMode(){return Or(this,Tr)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var Hr,Kr;(Hr=this.div)==null||Hr.addEventListener("focusin",Or(this,xr)),(Kr=this.div)==null||Kr.addEventListener("focusout",Or(this,Er))}serialize(Hr=!1,Kr=null){(0,ur.unreachable)("An editor must be serializable")}static deserialize(Hr,Kr,ys){const Yr=new this.prototype.constructor({parent:Kr,id:Kr.getNextId(),uiManager:ys});Yr.rotation=Hr.rotation;const[Fr,Br]=Yr.pageDimensions,[Ur,Qr,Vr,Gr]=Yr.getRectInCurrentCoords(Hr.rect,Br);return Yr.x=Ur/Fr,Yr.y=Qr/Br,Yr.width=Vr/Fr,Yr.height=Gr/Br,Yr}remove(){var Hr;this.div.removeEventListener("focusin",Or(this,xr)),this.div.removeEventListener("focusout",Or(this,Er)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),(Hr=Or(this,gr))==null||Hr.remove(),Ms(this,gr,null),Ms(this,yr,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(Es(this,Mr,Mo).call(this),Or(this,Sr).classList.remove("hidden"))}select(){var Hr;this.makeResizable(),(Hr=this.div)==null||Hr.classList.add("selectedEditor")}unselect(){var Hr,Kr,ys;(Hr=Or(this,Sr))==null||Hr.classList.add("hidden"),(Kr=this.div)==null||Kr.classList.remove("selectedEditor"),(ys=this.div)!=null&&ys.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(Hr,Kr){}disableEditing(){Or(this,gr)&&(Or(this,gr).hidden=!0)}enableEditing(){Or(this,gr)&&(Or(this,gr).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return Or(this,Ar)}set isEditing(Hr){Ms(this,Ar,Hr),this.parent&&(Hr?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(Hr,Kr){Ms(this,br,!0);const ys=Hr/Kr,{style:Yr}=this.div;Yr.aspectRatio=ys,Yr.height="auto"}static get MIN_SIZE(){return 16}};pr=new WeakMap,mr=new WeakMap,gr=new WeakMap,yr=new WeakMap,vr=new WeakMap,br=new WeakMap,Sr=new WeakMap,xr=new WeakMap,Er=new WeakMap,wr=new WeakMap,Ar=new WeakMap,Tr=new WeakMap,Cr=new WeakMap,kr=new WeakMap,Mr=new WeakSet,Wi=function([Hr,Kr],ys,Yr){[ys,Yr]=this.screenToPageTranslation(ys,Yr),this.x+=ys/Hr,this.y+=Yr/Kr,this.fixAndSetPosition()},Ki=function(){const[Hr,Kr]=this.parentDimensions,{_borderLineWidth:ys}=zr,Yr=ys/Hr,Fr=ys/Kr;switch(this.rotation){case 90:return[-Yr,Fr];case 180:return[Yr,Fr];case 270:return[Yr,-Fr];default:return[-Yr,-Fr]}},_r=new WeakSet,Gi=function(Hr,Kr,ys){switch(ys){case 90:return[Kr,-Hr];case 180:return[-Hr,-Kr];case 270:return[-Kr,Hr];default:return[Hr,Kr]}},Yi=function(Hr){switch(Hr){case 90:{const[Kr,ys]=this.pageDimensions;return[0,-Kr/ys,ys/Kr,0]}case 180:return[-1,0,0,-1];case 270:{const[Kr,ys]=this.pageDimensions;return[0,Kr/ys,-ys/Kr,0]}default:return[1,0,0,1]}},Mo=function(){if(Or(this,Sr))return;Ms(this,Sr,document.createElement("div")),Or(this,Sr).classList.add("resizers");const Hr=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||Hr.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Kr of Hr){const ys=document.createElement("div");Or(this,Sr).append(ys),ys.classList.add("resizer",Kr),ys.addEventListener("pointerdown",Es(this,Mr,Ro).bind(this,Kr)),ys.addEventListener("contextmenu",dr.noContextMenu)}this.div.prepend(Or(this,Sr))},Ro=function(Hr,Kr){Kr.preventDefault();const{isMac:ys}=ur.FeatureTest.platform;if(Kr.button!==0||Kr.ctrlKey&&ys)return;const Yr=Es(this,Mr,No).bind(this,Hr),Fr=this._isDraggable;this._isDraggable=!1;const Br={passive:!0,capture:!0};window.addEventListener("pointermove",Yr,Br);const Ur=this.x,Qr=this.y,Vr=this.width,Gr=this.height,is=this.parent.div.style.cursor,ps=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Kr.target).cursor;const As=()=>{this._isDraggable=Fr,window.removeEventListener("pointerup",As),window.removeEventListener("blur",As),window.removeEventListener("pointermove",Yr,Br),this.parent.div.style.cursor=is,this.div.style.cursor=ps;const Cs=this.x,jr=this.y,Wr=this.width,ds=this.height;Cs===Ur&&jr===Qr&&Wr===Vr&&ds===Gr||this.addCommands({cmd:()=>{this.width=Wr,this.height=ds,this.x=Cs,this.y=jr;const[ls,ss]=this.parentDimensions;this.setDims(ls*Wr,ss*ds),this.fixAndSetPosition()},undo:()=>{this.width=Vr,this.height=Gr,this.x=Ur,this.y=Qr;const[ls,ss]=this.parentDimensions;this.setDims(ls*Vr,ss*Gr),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",As),window.addEventListener("blur",As)},No=function(Hr,Kr){const[ys,Yr]=this.parentDimensions,Fr=this.x,Br=this.y,Ur=this.width,Qr=this.height,Vr=zr.MIN_SIZE/ys,Gr=zr.MIN_SIZE/Yr,is=Ss=>Math.round(Ss*1e4)/1e4,ps=Es(this,Mr,Yi).call(this,this.rotation),As=(Ss,Ps)=>[ps[0]*Ss+ps[2]*Ps,ps[1]*Ss+ps[3]*Ps],Cs=Es(this,Mr,Yi).call(this,360-this.rotation),jr=(Ss,Ps)=>[Cs[0]*Ss+Cs[2]*Ps,Cs[1]*Ss+Cs[3]*Ps];let Wr,ds,ls=!1,ss=!1;switch(Hr){case"topLeft":ls=!0,Wr=(Ss,Ps)=>[0,0],ds=(Ss,Ps)=>[Ss,Ps];break;case"topMiddle":Wr=(Ss,Ps)=>[Ss/2,0],ds=(Ss,Ps)=>[Ss/2,Ps];break;case"topRight":ls=!0,Wr=(Ss,Ps)=>[Ss,0],ds=(Ss,Ps)=>[0,Ps];break;case"middleRight":ss=!0,Wr=(Ss,Ps)=>[Ss,Ps/2],ds=(Ss,Ps)=>[0,Ps/2];break;case"bottomRight":ls=!0,Wr=(Ss,Ps)=>[Ss,Ps],ds=(Ss,Ps)=>[0,0];break;case"bottomMiddle":Wr=(Ss,Ps)=>[Ss/2,Ps],ds=(Ss,Ps)=>[Ss/2,0];break;case"bottomLeft":ls=!0,Wr=(Ss,Ps)=>[0,Ps],ds=(Ss,Ps)=>[Ss,0];break;case"middleLeft":ss=!0,Wr=(Ss,Ps)=>[0,Ps/2],ds=(Ss,Ps)=>[Ss,Ps/2];break}const Lr=Wr(Ur,Qr),Xr=ds(Ur,Qr);let cs=As(...Xr);const hs=is(Fr+cs[0]),ms=is(Br+cs[1]);let Ts=1,ks=1,[fs,Is]=this.screenToPageTranslation(Kr.movementX,Kr.movementY);if([fs,Is]=jr(fs/ys,Is/Yr),ls){const Ss=Math.hypot(Ur,Qr);Ts=ks=Math.max(Math.min(Math.hypot(Xr[0]-Lr[0]-fs,Xr[1]-Lr[1]-Is)/Ss,1/Ur,1/Qr),Vr/Ur,Gr/Qr)}else ss?Ts=Math.max(Vr,Math.min(1,Math.abs(Xr[0]-Lr[0]-fs)))/Ur:ks=Math.max(Gr,Math.min(1,Math.abs(Xr[1]-Lr[1]-Is)))/Qr;const Fs=is(Ur*Ts),Gs=is(Qr*ks);cs=As(...ds(Fs,Gs));const gs=hs-cs[0],xs=ms-cs[1];this.width=Fs,this.height=Gs,this.x=gs,this.y=xs,this.setDims(ys*Fs,Yr*Gs),this.fixAndSetPosition()},Xi=async function(){var ys;const Hr=Or(this,gr);if(!Hr)return;if(!Or(this,pr)&&!Or(this,mr)){Hr.classList.remove("done"),(ys=Or(this,yr))==null||ys.remove();return}zr._l10nPromise.get("editor_alt_text_edit_button_label").then(Yr=>{Hr.setAttribute("aria-label",Yr)});let Kr=Or(this,yr);if(!Kr){Ms(this,yr,Kr=document.createElement("span")),Kr.className="tooltip",Kr.setAttribute("role","tooltip");const Yr=Kr.id=`alt-text-tooltip-${this.id}`;Hr.setAttribute("aria-describedby",Yr);const Fr=100;Hr.addEventListener("mouseenter",()=>{Ms(this,vr,setTimeout(()=>{Ms(this,vr,null),Or(this,yr).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Fr))}),Hr.addEventListener("mouseleave",()=>{var Br;clearTimeout(Or(this,vr)),Ms(this,vr,null),(Br=Or(this,yr))==null||Br.classList.remove("show")})}Hr.classList.add("done"),Kr.innerText=Or(this,mr)?await zr._l10nPromise.get("editor_alt_text_decorative_tooltip"):Or(this,pr),Kr.parentNode||Hr.append(Kr)},Po=function(Hr){if(!this._isDraggable)return;const Kr=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let ys,Yr;Kr&&(ys={passive:!0,capture:!0},Yr=Br=>{const[Ur,Qr]=this.screenToPageTranslation(Br.movementX,Br.movementY);this._uiManager.dragSelectedEditors(Ur,Qr)},window.addEventListener("pointermove",Yr,ys));const Fr=()=>{if(window.removeEventListener("pointerup",Fr),window.removeEventListener("blur",Fr),Kr&&window.removeEventListener("pointermove",Yr,ys),Ms(this,wr,!1),!this._uiManager.endDragSession()){const{isMac:Br}=ur.FeatureTest.platform;Hr.ctrlKey&&!Br||Hr.shiftKey||Hr.metaKey&&Br?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Fr),window.addEventListener("blur",Fr)},_s(zr,_r),ii(zr,"_borderLineWidth",-1),ii(zr,"_colorManager",new cr.ColorManager),ii(zr,"_zIndex",1),ii(zr,"SMALL_EDITOR_SIZE",0);let hr=zr;or.AnnotationEditor=hr;class fr extends hr{constructor(Hr){super(Hr),this.annotationElementId=Hr.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(ar,or,lr)=>{var br,Sr,xr,Er,wr,qi,Cr,kr,Mr,Rr,Nr,Oo,Pr,Ir,$r,Zr,rs,qr,zr,Jr,Hr,Kr,ys,Yr,Fr,Br,Ur,Qr,Vr,Gr,is,ps,As,Cs,jr,Wr,ds,ls,ss,Lr,Xr,cs,hs,ms,Ts,ks,fs,Do,Ji,Qi,Mi,Zi,eo,li,Si,Io,Fo,to,xi,no;Object.defineProperty(or,"__esModule",{value:!0}),or.KeyboardManager=or.CommandManager=or.ColorManager=or.AnnotationEditorUIManager=void 0,or.bindEvents=dr,or.opacityToHex=hr;var cr=lr(1),ur=lr(6);function dr(Us,as,Rs){for(const js of Rs)as.addEventListener(js,Us[js].bind(Us))}function hr(Us){return Math.round(Math.min(255,Math.max(1,255*Us))).toString(16).padStart(2,"0")}class fr{constructor(){_s(this,br,0)}getId(){return`${cr.AnnotationEditorPrefix}${bi(this,br)._++}`}}br=new WeakMap;const Tr=class Tr{constructor(){_s(this,wr);_s(this,Sr,(0,cr.getUuid)());_s(this,xr,0);_s(this,Er,null)}static get _isSVGFittingCanvas(){const as='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',js=new OffscreenCanvas(1,3).getContext("2d"),Ys=new Image;Ys.src=as;const Qs=Ys.decode().then(()=>(js.drawImage(Ys,0,0,1,1,0,0,1,3),new Uint32Array(js.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,cr.shadow)(this,"_isSVGFittingCanvas",Qs)}async getFromFile(as){const{lastModified:Rs,name:js,size:Ys,type:Qs}=as;return Es(this,wr,qi).call(this,`${Rs}_${js}_${Ys}_${Qs}`,as)}async getFromUrl(as){return Es(this,wr,qi).call(this,as,as)}async getFromId(as){Or(this,Er)||Ms(this,Er,new Map);const Rs=Or(this,Er).get(as);return Rs?Rs.bitmap?(Rs.refCounter+=1,Rs):Rs.file?this.getFromFile(Rs.file):this.getFromUrl(Rs.url):null}getSvgUrl(as){const Rs=Or(this,Er).get(as);return Rs!=null&&Rs.isSvg?Rs.svgUrl:null}deleteId(as){Or(this,Er)||Ms(this,Er,new Map);const Rs=Or(this,Er).get(as);Rs&&(Rs.refCounter-=1,Rs.refCounter===0&&(Rs.bitmap=null))}isValidId(as){return as.startsWith(`image_${Or(this,Sr)}_`)}};Sr=new WeakMap,xr=new WeakMap,Er=new WeakMap,wr=new WeakSet,qi=async function(as,Rs){Or(this,Er)||Ms(this,Er,new Map);let js=Or(this,Er).get(as);if(js===null)return null;if(js!=null&&js.bitmap)return js.refCounter+=1,js;try{js||(js={bitmap:null,id:`image_${Or(this,Sr)}_${bi(this,xr)._++}`,refCounter:0,isSvg:!1});let Ys;if(typeof Rs=="string"){js.url=Rs;const Qs=await fetch(Rs);if(!Qs.ok)throw new Error(Qs.statusText);Ys=await Qs.blob()}else Ys=js.file=Rs;if(Ys.type==="image/svg+xml"){const Qs=Tr._isSVGFittingCanvas,Ks=new FileReader,us=new Image,ns=new Promise((bs,Os)=>{us.onload=()=>{js.bitmap=us,js.isSvg=!0,bs()},Ks.onload=async()=>{const Ds=js.svgUrl=Ks.result;us.src=await Qs?`${Ds}#svgView(preserveAspectRatio(none))`:Ds},us.onerror=Ks.onerror=Os});Ks.readAsDataURL(Ys),await ns}else js.bitmap=await createImageBitmap(Ys);js.refCounter=1}catch(Ys){console.error(Ys),js=null}return Or(this,Er).set(as,js),js&&Or(this,Er).set(js.id,js),js};let pr=Tr;class mr{constructor(as=128){_s(this,Cr,[]);_s(this,kr,!1);_s(this,Mr);_s(this,Rr,-1);Ms(this,Mr,as)}add({cmd:as,undo:Rs,mustExec:js,type:Ys=NaN,overwriteIfSameType:Qs=!1,keepUndo:Ks=!1}){if(js&&as(),Or(this,kr))return;const us={cmd:as,undo:Rs,type:Ys};if(Or(this,Rr)===-1){Or(this,Cr).length>0&&(Or(this,Cr).length=0),Ms(this,Rr,0),Or(this,Cr).push(us);return}if(Qs&&Or(this,Cr)[Or(this,Rr)].type===Ys){Ks&&(us.undo=Or(this,Cr)[Or(this,Rr)].undo),Or(this,Cr)[Or(this,Rr)]=us;return}const ns=Or(this,Rr)+1;ns===Or(this,Mr)?Or(this,Cr).splice(0,1):(Ms(this,Rr,ns),ns<Or(this,Cr).length&&Or(this,Cr).splice(ns)),Or(this,Cr).push(us)}undo(){Or(this,Rr)!==-1&&(Ms(this,kr,!0),Or(this,Cr)[Or(this,Rr)].undo(),Ms(this,kr,!1),Ms(this,Rr,Or(this,Rr)-1))}redo(){Or(this,Rr)<Or(this,Cr).length-1&&(Ms(this,Rr,Or(this,Rr)+1),Ms(this,kr,!0),Or(this,Cr)[Or(this,Rr)].cmd(),Ms(this,kr,!1))}hasSomethingToUndo(){return Or(this,Rr)!==-1}hasSomethingToRedo(){return Or(this,Rr)<Or(this,Cr).length-1}destroy(){Ms(this,Cr,null)}}Cr=new WeakMap,kr=new WeakMap,Mr=new WeakMap,Rr=new WeakMap,or.CommandManager=mr;class gr{constructor(as){_s(this,Nr);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Rs}=cr.FeatureTest.platform;for(const[js,Ys,Qs={}]of as)for(const Ks of js){const us=Ks.startsWith("mac+");Rs&&us?(this.callbacks.set(Ks.slice(4),{callback:Ys,options:Qs}),this.allKeys.add(Ks.split("+").at(-1))):!Rs&&!us&&(this.callbacks.set(Ks,{callback:Ys,options:Qs}),this.allKeys.add(Ks.split("+").at(-1)))}}exec(as,Rs){if(!this.allKeys.has(Rs.key))return;const js=this.callbacks.get(Es(this,Nr,Oo).call(this,Rs));if(!js)return;const{callback:Ys,options:{bubbles:Qs=!1,args:Ks=[],checker:us=null}}=js;us&&!us(as,Rs)||(Ys.bind(as,...Ks)(),Qs||(Rs.stopPropagation(),Rs.preventDefault()))}}Nr=new WeakSet,Oo=function(as){as.altKey&&this.buffer.push("alt"),as.ctrlKey&&this.buffer.push("ctrl"),as.metaKey&&this.buffer.push("meta"),as.shiftKey&&this.buffer.push("shift"),this.buffer.push(as.key);const Rs=this.buffer.join("+");return this.buffer.length=0,Rs},or.KeyboardManager=gr;const Dr=class Dr{get _colors(){const as=new Map([["CanvasText",null],["Canvas",null]]);return(0,ur.getColorValues)(as),(0,cr.shadow)(this,"_colors",as)}convert(as){const Rs=(0,ur.getRGB)(as);if(!window.matchMedia("(forced-colors: active)").matches)return Rs;for(const[js,Ys]of this._colors)if(Ys.every((Qs,Ks)=>Qs===Rs[Ks]))return Dr._colorsMapping.get(js);return Rs}getHexCode(as){const Rs=this._colors.get(as);return Rs?cr.Util.makeHexColor(...Rs):as}};ii(Dr,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let yr=Dr;or.ColorManager=yr;const Hs=class Hs{constructor(as,Rs,js,Ys,Qs,Ks){_s(this,fs);_s(this,Pr,null);_s(this,Ir,new Map);_s(this,$r,new Map);_s(this,Zr,null);_s(this,rs,null);_s(this,qr,new mr);_s(this,zr,0);_s(this,Jr,new Set);_s(this,Hr,null);_s(this,Kr,null);_s(this,ys,new Set);_s(this,Yr,null);_s(this,Fr,new fr);_s(this,Br,!1);_s(this,Ur,!1);_s(this,Qr,null);_s(this,Vr,cr.AnnotationEditorType.NONE);_s(this,Gr,new Set);_s(this,is,null);_s(this,ps,this.blur.bind(this));_s(this,As,this.focus.bind(this));_s(this,Cs,this.copy.bind(this));_s(this,jr,this.cut.bind(this));_s(this,Wr,this.paste.bind(this));_s(this,ds,this.keydown.bind(this));_s(this,ls,this.onEditingAction.bind(this));_s(this,ss,this.onPageChanging.bind(this));_s(this,Lr,this.onScaleChanging.bind(this));_s(this,Xr,this.onRotationChanging.bind(this));_s(this,cs,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});_s(this,hs,[0,0]);_s(this,ms,null);_s(this,Ts,null);_s(this,ks,null);Ms(this,Ts,as),Ms(this,ks,Rs),Ms(this,Zr,js),this._eventBus=Ys,this._eventBus._on("editingaction",Or(this,ls)),this._eventBus._on("pagechanging",Or(this,ss)),this._eventBus._on("scalechanging",Or(this,Lr)),this._eventBus._on("rotationchanging",Or(this,Xr)),Ms(this,rs,Qs.annotationStorage),Ms(this,Yr,Qs.filterFactory),Ms(this,is,Ks),this.viewParameters={realScale:ur.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const as=Hs.prototype,Rs=Qs=>{const{activeElement:Ks}=document;return Ks&&Or(Qs,Ts).contains(Ks)&&Qs.hasSomethingToControl()},js=this.TRANSLATE_SMALL,Ys=this.TRANSLATE_BIG;return(0,cr.shadow)(this,"_keyboardManager",new gr([[["ctrl+a","mac+meta+a"],as.selectAll],[["ctrl+z","mac+meta+z"],as.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],as.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],as.delete],[["Escape","mac+Escape"],as.unselectAll],[["ArrowLeft","mac+ArrowLeft"],as.translateSelectedEditors,{args:[-js,0],checker:Rs}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],as.translateSelectedEditors,{args:[-Ys,0],checker:Rs}],[["ArrowRight","mac+ArrowRight"],as.translateSelectedEditors,{args:[js,0],checker:Rs}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],as.translateSelectedEditors,{args:[Ys,0],checker:Rs}],[["ArrowUp","mac+ArrowUp"],as.translateSelectedEditors,{args:[0,-js],checker:Rs}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],as.translateSelectedEditors,{args:[0,-Ys],checker:Rs}],[["ArrowDown","mac+ArrowDown"],as.translateSelectedEditors,{args:[0,js],checker:Rs}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],as.translateSelectedEditors,{args:[0,Ys],checker:Rs}]]))}destroy(){Es(this,fs,Mi).call(this),Es(this,fs,Ji).call(this),this._eventBus._off("editingaction",Or(this,ls)),this._eventBus._off("pagechanging",Or(this,ss)),this._eventBus._off("scalechanging",Or(this,Lr)),this._eventBus._off("rotationchanging",Or(this,Xr));for(const as of Or(this,$r).values())as.destroy();Or(this,$r).clear(),Or(this,Ir).clear(),Or(this,ys).clear(),Ms(this,Pr,null),Or(this,Gr).clear(),Or(this,qr).destroy(),Or(this,Zr).destroy()}get hcmFilter(){return(0,cr.shadow)(this,"hcmFilter",Or(this,is)?Or(this,Yr).addHCMFilter(Or(this,is).foreground,Or(this,is).background):"none")}get direction(){return(0,cr.shadow)(this,"direction",getComputedStyle(Or(this,Ts)).direction)}editAltText(as){var Rs;(Rs=Or(this,Zr))==null||Rs.editAltText(this,as)}onPageChanging({pageNumber:as}){Ms(this,zr,as-1)}focusMainContainer(){Or(this,Ts).focus()}findParent(as,Rs){for(const js of Or(this,$r).values()){const{x:Ys,y:Qs,width:Ks,height:us}=js.div.getBoundingClientRect();if(as>=Ys&&as<=Ys+Ks&&Rs>=Qs&&Rs<=Qs+us)return js}return null}disableUserSelect(as=!1){Or(this,ks).classList.toggle("noUserSelect",as)}addShouldRescale(as){Or(this,ys).add(as)}removeShouldRescale(as){Or(this,ys).delete(as)}onScaleChanging({scale:as}){this.commitOrRemove(),this.viewParameters.realScale=as*ur.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Rs of Or(this,ys))Rs.onScaleChanging()}onRotationChanging({pagesRotation:as}){this.commitOrRemove(),this.viewParameters.rotation=as}addToAnnotationStorage(as){!as.isEmpty()&&Or(this,rs)&&!Or(this,rs).has(as.id)&&Or(this,rs).setValue(as.id,as)}blur(){if(!this.hasSelection)return;const{activeElement:as}=document;for(const Rs of Or(this,Gr))if(Rs.div.contains(as)){Ms(this,Qr,[Rs,as]),Rs._focusEventsAllowed=!1;break}}focus(){if(!Or(this,Qr))return;const[as,Rs]=Or(this,Qr);Ms(this,Qr,null),Rs.addEventListener("focusin",()=>{as._focusEventsAllowed=!0},{once:!0}),Rs.focus()}addEditListeners(){Es(this,fs,Qi).call(this),Es(this,fs,Zi).call(this)}removeEditListeners(){Es(this,fs,Mi).call(this),Es(this,fs,eo).call(this)}copy(as){var js;if(as.preventDefault(),(js=Or(this,Pr))==null||js.commitOrRemove(),!this.hasSelection)return;const Rs=[];for(const Ys of Or(this,Gr)){const Qs=Ys.serialize(!0);Qs&&Rs.push(Qs)}Rs.length!==0&&as.clipboardData.setData("application/pdfjs",JSON.stringify(Rs))}cut(as){this.copy(as),this.delete()}paste(as){as.preventDefault();const{clipboardData:Rs}=as;for(const Qs of Rs.items)for(const Ks of Or(this,Kr))if(Ks.isHandlingMimeForPasting(Qs.type)){Ks.paste(Qs,this.currentLayer);return}let js=Rs.getData("application/pdfjs");if(!js)return;try{js=JSON.parse(js)}catch(Qs){(0,cr.warn)(`paste: "${Qs.message}".`);return}if(!Array.isArray(js))return;this.unselectAll();const Ys=this.currentLayer;try{const Qs=[];for(const ns of js){const bs=Ys.deserialize(ns);if(!bs)return;Qs.push(bs)}const Ks=()=>{for(const ns of Qs)Es(this,fs,to).call(this,ns);Es(this,fs,no).call(this,Qs)},us=()=>{for(const ns of Qs)ns.remove()};this.addCommands({cmd:Ks,undo:us,mustExec:!0})}catch(Qs){(0,cr.warn)(`paste: "${Qs.message}".`)}}keydown(as){var Rs;(Rs=this.getActive())!=null&&Rs.shouldGetKeyboardEvents()||Hs._keyboardManager.exec(this,as)}onEditingAction(as){["undo","redo","delete","selectAll"].includes(as.name)&&this[as.name]()}setEditingState(as){as?(Es(this,fs,Do).call(this),Es(this,fs,Qi).call(this),Es(this,fs,Zi).call(this),Es(this,fs,li).call(this,{isEditing:Or(this,Vr)!==cr.AnnotationEditorType.NONE,isEmpty:Es(this,fs,xi).call(this),hasSomethingToUndo:Or(this,qr).hasSomethingToUndo(),hasSomethingToRedo:Or(this,qr).hasSomethingToRedo(),hasSelectedEditor:!1})):(Es(this,fs,Ji).call(this),Es(this,fs,Mi).call(this),Es(this,fs,eo).call(this),Es(this,fs,li).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(as){if(!Or(this,Kr)){Ms(this,Kr,as);for(const Rs of Or(this,Kr))Es(this,fs,Si).call(this,Rs.defaultPropertiesToUpdate)}}getId(){return Or(this,Fr).getId()}get currentLayer(){return Or(this,$r).get(Or(this,zr))}getLayer(as){return Or(this,$r).get(as)}get currentPageIndex(){return Or(this,zr)}addLayer(as){Or(this,$r).set(as.pageIndex,as),Or(this,Br)?as.enable():as.disable()}removeLayer(as){Or(this,$r).delete(as.pageIndex)}updateMode(as,Rs=null){if(Or(this,Vr)!==as){if(Ms(this,Vr,as),as===cr.AnnotationEditorType.NONE){this.setEditingState(!1),Es(this,fs,Fo).call(this);return}this.setEditingState(!0),Es(this,fs,Io).call(this),this.unselectAll();for(const js of Or(this,$r).values())js.updateMode(as);if(Rs){for(const js of Or(this,Ir).values())if(js.annotationElementId===Rs){this.setSelected(js),js.enterInEditMode();break}}}}updateToolbar(as){as!==Or(this,Vr)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:as})}updateParams(as,Rs){if(Or(this,Kr)){if(as===cr.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(as);return}for(const js of Or(this,Gr))js.updateParams(as,Rs);for(const js of Or(this,Kr))js.updateDefaultParams(as,Rs)}}enableWaiting(as=!1){if(Or(this,Ur)!==as){Ms(this,Ur,as);for(const Rs of Or(this,$r).values())as?Rs.disableClick():Rs.enableClick(),Rs.div.classList.toggle("waiting",as)}}getEditors(as){const Rs=[];for(const js of Or(this,Ir).values())js.pageIndex===as&&Rs.push(js);return Rs}getEditor(as){return Or(this,Ir).get(as)}addEditor(as){Or(this,Ir).set(as.id,as)}removeEditor(as){var Rs;Or(this,Ir).delete(as.id),this.unselect(as),(!as.annotationElementId||!Or(this,Jr).has(as.annotationElementId))&&((Rs=Or(this,rs))==null||Rs.remove(as.id))}addDeletedAnnotationElement(as){Or(this,Jr).add(as.annotationElementId),as.deleted=!0}isDeletedAnnotationElement(as){return Or(this,Jr).has(as)}removeDeletedAnnotationElement(as){Or(this,Jr).delete(as.annotationElementId),as.deleted=!1}setActiveEditor(as){Or(this,Pr)!==as&&(Ms(this,Pr,as),as&&Es(this,fs,Si).call(this,as.propertiesToUpdate))}toggleSelected(as){if(Or(this,Gr).has(as)){Or(this,Gr).delete(as),as.unselect(),Es(this,fs,li).call(this,{hasSelectedEditor:this.hasSelection});return}Or(this,Gr).add(as),as.select(),Es(this,fs,Si).call(this,as.propertiesToUpdate),Es(this,fs,li).call(this,{hasSelectedEditor:!0})}setSelected(as){for(const Rs of Or(this,Gr))Rs!==as&&Rs.unselect();Or(this,Gr).clear(),Or(this,Gr).add(as),as.select(),Es(this,fs,Si).call(this,as.propertiesToUpdate),Es(this,fs,li).call(this,{hasSelectedEditor:!0})}isSelected(as){return Or(this,Gr).has(as)}unselect(as){as.unselect(),Or(this,Gr).delete(as),Es(this,fs,li).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Or(this,Gr).size!==0}undo(){Or(this,qr).undo(),Es(this,fs,li).call(this,{hasSomethingToUndo:Or(this,qr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:Es(this,fs,xi).call(this)})}redo(){Or(this,qr).redo(),Es(this,fs,li).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Or(this,qr).hasSomethingToRedo(),isEmpty:Es(this,fs,xi).call(this)})}addCommands(as){Or(this,qr).add(as),Es(this,fs,li).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:Es(this,fs,xi).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const as=[...Or(this,Gr)],Rs=()=>{for(const Ys of as)Ys.remove()},js=()=>{for(const Ys of as)Es(this,fs,to).call(this,Ys)};this.addCommands({cmd:Rs,undo:js,mustExec:!0})}commitOrRemove(){var as;(as=Or(this,Pr))==null||as.commitOrRemove()}hasSomethingToControl(){return Or(this,Pr)||this.hasSelection}selectAll(){for(const as of Or(this,Gr))as.commit();Es(this,fs,no).call(this,Or(this,Ir).values())}unselectAll(){if(Or(this,Pr)){Or(this,Pr).commitOrRemove();return}if(this.hasSelection){for(const as of Or(this,Gr))as.unselect();Or(this,Gr).clear(),Es(this,fs,li).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(as,Rs,js=!1){if(js||this.commitOrRemove(),!this.hasSelection)return;Or(this,hs)[0]+=as,Or(this,hs)[1]+=Rs;const[Ys,Qs]=Or(this,hs),Ks=[...Or(this,Gr)],us=1e3;Or(this,ms)&&clearTimeout(Or(this,ms)),Ms(this,ms,setTimeout(()=>{Ms(this,ms,null),Or(this,hs)[0]=Or(this,hs)[1]=0,this.addCommands({cmd:()=>{for(const ns of Ks)Or(this,Ir).has(ns.id)&&ns.translateInPage(Ys,Qs)},undo:()=>{for(const ns of Ks)Or(this,Ir).has(ns.id)&&ns.translateInPage(-Ys,-Qs)},mustExec:!1})},us));for(const ns of Ks)ns.translateInPage(as,Rs)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),Ms(this,Hr,new Map);for(const as of Or(this,Gr))Or(this,Hr).set(as,{savedX:as.x,savedY:as.y,savedPageIndex:as.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Or(this,Hr))return!1;this.disableUserSelect(!1);const as=Or(this,Hr);Ms(this,Hr,null);let Rs=!1;for(const[{x:Ys,y:Qs,pageIndex:Ks},us]of as)us.newX=Ys,us.newY=Qs,us.newPageIndex=Ks,Rs||(Rs=Ys!==us.savedX||Qs!==us.savedY||Ks!==us.savedPageIndex);if(!Rs)return!1;const js=(Ys,Qs,Ks,us)=>{if(Or(this,Ir).has(Ys.id)){const ns=Or(this,$r).get(us);ns?Ys._setParentAndPosition(ns,Qs,Ks):(Ys.pageIndex=us,Ys.x=Qs,Ys.y=Ks)}};return this.addCommands({cmd:()=>{for(const[Ys,{newX:Qs,newY:Ks,newPageIndex:us}]of as)js(Ys,Qs,Ks,us)},undo:()=>{for(const[Ys,{savedX:Qs,savedY:Ks,savedPageIndex:us}]of as)js(Ys,Qs,Ks,us)},mustExec:!0}),!0}dragSelectedEditors(as,Rs){if(Or(this,Hr))for(const js of Or(this,Hr).keys())js.drag(as,Rs)}rebuild(as){if(as.parent===null){const Rs=this.getLayer(as.pageIndex);Rs?(Rs.changeParent(as),Rs.addOrRebuild(as)):(this.addEditor(as),this.addToAnnotationStorage(as),as.rebuild())}else as.parent.addOrRebuild(as)}isActive(as){return Or(this,Pr)===as}getActive(){return Or(this,Pr)}getMode(){return Or(this,Vr)}get imageManager(){return(0,cr.shadow)(this,"imageManager",new pr)}};Pr=new WeakMap,Ir=new WeakMap,$r=new WeakMap,Zr=new WeakMap,rs=new WeakMap,qr=new WeakMap,zr=new WeakMap,Jr=new WeakMap,Hr=new WeakMap,Kr=new WeakMap,ys=new WeakMap,Yr=new WeakMap,Fr=new WeakMap,Br=new WeakMap,Ur=new WeakMap,Qr=new WeakMap,Vr=new WeakMap,Gr=new WeakMap,is=new WeakMap,ps=new WeakMap,As=new WeakMap,Cs=new WeakMap,jr=new WeakMap,Wr=new WeakMap,ds=new WeakMap,ls=new WeakMap,ss=new WeakMap,Lr=new WeakMap,Xr=new WeakMap,cs=new WeakMap,hs=new WeakMap,ms=new WeakMap,Ts=new WeakMap,ks=new WeakMap,fs=new WeakSet,Do=function(){window.addEventListener("focus",Or(this,As)),window.addEventListener("blur",Or(this,ps))},Ji=function(){window.removeEventListener("focus",Or(this,As)),window.removeEventListener("blur",Or(this,ps))},Qi=function(){window.addEventListener("keydown",Or(this,ds),{capture:!0})},Mi=function(){window.removeEventListener("keydown",Or(this,ds),{capture:!0})},Zi=function(){document.addEventListener("copy",Or(this,Cs)),document.addEventListener("cut",Or(this,jr)),document.addEventListener("paste",Or(this,Wr))},eo=function(){document.removeEventListener("copy",Or(this,Cs)),document.removeEventListener("cut",Or(this,jr)),document.removeEventListener("paste",Or(this,Wr))},li=function(as){Object.entries(as).some(([js,Ys])=>Or(this,cs)[js]!==Ys)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Or(this,cs),as)})},Si=function(as){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:as})},Io=function(){if(!Or(this,Br)){Ms(this,Br,!0);for(const as of Or(this,$r).values())as.enable()}},Fo=function(){if(this.unselectAll(),Or(this,Br)){Ms(this,Br,!1);for(const as of Or(this,$r).values())as.disable()}},to=function(as){const Rs=Or(this,$r).get(as.pageIndex);Rs?Rs.addOrRebuild(as):this.addEditor(as)},xi=function(){if(Or(this,Ir).size===0)return!0;if(Or(this,Ir).size===1)for(const as of Or(this,Ir).values())return as.isEmpty();return!1},no=function(as){Or(this,Gr).clear();for(const Rs of as)Rs.isEmpty()||(Or(this,Gr).add(Rs),Rs.select());Es(this,fs,li).call(this,{hasSelectedEditor:!0})},ii(Hs,"TRANSLATE_SMALL",1),ii(Hs,"TRANSLATE_BIG",10);let vr=Hs;or.AnnotationEditorUIManager=vr},(ar,or,lr)=>{var zr,Jr,Hr,Kr,ys,Yr,Fr,Br,Ur,Qr,Vr,Gr,mi,gi,ro,Ri,Ni,Ei,wi;Object.defineProperty(or,"__esModule",{value:!0}),or.StatTimer=or.RenderingCancelledException=or.PixelsPerInch=or.PageViewport=or.PDFDateString=or.DOMStandardFontDataFactory=or.DOMSVGFactory=or.DOMFilterFactory=or.DOMCanvasFactory=or.DOMCMapReaderFactory=void 0,or.deprecated=Rr,or.getColorValues=Ir,or.getCurrentTransform=$r,or.getCurrentTransformInverse=Zr,or.getFilenameFromUrl=wr,or.getPdfFilenameFromUrl=Ar,or.getRGB=Pr,or.getXfaPageViewport=Dr,or.isDataScheme=xr,or.isPdfFile=Er,or.isValidFetchUrl=Cr,or.loadScript=Mr,or.noContextMenu=kr,or.setLayerDimensions=rs;var cr=lr(7),ur=lr(1);const dr="http://www.w3.org/2000/svg",qr=class qr{};ii(qr,"CSS",96),ii(qr,"PDF",72),ii(qr,"PDF_TO_CSS_UNITS",qr.CSS/qr.PDF);let hr=qr;or.PixelsPerInch=hr;class fr extends cr.BaseFilterFactory{constructor({docId:Lr,ownerDocument:Xr=globalThis.document}={}){super();_s(this,Gr);_s(this,zr);_s(this,Jr);_s(this,Hr);_s(this,Kr);_s(this,ys);_s(this,Yr);_s(this,Fr);_s(this,Br);_s(this,Ur);_s(this,Qr);_s(this,Vr,0);Ms(this,Hr,Lr),Ms(this,Kr,Xr)}addFilter(Lr){if(!Lr)return"none";let Xr=Or(this,Gr,mi).get(Lr);if(Xr)return Xr;let cs,hs,ms,Ts;if(Lr.length===1){const Fs=Lr[0],Gs=new Array(256);for(let gs=0;gs<256;gs++)Gs[gs]=Fs[gs]/255;Ts=cs=hs=ms=Gs.join(",")}else{const[Fs,Gs,gs]=Lr,xs=new Array(256),Ss=new Array(256),Ps=new Array(256);for(let $s=0;$s<256;$s++)xs[$s]=Fs[$s]/255,Ss[$s]=Gs[$s]/255,Ps[$s]=gs[$s]/255;cs=xs.join(","),hs=Ss.join(","),ms=Ps.join(","),Ts=`${cs}${hs}${ms}`}if(Xr=Or(this,Gr,mi).get(Ts),Xr)return Or(this,Gr,mi).set(Lr,Xr),Xr;const ks=`g_${Or(this,Hr)}_transfer_map_${bi(this,Vr)._++}`,fs=`url(#${ks})`;Or(this,Gr,mi).set(Lr,fs),Or(this,Gr,mi).set(Ts,fs);const Is=Es(this,Gr,Ri).call(this,ks);return Es(this,Gr,Ei).call(this,cs,hs,ms,Is),fs}addHCMFilter(Lr,Xr){var Gs;const cs=`${Lr}-${Xr}`;if(Or(this,Yr)===cs)return Or(this,Fr);if(Ms(this,Yr,cs),Ms(this,Fr,"none"),(Gs=Or(this,ys))==null||Gs.remove(),!Lr||!Xr)return Or(this,Fr);const hs=Es(this,Gr,wi).call(this,Lr);Lr=ur.Util.makeHexColor(...hs);const ms=Es(this,Gr,wi).call(this,Xr);if(Xr=ur.Util.makeHexColor(...ms),Or(this,Gr,gi).style.color="",Lr==="#000000"&&Xr==="#ffffff"||Lr===Xr)return Or(this,Fr);const Ts=new Array(256);for(let gs=0;gs<=255;gs++){const xs=gs/255;Ts[gs]=xs<=.03928?xs/12.92:((xs+.055)/1.055)**2.4}const ks=Ts.join(","),fs=`g_${Or(this,Hr)}_hcm_filter`,Is=Ms(this,Br,Es(this,Gr,Ri).call(this,fs));Es(this,Gr,Ei).call(this,ks,ks,ks,Is),Es(this,Gr,ro).call(this,Is);const Fs=(gs,xs)=>{const Ss=hs[gs]/255,Ps=ms[gs]/255,$s=new Array(xs+1);for(let Ws=0;Ws<=xs;Ws++)$s[Ws]=Ss+Ws/xs*(Ps-Ss);return $s.join(",")};return Es(this,Gr,Ei).call(this,Fs(0,5),Fs(1,5),Fs(2,5),Is),Ms(this,Fr,`url(#${fs})`),Or(this,Fr)}addHighlightHCMFilter(Lr,Xr,cs,hs){var Ps;const ms=`${Lr}-${Xr}-${cs}-${hs}`;if(Or(this,Ur)===ms)return Or(this,Qr);if(Ms(this,Ur,ms),Ms(this,Qr,"none"),(Ps=Or(this,Br))==null||Ps.remove(),!Lr||!Xr)return Or(this,Qr);const[Ts,ks]=[Lr,Xr].map(Es(this,Gr,wi).bind(this));let fs=Math.round(.2126*Ts[0]+.7152*Ts[1]+.0722*Ts[2]),Is=Math.round(.2126*ks[0]+.7152*ks[1]+.0722*ks[2]),[Fs,Gs]=[cs,hs].map(Es(this,Gr,wi).bind(this));Is<fs&&([fs,Is,Fs,Gs]=[Is,fs,Gs,Fs]),Or(this,Gr,gi).style.color="";const gs=($s,Ws,Ns)=>{const vs=new Array(256),ws=(Is-fs)/Ns,Ls=$s/255,Hs=(Ws-$s)/(255*Ns);let Us=0;for(let as=0;as<=Ns;as++){const Rs=Math.round(fs+as*ws),js=Ls+as*Hs;for(let Ys=Us;Ys<=Rs;Ys++)vs[Ys]=js;Us=Rs+1}for(let as=Us;as<256;as++)vs[as]=vs[Us-1];return vs.join(",")},xs=`g_${Or(this,Hr)}_hcm_highlight_filter`,Ss=Ms(this,Br,Es(this,Gr,Ri).call(this,xs));return Es(this,Gr,ro).call(this,Ss),Es(this,Gr,Ei).call(this,gs(Fs[0],Gs[0],5),gs(Fs[1],Gs[1],5),gs(Fs[2],Gs[2],5),Ss),Ms(this,Qr,`url(#${xs})`),Or(this,Qr)}destroy(Lr=!1){Lr&&(Or(this,Fr)||Or(this,Qr))||(Or(this,Jr)&&(Or(this,Jr).parentNode.parentNode.remove(),Ms(this,Jr,null)),Or(this,zr)&&(Or(this,zr).clear(),Ms(this,zr,null)),Ms(this,Vr,0))}}zr=new WeakMap,Jr=new WeakMap,Hr=new WeakMap,Kr=new WeakMap,ys=new WeakMap,Yr=new WeakMap,Fr=new WeakMap,Br=new WeakMap,Ur=new WeakMap,Qr=new WeakMap,Vr=new WeakMap,Gr=new WeakSet,mi=function(){return Or(this,zr)||Ms(this,zr,new Map)},gi=function(){if(!Or(this,Jr)){const Lr=Or(this,Kr).createElement("div"),{style:Xr}=Lr;Xr.visibility="hidden",Xr.contain="strict",Xr.width=Xr.height=0,Xr.position="absolute",Xr.top=Xr.left=0,Xr.zIndex=-1;const cs=Or(this,Kr).createElementNS(dr,"svg");cs.setAttribute("width",0),cs.setAttribute("height",0),Ms(this,Jr,Or(this,Kr).createElementNS(dr,"defs")),Lr.append(cs),cs.append(Or(this,Jr)),Or(this,Kr).body.append(Lr)}return Or(this,Jr)},ro=function(Lr){const Xr=Or(this,Kr).createElementNS(dr,"feColorMatrix");Xr.setAttribute("type","matrix"),Xr.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),Lr.append(Xr)},Ri=function(Lr){const Xr=Or(this,Kr).createElementNS(dr,"filter");return Xr.setAttribute("color-interpolation-filters","sRGB"),Xr.setAttribute("id",Lr),Or(this,Gr,gi).append(Xr),Xr},Ni=function(Lr,Xr,cs){const hs=Or(this,Kr).createElementNS(dr,Xr);hs.setAttribute("type","discrete"),hs.setAttribute("tableValues",cs),Lr.append(hs)},Ei=function(Lr,Xr,cs,hs){const ms=Or(this,Kr).createElementNS(dr,"feComponentTransfer");hs.append(ms),Es(this,Gr,Ni).call(this,ms,"feFuncR",Lr),Es(this,Gr,Ni).call(this,ms,"feFuncG",Xr),Es(this,Gr,Ni).call(this,ms,"feFuncB",cs)},wi=function(Lr){return Or(this,Gr,gi).style.color=Lr,Pr(getComputedStyle(Or(this,Gr,gi)).getPropertyValue("color"))},or.DOMFilterFactory=fr;class pr extends cr.BaseCanvasFactory{constructor({ownerDocument:ss=globalThis.document}={}){super(),this._document=ss}_createCanvas(ss,Lr){const Xr=this._document.createElement("canvas");return Xr.width=ss,Xr.height=Lr,Xr}}or.DOMCanvasFactory=pr;async function mr(ls,ss=!1){if(Cr(ls,document.baseURI)){const Lr=await fetch(ls);if(!Lr.ok)throw new Error(Lr.statusText);return ss?new Uint8Array(await Lr.arrayBuffer()):(0,ur.stringToBytes)(await Lr.text())}return new Promise((Lr,Xr)=>{const cs=new XMLHttpRequest;cs.open("GET",ls,!0),ss&&(cs.responseType="arraybuffer"),cs.onreadystatechange=()=>{if(cs.readyState===XMLHttpRequest.DONE){if(cs.status===200||cs.status===0){let hs;if(ss&&cs.response?hs=new Uint8Array(cs.response):!ss&&cs.responseText&&(hs=(0,ur.stringToBytes)(cs.responseText)),hs){Lr(hs);return}}Xr(new Error(cs.statusText))}},cs.send(null)})}class gr extends cr.BaseCMapReaderFactory{_fetchData(ss,Lr){return mr(ss,this.isCompressed).then(Xr=>({cMapData:Xr,compressionType:Lr}))}}or.DOMCMapReaderFactory=gr;class yr extends cr.BaseStandardFontDataFactory{_fetchData(ss){return mr(ss,!0)}}or.DOMStandardFontDataFactory=yr;class vr extends cr.BaseSVGFactory{_createSVG(ss){return document.createElementNS(dr,ss)}}or.DOMSVGFactory=vr;class br{constructor({viewBox:ss,scale:Lr,rotation:Xr,offsetX:cs=0,offsetY:hs=0,dontFlip:ms=!1}){this.viewBox=ss,this.scale=Lr,this.rotation=Xr,this.offsetX=cs,this.offsetY=hs;const Ts=(ss[2]+ss[0])/2,ks=(ss[3]+ss[1])/2;let fs,Is,Fs,Gs;switch(Xr%=360,Xr<0&&(Xr+=360),Xr){case 180:fs=-1,Is=0,Fs=0,Gs=1;break;case 90:fs=0,Is=1,Fs=1,Gs=0;break;case 270:fs=0,Is=-1,Fs=-1,Gs=0;break;case 0:fs=1,Is=0,Fs=0,Gs=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ms&&(Fs=-Fs,Gs=-Gs);let gs,xs,Ss,Ps;fs===0?(gs=Math.abs(ks-ss[1])*Lr+cs,xs=Math.abs(Ts-ss[0])*Lr+hs,Ss=(ss[3]-ss[1])*Lr,Ps=(ss[2]-ss[0])*Lr):(gs=Math.abs(Ts-ss[0])*Lr+cs,xs=Math.abs(ks-ss[1])*Lr+hs,Ss=(ss[2]-ss[0])*Lr,Ps=(ss[3]-ss[1])*Lr),this.transform=[fs*Lr,Is*Lr,Fs*Lr,Gs*Lr,gs-fs*Lr*Ts-Fs*Lr*ks,xs-Is*Lr*Ts-Gs*Lr*ks],this.width=Ss,this.height=Ps}get rawDims(){const{viewBox:ss}=this;return(0,ur.shadow)(this,"rawDims",{pageWidth:ss[2]-ss[0],pageHeight:ss[3]-ss[1],pageX:ss[0],pageY:ss[1]})}clone({scale:ss=this.scale,rotation:Lr=this.rotation,offsetX:Xr=this.offsetX,offsetY:cs=this.offsetY,dontFlip:hs=!1}={}){return new br({viewBox:this.viewBox.slice(),scale:ss,rotation:Lr,offsetX:Xr,offsetY:cs,dontFlip:hs})}convertToViewportPoint(ss,Lr){return ur.Util.applyTransform([ss,Lr],this.transform)}convertToViewportRectangle(ss){const Lr=ur.Util.applyTransform([ss[0],ss[1]],this.transform),Xr=ur.Util.applyTransform([ss[2],ss[3]],this.transform);return[Lr[0],Lr[1],Xr[0],Xr[1]]}convertToPdfPoint(ss,Lr){return ur.Util.applyInverseTransform([ss,Lr],this.transform)}}or.PageViewport=br;class Sr extends ur.BaseException{constructor(ss,Lr=0){super(ss,"RenderingCancelledException"),this.extraDelay=Lr}}or.RenderingCancelledException=Sr;function xr(ls){const ss=ls.length;let Lr=0;for(;Lr<ss&&ls[Lr].trim()==="";)Lr++;return ls.substring(Lr,Lr+5).toLowerCase()==="data:"}function Er(ls){return typeof ls=="string"&&/\.pdf$/i.test(ls)}function wr(ls,ss=!1){return ss||([ls]=ls.split(/[#?]/,1)),ls.substring(ls.lastIndexOf("/")+1)}function Ar(ls,ss="document.pdf"){if(typeof ls!="string")return ss;if(xr(ls))return(0,ur.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),ss;const Lr=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Xr=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,cs=Lr.exec(ls);let hs=Xr.exec(cs[1])||Xr.exec(cs[2])||Xr.exec(cs[3]);if(hs&&(hs=hs[0],hs.includes("%")))try{hs=Xr.exec(decodeURIComponent(hs))[0]}catch{}return hs||ss}class Tr{constructor(){ii(this,"started",Object.create(null));ii(this,"times",[])}time(ss){ss in this.started&&(0,ur.warn)(`Timer is already running for ${ss}`),this.started[ss]=Date.now()}timeEnd(ss){ss in this.started||(0,ur.warn)(`Timer has not been started for ${ss}`),this.times.push({name:ss,start:this.started[ss],end:Date.now()}),delete this.started[ss]}toString(){const ss=[];let Lr=0;for(const{name:Xr}of this.times)Lr=Math.max(Xr.length,Lr);for(const{name:Xr,start:cs,end:hs}of this.times)ss.push(`${Xr.padEnd(Lr)} ${hs-cs}ms
`);return ss.join("")}}or.StatTimer=Tr;function Cr(ls,ss){try{const{protocol:Lr}=ss?new URL(ls,ss):new URL(ls);return Lr==="http:"||Lr==="https:"}catch{return!1}}function kr(ls){ls.preventDefault()}function Mr(ls,ss=!1){return new Promise((Lr,Xr)=>{const cs=document.createElement("script");cs.src=ls,cs.onload=function(hs){ss&&cs.remove(),Lr(hs)},cs.onerror=function(){Xr(new Error(`Cannot load script at: ${cs.src}`))},(document.head||document.documentElement).append(cs)})}function Rr(ls){console.log("Deprecated API usage: "+ls)}let Nr;class _r{static toDateObject(ss){if(!ss||typeof ss!="string")return null;Nr||(Nr=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const Lr=Nr.exec(ss);if(!Lr)return null;const Xr=parseInt(Lr[1],10);let cs=parseInt(Lr[2],10);cs=cs>=1&&cs<=12?cs-1:0;let hs=parseInt(Lr[3],10);hs=hs>=1&&hs<=31?hs:1;let ms=parseInt(Lr[4],10);ms=ms>=0&&ms<=23?ms:0;let Ts=parseInt(Lr[5],10);Ts=Ts>=0&&Ts<=59?Ts:0;let ks=parseInt(Lr[6],10);ks=ks>=0&&ks<=59?ks:0;const fs=Lr[7]||"Z";let Is=parseInt(Lr[8],10);Is=Is>=0&&Is<=23?Is:0;let Fs=parseInt(Lr[9],10)||0;return Fs=Fs>=0&&Fs<=59?Fs:0,fs==="-"?(ms+=Is,Ts+=Fs):fs==="+"&&(ms-=Is,Ts-=Fs),new Date(Date.UTC(Xr,cs,hs,ms,Ts,ks))}}or.PDFDateString=_r;function Dr(ls,{scale:ss=1,rotation:Lr=0}){const{width:Xr,height:cs}=ls.attributes.style,hs=[0,0,parseInt(Xr),parseInt(cs)];return new br({viewBox:hs,scale:ss,rotation:Lr})}function Pr(ls){if(ls.startsWith("#")){const ss=parseInt(ls.slice(1),16);return[(ss&16711680)>>16,(ss&65280)>>8,ss&255]}return ls.startsWith("rgb(")?ls.slice(4,-1).split(",").map(ss=>parseInt(ss)):ls.startsWith("rgba(")?ls.slice(5,-1).split(",").map(ss=>parseInt(ss)).slice(0,3):((0,ur.warn)(`Not a valid color format: "${ls}"`),[0,0,0])}function Ir(ls){const ss=document.createElement("span");ss.style.visibility="hidden",document.body.append(ss);for(const Lr of ls.keys()){ss.style.color=Lr;const Xr=window.getComputedStyle(ss).color;ls.set(Lr,Pr(Xr))}ss.remove()}function $r(ls){const{a:ss,b:Lr,c:Xr,d:cs,e:hs,f:ms}=ls.getTransform();return[ss,Lr,Xr,cs,hs,ms]}function Zr(ls){const{a:ss,b:Lr,c:Xr,d:cs,e:hs,f:ms}=ls.getTransform().invertSelf();return[ss,Lr,Xr,cs,hs,ms]}function rs(ls,ss,Lr=!1,Xr=!0){if(ss instanceof br){const{pageWidth:cs,pageHeight:hs}=ss.rawDims,{style:ms}=ls,Ts=ur.FeatureTest.isCSSRoundSupported,ks=`var(--scale-factor) * ${cs}px`,fs=`var(--scale-factor) * ${hs}px`,Is=Ts?`round(${ks}, 1px)`:`calc(${ks})`,Fs=Ts?`round(${fs}, 1px)`:`calc(${fs})`;!Lr||ss.rotation%180===0?(ms.width=Is,ms.height=Fs):(ms.width=Fs,ms.height=Is)}Xr&&ls.setAttribute("data-main-rotation",ss.rotation)}},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.BaseStandardFontDataFactory=or.BaseSVGFactory=or.BaseFilterFactory=or.BaseCanvasFactory=or.BaseCMapReaderFactory=void 0;var cr=lr(1);class ur{constructor(){this.constructor===ur&&(0,cr.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(gr){return"none"}addHCMFilter(gr,yr){return"none"}addHighlightHCMFilter(gr,yr,vr,br){return"none"}destroy(gr=!1){}}or.BaseFilterFactory=ur;class dr{constructor(){this.constructor===dr&&(0,cr.unreachable)("Cannot initialize BaseCanvasFactory.")}create(gr,yr){if(gr<=0||yr<=0)throw new Error("Invalid canvas size");const vr=this._createCanvas(gr,yr);return{canvas:vr,context:vr.getContext("2d")}}reset(gr,yr,vr){if(!gr.canvas)throw new Error("Canvas is not specified");if(yr<=0||vr<=0)throw new Error("Invalid canvas size");gr.canvas.width=yr,gr.canvas.height=vr}destroy(gr){if(!gr.canvas)throw new Error("Canvas is not specified");gr.canvas.width=0,gr.canvas.height=0,gr.canvas=null,gr.context=null}_createCanvas(gr,yr){(0,cr.unreachable)("Abstract method `_createCanvas` called.")}}or.BaseCanvasFactory=dr;class hr{constructor({baseUrl:gr=null,isCompressed:yr=!0}){this.constructor===hr&&(0,cr.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=gr,this.isCompressed=yr}async fetch({name:gr}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!gr)throw new Error("CMap name must be specified.");const yr=this.baseUrl+gr+(this.isCompressed?".bcmap":""),vr=this.isCompressed?cr.CMapCompressionType.BINARY:cr.CMapCompressionType.NONE;return this._fetchData(yr,vr).catch(br=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${yr}`)})}_fetchData(gr,yr){(0,cr.unreachable)("Abstract method `_fetchData` called.")}}or.BaseCMapReaderFactory=hr;class fr{constructor({baseUrl:gr=null}){this.constructor===fr&&(0,cr.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=gr}async fetch({filename:gr}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!gr)throw new Error("Font filename must be specified.");const yr=`${this.baseUrl}${gr}`;return this._fetchData(yr).catch(vr=>{throw new Error(`Unable to load font data at: ${yr}`)})}_fetchData(gr){(0,cr.unreachable)("Abstract method `_fetchData` called.")}}or.BaseStandardFontDataFactory=fr;class pr{constructor(){this.constructor===pr&&(0,cr.unreachable)("Cannot initialize BaseSVGFactory.")}create(gr,yr,vr=!1){if(gr<=0||yr<=0)throw new Error("Invalid SVG dimensions");const br=this._createSVG("svg:svg");return br.setAttribute("version","1.1"),vr||(br.setAttribute("width",`${gr}px`),br.setAttribute("height",`${yr}px`)),br.setAttribute("preserveAspectRatio","none"),br.setAttribute("viewBox",`0 0 ${gr} ${yr}`),br}createElement(gr){if(typeof gr!="string")throw new Error("Invalid SVG element type");return this._createSVG(gr)}_createSVG(gr){(0,cr.unreachable)("Abstract method `_createSVG` called.")}}or.BaseSVGFactory=pr},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.MurmurHash3_64=void 0;var cr=lr(1);const ur=3285377520,dr=4294901760,hr=65535;class fr{constructor(mr){this.h1=mr?mr&4294967295:ur,this.h2=mr?mr&4294967295:ur}update(mr){let gr,yr;if(typeof mr=="string"){gr=new Uint8Array(mr.length*2),yr=0;for(let Rr=0,Nr=mr.length;Rr<Nr;Rr++){const _r=mr.charCodeAt(Rr);_r<=255?gr[yr++]=_r:(gr[yr++]=_r>>>8,gr[yr++]=_r&255)}}else if((0,cr.isArrayBuffer)(mr))gr=mr.slice(),yr=gr.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const vr=yr>>2,br=yr-vr*4,Sr=new Uint32Array(gr.buffer,0,vr);let xr=0,Er=0,wr=this.h1,Ar=this.h2;const Tr=3432918353,Cr=461845907,kr=Tr&hr,Mr=Cr&hr;for(let Rr=0;Rr<vr;Rr++)Rr&1?(xr=Sr[Rr],xr=xr*Tr&dr|xr*kr&hr,xr=xr<<15|xr>>>17,xr=xr*Cr&dr|xr*Mr&hr,wr^=xr,wr=wr<<13|wr>>>19,wr=wr*5+3864292196):(Er=Sr[Rr],Er=Er*Tr&dr|Er*kr&hr,Er=Er<<15|Er>>>17,Er=Er*Cr&dr|Er*Mr&hr,Ar^=Er,Ar=Ar<<13|Ar>>>19,Ar=Ar*5+3864292196);switch(xr=0,br){case 3:xr^=gr[vr*4+2]<<16;case 2:xr^=gr[vr*4+1]<<8;case 1:xr^=gr[vr*4],xr=xr*Tr&dr|xr*kr&hr,xr=xr<<15|xr>>>17,xr=xr*Cr&dr|xr*Mr&hr,vr&1?wr^=xr:Ar^=xr}this.h1=wr,this.h2=Ar}hexdigest(){let mr=this.h1,gr=this.h2;return mr^=gr>>>1,mr=mr*3981806797&dr|mr*36045&hr,gr=gr*4283543511&dr|((gr<<16|mr>>>16)*2950163797&dr)>>>16,mr^=gr>>>1,mr=mr*444984403&dr|mr*60499&hr,gr=gr*3301882366&dr|((gr<<16|mr>>>16)*3120437893&dr)>>>16,mr^=gr>>>1,(mr>>>0).toString(16).padStart(8,"0")+(gr>>>0).toString(16).padStart(8,"0")}}or.MurmurHash3_64=fr},(ar,or,lr)=>{var hr;Object.defineProperty(or,"__esModule",{value:!0}),or.FontLoader=or.FontFaceObject=void 0;var cr=lr(1);class ur{constructor({ownerDocument:pr=globalThis.document,styleElement:mr=null}){_s(this,hr,new Set);this._document=pr,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(pr){this.nativeFontFaces.add(pr),this._document.fonts.add(pr)}removeNativeFontFace(pr){this.nativeFontFaces.delete(pr),this._document.fonts.delete(pr)}insertRule(pr){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const mr=this.styleElement.sheet;mr.insertRule(pr,mr.cssRules.length)}clear(){for(const pr of this.nativeFontFaces)this._document.fonts.delete(pr);this.nativeFontFaces.clear(),Or(this,hr).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(pr){if(!(!pr||Or(this,hr).has(pr.loadedName))){if((0,cr.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:mr,src:gr,style:yr}=pr,vr=new FontFace(mr,gr,yr);this.addNativeFontFace(vr);try{await vr.load(),Or(this,hr).add(mr)}catch{(0,cr.warn)(`Cannot load system font: ${pr.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(vr)}return}(0,cr.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(pr){if(pr.attached||pr.missingFile&&!pr.systemFontInfo)return;if(pr.attached=!0,pr.systemFontInfo){await this.loadSystemFont(pr.systemFontInfo);return}if(this.isFontLoadingAPISupported){const gr=pr.createNativeFontFace();if(gr){this.addNativeFontFace(gr);try{await gr.loaded}catch(yr){throw(0,cr.warn)(`Failed to load font '${gr.family}': '${yr}'.`),pr.disableFontFace=!0,yr}}return}const mr=pr.createFontFaceRule();if(mr){if(this.insertRule(mr),this.isSyncFontLoadingSupported)return;await new Promise(gr=>{const yr=this._queueLoadingCallback(gr);this._prepareFontLoadEvent(pr,yr)})}}get isFontLoadingAPISupported(){var mr;const pr=!!((mr=this._document)!=null&&mr.fonts);return(0,cr.shadow)(this,"isFontLoadingAPISupported",pr)}get isSyncFontLoadingSupported(){let pr=!1;return(cr.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(pr=!0),(0,cr.shadow)(this,"isSyncFontLoadingSupported",pr)}_queueLoadingCallback(pr){function mr(){for((0,cr.assert)(!yr.done,"completeRequest() cannot be called twice."),yr.done=!0;gr.length>0&&gr[0].done;){const vr=gr.shift();setTimeout(vr.callback,0)}}const{loadingRequests:gr}=this,yr={done:!1,complete:mr,callback:pr};return gr.push(yr),yr}get _loadTestFont(){const pr=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,cr.shadow)(this,"_loadTestFont",pr)}_prepareFontLoadEvent(pr,mr){function gr(Pr,Ir){return Pr.charCodeAt(Ir)<<24|Pr.charCodeAt(Ir+1)<<16|Pr.charCodeAt(Ir+2)<<8|Pr.charCodeAt(Ir+3)&255}function yr(Pr,Ir,$r,Zr){const rs=Pr.substring(0,Ir),qr=Pr.substring(Ir+$r);return rs+Zr+qr}let vr,br;const Sr=this._document.createElement("canvas");Sr.width=1,Sr.height=1;const xr=Sr.getContext("2d");let Er=0;function wr(Pr,Ir){if(++Er>30){(0,cr.warn)("Load test font never loaded."),Ir();return}if(xr.font="30px "+Pr,xr.fillText(".",0,20),xr.getImageData(0,0,1,1).data[3]>0){Ir();return}setTimeout(wr.bind(null,Pr,Ir))}const Ar=`lt${Date.now()}${this.loadTestFontId++}`;let Tr=this._loadTestFont;Tr=yr(Tr,976,Ar.length,Ar);const kr=16,Mr=1482184792;let Rr=gr(Tr,kr);for(vr=0,br=Ar.length-3;vr<br;vr+=4)Rr=Rr-Mr+gr(Ar,vr)|0;vr<Ar.length&&(Rr=Rr-Mr+gr(Ar+"XXX",vr)|0),Tr=yr(Tr,kr,4,(0,cr.string32)(Rr));const Nr=`url(data:font/opentype;base64,${btoa(Tr)});`,_r=`@font-face {font-family:"${Ar}";src:${Nr}}`;this.insertRule(_r);const Dr=this._document.createElement("div");Dr.style.visibility="hidden",Dr.style.width=Dr.style.height="10px",Dr.style.position="absolute",Dr.style.top=Dr.style.left="0px";for(const Pr of[pr.loadedName,Ar]){const Ir=this._document.createElement("span");Ir.textContent="Hi",Ir.style.fontFamily=Pr,Dr.append(Ir)}this._document.body.append(Dr),wr(Ar,()=>{Dr.remove(),mr.complete()})}}hr=new WeakMap,or.FontLoader=ur;class dr{constructor(pr,{isEvalSupported:mr=!0,disableFontFace:gr=!1,ignoreErrors:yr=!1,inspectFont:vr=null}){this.compiledGlyphs=Object.create(null);for(const br in pr)this[br]=pr[br];this.isEvalSupported=mr!==!1,this.disableFontFace=gr===!0,this.ignoreErrors=yr===!0,this._inspectFont=vr}createNativeFontFace(){var mr;if(!this.data||this.disableFontFace)return null;let pr;if(!this.cssFontInfo)pr=new FontFace(this.loadedName,this.data,{});else{const gr={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(gr.style=`oblique ${this.cssFontInfo.italicAngle}deg`),pr=new FontFace(this.cssFontInfo.fontFamily,this.data,gr)}return(mr=this._inspectFont)==null||mr.call(this,this),pr}createFontFaceRule(){var yr;if(!this.data||this.disableFontFace)return null;const pr=(0,cr.bytesToString)(this.data),mr=`url(data:${this.mimetype};base64,${btoa(pr)});`;let gr;if(!this.cssFontInfo)gr=`@font-face {font-family:"${this.loadedName}";src:${mr}}`;else{let vr=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(vr+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),gr=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${vr}src:${mr}}`}return(yr=this._inspectFont)==null||yr.call(this,this,mr),gr}getPathGenerator(pr,mr){if(this.compiledGlyphs[mr]!==void 0)return this.compiledGlyphs[mr];let gr;try{gr=pr.get(this.loadedName+"_path_"+mr)}catch(yr){if(!this.ignoreErrors)throw yr;return(0,cr.warn)(`getPathGenerator - ignoring character: "${yr}".`),this.compiledGlyphs[mr]=function(vr,br){}}if(this.isEvalSupported&&cr.FeatureTest.isEvalSupported){const yr=[];for(const vr of gr){const br=vr.args!==void 0?vr.args.join(","):"";yr.push("c.",vr.cmd,"(",br,`);
`)}return this.compiledGlyphs[mr]=new Function("c","size",yr.join(""))}return this.compiledGlyphs[mr]=function(yr,vr){for(const br of gr)br.cmd==="scale"&&(br.args=[vr,-vr]),yr[br.cmd].apply(yr,br.args)}}}or.FontFaceObject=dr},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.NodeStandardFontDataFactory=or.NodeFilterFactory=or.NodeCanvasFactory=or.NodeCMapReaderFactory=void 0;var cr=lr(7);lr(1);const ur=function(mr){return new Promise((gr,yr)=>{require$$5.readFile(mr,(br,Sr)=>{if(br||!Sr){yr(new Error(br));return}gr(new Uint8Array(Sr))})})};class dr extends cr.BaseFilterFactory{}or.NodeFilterFactory=dr;class hr extends cr.BaseCanvasFactory{_createCanvas(gr,yr){return require$$5.createCanvas(gr,yr)}}or.NodeCanvasFactory=hr;class fr extends cr.BaseCMapReaderFactory{_fetchData(gr,yr){return ur(gr).then(vr=>({cMapData:vr,compressionType:yr}))}}or.NodeCMapReaderFactory=fr;class pr extends cr.BaseStandardFontDataFactory{_fetchData(gr){return ur(gr)}}or.NodeStandardFontDataFactory=pr},(ar,or,lr)=>{var Jr,so,io;Object.defineProperty(or,"__esModule",{value:!0}),or.CanvasGraphics=void 0;var cr=lr(1),ur=lr(6),dr=lr(12),hr=lr(13);const fr=16,pr=100,mr=4096,gr=15,yr=10,vr=1e3,br=16;function Sr(Yr,Fr){if(Yr._removeMirroring)throw new Error("Context is already forwarding operations.");Yr.__originalSave=Yr.save,Yr.__originalRestore=Yr.restore,Yr.__originalRotate=Yr.rotate,Yr.__originalScale=Yr.scale,Yr.__originalTranslate=Yr.translate,Yr.__originalTransform=Yr.transform,Yr.__originalSetTransform=Yr.setTransform,Yr.__originalResetTransform=Yr.resetTransform,Yr.__originalClip=Yr.clip,Yr.__originalMoveTo=Yr.moveTo,Yr.__originalLineTo=Yr.lineTo,Yr.__originalBezierCurveTo=Yr.bezierCurveTo,Yr.__originalRect=Yr.rect,Yr.__originalClosePath=Yr.closePath,Yr.__originalBeginPath=Yr.beginPath,Yr._removeMirroring=()=>{Yr.save=Yr.__originalSave,Yr.restore=Yr.__originalRestore,Yr.rotate=Yr.__originalRotate,Yr.scale=Yr.__originalScale,Yr.translate=Yr.__originalTranslate,Yr.transform=Yr.__originalTransform,Yr.setTransform=Yr.__originalSetTransform,Yr.resetTransform=Yr.__originalResetTransform,Yr.clip=Yr.__originalClip,Yr.moveTo=Yr.__originalMoveTo,Yr.lineTo=Yr.__originalLineTo,Yr.bezierCurveTo=Yr.__originalBezierCurveTo,Yr.rect=Yr.__originalRect,Yr.closePath=Yr.__originalClosePath,Yr.beginPath=Yr.__originalBeginPath,delete Yr._removeMirroring},Yr.save=function(){Fr.save(),this.__originalSave()},Yr.restore=function(){Fr.restore(),this.__originalRestore()},Yr.translate=function(Ur,Qr){Fr.translate(Ur,Qr),this.__originalTranslate(Ur,Qr)},Yr.scale=function(Ur,Qr){Fr.scale(Ur,Qr),this.__originalScale(Ur,Qr)},Yr.transform=function(Ur,Qr,Vr,Gr,is,ps){Fr.transform(Ur,Qr,Vr,Gr,is,ps),this.__originalTransform(Ur,Qr,Vr,Gr,is,ps)},Yr.setTransform=function(Ur,Qr,Vr,Gr,is,ps){Fr.setTransform(Ur,Qr,Vr,Gr,is,ps),this.__originalSetTransform(Ur,Qr,Vr,Gr,is,ps)},Yr.resetTransform=function(){Fr.resetTransform(),this.__originalResetTransform()},Yr.rotate=function(Ur){Fr.rotate(Ur),this.__originalRotate(Ur)},Yr.clip=function(Ur){Fr.clip(Ur),this.__originalClip(Ur)},Yr.moveTo=function(Br,Ur){Fr.moveTo(Br,Ur),this.__originalMoveTo(Br,Ur)},Yr.lineTo=function(Br,Ur){Fr.lineTo(Br,Ur),this.__originalLineTo(Br,Ur)},Yr.bezierCurveTo=function(Br,Ur,Qr,Vr,Gr,is){Fr.bezierCurveTo(Br,Ur,Qr,Vr,Gr,is),this.__originalBezierCurveTo(Br,Ur,Qr,Vr,Gr,is)},Yr.rect=function(Br,Ur,Qr,Vr){Fr.rect(Br,Ur,Qr,Vr),this.__originalRect(Br,Ur,Qr,Vr)},Yr.closePath=function(){Fr.closePath(),this.__originalClosePath()},Yr.beginPath=function(){Fr.beginPath(),this.__originalBeginPath()}}class xr{constructor(Fr){this.canvasFactory=Fr,this.cache=Object.create(null)}getCanvas(Fr,Br,Ur){let Qr;return this.cache[Fr]!==void 0?(Qr=this.cache[Fr],this.canvasFactory.reset(Qr,Br,Ur)):(Qr=this.canvasFactory.create(Br,Ur),this.cache[Fr]=Qr),Qr}delete(Fr){delete this.cache[Fr]}clear(){for(const Fr in this.cache){const Br=this.cache[Fr];this.canvasFactory.destroy(Br),delete this.cache[Fr]}}}function Er(Yr,Fr,Br,Ur,Qr,Vr,Gr,is,ps,As){const[Cs,jr,Wr,ds,ls,ss]=(0,ur.getCurrentTransform)(Yr);if(jr===0&&Wr===0){const cs=Gr*Cs+ls,hs=Math.round(cs),ms=is*ds+ss,Ts=Math.round(ms),ks=(Gr+ps)*Cs+ls,fs=Math.abs(Math.round(ks)-hs)||1,Is=(is+As)*ds+ss,Fs=Math.abs(Math.round(Is)-Ts)||1;return Yr.setTransform(Math.sign(Cs),0,0,Math.sign(ds),hs,Ts),Yr.drawImage(Fr,Br,Ur,Qr,Vr,0,0,fs,Fs),Yr.setTransform(Cs,jr,Wr,ds,ls,ss),[fs,Fs]}if(Cs===0&&ds===0){const cs=is*Wr+ls,hs=Math.round(cs),ms=Gr*jr+ss,Ts=Math.round(ms),ks=(is+As)*Wr+ls,fs=Math.abs(Math.round(ks)-hs)||1,Is=(Gr+ps)*jr+ss,Fs=Math.abs(Math.round(Is)-Ts)||1;return Yr.setTransform(0,Math.sign(jr),Math.sign(Wr),0,hs,Ts),Yr.drawImage(Fr,Br,Ur,Qr,Vr,0,0,Fs,fs),Yr.setTransform(Cs,jr,Wr,ds,ls,ss),[Fs,fs]}Yr.drawImage(Fr,Br,Ur,Qr,Vr,Gr,is,ps,As);const Lr=Math.hypot(Cs,jr),Xr=Math.hypot(Wr,ds);return[Lr*ps,Xr*As]}function wr(Yr){const{width:Fr,height:Br}=Yr;if(Fr>vr||Br>vr)return null;const Ur=1e3,Qr=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Vr=Fr+1;let Gr=new Uint8Array(Vr*(Br+1)),is,ps,As;const Cs=Fr+7&-8;let jr=new Uint8Array(Cs*Br),Wr=0;for(const Xr of Yr.data){let cs=128;for(;cs>0;)jr[Wr++]=Xr&cs?0:255,cs>>=1}let ds=0;for(Wr=0,jr[Wr]!==0&&(Gr[0]=1,++ds),ps=1;ps<Fr;ps++)jr[Wr]!==jr[Wr+1]&&(Gr[ps]=jr[Wr]?2:1,++ds),Wr++;for(jr[Wr]!==0&&(Gr[ps]=2,++ds),is=1;is<Br;is++){Wr=is*Cs,As=is*Vr,jr[Wr-Cs]!==jr[Wr]&&(Gr[As]=jr[Wr]?1:8,++ds);let Xr=(jr[Wr]?4:0)+(jr[Wr-Cs]?8:0);for(ps=1;ps<Fr;ps++)Xr=(Xr>>2)+(jr[Wr+1]?4:0)+(jr[Wr-Cs+1]?8:0),Qr[Xr]&&(Gr[As+ps]=Qr[Xr],++ds),Wr++;if(jr[Wr-Cs]!==jr[Wr]&&(Gr[As+ps]=jr[Wr]?2:4,++ds),ds>Ur)return null}for(Wr=Cs*(Br-1),As=is*Vr,jr[Wr]!==0&&(Gr[As]=8,++ds),ps=1;ps<Fr;ps++)jr[Wr]!==jr[Wr+1]&&(Gr[As+ps]=jr[Wr]?4:8,++ds),Wr++;if(jr[Wr]!==0&&(Gr[As+ps]=4,++ds),ds>Ur)return null;const ls=new Int32Array([0,Vr,-1,0,-Vr,0,0,0,1]),ss=new Path2D;for(is=0;ds&&is<=Br;is++){let Xr=is*Vr;const cs=Xr+Fr;for(;Xr<cs&&!Gr[Xr];)Xr++;if(Xr===cs)continue;ss.moveTo(Xr%Vr,is);const hs=Xr;let ms=Gr[Xr];do{const Ts=ls[ms];do Xr+=Ts;while(!Gr[Xr]);const ks=Gr[Xr];ks!==5&&ks!==10?(ms=ks,Gr[Xr]=0):(ms=ks&51*ms>>4,Gr[Xr]&=ms>>2|ms<<2),ss.lineTo(Xr%Vr,Xr/Vr|0),Gr[Xr]||--ds}while(hs!==Xr);--is}return jr=null,Gr=null,function(Xr){Xr.save(),Xr.scale(1/Fr,-1/Br),Xr.translate(0,-Br),Xr.fill(ss),Xr.beginPath(),Xr.restore()}}class Ar{constructor(Fr,Br){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=cr.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=cr.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=cr.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,Fr,Br])}clone(){const Fr=Object.create(this);return Fr.clipBox=this.clipBox.slice(),Fr}setCurrentPoint(Fr,Br){this.x=Fr,this.y=Br}updatePathMinMax(Fr,Br,Ur){[Br,Ur]=cr.Util.applyTransform([Br,Ur],Fr),this.minX=Math.min(this.minX,Br),this.minY=Math.min(this.minY,Ur),this.maxX=Math.max(this.maxX,Br),this.maxY=Math.max(this.maxY,Ur)}updateRectMinMax(Fr,Br){const Ur=cr.Util.applyTransform(Br,Fr),Qr=cr.Util.applyTransform(Br.slice(2),Fr);this.minX=Math.min(this.minX,Ur[0],Qr[0]),this.minY=Math.min(this.minY,Ur[1],Qr[1]),this.maxX=Math.max(this.maxX,Ur[0],Qr[0]),this.maxY=Math.max(this.maxY,Ur[1],Qr[1])}updateScalingPathMinMax(Fr,Br){cr.Util.scaleMinMax(Fr,Br),this.minX=Math.min(this.minX,Br[0]),this.maxX=Math.max(this.maxX,Br[1]),this.minY=Math.min(this.minY,Br[2]),this.maxY=Math.max(this.maxY,Br[3])}updateCurvePathMinMax(Fr,Br,Ur,Qr,Vr,Gr,is,ps,As,Cs){const jr=cr.Util.bezierBoundingBox(Br,Ur,Qr,Vr,Gr,is,ps,As);if(Cs){Cs[0]=Math.min(Cs[0],jr[0],jr[2]),Cs[1]=Math.max(Cs[1],jr[0],jr[2]),Cs[2]=Math.min(Cs[2],jr[1],jr[3]),Cs[3]=Math.max(Cs[3],jr[1],jr[3]);return}this.updateRectMinMax(Fr,jr)}getPathBoundingBox(Fr=dr.PathType.FILL,Br=null){const Ur=[this.minX,this.minY,this.maxX,this.maxY];if(Fr===dr.PathType.STROKE){Br||(0,cr.unreachable)("Stroke bounding box must include transform.");const Qr=cr.Util.singularValueDecompose2dScale(Br),Vr=Qr[0]*this.lineWidth/2,Gr=Qr[1]*this.lineWidth/2;Ur[0]-=Vr,Ur[1]-=Gr,Ur[2]+=Vr,Ur[3]+=Gr}return Ur}updateClipFromPath(){const Fr=cr.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(Fr||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(Fr){this.clipBox=Fr,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(Fr=dr.PathType.FILL,Br=null){return cr.Util.intersect(this.clipBox,this.getPathBoundingBox(Fr,Br))}}function Tr(Yr,Fr){if(typeof ImageData<"u"&&Fr instanceof ImageData){Yr.putImageData(Fr,0,0);return}const Br=Fr.height,Ur=Fr.width,Qr=Br%br,Vr=(Br-Qr)/br,Gr=Qr===0?Vr:Vr+1,is=Yr.createImageData(Ur,br);let ps=0,As;const Cs=Fr.data,jr=is.data;let Wr,ds,ls,ss;if(Fr.kind===cr.ImageKind.GRAYSCALE_1BPP){const Lr=Cs.byteLength,Xr=new Uint32Array(jr.buffer,0,jr.byteLength>>2),cs=Xr.length,hs=Ur+7>>3,ms=4294967295,Ts=cr.FeatureTest.isLittleEndian?4278190080:255;for(Wr=0;Wr<Gr;Wr++){for(ls=Wr<Vr?br:Qr,As=0,ds=0;ds<ls;ds++){const ks=Lr-ps;let fs=0;const Is=ks>hs?Ur:ks*8-7,Fs=Is&-8;let Gs=0,gs=0;for(;fs<Fs;fs+=8)gs=Cs[ps++],Xr[As++]=gs&128?ms:Ts,Xr[As++]=gs&64?ms:Ts,Xr[As++]=gs&32?ms:Ts,Xr[As++]=gs&16?ms:Ts,Xr[As++]=gs&8?ms:Ts,Xr[As++]=gs&4?ms:Ts,Xr[As++]=gs&2?ms:Ts,Xr[As++]=gs&1?ms:Ts;for(;fs<Is;fs++)Gs===0&&(gs=Cs[ps++],Gs=128),Xr[As++]=gs&Gs?ms:Ts,Gs>>=1}for(;As<cs;)Xr[As++]=0;Yr.putImageData(is,0,Wr*br)}}else if(Fr.kind===cr.ImageKind.RGBA_32BPP){for(ds=0,ss=Ur*br*4,Wr=0;Wr<Vr;Wr++)jr.set(Cs.subarray(ps,ps+ss)),ps+=ss,Yr.putImageData(is,0,ds),ds+=br;Wr<Gr&&(ss=Ur*Qr*4,jr.set(Cs.subarray(ps,ps+ss)),Yr.putImageData(is,0,ds))}else if(Fr.kind===cr.ImageKind.RGB_24BPP)for(ls=br,ss=Ur*ls,Wr=0;Wr<Gr;Wr++){for(Wr>=Vr&&(ls=Qr,ss=Ur*ls),As=0,ds=ss;ds--;)jr[As++]=Cs[ps++],jr[As++]=Cs[ps++],jr[As++]=Cs[ps++],jr[As++]=255;Yr.putImageData(is,0,Wr*br)}else throw new Error(`bad image kind: ${Fr.kind}`)}function Cr(Yr,Fr){if(Fr.bitmap){Yr.drawImage(Fr.bitmap,0,0);return}const Br=Fr.height,Ur=Fr.width,Qr=Br%br,Vr=(Br-Qr)/br,Gr=Qr===0?Vr:Vr+1,is=Yr.createImageData(Ur,br);let ps=0;const As=Fr.data,Cs=is.data;for(let jr=0;jr<Gr;jr++){const Wr=jr<Vr?br:Qr;({srcPos:ps}=(0,hr.convertBlackAndWhiteToRGBA)({src:As,srcPos:ps,dest:Cs,width:Ur,height:Wr,nonBlackColor:0})),Yr.putImageData(is,0,jr*br)}}function kr(Yr,Fr){const Br=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const Ur of Br)Yr[Ur]!==void 0&&(Fr[Ur]=Yr[Ur]);Yr.setLineDash!==void 0&&(Fr.setLineDash(Yr.getLineDash()),Fr.lineDashOffset=Yr.lineDashOffset)}function Mr(Yr){if(Yr.strokeStyle=Yr.fillStyle="#000000",Yr.fillRule="nonzero",Yr.globalAlpha=1,Yr.lineWidth=1,Yr.lineCap="butt",Yr.lineJoin="miter",Yr.miterLimit=10,Yr.globalCompositeOperation="source-over",Yr.font="10px sans-serif",Yr.setLineDash!==void 0&&(Yr.setLineDash([]),Yr.lineDashOffset=0),!cr.isNodeJS){const{filter:Fr}=Yr;Fr!=="none"&&Fr!==""&&(Yr.filter="none")}}function Rr(Yr,Fr,Br,Ur){const Qr=Yr.length;for(let Vr=3;Vr<Qr;Vr+=4){const Gr=Yr[Vr];if(Gr===0)Yr[Vr-3]=Fr,Yr[Vr-2]=Br,Yr[Vr-1]=Ur;else if(Gr<255){const is=255-Gr;Yr[Vr-3]=Yr[Vr-3]*Gr+Fr*is>>8,Yr[Vr-2]=Yr[Vr-2]*Gr+Br*is>>8,Yr[Vr-1]=Yr[Vr-1]*Gr+Ur*is>>8}}}function Nr(Yr,Fr,Br){const Ur=Yr.length,Qr=1/255;for(let Vr=3;Vr<Ur;Vr+=4){const Gr=Br?Br[Yr[Vr]]:Yr[Vr];Fr[Vr]=Fr[Vr]*Gr*Qr|0}}function _r(Yr,Fr,Br){const Ur=Yr.length;for(let Qr=3;Qr<Ur;Qr+=4){const Vr=Yr[Qr-3]*77+Yr[Qr-2]*152+Yr[Qr-1]*28;Fr[Qr]=Br?Fr[Qr]*Br[Vr>>8]>>8:Fr[Qr]*Vr>>16}}function Dr(Yr,Fr,Br,Ur,Qr,Vr,Gr,is,ps,As,Cs){const jr=!!Vr,Wr=jr?Vr[0]:0,ds=jr?Vr[1]:0,ls=jr?Vr[2]:0,ss=Qr==="Luminosity"?_r:Nr,Xr=Math.min(Ur,Math.ceil(1048576/Br));for(let cs=0;cs<Ur;cs+=Xr){const hs=Math.min(Xr,Ur-cs),ms=Yr.getImageData(is-As,cs+(ps-Cs),Br,hs),Ts=Fr.getImageData(is,cs+ps,Br,hs);jr&&Rr(ms.data,Wr,ds,ls),ss(ms.data,Ts.data,Gr),Fr.putImageData(Ts,is,cs+ps)}}function Pr(Yr,Fr,Br,Ur){const Qr=Ur[0],Vr=Ur[1],Gr=Ur[2]-Qr,is=Ur[3]-Vr;Gr===0||is===0||(Dr(Fr.context,Br,Gr,is,Fr.subtype,Fr.backdrop,Fr.transferMap,Qr,Vr,Fr.offsetX,Fr.offsetY),Yr.save(),Yr.globalAlpha=1,Yr.globalCompositeOperation="source-over",Yr.setTransform(1,0,0,1,0,0),Yr.drawImage(Br.canvas,0,0),Yr.restore())}function Ir(Yr,Fr){const Br=cr.Util.singularValueDecompose2dScale(Yr);Br[0]=Math.fround(Br[0]),Br[1]=Math.fround(Br[1]);const Ur=Math.fround((globalThis.devicePixelRatio||1)*ur.PixelsPerInch.PDF_TO_CSS_UNITS);return Fr!==void 0?Fr:Br[0]<=Ur||Br[1]<=Ur}const $r=["butt","round","square"],Zr=["miter","round","bevel"],rs={},qr={},ys=class ys{constructor(Fr,Br,Ur,Qr,Vr,{optionalContentConfig:Gr,markedContentStack:is=null},ps,As){_s(this,Jr);this.ctx=Fr,this.current=new Ar(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Br,this.objs=Ur,this.canvasFactory=Qr,this.filterFactory=Vr,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=is||[],this.optionalContentConfig=Gr,this.cachedCanvases=new xr(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=ps,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=As,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(Fr,Br=null){return typeof Fr=="string"?Fr.startsWith("g_")?this.commonObjs.get(Fr):this.objs.get(Fr):Br}beginDrawing({transform:Fr,viewport:Br,transparency:Ur=!1,background:Qr=null}){const Vr=this.ctx.canvas.width,Gr=this.ctx.canvas.height,is=this.ctx.fillStyle;if(this.ctx.fillStyle=Qr||"#ffffff",this.ctx.fillRect(0,0,Vr,Gr),this.ctx.fillStyle=is,Ur){const ps=this.cachedCanvases.getCanvas("transparent",Vr,Gr);this.compositeCtx=this.ctx,this.transparentCanvas=ps.canvas,this.ctx=ps.context,this.ctx.save(),this.ctx.transform(...(0,ur.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),Mr(this.ctx),Fr&&(this.ctx.transform(...Fr),this.outputScaleX=Fr[0],this.outputScaleY=Fr[0]),this.ctx.transform(...Br.transform),this.viewportScale=Br.scale,this.baseTransform=(0,ur.getCurrentTransform)(this.ctx)}executeOperatorList(Fr,Br,Ur,Qr){const Vr=Fr.argsArray,Gr=Fr.fnArray;let is=Br||0;const ps=Vr.length;if(ps===is)return is;const As=ps-is>yr&&typeof Ur=="function",Cs=As?Date.now()+gr:0;let jr=0;const Wr=this.commonObjs,ds=this.objs;let ls;for(;;){if(Qr!==void 0&&is===Qr.nextBreakPoint)return Qr.breakIt(is,Ur),is;if(ls=Gr[is],ls!==cr.OPS.dependency)this[ls].apply(this,Vr[is]);else for(const ss of Vr[is]){const Lr=ss.startsWith("g_")?Wr:ds;if(!Lr.has(ss))return Lr.get(ss,Ur),is}if(is++,is===ps)return is;if(As&&++jr>yr){if(Date.now()>Cs)return Ur(),is;jr=0}}}endDrawing(){Es(this,Jr,so).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const Fr of this._cachedBitmapsMap.values()){for(const Br of Fr.values())typeof HTMLCanvasElement<"u"&&Br instanceof HTMLCanvasElement&&(Br.width=Br.height=0);Fr.clear()}this._cachedBitmapsMap.clear(),Es(this,Jr,io).call(this)}_scaleImage(Fr,Br){const Ur=Fr.width,Qr=Fr.height;let Vr=Math.max(Math.hypot(Br[0],Br[1]),1),Gr=Math.max(Math.hypot(Br[2],Br[3]),1),is=Ur,ps=Qr,As="prescale1",Cs,jr;for(;Vr>2&&is>1||Gr>2&&ps>1;){let Wr=is,ds=ps;Vr>2&&is>1&&(Wr=is>=16384?Math.floor(is/2)-1||1:Math.ceil(is/2),Vr/=is/Wr),Gr>2&&ps>1&&(ds=ps>=16384?Math.floor(ps/2)-1||1:Math.ceil(ps)/2,Gr/=ps/ds),Cs=this.cachedCanvases.getCanvas(As,Wr,ds),jr=Cs.context,jr.clearRect(0,0,Wr,ds),jr.drawImage(Fr,0,0,is,ps,0,0,Wr,ds),Fr=Cs.canvas,is=Wr,ps=ds,As=As==="prescale1"?"prescale2":"prescale1"}return{img:Fr,paintWidth:is,paintHeight:ps}}_createMaskCanvas(Fr){const Br=this.ctx,{width:Ur,height:Qr}=Fr,Vr=this.current.fillColor,Gr=this.current.patternFill,is=(0,ur.getCurrentTransform)(Br);let ps,As,Cs,jr;if((Fr.bitmap||Fr.data)&&Fr.count>1){const fs=Fr.bitmap||Fr.data.buffer;As=JSON.stringify(Gr?is:[is.slice(0,4),Vr]),ps=this._cachedBitmapsMap.get(fs),ps||(ps=new Map,this._cachedBitmapsMap.set(fs,ps));const Is=ps.get(As);if(Is&&!Gr){const Fs=Math.round(Math.min(is[0],is[2])+is[4]),Gs=Math.round(Math.min(is[1],is[3])+is[5]);return{canvas:Is,offsetX:Fs,offsetY:Gs}}Cs=Is}Cs||(jr=this.cachedCanvases.getCanvas("maskCanvas",Ur,Qr),Cr(jr.context,Fr));let Wr=cr.Util.transform(is,[1/Ur,0,0,-1/Qr,0,0]);Wr=cr.Util.transform(Wr,[1,0,0,1,0,-Qr]);const ds=cr.Util.applyTransform([0,0],Wr),ls=cr.Util.applyTransform([Ur,Qr],Wr),ss=cr.Util.normalizeRect([ds[0],ds[1],ls[0],ls[1]]),Lr=Math.round(ss[2]-ss[0])||1,Xr=Math.round(ss[3]-ss[1])||1,cs=this.cachedCanvases.getCanvas("fillCanvas",Lr,Xr),hs=cs.context,ms=Math.min(ds[0],ls[0]),Ts=Math.min(ds[1],ls[1]);hs.translate(-ms,-Ts),hs.transform(...Wr),Cs||(Cs=this._scaleImage(jr.canvas,(0,ur.getCurrentTransformInverse)(hs)),Cs=Cs.img,ps&&Gr&&ps.set(As,Cs)),hs.imageSmoothingEnabled=Ir((0,ur.getCurrentTransform)(hs),Fr.interpolate),Er(hs,Cs,0,0,Cs.width,Cs.height,0,0,Ur,Qr),hs.globalCompositeOperation="source-in";const ks=cr.Util.transform((0,ur.getCurrentTransformInverse)(hs),[1,0,0,1,-ms,-Ts]);return hs.fillStyle=Gr?Vr.getPattern(Br,this,ks,dr.PathType.FILL):Vr,hs.fillRect(0,0,Ur,Qr),ps&&!Gr&&(this.cachedCanvases.delete("fillCanvas"),ps.set(As,cs.canvas)),{canvas:cs.canvas,offsetX:Math.round(ms),offsetY:Math.round(Ts)}}setLineWidth(Fr){Fr!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=Fr,this.ctx.lineWidth=Fr}setLineCap(Fr){this.ctx.lineCap=$r[Fr]}setLineJoin(Fr){this.ctx.lineJoin=Zr[Fr]}setMiterLimit(Fr){this.ctx.miterLimit=Fr}setDash(Fr,Br){const Ur=this.ctx;Ur.setLineDash!==void 0&&(Ur.setLineDash(Fr),Ur.lineDashOffset=Br)}setRenderingIntent(Fr){}setFlatness(Fr){}setGState(Fr){for(const[Br,Ur]of Fr)switch(Br){case"LW":this.setLineWidth(Ur);break;case"LC":this.setLineCap(Ur);break;case"LJ":this.setLineJoin(Ur);break;case"ML":this.setMiterLimit(Ur);break;case"D":this.setDash(Ur[0],Ur[1]);break;case"RI":this.setRenderingIntent(Ur);break;case"FL":this.setFlatness(Ur);break;case"Font":this.setFont(Ur[0],Ur[1]);break;case"CA":this.current.strokeAlpha=Ur;break;case"ca":this.current.fillAlpha=Ur,this.ctx.globalAlpha=Ur;break;case"BM":this.ctx.globalCompositeOperation=Ur;break;case"SMask":this.current.activeSMask=Ur?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(Ur);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const Fr=this.inSMaskMode;this.current.activeSMask&&!Fr?this.beginSMaskMode():!this.current.activeSMask&&Fr&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const Fr=this.ctx.canvas.width,Br=this.ctx.canvas.height,Ur="smaskGroupAt"+this.groupLevel,Qr=this.cachedCanvases.getCanvas(Ur,Fr,Br);this.suspendedCtx=this.ctx,this.ctx=Qr.context;const Vr=this.ctx;Vr.setTransform(...(0,ur.getCurrentTransform)(this.suspendedCtx)),kr(this.suspendedCtx,Vr),Sr(Vr,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),kr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(Fr){if(!this.current.activeSMask)return;Fr?(Fr[0]=Math.floor(Fr[0]),Fr[1]=Math.floor(Fr[1]),Fr[2]=Math.ceil(Fr[2]),Fr[3]=Math.ceil(Fr[3])):Fr=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Br=this.current.activeSMask,Ur=this.suspendedCtx;Pr(Ur,Br,this.ctx,Fr),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(kr(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const Fr=this.current;this.stateStack.push(Fr),this.current=Fr.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),kr(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(Fr,Br,Ur,Qr,Vr,Gr){this.ctx.transform(Fr,Br,Ur,Qr,Vr,Gr),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(Fr,Br,Ur){const Qr=this.ctx,Vr=this.current;let Gr=Vr.x,is=Vr.y,ps,As;const Cs=(0,ur.getCurrentTransform)(Qr),jr=Cs[0]===0&&Cs[3]===0||Cs[1]===0&&Cs[2]===0,Wr=jr?Ur.slice(0):null;for(let ds=0,ls=0,ss=Fr.length;ds<ss;ds++)switch(Fr[ds]|0){case cr.OPS.rectangle:Gr=Br[ls++],is=Br[ls++];const Lr=Br[ls++],Xr=Br[ls++],cs=Gr+Lr,hs=is+Xr;Qr.moveTo(Gr,is),Lr===0||Xr===0?Qr.lineTo(cs,hs):(Qr.lineTo(cs,is),Qr.lineTo(cs,hs),Qr.lineTo(Gr,hs)),jr||Vr.updateRectMinMax(Cs,[Gr,is,cs,hs]),Qr.closePath();break;case cr.OPS.moveTo:Gr=Br[ls++],is=Br[ls++],Qr.moveTo(Gr,is),jr||Vr.updatePathMinMax(Cs,Gr,is);break;case cr.OPS.lineTo:Gr=Br[ls++],is=Br[ls++],Qr.lineTo(Gr,is),jr||Vr.updatePathMinMax(Cs,Gr,is);break;case cr.OPS.curveTo:ps=Gr,As=is,Gr=Br[ls+4],is=Br[ls+5],Qr.bezierCurveTo(Br[ls],Br[ls+1],Br[ls+2],Br[ls+3],Gr,is),Vr.updateCurvePathMinMax(Cs,ps,As,Br[ls],Br[ls+1],Br[ls+2],Br[ls+3],Gr,is,Wr),ls+=6;break;case cr.OPS.curveTo2:ps=Gr,As=is,Qr.bezierCurveTo(Gr,is,Br[ls],Br[ls+1],Br[ls+2],Br[ls+3]),Vr.updateCurvePathMinMax(Cs,ps,As,Gr,is,Br[ls],Br[ls+1],Br[ls+2],Br[ls+3],Wr),Gr=Br[ls+2],is=Br[ls+3],ls+=4;break;case cr.OPS.curveTo3:ps=Gr,As=is,Gr=Br[ls+2],is=Br[ls+3],Qr.bezierCurveTo(Br[ls],Br[ls+1],Gr,is,Gr,is),Vr.updateCurvePathMinMax(Cs,ps,As,Br[ls],Br[ls+1],Gr,is,Gr,is,Wr),ls+=4;break;case cr.OPS.closePath:Qr.closePath();break}jr&&Vr.updateScalingPathMinMax(Cs,Wr),Vr.setCurrentPoint(Gr,is)}closePath(){this.ctx.closePath()}stroke(Fr=!0){const Br=this.ctx,Ur=this.current.strokeColor;Br.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof Ur=="object"&&(Ur!=null&&Ur.getPattern)?(Br.save(),Br.strokeStyle=Ur.getPattern(Br,this,(0,ur.getCurrentTransformInverse)(Br),dr.PathType.STROKE),this.rescaleAndStroke(!1),Br.restore()):this.rescaleAndStroke(!0)),Fr&&this.consumePath(this.current.getClippedPathBoundingBox()),Br.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(Fr=!0){const Br=this.ctx,Ur=this.current.fillColor,Qr=this.current.patternFill;let Vr=!1;Qr&&(Br.save(),Br.fillStyle=Ur.getPattern(Br,this,(0,ur.getCurrentTransformInverse)(Br),dr.PathType.FILL),Vr=!0);const Gr=this.current.getClippedPathBoundingBox();this.contentVisible&&Gr!==null&&(this.pendingEOFill?(Br.fill("evenodd"),this.pendingEOFill=!1):Br.fill()),Vr&&Br.restore(),Fr&&this.consumePath(Gr)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=rs}eoClip(){this.pendingClip=qr}beginText(){this.current.textMatrix=cr.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const Fr=this.pendingTextPaths,Br=this.ctx;if(Fr===void 0){Br.beginPath();return}Br.save(),Br.beginPath();for(const Ur of Fr)Br.setTransform(...Ur.transform),Br.translate(Ur.x,Ur.y),Ur.addToPath(Br,Ur.fontSize);Br.restore(),Br.clip(),Br.beginPath(),delete this.pendingTextPaths}setCharSpacing(Fr){this.current.charSpacing=Fr}setWordSpacing(Fr){this.current.wordSpacing=Fr}setHScale(Fr){this.current.textHScale=Fr/100}setLeading(Fr){this.current.leading=-Fr}setFont(Fr,Br){var Cs;const Ur=this.commonObjs.get(Fr),Qr=this.current;if(!Ur)throw new Error(`Can't find font for ${Fr}`);if(Qr.fontMatrix=Ur.fontMatrix||cr.FONT_IDENTITY_MATRIX,(Qr.fontMatrix[0]===0||Qr.fontMatrix[3]===0)&&(0,cr.warn)("Invalid font matrix for font "+Fr),Br<0?(Br=-Br,Qr.fontDirection=-1):Qr.fontDirection=1,this.current.font=Ur,this.current.fontSize=Br,Ur.isType3Font)return;const Vr=Ur.loadedName||"sans-serif",Gr=((Cs=Ur.systemFontInfo)==null?void 0:Cs.css)||`"${Vr}", ${Ur.fallbackName}`;let is="normal";Ur.black?is="900":Ur.bold&&(is="bold");const ps=Ur.italic?"italic":"normal";let As=Br;Br<fr?As=fr:Br>pr&&(As=pr),this.current.fontSizeScale=Br/As,this.ctx.font=`${ps} ${is} ${As}px ${Gr}`}setTextRenderingMode(Fr){this.current.textRenderingMode=Fr}setTextRise(Fr){this.current.textRise=Fr}moveText(Fr,Br){this.current.x=this.current.lineX+=Fr,this.current.y=this.current.lineY+=Br}setLeadingMoveText(Fr,Br){this.setLeading(-Br),this.moveText(Fr,Br)}setTextMatrix(Fr,Br,Ur,Qr,Vr,Gr){this.current.textMatrix=[Fr,Br,Ur,Qr,Vr,Gr],this.current.textMatrixScale=Math.hypot(Fr,Br),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(Fr,Br,Ur,Qr){const Vr=this.ctx,Gr=this.current,is=Gr.font,ps=Gr.textRenderingMode,As=Gr.fontSize/Gr.fontSizeScale,Cs=ps&cr.TextRenderingMode.FILL_STROKE_MASK,jr=!!(ps&cr.TextRenderingMode.ADD_TO_PATH_FLAG),Wr=Gr.patternFill&&!is.missingFile;let ds;(is.disableFontFace||jr||Wr)&&(ds=is.getPathGenerator(this.commonObjs,Fr)),is.disableFontFace||Wr?(Vr.save(),Vr.translate(Br,Ur),Vr.beginPath(),ds(Vr,As),Qr&&Vr.setTransform(...Qr),(Cs===cr.TextRenderingMode.FILL||Cs===cr.TextRenderingMode.FILL_STROKE)&&Vr.fill(),(Cs===cr.TextRenderingMode.STROKE||Cs===cr.TextRenderingMode.FILL_STROKE)&&Vr.stroke(),Vr.restore()):((Cs===cr.TextRenderingMode.FILL||Cs===cr.TextRenderingMode.FILL_STROKE)&&Vr.fillText(Fr,Br,Ur),(Cs===cr.TextRenderingMode.STROKE||Cs===cr.TextRenderingMode.FILL_STROKE)&&Vr.strokeText(Fr,Br,Ur)),jr&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,ur.getCurrentTransform)(Vr),x:Br,y:Ur,fontSize:As,addToPath:ds})}get isFontSubpixelAAEnabled(){const{context:Fr}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);Fr.scale(1.5,1),Fr.fillText("I",0,10);const Br=Fr.getImageData(0,0,10,10).data;let Ur=!1;for(let Qr=3;Qr<Br.length;Qr+=4)if(Br[Qr]>0&&Br[Qr]<255){Ur=!0;break}return(0,cr.shadow)(this,"isFontSubpixelAAEnabled",Ur)}showText(Fr){const Br=this.current,Ur=Br.font;if(Ur.isType3Font)return this.showType3Text(Fr);const Qr=Br.fontSize;if(Qr===0)return;const Vr=this.ctx,Gr=Br.fontSizeScale,is=Br.charSpacing,ps=Br.wordSpacing,As=Br.fontDirection,Cs=Br.textHScale*As,jr=Fr.length,Wr=Ur.vertical,ds=Wr?1:-1,ls=Ur.defaultVMetrics,ss=Qr*Br.fontMatrix[0],Lr=Br.textRenderingMode===cr.TextRenderingMode.FILL&&!Ur.disableFontFace&&!Br.patternFill;Vr.save(),Vr.transform(...Br.textMatrix),Vr.translate(Br.x,Br.y+Br.textRise),As>0?Vr.scale(Cs,-1):Vr.scale(Cs,1);let Xr;if(Br.patternFill){Vr.save();const ks=Br.fillColor.getPattern(Vr,this,(0,ur.getCurrentTransformInverse)(Vr),dr.PathType.FILL);Xr=(0,ur.getCurrentTransform)(Vr),Vr.restore(),Vr.fillStyle=ks}let cs=Br.lineWidth;const hs=Br.textMatrixScale;if(hs===0||cs===0){const ks=Br.textRenderingMode&cr.TextRenderingMode.FILL_STROKE_MASK;(ks===cr.TextRenderingMode.STROKE||ks===cr.TextRenderingMode.FILL_STROKE)&&(cs=this.getSinglePixelWidth())}else cs/=hs;if(Gr!==1&&(Vr.scale(Gr,Gr),cs/=Gr),Vr.lineWidth=cs,Ur.isInvalidPDFjsFont){const ks=[];let fs=0;for(const Is of Fr)ks.push(Is.unicode),fs+=Is.width;Vr.fillText(ks.join(""),0,0),Br.x+=fs*ss*Cs,Vr.restore(),this.compose();return}let ms=0,Ts;for(Ts=0;Ts<jr;++Ts){const ks=Fr[Ts];if(typeof ks=="number"){ms+=ds*ks*Qr/1e3;continue}let fs=!1;const Is=(ks.isSpace?ps:0)+is,Fs=ks.fontChar,Gs=ks.accent;let gs,xs,Ss=ks.width;if(Wr){const $s=ks.vmetric||ls,Ws=-(ks.vmetric?$s[1]:Ss*.5)*ss,Ns=$s[2]*ss;Ss=$s?-$s[0]:Ss,gs=Ws/Gr,xs=(ms+Ns)/Gr}else gs=ms/Gr,xs=0;if(Ur.remeasure&&Ss>0){const $s=Vr.measureText(Fs).width*1e3/Qr*Gr;if(Ss<$s&&this.isFontSubpixelAAEnabled){const Ws=Ss/$s;fs=!0,Vr.save(),Vr.scale(Ws,1),gs/=Ws}else Ss!==$s&&(gs+=(Ss-$s)/2e3*Qr/Gr)}if(this.contentVisible&&(ks.isInFont||Ur.missingFile)){if(Lr&&!Gs)Vr.fillText(Fs,gs,xs);else if(this.paintChar(Fs,gs,xs,Xr),Gs){const $s=gs+Qr*Gs.offset.x/Gr,Ws=xs-Qr*Gs.offset.y/Gr;this.paintChar(Gs.fontChar,$s,Ws,Xr)}}const Ps=Wr?Ss*ss-Is*As:Ss*ss+Is*As;ms+=Ps,fs&&Vr.restore()}Wr?Br.y-=ms:Br.x+=ms*Cs,Vr.restore(),this.compose()}showType3Text(Fr){const Br=this.ctx,Ur=this.current,Qr=Ur.font,Vr=Ur.fontSize,Gr=Ur.fontDirection,is=Qr.vertical?1:-1,ps=Ur.charSpacing,As=Ur.wordSpacing,Cs=Ur.textHScale*Gr,jr=Ur.fontMatrix||cr.FONT_IDENTITY_MATRIX,Wr=Fr.length,ds=Ur.textRenderingMode===cr.TextRenderingMode.INVISIBLE;let ls,ss,Lr,Xr;if(!(ds||Vr===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Br.save(),Br.transform(...Ur.textMatrix),Br.translate(Ur.x,Ur.y),Br.scale(Cs,Gr),ls=0;ls<Wr;++ls){if(ss=Fr[ls],typeof ss=="number"){Xr=is*ss*Vr/1e3,this.ctx.translate(Xr,0),Ur.x+=Xr*Cs;continue}const cs=(ss.isSpace?As:0)+ps,hs=Qr.charProcOperatorList[ss.operatorListId];if(!hs){(0,cr.warn)(`Type3 character "${ss.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=ss,this.save(),Br.scale(Vr,Vr),Br.transform(...jr),this.executeOperatorList(hs),this.restore()),Lr=cr.Util.applyTransform([ss.width,0],jr)[0]*Vr+cs,Br.translate(Lr,0),Ur.x+=Lr*Cs}Br.restore(),this.processingType3=null}}setCharWidth(Fr,Br){}setCharWidthAndBounds(Fr,Br,Ur,Qr,Vr,Gr){this.ctx.rect(Ur,Qr,Vr-Ur,Gr-Qr),this.ctx.clip(),this.endPath()}getColorN_Pattern(Fr){let Br;if(Fr[0]==="TilingPattern"){const Ur=Fr[1],Qr=this.baseTransform||(0,ur.getCurrentTransform)(this.ctx),Vr={createCanvasGraphics:Gr=>new ys(Gr,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Br=new dr.TilingPattern(Fr,Ur,this.ctx,Vr,Qr)}else Br=this._getPattern(Fr[1],Fr[2]);return Br}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(Fr,Br,Ur){const Qr=cr.Util.makeHexColor(Fr,Br,Ur);this.ctx.strokeStyle=Qr,this.current.strokeColor=Qr}setFillRGBColor(Fr,Br,Ur){const Qr=cr.Util.makeHexColor(Fr,Br,Ur);this.ctx.fillStyle=Qr,this.current.fillColor=Qr,this.current.patternFill=!1}_getPattern(Fr,Br=null){let Ur;return this.cachedPatterns.has(Fr)?Ur=this.cachedPatterns.get(Fr):(Ur=(0,dr.getShadingPattern)(this.getObject(Fr)),this.cachedPatterns.set(Fr,Ur)),Br&&(Ur.matrix=Br),Ur}shadingFill(Fr){if(!this.contentVisible)return;const Br=this.ctx;this.save();const Ur=this._getPattern(Fr);Br.fillStyle=Ur.getPattern(Br,this,(0,ur.getCurrentTransformInverse)(Br),dr.PathType.SHADING);const Qr=(0,ur.getCurrentTransformInverse)(Br);if(Qr){const{width:Vr,height:Gr}=Br.canvas,[is,ps,As,Cs]=cr.Util.getAxialAlignedBoundingBox([0,0,Vr,Gr],Qr);this.ctx.fillRect(is,ps,As-is,Cs-ps)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,cr.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,cr.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(Fr,Br){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(Fr)&&Fr.length===6&&this.transform(...Fr),this.baseTransform=(0,ur.getCurrentTransform)(this.ctx),Br)){const Ur=Br[2]-Br[0],Qr=Br[3]-Br[1];this.ctx.rect(Br[0],Br[1],Ur,Qr),this.current.updateRectMinMax((0,ur.getCurrentTransform)(this.ctx),Br),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(Fr){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Br=this.ctx;Fr.isolated||(0,cr.info)("TODO: Support non-isolated groups."),Fr.knockout&&(0,cr.warn)("Knockout groups not supported.");const Ur=(0,ur.getCurrentTransform)(Br);if(Fr.matrix&&Br.transform(...Fr.matrix),!Fr.bbox)throw new Error("Bounding box is required.");let Qr=cr.Util.getAxialAlignedBoundingBox(Fr.bbox,(0,ur.getCurrentTransform)(Br));const Vr=[0,0,Br.canvas.width,Br.canvas.height];Qr=cr.Util.intersect(Qr,Vr)||[0,0,0,0];const Gr=Math.floor(Qr[0]),is=Math.floor(Qr[1]);let ps=Math.max(Math.ceil(Qr[2])-Gr,1),As=Math.max(Math.ceil(Qr[3])-is,1),Cs=1,jr=1;ps>mr&&(Cs=ps/mr,ps=mr),As>mr&&(jr=As/mr,As=mr),this.current.startNewPathAndClipBox([0,0,ps,As]);let Wr="groupAt"+this.groupLevel;Fr.smask&&(Wr+="_smask_"+this.smaskCounter++%2);const ds=this.cachedCanvases.getCanvas(Wr,ps,As),ls=ds.context;ls.scale(1/Cs,1/jr),ls.translate(-Gr,-is),ls.transform(...Ur),Fr.smask?this.smaskStack.push({canvas:ds.canvas,context:ls,offsetX:Gr,offsetY:is,scaleX:Cs,scaleY:jr,subtype:Fr.smask.subtype,backdrop:Fr.smask.backdrop,transferMap:Fr.smask.transferMap||null,startTransformInverse:null}):(Br.setTransform(1,0,0,1,0,0),Br.translate(Gr,is),Br.scale(Cs,jr),Br.save()),kr(Br,ls),this.ctx=ls,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Br),this.groupLevel++}endGroup(Fr){if(!this.contentVisible)return;this.groupLevel--;const Br=this.ctx,Ur=this.groupStack.pop();if(this.ctx=Ur,this.ctx.imageSmoothingEnabled=!1,Fr.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Qr=(0,ur.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Qr);const Vr=cr.Util.getAxialAlignedBoundingBox([0,0,Br.canvas.width,Br.canvas.height],Qr);this.ctx.drawImage(Br.canvas,0,0),this.ctx.restore(),this.compose(Vr)}}beginAnnotation(Fr,Br,Ur,Qr,Vr){if(Es(this,Jr,so).call(this),Mr(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Br)&&Br.length===4){const Gr=Br[2]-Br[0],is=Br[3]-Br[1];if(Vr&&this.annotationCanvasMap){Ur=Ur.slice(),Ur[4]-=Br[0],Ur[5]-=Br[1],Br=Br.slice(),Br[0]=Br[1]=0,Br[2]=Gr,Br[3]=is;const[ps,As]=cr.Util.singularValueDecompose2dScale((0,ur.getCurrentTransform)(this.ctx)),{viewportScale:Cs}=this,jr=Math.ceil(Gr*this.outputScaleX*Cs),Wr=Math.ceil(is*this.outputScaleY*Cs);this.annotationCanvas=this.canvasFactory.create(jr,Wr);const{canvas:ds,context:ls}=this.annotationCanvas;this.annotationCanvasMap.set(Fr,ds),this.annotationCanvas.savedCtx=this.ctx,this.ctx=ls,this.ctx.save(),this.ctx.setTransform(ps,0,0,-As,0,is*As),Mr(this.ctx)}else Mr(this.ctx),this.ctx.rect(Br[0],Br[1],Gr,is),this.ctx.clip(),this.endPath()}this.current=new Ar(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...Ur),this.transform(...Qr)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),Es(this,Jr,io).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(Fr){if(!this.contentVisible)return;const Br=Fr.count;Fr=this.getObject(Fr.data,Fr),Fr.count=Br;const Ur=this.ctx,Qr=this.processingType3;if(Qr&&(Qr.compiled===void 0&&(Qr.compiled=wr(Fr)),Qr.compiled)){Qr.compiled(Ur);return}const Vr=this._createMaskCanvas(Fr),Gr=Vr.canvas;Ur.save(),Ur.setTransform(1,0,0,1,0,0),Ur.drawImage(Gr,Vr.offsetX,Vr.offsetY),Ur.restore(),this.compose()}paintImageMaskXObjectRepeat(Fr,Br,Ur=0,Qr=0,Vr,Gr){if(!this.contentVisible)return;Fr=this.getObject(Fr.data,Fr);const is=this.ctx;is.save();const ps=(0,ur.getCurrentTransform)(is);is.transform(Br,Ur,Qr,Vr,0,0);const As=this._createMaskCanvas(Fr);is.setTransform(1,0,0,1,As.offsetX-ps[4],As.offsetY-ps[5]);for(let Cs=0,jr=Gr.length;Cs<jr;Cs+=2){const Wr=cr.Util.transform(ps,[Br,Ur,Qr,Vr,Gr[Cs],Gr[Cs+1]]),[ds,ls]=cr.Util.applyTransform([0,0],Wr);is.drawImage(As.canvas,ds,ls)}is.restore(),this.compose()}paintImageMaskXObjectGroup(Fr){if(!this.contentVisible)return;const Br=this.ctx,Ur=this.current.fillColor,Qr=this.current.patternFill;for(const Vr of Fr){const{data:Gr,width:is,height:ps,transform:As}=Vr,Cs=this.cachedCanvases.getCanvas("maskCanvas",is,ps),jr=Cs.context;jr.save();const Wr=this.getObject(Gr,Vr);Cr(jr,Wr),jr.globalCompositeOperation="source-in",jr.fillStyle=Qr?Ur.getPattern(jr,this,(0,ur.getCurrentTransformInverse)(Br),dr.PathType.FILL):Ur,jr.fillRect(0,0,is,ps),jr.restore(),Br.save(),Br.transform(...As),Br.scale(1,-1),Er(Br,Cs.canvas,0,0,is,ps,0,-1,1,1),Br.restore()}this.compose()}paintImageXObject(Fr){if(!this.contentVisible)return;const Br=this.getObject(Fr);if(!Br){(0,cr.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Br)}paintImageXObjectRepeat(Fr,Br,Ur,Qr){if(!this.contentVisible)return;const Vr=this.getObject(Fr);if(!Vr){(0,cr.warn)("Dependent image isn't ready yet");return}const Gr=Vr.width,is=Vr.height,ps=[];for(let As=0,Cs=Qr.length;As<Cs;As+=2)ps.push({transform:[Br,0,0,Ur,Qr[As],Qr[As+1]],x:0,y:0,w:Gr,h:is});this.paintInlineImageXObjectGroup(Vr,ps)}applyTransferMapsToCanvas(Fr){return this.current.transferMaps!=="none"&&(Fr.filter=this.current.transferMaps,Fr.drawImage(Fr.canvas,0,0),Fr.filter="none"),Fr.canvas}applyTransferMapsToBitmap(Fr){if(this.current.transferMaps==="none")return Fr.bitmap;const{bitmap:Br,width:Ur,height:Qr}=Fr,Vr=this.cachedCanvases.getCanvas("inlineImage",Ur,Qr),Gr=Vr.context;return Gr.filter=this.current.transferMaps,Gr.drawImage(Br,0,0),Gr.filter="none",Vr.canvas}paintInlineImageXObject(Fr){if(!this.contentVisible)return;const Br=Fr.width,Ur=Fr.height,Qr=this.ctx;if(this.save(),!cr.isNodeJS){const{filter:is}=Qr;is!=="none"&&is!==""&&(Qr.filter="none")}Qr.scale(1/Br,-1/Ur);let Vr;if(Fr.bitmap)Vr=this.applyTransferMapsToBitmap(Fr);else if(typeof HTMLElement=="function"&&Fr instanceof HTMLElement||!Fr.data)Vr=Fr;else{const ps=this.cachedCanvases.getCanvas("inlineImage",Br,Ur).context;Tr(ps,Fr),Vr=this.applyTransferMapsToCanvas(ps)}const Gr=this._scaleImage(Vr,(0,ur.getCurrentTransformInverse)(Qr));Qr.imageSmoothingEnabled=Ir((0,ur.getCurrentTransform)(Qr),Fr.interpolate),Er(Qr,Gr.img,0,0,Gr.paintWidth,Gr.paintHeight,0,-Ur,Br,Ur),this.compose(),this.restore()}paintInlineImageXObjectGroup(Fr,Br){if(!this.contentVisible)return;const Ur=this.ctx;let Qr;if(Fr.bitmap)Qr=Fr.bitmap;else{const Vr=Fr.width,Gr=Fr.height,ps=this.cachedCanvases.getCanvas("inlineImage",Vr,Gr).context;Tr(ps,Fr),Qr=this.applyTransferMapsToCanvas(ps)}for(const Vr of Br)Ur.save(),Ur.transform(...Vr.transform),Ur.scale(1,-1),Er(Ur,Qr,Vr.x,Vr.y,Vr.w,Vr.h,0,-1,1,1),Ur.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(Fr){}markPointProps(Fr,Br){}beginMarkedContent(Fr){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(Fr,Br){Fr==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Br)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(Fr){const Br=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(Fr);const Ur=this.ctx;this.pendingClip&&(Br||(this.pendingClip===qr?Ur.clip("evenodd"):Ur.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),Ur.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const Fr=(0,ur.getCurrentTransform)(this.ctx);if(Fr[1]===0&&Fr[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(Fr[0]),Math.abs(Fr[3]));else{const Br=Math.abs(Fr[0]*Fr[3]-Fr[2]*Fr[1]),Ur=Math.hypot(Fr[0],Fr[2]),Qr=Math.hypot(Fr[1],Fr[3]);this._cachedGetSinglePixelWidth=Math.max(Ur,Qr)/Br}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:Fr}=this.current,{a:Br,b:Ur,c:Qr,d:Vr}=this.ctx.getTransform();let Gr,is;if(Ur===0&&Qr===0){const ps=Math.abs(Br),As=Math.abs(Vr);if(ps===As)if(Fr===0)Gr=is=1/ps;else{const Cs=ps*Fr;Gr=is=Cs<1?1/Cs:1}else if(Fr===0)Gr=1/ps,is=1/As;else{const Cs=ps*Fr,jr=As*Fr;Gr=Cs<1?1/Cs:1,is=jr<1?1/jr:1}}else{const ps=Math.abs(Br*Vr-Ur*Qr),As=Math.hypot(Br,Ur),Cs=Math.hypot(Qr,Vr);if(Fr===0)Gr=Cs/ps,is=As/ps;else{const jr=Fr*ps;Gr=Cs>jr?Cs/jr:1,is=As>jr?As/jr:1}}this._cachedScaleForStroking[0]=Gr,this._cachedScaleForStroking[1]=is}return this._cachedScaleForStroking}rescaleAndStroke(Fr){const{ctx:Br}=this,{lineWidth:Ur}=this.current,[Qr,Vr]=this.getScaleForStroking();if(Br.lineWidth=Ur||1,Qr===1&&Vr===1){Br.stroke();return}const Gr=Br.getLineDash();if(Fr&&Br.save(),Br.scale(Qr,Vr),Gr.length>0){const is=Math.max(Qr,Vr);Br.setLineDash(Gr.map(ps=>ps/is)),Br.lineDashOffset/=is}Br.stroke(),Fr&&Br.restore()}isContentVisible(){for(let Fr=this.markedContentStack.length-1;Fr>=0;Fr--)if(!this.markedContentStack[Fr].visible)return!1;return!0}};Jr=new WeakSet,so=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},io=function(){if(this.pageColors){const Fr=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(Fr!=="none"){const Br=this.ctx.filter;this.ctx.filter=Fr,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Br}}};let zr=ys;or.CanvasGraphics=zr;for(const Yr in cr.OPS)zr.prototype[Yr]!==void 0&&(zr.prototype[cr.OPS[Yr]]=zr.prototype[Yr])},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.TilingPattern=or.PathType=void 0,or.getShadingPattern=br;var cr=lr(1),ur=lr(6);const dr={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};or.PathType=dr;function hr(wr,Ar){if(!Ar)return;const Tr=Ar[2]-Ar[0],Cr=Ar[3]-Ar[1],kr=new Path2D;kr.rect(Ar[0],Ar[1],Tr,Cr),wr.clip(kr)}class fr{constructor(){this.constructor===fr&&(0,cr.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,cr.unreachable)("Abstract method `getPattern` called.")}}class pr extends fr{constructor(Ar){super(),this._type=Ar[1],this._bbox=Ar[2],this._colorStops=Ar[3],this._p0=Ar[4],this._p1=Ar[5],this._r0=Ar[6],this._r1=Ar[7],this.matrix=null}_createGradient(Ar){let Tr;this._type==="axial"?Tr=Ar.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Tr=Ar.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const Cr of this._colorStops)Tr.addColorStop(Cr[0],Cr[1]);return Tr}getPattern(Ar,Tr,Cr,kr){let Mr;if(kr===dr.STROKE||kr===dr.FILL){const Rr=Tr.current.getClippedPathBoundingBox(kr,(0,ur.getCurrentTransform)(Ar))||[0,0,0,0],Nr=Math.ceil(Rr[2]-Rr[0])||1,_r=Math.ceil(Rr[3]-Rr[1])||1,Dr=Tr.cachedCanvases.getCanvas("pattern",Nr,_r,!0),Pr=Dr.context;Pr.clearRect(0,0,Pr.canvas.width,Pr.canvas.height),Pr.beginPath(),Pr.rect(0,0,Pr.canvas.width,Pr.canvas.height),Pr.translate(-Rr[0],-Rr[1]),Cr=cr.Util.transform(Cr,[1,0,0,1,Rr[0],Rr[1]]),Pr.transform(...Tr.baseTransform),this.matrix&&Pr.transform(...this.matrix),hr(Pr,this._bbox),Pr.fillStyle=this._createGradient(Pr),Pr.fill(),Mr=Ar.createPattern(Dr.canvas,"no-repeat");const Ir=new DOMMatrix(Cr);Mr.setTransform(Ir)}else hr(Ar,this._bbox),Mr=this._createGradient(Ar);return Mr}}function mr(wr,Ar,Tr,Cr,kr,Mr,Rr,Nr){const _r=Ar.coords,Dr=Ar.colors,Pr=wr.data,Ir=wr.width*4;let $r;_r[Tr+1]>_r[Cr+1]&&($r=Tr,Tr=Cr,Cr=$r,$r=Mr,Mr=Rr,Rr=$r),_r[Cr+1]>_r[kr+1]&&($r=Cr,Cr=kr,kr=$r,$r=Rr,Rr=Nr,Nr=$r),_r[Tr+1]>_r[Cr+1]&&($r=Tr,Tr=Cr,Cr=$r,$r=Mr,Mr=Rr,Rr=$r);const Zr=(_r[Tr]+Ar.offsetX)*Ar.scaleX,rs=(_r[Tr+1]+Ar.offsetY)*Ar.scaleY,qr=(_r[Cr]+Ar.offsetX)*Ar.scaleX,zr=(_r[Cr+1]+Ar.offsetY)*Ar.scaleY,Jr=(_r[kr]+Ar.offsetX)*Ar.scaleX,Hr=(_r[kr+1]+Ar.offsetY)*Ar.scaleY;if(rs>=Hr)return;const Kr=Dr[Mr],ys=Dr[Mr+1],Yr=Dr[Mr+2],Fr=Dr[Rr],Br=Dr[Rr+1],Ur=Dr[Rr+2],Qr=Dr[Nr],Vr=Dr[Nr+1],Gr=Dr[Nr+2],is=Math.round(rs),ps=Math.round(Hr);let As,Cs,jr,Wr,ds,ls,ss,Lr;for(let Xr=is;Xr<=ps;Xr++){if(Xr<zr){const ks=Xr<rs?0:(rs-Xr)/(rs-zr);As=Zr-(Zr-qr)*ks,Cs=Kr-(Kr-Fr)*ks,jr=ys-(ys-Br)*ks,Wr=Yr-(Yr-Ur)*ks}else{let ks;Xr>Hr?ks=1:zr===Hr?ks=0:ks=(zr-Xr)/(zr-Hr),As=qr-(qr-Jr)*ks,Cs=Fr-(Fr-Qr)*ks,jr=Br-(Br-Vr)*ks,Wr=Ur-(Ur-Gr)*ks}let cs;Xr<rs?cs=0:Xr>Hr?cs=1:cs=(rs-Xr)/(rs-Hr),ds=Zr-(Zr-Jr)*cs,ls=Kr-(Kr-Qr)*cs,ss=ys-(ys-Vr)*cs,Lr=Yr-(Yr-Gr)*cs;const hs=Math.round(Math.min(As,ds)),ms=Math.round(Math.max(As,ds));let Ts=Ir*Xr+hs*4;for(let ks=hs;ks<=ms;ks++)cs=(As-ks)/(As-ds),cs<0?cs=0:cs>1&&(cs=1),Pr[Ts++]=Cs-(Cs-ls)*cs|0,Pr[Ts++]=jr-(jr-ss)*cs|0,Pr[Ts++]=Wr-(Wr-Lr)*cs|0,Pr[Ts++]=255}}function gr(wr,Ar,Tr){const Cr=Ar.coords,kr=Ar.colors;let Mr,Rr;switch(Ar.type){case"lattice":const Nr=Ar.verticesPerRow,_r=Math.floor(Cr.length/Nr)-1,Dr=Nr-1;for(Mr=0;Mr<_r;Mr++){let Pr=Mr*Nr;for(let Ir=0;Ir<Dr;Ir++,Pr++)mr(wr,Tr,Cr[Pr],Cr[Pr+1],Cr[Pr+Nr],kr[Pr],kr[Pr+1],kr[Pr+Nr]),mr(wr,Tr,Cr[Pr+Nr+1],Cr[Pr+1],Cr[Pr+Nr],kr[Pr+Nr+1],kr[Pr+1],kr[Pr+Nr])}break;case"triangles":for(Mr=0,Rr=Cr.length;Mr<Rr;Mr+=3)mr(wr,Tr,Cr[Mr],Cr[Mr+1],Cr[Mr+2],kr[Mr],kr[Mr+1],kr[Mr+2]);break;default:throw new Error("illegal figure")}}class yr extends fr{constructor(Ar){super(),this._coords=Ar[2],this._colors=Ar[3],this._figures=Ar[4],this._bounds=Ar[5],this._bbox=Ar[7],this._background=Ar[8],this.matrix=null}_createMeshCanvas(Ar,Tr,Cr){const Nr=Math.floor(this._bounds[0]),_r=Math.floor(this._bounds[1]),Dr=Math.ceil(this._bounds[2])-Nr,Pr=Math.ceil(this._bounds[3])-_r,Ir=Math.min(Math.ceil(Math.abs(Dr*Ar[0]*1.1)),3e3),$r=Math.min(Math.ceil(Math.abs(Pr*Ar[1]*1.1)),3e3),Zr=Dr/Ir,rs=Pr/$r,qr={coords:this._coords,colors:this._colors,offsetX:-Nr,offsetY:-_r,scaleX:1/Zr,scaleY:1/rs},zr=Ir+2*2,Jr=$r+2*2,Hr=Cr.getCanvas("mesh",zr,Jr,!1),Kr=Hr.context,ys=Kr.createImageData(Ir,$r);if(Tr){const Fr=ys.data;for(let Br=0,Ur=Fr.length;Br<Ur;Br+=4)Fr[Br]=Tr[0],Fr[Br+1]=Tr[1],Fr[Br+2]=Tr[2],Fr[Br+3]=255}for(const Fr of this._figures)gr(ys,Fr,qr);return Kr.putImageData(ys,2,2),{canvas:Hr.canvas,offsetX:Nr-2*Zr,offsetY:_r-2*rs,scaleX:Zr,scaleY:rs}}getPattern(Ar,Tr,Cr,kr){hr(Ar,this._bbox);let Mr;if(kr===dr.SHADING)Mr=cr.Util.singularValueDecompose2dScale((0,ur.getCurrentTransform)(Ar));else if(Mr=cr.Util.singularValueDecompose2dScale(Tr.baseTransform),this.matrix){const Nr=cr.Util.singularValueDecompose2dScale(this.matrix);Mr=[Mr[0]*Nr[0],Mr[1]*Nr[1]]}const Rr=this._createMeshCanvas(Mr,kr===dr.SHADING?null:this._background,Tr.cachedCanvases);return kr!==dr.SHADING&&(Ar.setTransform(...Tr.baseTransform),this.matrix&&Ar.transform(...this.matrix)),Ar.translate(Rr.offsetX,Rr.offsetY),Ar.scale(Rr.scaleX,Rr.scaleY),Ar.createPattern(Rr.canvas,"no-repeat")}}class vr extends fr{getPattern(){return"hotpink"}}function br(wr){switch(wr[0]){case"RadialAxial":return new pr(wr);case"Mesh":return new yr(wr);case"Dummy":return new vr}throw new Error(`Unknown IR type: ${wr[0]}`)}const Sr={COLORED:1,UNCOLORED:2},Er=class Er{constructor(Ar,Tr,Cr,kr,Mr){this.operatorList=Ar[2],this.matrix=Ar[3]||[1,0,0,1,0,0],this.bbox=Ar[4],this.xstep=Ar[5],this.ystep=Ar[6],this.paintType=Ar[7],this.tilingType=Ar[8],this.color=Tr,this.ctx=Cr,this.canvasGraphicsFactory=kr,this.baseTransform=Mr}createPatternCanvas(Ar){const Tr=this.operatorList,Cr=this.bbox,kr=this.xstep,Mr=this.ystep,Rr=this.paintType,Nr=this.tilingType,_r=this.color,Dr=this.canvasGraphicsFactory;(0,cr.info)("TilingType: "+Nr);const Pr=Cr[0],Ir=Cr[1],$r=Cr[2],Zr=Cr[3],rs=cr.Util.singularValueDecompose2dScale(this.matrix),qr=cr.Util.singularValueDecompose2dScale(this.baseTransform),zr=[rs[0]*qr[0],rs[1]*qr[1]],Jr=this.getSizeAndScale(kr,this.ctx.canvas.width,zr[0]),Hr=this.getSizeAndScale(Mr,this.ctx.canvas.height,zr[1]),Kr=Ar.cachedCanvases.getCanvas("pattern",Jr.size,Hr.size,!0),ys=Kr.context,Yr=Dr.createCanvasGraphics(ys);Yr.groupLevel=Ar.groupLevel,this.setFillAndStrokeStyleToContext(Yr,Rr,_r);let Fr=Pr,Br=Ir,Ur=$r,Qr=Zr;return Pr<0&&(Fr=0,Ur+=Math.abs(Pr)),Ir<0&&(Br=0,Qr+=Math.abs(Ir)),ys.translate(-(Jr.scale*Fr),-(Hr.scale*Br)),Yr.transform(Jr.scale,0,0,Hr.scale,0,0),ys.save(),this.clipBbox(Yr,Fr,Br,Ur,Qr),Yr.baseTransform=(0,ur.getCurrentTransform)(Yr.ctx),Yr.executeOperatorList(Tr),Yr.endDrawing(),{canvas:Kr.canvas,scaleX:Jr.scale,scaleY:Hr.scale,offsetX:Fr,offsetY:Br}}getSizeAndScale(Ar,Tr,Cr){Ar=Math.abs(Ar);const kr=Math.max(Er.MAX_PATTERN_SIZE,Tr);let Mr=Math.ceil(Ar*Cr);return Mr>=kr?Mr=kr:Cr=Mr/Ar,{scale:Cr,size:Mr}}clipBbox(Ar,Tr,Cr,kr,Mr){const Rr=kr-Tr,Nr=Mr-Cr;Ar.ctx.rect(Tr,Cr,Rr,Nr),Ar.current.updateRectMinMax((0,ur.getCurrentTransform)(Ar.ctx),[Tr,Cr,kr,Mr]),Ar.clip(),Ar.endPath()}setFillAndStrokeStyleToContext(Ar,Tr,Cr){const kr=Ar.ctx,Mr=Ar.current;switch(Tr){case Sr.COLORED:const Rr=this.ctx;kr.fillStyle=Rr.fillStyle,kr.strokeStyle=Rr.strokeStyle,Mr.fillColor=Rr.fillStyle,Mr.strokeColor=Rr.strokeStyle;break;case Sr.UNCOLORED:const Nr=cr.Util.makeHexColor(Cr[0],Cr[1],Cr[2]);kr.fillStyle=Nr,kr.strokeStyle=Nr,Mr.fillColor=Nr,Mr.strokeColor=Nr;break;default:throw new cr.FormatError(`Unsupported paint type: ${Tr}`)}}getPattern(Ar,Tr,Cr,kr){let Mr=Cr;kr!==dr.SHADING&&(Mr=cr.Util.transform(Mr,Tr.baseTransform),this.matrix&&(Mr=cr.Util.transform(Mr,this.matrix)));const Rr=this.createPatternCanvas(Tr);let Nr=new DOMMatrix(Mr);Nr=Nr.translate(Rr.offsetX,Rr.offsetY),Nr=Nr.scale(1/Rr.scaleX,1/Rr.scaleY);const _r=Ar.createPattern(Rr.canvas,"repeat");return _r.setTransform(Nr),_r}};ii(Er,"MAX_PATTERN_SIZE",3e3);let xr=Er;or.TilingPattern=xr},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.convertBlackAndWhiteToRGBA=dr,or.convertToRGBA=ur,or.grayToRGBA=fr;var cr=lr(1);function ur(pr){switch(pr.kind){case cr.ImageKind.GRAYSCALE_1BPP:return dr(pr);case cr.ImageKind.RGB_24BPP:return hr(pr)}return null}function dr({src:pr,srcPos:mr=0,dest:gr,width:yr,height:vr,nonBlackColor:br=4294967295,inverseDecode:Sr=!1}){const xr=cr.FeatureTest.isLittleEndian?4278190080:255,[Er,wr]=Sr?[br,xr]:[xr,br],Ar=yr>>3,Tr=yr&7,Cr=pr.length;gr=new Uint32Array(gr.buffer);let kr=0;for(let Mr=0;Mr<vr;Mr++){for(const Nr=mr+Ar;mr<Nr;mr++){const _r=mr<Cr?pr[mr]:255;gr[kr++]=_r&128?wr:Er,gr[kr++]=_r&64?wr:Er,gr[kr++]=_r&32?wr:Er,gr[kr++]=_r&16?wr:Er,gr[kr++]=_r&8?wr:Er,gr[kr++]=_r&4?wr:Er,gr[kr++]=_r&2?wr:Er,gr[kr++]=_r&1?wr:Er}if(Tr===0)continue;const Rr=mr<Cr?pr[mr++]:255;for(let Nr=0;Nr<Tr;Nr++)gr[kr++]=Rr&1<<7-Nr?wr:Er}return{srcPos:mr,destPos:kr}}function hr({src:pr,srcPos:mr=0,dest:gr,destPos:yr=0,width:vr,height:br}){let Sr=0;const xr=pr.length>>2,Er=new Uint32Array(pr.buffer,mr,xr);if(cr.FeatureTest.isLittleEndian){for(;Sr<xr-2;Sr+=3,yr+=4){const wr=Er[Sr],Ar=Er[Sr+1],Tr=Er[Sr+2];gr[yr]=wr|4278190080,gr[yr+1]=wr>>>24|Ar<<8|4278190080,gr[yr+2]=Ar>>>16|Tr<<16|4278190080,gr[yr+3]=Tr>>>8|4278190080}for(let wr=Sr*4,Ar=pr.length;wr<Ar;wr+=3)gr[yr++]=pr[wr]|pr[wr+1]<<8|pr[wr+2]<<16|4278190080}else{for(;Sr<xr-2;Sr+=3,yr+=4){const wr=Er[Sr],Ar=Er[Sr+1],Tr=Er[Sr+2];gr[yr]=wr|255,gr[yr+1]=wr<<24|Ar>>>8|255,gr[yr+2]=Ar<<16|Tr>>>16|255,gr[yr+3]=Tr<<8|255}for(let wr=Sr*4,Ar=pr.length;wr<Ar;wr+=3)gr[yr++]=pr[wr]<<24|pr[wr+1]<<16|pr[wr+2]<<8|255}return{srcPos:mr,destPos:yr}}function fr(pr,mr){if(cr.FeatureTest.isLittleEndian)for(let gr=0,yr=pr.length;gr<yr;gr++)mr[gr]=pr[gr]*65793|4278190080;else for(let gr=0,yr=pr.length;gr<yr;gr++)mr[gr]=pr[gr]*16843008|255}},(ar,or)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.GlobalWorkerOptions=void 0;const lr=Object.create(null);or.GlobalWorkerOptions=lr,lr.workerPort=null,lr.workerSrc=""},(ar,or,lr)=>{var pr,Bo,Lo,Pi;Object.defineProperty(or,"__esModule",{value:!0}),or.MessageHandler=void 0;var cr=lr(1);const ur={DATA:1,ERROR:2},dr={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function hr(vr){switch(vr instanceof Error||typeof vr=="object"&&vr!==null||(0,cr.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),vr.name){case"AbortException":return new cr.AbortException(vr.message);case"MissingPDFException":return new cr.MissingPDFException(vr.message);case"PasswordException":return new cr.PasswordException(vr.message,vr.code);case"UnexpectedResponseException":return new cr.UnexpectedResponseException(vr.message,vr.status);case"UnknownErrorException":return new cr.UnknownErrorException(vr.message,vr.details);default:return new cr.UnknownErrorException(vr.message,vr.toString())}}class fr{constructor(br,Sr,xr){_s(this,pr);this.sourceName=br,this.targetName=Sr,this.comObj=xr,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=Er=>{const wr=Er.data;if(wr.targetName!==this.sourceName)return;if(wr.stream){Es(this,pr,Lo).call(this,wr);return}if(wr.callback){const Tr=wr.callbackId,Cr=this.callbackCapabilities[Tr];if(!Cr)throw new Error(`Cannot resolve callback ${Tr}`);if(delete this.callbackCapabilities[Tr],wr.callback===ur.DATA)Cr.resolve(wr.data);else if(wr.callback===ur.ERROR)Cr.reject(hr(wr.reason));else throw new Error("Unexpected callback case");return}const Ar=this.actionHandler[wr.action];if(!Ar)throw new Error(`Unknown action from worker: ${wr.action}`);if(wr.callbackId){const Tr=this.sourceName,Cr=wr.sourceName;new Promise(function(kr){kr(Ar(wr.data))}).then(function(kr){xr.postMessage({sourceName:Tr,targetName:Cr,callback:ur.DATA,callbackId:wr.callbackId,data:kr})},function(kr){xr.postMessage({sourceName:Tr,targetName:Cr,callback:ur.ERROR,callbackId:wr.callbackId,reason:hr(kr)})});return}if(wr.streamId){Es(this,pr,Bo).call(this,wr);return}Ar(wr.data)},xr.addEventListener("message",this._onComObjOnMessage)}on(br,Sr){const xr=this.actionHandler;if(xr[br])throw new Error(`There is already an actionName called "${br}"`);xr[br]=Sr}send(br,Sr,xr){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:br,data:Sr},xr)}sendWithPromise(br,Sr,xr){const Er=this.callbackId++,wr=new cr.PromiseCapability;this.callbackCapabilities[Er]=wr;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:br,callbackId:Er,data:Sr},xr)}catch(Ar){wr.reject(Ar)}return wr.promise}sendWithStream(br,Sr,xr,Er){const wr=this.streamId++,Ar=this.sourceName,Tr=this.targetName,Cr=this.comObj;return new ReadableStream({start:kr=>{const Mr=new cr.PromiseCapability;return this.streamControllers[wr]={controller:kr,startCall:Mr,pullCall:null,cancelCall:null,isClosed:!1},Cr.postMessage({sourceName:Ar,targetName:Tr,action:br,streamId:wr,data:Sr,desiredSize:kr.desiredSize},Er),Mr.promise},pull:kr=>{const Mr=new cr.PromiseCapability;return this.streamControllers[wr].pullCall=Mr,Cr.postMessage({sourceName:Ar,targetName:Tr,stream:dr.PULL,streamId:wr,desiredSize:kr.desiredSize}),Mr.promise},cancel:kr=>{(0,cr.assert)(kr instanceof Error,"cancel must have a valid reason");const Mr=new cr.PromiseCapability;return this.streamControllers[wr].cancelCall=Mr,this.streamControllers[wr].isClosed=!0,Cr.postMessage({sourceName:Ar,targetName:Tr,stream:dr.CANCEL,streamId:wr,reason:hr(kr)}),Mr.promise}},xr)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}pr=new WeakSet,Bo=function(br){const Sr=br.streamId,xr=this.sourceName,Er=br.sourceName,wr=this.comObj,Ar=this,Tr=this.actionHandler[br.action],Cr={enqueue(kr,Mr=1,Rr){if(this.isCancelled)return;const Nr=this.desiredSize;this.desiredSize-=Mr,Nr>0&&this.desiredSize<=0&&(this.sinkCapability=new cr.PromiseCapability,this.ready=this.sinkCapability.promise),wr.postMessage({sourceName:xr,targetName:Er,stream:dr.ENQUEUE,streamId:Sr,chunk:kr},Rr)},close(){this.isCancelled||(this.isCancelled=!0,wr.postMessage({sourceName:xr,targetName:Er,stream:dr.CLOSE,streamId:Sr}),delete Ar.streamSinks[Sr])},error(kr){(0,cr.assert)(kr instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,wr.postMessage({sourceName:xr,targetName:Er,stream:dr.ERROR,streamId:Sr,reason:hr(kr)}))},sinkCapability:new cr.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:br.desiredSize,ready:null};Cr.sinkCapability.resolve(),Cr.ready=Cr.sinkCapability.promise,this.streamSinks[Sr]=Cr,new Promise(function(kr){kr(Tr(br.data,Cr))}).then(function(){wr.postMessage({sourceName:xr,targetName:Er,stream:dr.START_COMPLETE,streamId:Sr,success:!0})},function(kr){wr.postMessage({sourceName:xr,targetName:Er,stream:dr.START_COMPLETE,streamId:Sr,reason:hr(kr)})})},Lo=function(br){const Sr=br.streamId,xr=this.sourceName,Er=br.sourceName,wr=this.comObj,Ar=this.streamControllers[Sr],Tr=this.streamSinks[Sr];switch(br.stream){case dr.START_COMPLETE:br.success?Ar.startCall.resolve():Ar.startCall.reject(hr(br.reason));break;case dr.PULL_COMPLETE:br.success?Ar.pullCall.resolve():Ar.pullCall.reject(hr(br.reason));break;case dr.PULL:if(!Tr){wr.postMessage({sourceName:xr,targetName:Er,stream:dr.PULL_COMPLETE,streamId:Sr,success:!0});break}Tr.desiredSize<=0&&br.desiredSize>0&&Tr.sinkCapability.resolve(),Tr.desiredSize=br.desiredSize,new Promise(function(Cr){var kr;Cr((kr=Tr.onPull)==null?void 0:kr.call(Tr))}).then(function(){wr.postMessage({sourceName:xr,targetName:Er,stream:dr.PULL_COMPLETE,streamId:Sr,success:!0})},function(Cr){wr.postMessage({sourceName:xr,targetName:Er,stream:dr.PULL_COMPLETE,streamId:Sr,reason:hr(Cr)})});break;case dr.ENQUEUE:if((0,cr.assert)(Ar,"enqueue should have stream controller"),Ar.isClosed)break;Ar.controller.enqueue(br.chunk);break;case dr.CLOSE:if((0,cr.assert)(Ar,"close should have stream controller"),Ar.isClosed)break;Ar.isClosed=!0,Ar.controller.close(),Es(this,pr,Pi).call(this,Ar,Sr);break;case dr.ERROR:(0,cr.assert)(Ar,"error should have stream controller"),Ar.controller.error(hr(br.reason)),Es(this,pr,Pi).call(this,Ar,Sr);break;case dr.CANCEL_COMPLETE:br.success?Ar.cancelCall.resolve():Ar.cancelCall.reject(hr(br.reason)),Es(this,pr,Pi).call(this,Ar,Sr);break;case dr.CANCEL:if(!Tr)break;new Promise(function(Cr){var kr;Cr((kr=Tr.onCancel)==null?void 0:kr.call(Tr,hr(br.reason)))}).then(function(){wr.postMessage({sourceName:xr,targetName:Er,stream:dr.CANCEL_COMPLETE,streamId:Sr,success:!0})},function(Cr){wr.postMessage({sourceName:xr,targetName:Er,stream:dr.CANCEL_COMPLETE,streamId:Sr,reason:hr(Cr)})}),Tr.sinkCapability.reject(hr(br.reason)),Tr.isCancelled=!0,delete this.streamSinks[Sr];break;default:throw new Error("Unexpected stream case")}},Pi=async function(br,Sr){var xr,Er,wr;await Promise.allSettled([(xr=br.startCall)==null?void 0:xr.promise,(Er=br.pullCall)==null?void 0:Er.promise,(wr=br.cancelCall)==null?void 0:wr.promise]),delete this.streamControllers[Sr]},or.MessageHandler=fr},(ar,or,lr)=>{var dr,hr;Object.defineProperty(or,"__esModule",{value:!0}),or.Metadata=void 0;var cr=lr(1);class ur{constructor({parsedData:pr,rawData:mr}){_s(this,dr);_s(this,hr);Ms(this,dr,pr),Ms(this,hr,mr)}getRaw(){return Or(this,hr)}get(pr){return Or(this,dr).get(pr)??null}getAll(){return(0,cr.objectFromMap)(Or(this,dr))}has(pr){return Or(this,dr).has(pr)}}dr=new WeakMap,hr=new WeakMap,or.Metadata=ur},(ar,or,lr)=>{var pr,mr,gr,yr,vr,br,oo;Object.defineProperty(or,"__esModule",{value:!0}),or.OptionalContentConfig=void 0;var cr=lr(1),ur=lr(8);const dr=Symbol("INTERNAL");class hr{constructor(Er,wr){_s(this,pr,!0);this.name=Er,this.intent=wr}get visible(){return Or(this,pr)}_setVisible(Er,wr){Er!==dr&&(0,cr.unreachable)("Internal method `_setVisible` called."),Ms(this,pr,wr)}}pr=new WeakMap;class fr{constructor(Er){_s(this,br);_s(this,mr,null);_s(this,gr,new Map);_s(this,yr,null);_s(this,vr,null);if(this.name=null,this.creator=null,Er!==null){this.name=Er.name,this.creator=Er.creator,Ms(this,vr,Er.order);for(const wr of Er.groups)Or(this,gr).set(wr.id,new hr(wr.name,wr.intent));if(Er.baseState==="OFF")for(const wr of Or(this,gr).values())wr._setVisible(dr,!1);for(const wr of Er.on)Or(this,gr).get(wr)._setVisible(dr,!0);for(const wr of Er.off)Or(this,gr).get(wr)._setVisible(dr,!1);Ms(this,yr,this.getHash())}}isVisible(Er){if(Or(this,gr).size===0)return!0;if(!Er)return(0,cr.warn)("Optional content group not defined."),!0;if(Er.type==="OCG")return Or(this,gr).has(Er.id)?Or(this,gr).get(Er.id).visible:((0,cr.warn)(`Optional content group not found: ${Er.id}`),!0);if(Er.type==="OCMD"){if(Er.expression)return Es(this,br,oo).call(this,Er.expression);if(!Er.policy||Er.policy==="AnyOn"){for(const wr of Er.ids){if(!Or(this,gr).has(wr))return(0,cr.warn)(`Optional content group not found: ${wr}`),!0;if(Or(this,gr).get(wr).visible)return!0}return!1}else if(Er.policy==="AllOn"){for(const wr of Er.ids){if(!Or(this,gr).has(wr))return(0,cr.warn)(`Optional content group not found: ${wr}`),!0;if(!Or(this,gr).get(wr).visible)return!1}return!0}else if(Er.policy==="AnyOff"){for(const wr of Er.ids){if(!Or(this,gr).has(wr))return(0,cr.warn)(`Optional content group not found: ${wr}`),!0;if(!Or(this,gr).get(wr).visible)return!0}return!1}else if(Er.policy==="AllOff"){for(const wr of Er.ids){if(!Or(this,gr).has(wr))return(0,cr.warn)(`Optional content group not found: ${wr}`),!0;if(Or(this,gr).get(wr).visible)return!1}return!0}return(0,cr.warn)(`Unknown optional content policy ${Er.policy}.`),!0}return(0,cr.warn)(`Unknown group type ${Er.type}.`),!0}setVisibility(Er,wr=!0){if(!Or(this,gr).has(Er)){(0,cr.warn)(`Optional content group not found: ${Er}`);return}Or(this,gr).get(Er)._setVisible(dr,!!wr),Ms(this,mr,null)}get hasInitialVisibility(){return Or(this,yr)===null||this.getHash()===Or(this,yr)}getOrder(){return Or(this,gr).size?Or(this,vr)?Or(this,vr).slice():[...Or(this,gr).keys()]:null}getGroups(){return Or(this,gr).size>0?(0,cr.objectFromMap)(Or(this,gr)):null}getGroup(Er){return Or(this,gr).get(Er)||null}getHash(){if(Or(this,mr)!==null)return Or(this,mr);const Er=new ur.MurmurHash3_64;for(const[wr,Ar]of Or(this,gr))Er.update(`${wr}:${Ar.visible}`);return Ms(this,mr,Er.hexdigest())}}mr=new WeakMap,gr=new WeakMap,yr=new WeakMap,vr=new WeakMap,br=new WeakSet,oo=function(Er){const wr=Er.length;if(wr<2)return!0;const Ar=Er[0];for(let Tr=1;Tr<wr;Tr++){const Cr=Er[Tr];let kr;if(Array.isArray(Cr))kr=Es(this,br,oo).call(this,Cr);else if(Or(this,gr).has(Cr))kr=Or(this,gr).get(Cr).visible;else return(0,cr.warn)(`Optional content group not found: ${Cr}`),!0;switch(Ar){case"And":if(!kr)return!1;break;case"Or":if(kr)return!0;break;case"Not":return!kr;default:return!0}}return Ar==="And"},or.OptionalContentConfig=fr},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.PDFDataTransportStream=void 0;var cr=lr(1),ur=lr(6);class dr{constructor({length:mr,initialData:gr,progressiveDone:yr=!1,contentDispositionFilename:vr=null,disableRange:br=!1,disableStream:Sr=!1},xr){if((0,cr.assert)(xr,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=yr,this._contentDispositionFilename=vr,(gr==null?void 0:gr.length)>0){const Er=gr instanceof Uint8Array&&gr.byteLength===gr.buffer.byteLength?gr.buffer:new Uint8Array(gr).buffer;this._queuedChunks.push(Er)}this._pdfDataRangeTransport=xr,this._isStreamingSupported=!Sr,this._isRangeSupported=!br,this._contentLength=mr,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Er,wr)=>{this._onReceiveData({begin:Er,chunk:wr})}),this._pdfDataRangeTransport.addProgressListener((Er,wr)=>{this._onProgress({loaded:Er,total:wr})}),this._pdfDataRangeTransport.addProgressiveReadListener(Er=>{this._onReceiveData({chunk:Er})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:mr,chunk:gr}){const yr=gr instanceof Uint8Array&&gr.byteLength===gr.buffer.byteLength?gr.buffer:new Uint8Array(gr).buffer;if(mr===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(yr):this._queuedChunks.push(yr);else{const vr=this._rangeReaders.some(function(br){return br._begin!==mr?!1:(br._enqueue(yr),!0)});(0,cr.assert)(vr,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var mr;return((mr=this._fullRequestReader)==null?void 0:mr._loaded)??0}_onProgress(mr){var gr,yr,vr,br;mr.total===void 0?(yr=(gr=this._rangeReaders[0])==null?void 0:gr.onProgress)==null||yr.call(gr,{loaded:mr.loaded}):(br=(vr=this._fullRequestReader)==null?void 0:vr.onProgress)==null||br.call(vr,{loaded:mr.loaded,total:mr.total})}_onProgressiveDone(){var mr;(mr=this._fullRequestReader)==null||mr.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(mr){const gr=this._rangeReaders.indexOf(mr);gr>=0&&this._rangeReaders.splice(gr,1)}getFullReader(){(0,cr.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const mr=this._queuedChunks;return this._queuedChunks=null,new hr(this,mr,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(mr,gr){if(gr<=this._progressiveDataLength)return null;const yr=new fr(this,mr,gr);return this._pdfDataRangeTransport.requestDataRange(mr,gr),this._rangeReaders.push(yr),yr}cancelAllRequests(mr){var gr;(gr=this._fullRequestReader)==null||gr.cancel(mr);for(const yr of this._rangeReaders.slice(0))yr.cancel(mr);this._pdfDataRangeTransport.abort()}}or.PDFDataTransportStream=dr;class hr{constructor(mr,gr,yr=!1,vr=null){this._stream=mr,this._done=yr||!1,this._filename=(0,ur.isPdfFile)(vr)?vr:null,this._queuedChunks=gr||[],this._loaded=0;for(const br of this._queuedChunks)this._loaded+=br.byteLength;this._requests=[],this._headersReady=Promise.resolve(),mr._fullRequestReader=this,this.onProgress=null}_enqueue(mr){this._done||(this._requests.length>0?this._requests.shift().resolve({value:mr,done:!1}):this._queuedChunks.push(mr),this._loaded+=mr.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const mr=new cr.PromiseCapability;return this._requests.push(mr),mr.promise}cancel(mr){this._done=!0;for(const gr of this._requests)gr.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class fr{constructor(mr,gr,yr){this._stream=mr,this._begin=gr,this._end=yr,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(mr){if(!this._done){if(this._requests.length===0)this._queuedChunk=mr;else{this._requests.shift().resolve({value:mr,done:!1});for(const yr of this._requests)yr.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const gr=this._queuedChunk;return this._queuedChunk=null,{value:gr,done:!1}}if(this._done)return{value:void 0,done:!0};const mr=new cr.PromiseCapability;return this._requests.push(mr),mr.promise}cancel(mr){this._done=!0;for(const gr of this._requests)gr.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.PDFFetchStream=void 0;var cr=lr(1),ur=lr(20);function dr(yr,vr,br){return{method:"GET",headers:yr,signal:br.signal,mode:"cors",credentials:vr?"include":"same-origin",redirect:"follow"}}function hr(yr){const vr=new Headers;for(const br in yr){const Sr=yr[br];Sr!==void 0&&vr.append(br,Sr)}return vr}function fr(yr){return yr instanceof Uint8Array?yr.buffer:yr instanceof ArrayBuffer?yr:((0,cr.warn)(`getArrayBuffer - unexpected data format: ${yr}`),new Uint8Array(yr).buffer)}class pr{constructor(vr){this.source=vr,this.isHttp=/^https?:/i.test(vr.url),this.httpHeaders=this.isHttp&&vr.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var vr;return((vr=this._fullRequestReader)==null?void 0:vr._loaded)??0}getFullReader(){return(0,cr.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new mr(this),this._fullRequestReader}getRangeReader(vr,br){if(br<=this._progressiveDataLength)return null;const Sr=new gr(this,vr,br);return this._rangeRequestReaders.push(Sr),Sr}cancelAllRequests(vr){var br;(br=this._fullRequestReader)==null||br.cancel(vr);for(const Sr of this._rangeRequestReaders.slice(0))Sr.cancel(vr)}}or.PDFFetchStream=pr;class mr{constructor(vr){this._stream=vr,this._reader=null,this._loaded=0,this._filename=null;const br=vr.source;this._withCredentials=br.withCredentials||!1,this._contentLength=br.length,this._headersCapability=new cr.PromiseCapability,this._disableRange=br.disableRange||!1,this._rangeChunkSize=br.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!br.disableStream,this._isRangeSupported=!br.disableRange,this._headers=hr(this._stream.httpHeaders);const Sr=br.url;fetch(Sr,dr(this._headers,this._withCredentials,this._abortController)).then(xr=>{if(!(0,ur.validateResponseStatus)(xr.status))throw(0,ur.createResponseStatusError)(xr.status,Sr);this._reader=xr.body.getReader(),this._headersCapability.resolve();const Er=Tr=>xr.headers.get(Tr),{allowRangeRequests:wr,suggestedLength:Ar}=(0,ur.validateRangeRequestCapabilities)({getResponseHeader:Er,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=wr,this._contentLength=Ar||this._contentLength,this._filename=(0,ur.extractFilenameFromHeader)(Er),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new cr.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Sr;await this._headersCapability.promise;const{value:vr,done:br}=await this._reader.read();return br?{value:vr,done:br}:(this._loaded+=vr.byteLength,(Sr=this.onProgress)==null||Sr.call(this,{loaded:this._loaded,total:this._contentLength}),{value:fr(vr),done:!1})}cancel(vr){var br;(br=this._reader)==null||br.cancel(vr),this._abortController.abort()}}class gr{constructor(vr,br,Sr){this._stream=vr,this._reader=null,this._loaded=0;const xr=vr.source;this._withCredentials=xr.withCredentials||!1,this._readCapability=new cr.PromiseCapability,this._isStreamingSupported=!xr.disableStream,this._abortController=new AbortController,this._headers=hr(this._stream.httpHeaders),this._headers.append("Range",`bytes=${br}-${Sr-1}`);const Er=xr.url;fetch(Er,dr(this._headers,this._withCredentials,this._abortController)).then(wr=>{if(!(0,ur.validateResponseStatus)(wr.status))throw(0,ur.createResponseStatusError)(wr.status,Er);this._readCapability.resolve(),this._reader=wr.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Sr;await this._readCapability.promise;const{value:vr,done:br}=await this._reader.read();return br?{value:vr,done:br}:(this._loaded+=vr.byteLength,(Sr=this.onProgress)==null||Sr.call(this,{loaded:this._loaded}),{value:fr(vr),done:!1})}cancel(vr){var br;(br=this._reader)==null||br.cancel(vr),this._abortController.abort()}}},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.createResponseStatusError=pr,or.extractFilenameFromHeader=fr,or.validateRangeRequestCapabilities=hr,or.validateResponseStatus=mr;var cr=lr(1),ur=lr(21),dr=lr(6);function hr({getResponseHeader:gr,isHttp:yr,rangeChunkSize:vr,disableRange:br}){const Sr={allowRangeRequests:!1,suggestedLength:void 0},xr=parseInt(gr("Content-Length"),10);return!Number.isInteger(xr)||(Sr.suggestedLength=xr,xr<=2*vr)||br||!yr||gr("Accept-Ranges")!=="bytes"||(gr("Content-Encoding")||"identity")!=="identity"||(Sr.allowRangeRequests=!0),Sr}function fr(gr){const yr=gr("Content-Disposition");if(yr){let vr=(0,ur.getFilenameFromContentDispositionHeader)(yr);if(vr.includes("%"))try{vr=decodeURIComponent(vr)}catch{}if((0,dr.isPdfFile)(vr))return vr}return null}function pr(gr,yr){return gr===404||gr===0&&yr.startsWith("file:")?new cr.MissingPDFException('Missing PDF "'+yr+'".'):new cr.UnexpectedResponseException(`Unexpected server response (${gr}) while retrieving PDF "${yr}".`,gr)}function mr(gr){return gr===200||gr===206}},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.getFilenameFromContentDispositionHeader=ur;var cr=lr(1);function ur(dr){let hr=!0,fr=pr("filename\\*","i").exec(dr);if(fr){fr=fr[1];let xr=vr(fr);return xr=unescape(xr),xr=br(xr),xr=Sr(xr),gr(xr)}if(fr=yr(dr),fr){const xr=Sr(fr);return gr(xr)}if(fr=pr("filename","i").exec(dr),fr){fr=fr[1];let xr=vr(fr);return xr=Sr(xr),gr(xr)}function pr(xr,Er){return new RegExp("(?:^|;)\\s*"+xr+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Er)}function mr(xr,Er){if(xr){if(!/^[\x00-\xFF]+$/.test(Er))return Er;try{const wr=new TextDecoder(xr,{fatal:!0}),Ar=(0,cr.stringToBytes)(Er);Er=wr.decode(Ar),hr=!1}catch{}}return Er}function gr(xr){return hr&&/[\x80-\xff]/.test(xr)&&(xr=mr("utf-8",xr),hr&&(xr=mr("iso-8859-1",xr))),xr}function yr(xr){const Er=[];let wr;const Ar=pr("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(wr=Ar.exec(xr))!==null;){let[,Cr,kr,Mr]=wr;if(Cr=parseInt(Cr,10),Cr in Er){if(Cr===0)break;continue}Er[Cr]=[kr,Mr]}const Tr=[];for(let Cr=0;Cr<Er.length&&Cr in Er;++Cr){let[kr,Mr]=Er[Cr];Mr=vr(Mr),kr&&(Mr=unescape(Mr),Cr===0&&(Mr=br(Mr))),Tr.push(Mr)}return Tr.join("")}function vr(xr){if(xr.startsWith('"')){const Er=xr.slice(1).split('\\"');for(let wr=0;wr<Er.length;++wr){const Ar=Er[wr].indexOf('"');Ar!==-1&&(Er[wr]=Er[wr].slice(0,Ar),Er.length=wr+1),Er[wr]=Er[wr].replaceAll(/\\(.)/g,"$1")}xr=Er.join('"')}return xr}function br(xr){const Er=xr.indexOf("'");if(Er===-1)return xr;const wr=xr.slice(0,Er),Tr=xr.slice(Er+1).replace(/^[^']*'/,"");return mr(wr,Tr)}function Sr(xr){return!xr.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(xr)?xr:xr.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Er,wr,Ar,Tr){if(Ar==="q"||Ar==="Q")return Tr=Tr.replaceAll("_"," "),Tr=Tr.replaceAll(/=([0-9a-fA-F]{2})/g,function(Cr,kr){return String.fromCharCode(parseInt(kr,16))}),mr(wr,Tr);try{Tr=atob(Tr)}catch{}return mr(wr,Tr)})}return""}},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.PDFNetworkStream=void 0;var cr=lr(1),ur=lr(20);const dr=200,hr=206;function fr(vr){const br=vr.response;return typeof br!="string"?br:(0,cr.stringToBytes)(br).buffer}class pr{constructor(br,Sr={}){this.url=br,this.isHttp=/^https?:/i.test(br),this.httpHeaders=this.isHttp&&Sr.httpHeaders||Object.create(null),this.withCredentials=Sr.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(br,Sr,xr){const Er={begin:br,end:Sr};for(const wr in xr)Er[wr]=xr[wr];return this.request(Er)}requestFull(br){return this.request(br)}request(br){const Sr=new XMLHttpRequest,xr=this.currXhrId++,Er=this.pendingRequests[xr]={xhr:Sr};Sr.open("GET",this.url),Sr.withCredentials=this.withCredentials;for(const wr in this.httpHeaders){const Ar=this.httpHeaders[wr];Ar!==void 0&&Sr.setRequestHeader(wr,Ar)}return this.isHttp&&"begin"in br&&"end"in br?(Sr.setRequestHeader("Range",`bytes=${br.begin}-${br.end-1}`),Er.expectedStatus=hr):Er.expectedStatus=dr,Sr.responseType="arraybuffer",br.onError&&(Sr.onerror=function(wr){br.onError(Sr.status)}),Sr.onreadystatechange=this.onStateChange.bind(this,xr),Sr.onprogress=this.onProgress.bind(this,xr),Er.onHeadersReceived=br.onHeadersReceived,Er.onDone=br.onDone,Er.onError=br.onError,Er.onProgress=br.onProgress,Sr.send(null),xr}onProgress(br,Sr){var Er;const xr=this.pendingRequests[br];xr&&((Er=xr.onProgress)==null||Er.call(xr,Sr))}onStateChange(br,Sr){var Cr,kr,Mr;const xr=this.pendingRequests[br];if(!xr)return;const Er=xr.xhr;if(Er.readyState>=2&&xr.onHeadersReceived&&(xr.onHeadersReceived(),delete xr.onHeadersReceived),Er.readyState!==4||!(br in this.pendingRequests))return;if(delete this.pendingRequests[br],Er.status===0&&this.isHttp){(Cr=xr.onError)==null||Cr.call(xr,Er.status);return}const wr=Er.status||dr;if(!(wr===dr&&xr.expectedStatus===hr)&&wr!==xr.expectedStatus){(kr=xr.onError)==null||kr.call(xr,Er.status);return}const Tr=fr(Er);if(wr===hr){const Rr=Er.getResponseHeader("Content-Range"),Nr=/bytes (\d+)-(\d+)\/(\d+)/.exec(Rr);xr.onDone({begin:parseInt(Nr[1],10),chunk:Tr})}else Tr?xr.onDone({begin:0,chunk:Tr}):(Mr=xr.onError)==null||Mr.call(xr,Er.status)}getRequestXhr(br){return this.pendingRequests[br].xhr}isPendingRequest(br){return br in this.pendingRequests}abortRequest(br){const Sr=this.pendingRequests[br].xhr;delete this.pendingRequests[br],Sr.abort()}}class mr{constructor(br){this._source=br,this._manager=new pr(br.url,{httpHeaders:br.httpHeaders,withCredentials:br.withCredentials}),this._rangeChunkSize=br.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(br){const Sr=this._rangeRequestReaders.indexOf(br);Sr>=0&&this._rangeRequestReaders.splice(Sr,1)}getFullReader(){return(0,cr.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new gr(this._manager,this._source),this._fullRequestReader}getRangeReader(br,Sr){const xr=new yr(this._manager,br,Sr);return xr.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(xr),xr}cancelAllRequests(br){var Sr;(Sr=this._fullRequestReader)==null||Sr.cancel(br);for(const xr of this._rangeRequestReaders.slice(0))xr.cancel(br)}}or.PDFNetworkStream=mr;class gr{constructor(br,Sr){this._manager=br;const xr={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=Sr.url,this._fullRequestId=br.requestFull(xr),this._headersReceivedCapability=new cr.PromiseCapability,this._disableRange=Sr.disableRange||!1,this._contentLength=Sr.length,this._rangeChunkSize=Sr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const br=this._fullRequestId,Sr=this._manager.getRequestXhr(br),xr=Ar=>Sr.getResponseHeader(Ar),{allowRangeRequests:Er,suggestedLength:wr}=(0,ur.validateRangeRequestCapabilities)({getResponseHeader:xr,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Er&&(this._isRangeSupported=!0),this._contentLength=wr||this._contentLength,this._filename=(0,ur.extractFilenameFromHeader)(xr),this._isRangeSupported&&this._manager.abortRequest(br),this._headersReceivedCapability.resolve()}_onDone(br){if(br&&(this._requests.length>0?this._requests.shift().resolve({value:br.chunk,done:!1}):this._cachedChunks.push(br.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const Sr of this._requests)Sr.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(br){this._storedError=(0,ur.createResponseStatusError)(br,this._url),this._headersReceivedCapability.reject(this._storedError);for(const Sr of this._requests)Sr.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(br){var Sr;(Sr=this.onProgress)==null||Sr.call(this,{loaded:br.loaded,total:br.lengthComputable?br.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const br=new cr.PromiseCapability;return this._requests.push(br),br.promise}cancel(br){this._done=!0,this._headersReceivedCapability.reject(br);for(const Sr of this._requests)Sr.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class yr{constructor(br,Sr,xr){this._manager=br;const Er={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=br.url,this._requestId=br.requestRange(Sr,xr,Er),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var br;(br=this.onClosed)==null||br.call(this,this)}_onDone(br){const Sr=br.chunk;this._requests.length>0?this._requests.shift().resolve({value:Sr,done:!1}):this._queuedChunk=Sr,this._done=!0;for(const xr of this._requests)xr.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(br){this._storedError=(0,ur.createResponseStatusError)(br,this._url);for(const Sr of this._requests)Sr.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(br){var Sr;this.isStreamingSupported||(Sr=this.onProgress)==null||Sr.call(this,{loaded:br.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const Sr=this._queuedChunk;return this._queuedChunk=null,{value:Sr,done:!1}}if(this._done)return{value:void 0,done:!0};const br=new cr.PromiseCapability;return this._requests.push(br),br.promise}cancel(br){this._done=!0;for(const Sr of this._requests)Sr.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.PDFNodeStream=void 0;var cr=lr(1),ur=lr(20);const dr=/^file:\/\/\/[a-zA-Z]:\//;function hr(xr){const Er=require$$5,wr=Er.parse(xr);return wr.protocol==="file:"||wr.host?wr:/^[a-z]:[/\\]/i.test(xr)?Er.parse(`file:///${xr}`):(wr.host||(wr.protocol="file:"),wr)}class fr{constructor(Er){this.source=Er,this.url=hr(Er.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Er.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Er;return((Er=this._fullRequestReader)==null?void 0:Er._loaded)??0}getFullReader(){return(0,cr.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new br(this):new yr(this),this._fullRequestReader}getRangeReader(Er,wr){if(wr<=this._progressiveDataLength)return null;const Ar=this.isFsUrl?new Sr(this,Er,wr):new vr(this,Er,wr);return this._rangeRequestReaders.push(Ar),Ar}cancelAllRequests(Er){var wr;(wr=this._fullRequestReader)==null||wr.cancel(Er);for(const Ar of this._rangeRequestReaders.slice(0))Ar.cancel(Er)}}or.PDFNodeStream=fr;class pr{constructor(Er){this._url=Er.url,this._done=!1,this._storedError=null,this.onProgress=null;const wr=Er.source;this._contentLength=wr.length,this._loaded=0,this._filename=null,this._disableRange=wr.disableRange||!1,this._rangeChunkSize=wr.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!wr.disableStream,this._isRangeSupported=!wr.disableRange,this._readableStream=null,this._readCapability=new cr.PromiseCapability,this._headersCapability=new cr.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ar;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Er=this._readableStream.read();return Er===null?(this._readCapability=new cr.PromiseCapability,this.read()):(this._loaded+=Er.length,(Ar=this.onProgress)==null||Ar.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Er).buffer,done:!1})}cancel(Er){if(!this._readableStream){this._error(Er);return}this._readableStream.destroy(Er)}_error(Er){this._storedError=Er,this._readCapability.resolve()}_setReadableStream(Er){this._readableStream=Er,Er.on("readable",()=>{this._readCapability.resolve()}),Er.on("end",()=>{Er.destroy(),this._done=!0,this._readCapability.resolve()}),Er.on("error",wr=>{this._error(wr)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new cr.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class mr{constructor(Er){this._url=Er.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new cr.PromiseCapability;const wr=Er.source;this._isStreamingSupported=!wr.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var Ar;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Er=this._readableStream.read();return Er===null?(this._readCapability=new cr.PromiseCapability,this.read()):(this._loaded+=Er.length,(Ar=this.onProgress)==null||Ar.call(this,{loaded:this._loaded}),{value:new Uint8Array(Er).buffer,done:!1})}cancel(Er){if(!this._readableStream){this._error(Er);return}this._readableStream.destroy(Er)}_error(Er){this._storedError=Er,this._readCapability.resolve()}_setReadableStream(Er){this._readableStream=Er,Er.on("readable",()=>{this._readCapability.resolve()}),Er.on("end",()=>{Er.destroy(),this._done=!0,this._readCapability.resolve()}),Er.on("error",wr=>{this._error(wr)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function gr(xr,Er){return{protocol:xr.protocol,auth:xr.auth,host:xr.hostname,port:xr.port,path:xr.path,method:"GET",headers:Er}}class yr extends pr{constructor(Er){super(Er);const wr=Ar=>{if(Ar.statusCode===404){const Mr=new cr.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Mr,this._headersCapability.reject(Mr);return}this._headersCapability.resolve(),this._setReadableStream(Ar);const Tr=Mr=>this._readableStream.headers[Mr.toLowerCase()],{allowRangeRequests:Cr,suggestedLength:kr}=(0,ur.validateRangeRequestCapabilities)({getResponseHeader:Tr,isHttp:Er.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=Cr,this._contentLength=kr||this._contentLength,this._filename=(0,ur.extractFilenameFromHeader)(Tr)};if(this._request=null,this._url.protocol==="http:"){const Ar=require$$5;this._request=Ar.request(gr(this._url,Er.httpHeaders),wr)}else{const Ar=require$$5;this._request=Ar.request(gr(this._url,Er.httpHeaders),wr)}this._request.on("error",Ar=>{this._storedError=Ar,this._headersCapability.reject(Ar)}),this._request.end()}}class vr extends mr{constructor(Er,wr,Ar){super(Er),this._httpHeaders={};for(const Cr in Er.httpHeaders){const kr=Er.httpHeaders[Cr];kr!==void 0&&(this._httpHeaders[Cr]=kr)}this._httpHeaders.Range=`bytes=${wr}-${Ar-1}`;const Tr=Cr=>{if(Cr.statusCode===404){const kr=new cr.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=kr;return}this._setReadableStream(Cr)};if(this._request=null,this._url.protocol==="http:"){const Cr=require$$5;this._request=Cr.request(gr(this._url,this._httpHeaders),Tr)}else{const Cr=require$$5;this._request=Cr.request(gr(this._url,this._httpHeaders),Tr)}this._request.on("error",Cr=>{this._storedError=Cr}),this._request.end()}}class br extends pr{constructor(Er){super(Er);let wr=decodeURIComponent(this._url.path);dr.test(this._url.href)&&(wr=wr.replace(/^\//,""));const Ar=require$$5;Ar.lstat(wr,(Tr,Cr)=>{if(Tr){Tr.code==="ENOENT"&&(Tr=new cr.MissingPDFException(`Missing PDF "${wr}".`)),this._storedError=Tr,this._headersCapability.reject(Tr);return}this._contentLength=Cr.size,this._setReadableStream(Ar.createReadStream(wr)),this._headersCapability.resolve()})}}class Sr extends mr{constructor(Er,wr,Ar){super(Er);let Tr=decodeURIComponent(this._url.path);dr.test(this._url.href)&&(Tr=Tr.replace(/^\//,""));const Cr=require$$5;this._setReadableStream(Cr.createReadStream(Tr,{start:wr,end:Ar-1}))}}},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.SVGGraphics=void 0;var cr=lr(6),ur=lr(1);const dr={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},hr="http://www.w3.org/XML/1998/namespace",fr="http://www.w3.org/1999/xlink",pr=["butt","round","square"],mr=["miter","round","bevel"],gr=function(Cr,kr="",Mr=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!Mr)return URL.createObjectURL(new Blob([Cr],{type:kr}));const Rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Nr=`data:${kr};base64,`;for(let _r=0,Dr=Cr.length;_r<Dr;_r+=3){const Pr=Cr[_r]&255,Ir=Cr[_r+1]&255,$r=Cr[_r+2]&255,Zr=Pr>>2,rs=(Pr&3)<<4|Ir>>4,qr=_r+1<Dr?(Ir&15)<<2|$r>>6:64,zr=_r+2<Dr?$r&63:64;Nr+=Rr[Zr]+Rr[rs]+Rr[qr]+Rr[zr]}return Nr},yr=function(){const Cr=new Uint8Array([137,80,78,71,13,10,26,10]),kr=12,Mr=new Int32Array(256);for(let $r=0;$r<256;$r++){let Zr=$r;for(let rs=0;rs<8;rs++)Zr=Zr&1?3988292384^Zr>>1&2147483647:Zr>>1&2147483647;Mr[$r]=Zr}function Rr($r,Zr,rs){let qr=-1;for(let zr=Zr;zr<rs;zr++){const Jr=(qr^$r[zr])&255,Hr=Mr[Jr];qr=qr>>>8^Hr}return qr^-1}function Nr($r,Zr,rs,qr){let zr=qr;const Jr=Zr.length;rs[zr]=Jr>>24&255,rs[zr+1]=Jr>>16&255,rs[zr+2]=Jr>>8&255,rs[zr+3]=Jr&255,zr+=4,rs[zr]=$r.charCodeAt(0)&255,rs[zr+1]=$r.charCodeAt(1)&255,rs[zr+2]=$r.charCodeAt(2)&255,rs[zr+3]=$r.charCodeAt(3)&255,zr+=4,rs.set(Zr,zr),zr+=Zr.length;const Hr=Rr(rs,qr+4,zr);rs[zr]=Hr>>24&255,rs[zr+1]=Hr>>16&255,rs[zr+2]=Hr>>8&255,rs[zr+3]=Hr&255}function _r($r,Zr,rs){let qr=1,zr=0;for(let Jr=Zr;Jr<rs;++Jr)qr=(qr+($r[Jr]&255))%65521,zr=(zr+qr)%65521;return zr<<16|qr}function Dr($r){if(!ur.isNodeJS)return Pr($r);try{const Zr=parseInt(process.versions.node)>=8?$r:Buffer.from($r),rs=require$$5.deflateSync(Zr,{level:9});return rs instanceof Uint8Array?rs:new Uint8Array(rs)}catch(Zr){(0,ur.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Zr)}return Pr($r)}function Pr($r){let Zr=$r.length;const rs=65535,qr=Math.ceil(Zr/rs),zr=new Uint8Array(2+Zr+qr*5+4);let Jr=0;zr[Jr++]=120,zr[Jr++]=156;let Hr=0;for(;Zr>rs;)zr[Jr++]=0,zr[Jr++]=255,zr[Jr++]=255,zr[Jr++]=0,zr[Jr++]=0,zr.set($r.subarray(Hr,Hr+rs),Jr),Jr+=rs,Hr+=rs,Zr-=rs;zr[Jr++]=1,zr[Jr++]=Zr&255,zr[Jr++]=Zr>>8&255,zr[Jr++]=~Zr&65535&255,zr[Jr++]=(~Zr&65535)>>8&255,zr.set($r.subarray(Hr),Jr),Jr+=$r.length-Hr;const Kr=_r($r,0,$r.length);return zr[Jr++]=Kr>>24&255,zr[Jr++]=Kr>>16&255,zr[Jr++]=Kr>>8&255,zr[Jr++]=Kr&255,zr}function Ir($r,Zr,rs,qr){const zr=$r.width,Jr=$r.height;let Hr,Kr,ys;const Yr=$r.data;switch(Zr){case ur.ImageKind.GRAYSCALE_1BPP:Kr=0,Hr=1,ys=zr+7>>3;break;case ur.ImageKind.RGB_24BPP:Kr=2,Hr=8,ys=zr*3;break;case ur.ImageKind.RGBA_32BPP:Kr=6,Hr=8,ys=zr*4;break;default:throw new Error("invalid format")}const Fr=new Uint8Array((1+ys)*Jr);let Br=0,Ur=0;for(let As=0;As<Jr;++As)Fr[Br++]=0,Fr.set(Yr.subarray(Ur,Ur+ys),Br),Ur+=ys,Br+=ys;if(Zr===ur.ImageKind.GRAYSCALE_1BPP&&qr){Br=0;for(let As=0;As<Jr;As++){Br++;for(let Cs=0;Cs<ys;Cs++)Fr[Br++]^=255}}const Qr=new Uint8Array([zr>>24&255,zr>>16&255,zr>>8&255,zr&255,Jr>>24&255,Jr>>16&255,Jr>>8&255,Jr&255,Hr,Kr,0,0,0]),Vr=Dr(Fr),Gr=Cr.length+kr*3+Qr.length+Vr.length,is=new Uint8Array(Gr);let ps=0;return is.set(Cr,ps),ps+=Cr.length,Nr("IHDR",Qr,is,ps),ps+=kr+Qr.length,Nr("IDATA",Vr,is,ps),ps+=kr+Vr.length,Nr("IEND",new Uint8Array(0),is,ps),gr(is,"image/png",rs)}return function(Zr,rs,qr){const zr=Zr.kind===void 0?ur.ImageKind.GRAYSCALE_1BPP:Zr.kind;return Ir(Zr,zr,rs,qr)}}();class vr{constructor(){this.fontSizeScale=1,this.fontWeight=dr.fontWeight,this.fontSize=0,this.textMatrix=ur.IDENTITY_MATRIX,this.fontMatrix=ur.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=ur.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=dr.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(kr,Mr){this.x=kr,this.y=Mr}}function br(Cr){let kr=[];const Mr=[];for(const Rr of Cr){if(Rr.fn==="save"){kr.push({fnId:92,fn:"group",items:[]}),Mr.push(kr),kr=kr.at(-1).items;continue}Rr.fn==="restore"?kr=Mr.pop():kr.push(Rr)}return kr}function Sr(Cr){if(Number.isInteger(Cr))return Cr.toString();const kr=Cr.toFixed(10);let Mr=kr.length-1;if(kr[Mr]!=="0")return kr;do Mr--;while(kr[Mr]==="0");return kr.substring(0,kr[Mr]==="."?Mr:Mr+1)}function xr(Cr){if(Cr[4]===0&&Cr[5]===0){if(Cr[1]===0&&Cr[2]===0)return Cr[0]===1&&Cr[3]===1?"":`scale(${Sr(Cr[0])} ${Sr(Cr[3])})`;if(Cr[0]===Cr[3]&&Cr[1]===-Cr[2]){const kr=Math.acos(Cr[0])*180/Math.PI;return`rotate(${Sr(kr)})`}}else if(Cr[0]===1&&Cr[1]===0&&Cr[2]===0&&Cr[3]===1)return`translate(${Sr(Cr[4])} ${Sr(Cr[5])})`;return`matrix(${Sr(Cr[0])} ${Sr(Cr[1])} ${Sr(Cr[2])} ${Sr(Cr[3])} ${Sr(Cr[4])} ${Sr(Cr[5])})`}let Er=0,wr=0,Ar=0;class Tr{constructor(kr,Mr,Rr=!1){(0,cr.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new cr.DOMSVGFactory,this.current=new vr,this.transformMatrix=ur.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=kr,this.objs=Mr,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!Rr,this._operatorIdMapping=[];for(const Nr in ur.OPS)this._operatorIdMapping[ur.OPS[Nr]]=Nr}getObject(kr,Mr=null){return typeof kr=="string"?kr.startsWith("g_")?this.commonObjs.get(kr):this.objs.get(kr):Mr}save(){this.transformStack.push(this.transformMatrix);const kr=this.current;this.extraStack.push(kr),this.current=kr.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(kr){this.save(),this.executeOpTree(kr),this.restore()}loadDependencies(kr){const Mr=kr.fnArray,Rr=kr.argsArray;for(let Nr=0,_r=Mr.length;Nr<_r;Nr++)if(Mr[Nr]===ur.OPS.dependency)for(const Dr of Rr[Nr]){const Pr=Dr.startsWith("g_")?this.commonObjs:this.objs,Ir=new Promise($r=>{Pr.get(Dr,$r)});this.current.dependencies.push(Ir)}return Promise.all(this.current.dependencies)}transform(kr,Mr,Rr,Nr,_r,Dr){const Pr=[kr,Mr,Rr,Nr,_r,Dr];this.transformMatrix=ur.Util.transform(this.transformMatrix,Pr),this.tgrp=null}getSVG(kr,Mr){this.viewport=Mr;const Rr=this._initialize(Mr);return this.loadDependencies(kr).then(()=>(this.transformMatrix=ur.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(kr)),Rr))}convertOpList(kr){const Mr=this._operatorIdMapping,Rr=kr.argsArray,Nr=kr.fnArray,_r=[];for(let Dr=0,Pr=Nr.length;Dr<Pr;Dr++){const Ir=Nr[Dr];_r.push({fnId:Ir,fn:Mr[Ir],args:Rr[Dr]})}return br(_r)}executeOpTree(kr){for(const Mr of kr){const Rr=Mr.fn,Nr=Mr.fnId,_r=Mr.args;switch(Nr|0){case ur.OPS.beginText:this.beginText();break;case ur.OPS.dependency:break;case ur.OPS.setLeading:this.setLeading(_r);break;case ur.OPS.setLeadingMoveText:this.setLeadingMoveText(_r[0],_r[1]);break;case ur.OPS.setFont:this.setFont(_r);break;case ur.OPS.showText:this.showText(_r[0]);break;case ur.OPS.showSpacedText:this.showText(_r[0]);break;case ur.OPS.endText:this.endText();break;case ur.OPS.moveText:this.moveText(_r[0],_r[1]);break;case ur.OPS.setCharSpacing:this.setCharSpacing(_r[0]);break;case ur.OPS.setWordSpacing:this.setWordSpacing(_r[0]);break;case ur.OPS.setHScale:this.setHScale(_r[0]);break;case ur.OPS.setTextMatrix:this.setTextMatrix(_r[0],_r[1],_r[2],_r[3],_r[4],_r[5]);break;case ur.OPS.setTextRise:this.setTextRise(_r[0]);break;case ur.OPS.setTextRenderingMode:this.setTextRenderingMode(_r[0]);break;case ur.OPS.setLineWidth:this.setLineWidth(_r[0]);break;case ur.OPS.setLineJoin:this.setLineJoin(_r[0]);break;case ur.OPS.setLineCap:this.setLineCap(_r[0]);break;case ur.OPS.setMiterLimit:this.setMiterLimit(_r[0]);break;case ur.OPS.setFillRGBColor:this.setFillRGBColor(_r[0],_r[1],_r[2]);break;case ur.OPS.setStrokeRGBColor:this.setStrokeRGBColor(_r[0],_r[1],_r[2]);break;case ur.OPS.setStrokeColorN:this.setStrokeColorN(_r);break;case ur.OPS.setFillColorN:this.setFillColorN(_r);break;case ur.OPS.shadingFill:this.shadingFill(_r[0]);break;case ur.OPS.setDash:this.setDash(_r[0],_r[1]);break;case ur.OPS.setRenderingIntent:this.setRenderingIntent(_r[0]);break;case ur.OPS.setFlatness:this.setFlatness(_r[0]);break;case ur.OPS.setGState:this.setGState(_r[0]);break;case ur.OPS.fill:this.fill();break;case ur.OPS.eoFill:this.eoFill();break;case ur.OPS.stroke:this.stroke();break;case ur.OPS.fillStroke:this.fillStroke();break;case ur.OPS.eoFillStroke:this.eoFillStroke();break;case ur.OPS.clip:this.clip("nonzero");break;case ur.OPS.eoClip:this.clip("evenodd");break;case ur.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case ur.OPS.paintImageXObject:this.paintImageXObject(_r[0]);break;case ur.OPS.paintInlineImageXObject:this.paintInlineImageXObject(_r[0]);break;case ur.OPS.paintImageMaskXObject:this.paintImageMaskXObject(_r[0]);break;case ur.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(_r[0],_r[1]);break;case ur.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case ur.OPS.closePath:this.closePath();break;case ur.OPS.closeStroke:this.closeStroke();break;case ur.OPS.closeFillStroke:this.closeFillStroke();break;case ur.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case ur.OPS.nextLine:this.nextLine();break;case ur.OPS.transform:this.transform(_r[0],_r[1],_r[2],_r[3],_r[4],_r[5]);break;case ur.OPS.constructPath:this.constructPath(_r[0],_r[1]);break;case ur.OPS.endPath:this.endPath();break;case 92:this.group(Mr.items);break;default:(0,ur.warn)(`Unimplemented operator ${Rr}`);break}}}setWordSpacing(kr){this.current.wordSpacing=kr}setCharSpacing(kr){this.current.charSpacing=kr}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(kr,Mr,Rr,Nr,_r,Dr){const Pr=this.current;Pr.textMatrix=Pr.lineMatrix=[kr,Mr,Rr,Nr,_r,Dr],Pr.textMatrixScale=Math.hypot(kr,Mr),Pr.x=Pr.lineX=0,Pr.y=Pr.lineY=0,Pr.xcoords=[],Pr.ycoords=[],Pr.tspan=this.svgFactory.createElement("svg:tspan"),Pr.tspan.setAttributeNS(null,"font-family",Pr.fontFamily),Pr.tspan.setAttributeNS(null,"font-size",`${Sr(Pr.fontSize)}px`),Pr.tspan.setAttributeNS(null,"y",Sr(-Pr.y)),Pr.txtElement=this.svgFactory.createElement("svg:text"),Pr.txtElement.append(Pr.tspan)}beginText(){const kr=this.current;kr.x=kr.lineX=0,kr.y=kr.lineY=0,kr.textMatrix=ur.IDENTITY_MATRIX,kr.lineMatrix=ur.IDENTITY_MATRIX,kr.textMatrixScale=1,kr.tspan=this.svgFactory.createElement("svg:tspan"),kr.txtElement=this.svgFactory.createElement("svg:text"),kr.txtgrp=this.svgFactory.createElement("svg:g"),kr.xcoords=[],kr.ycoords=[]}moveText(kr,Mr){const Rr=this.current;Rr.x=Rr.lineX+=kr,Rr.y=Rr.lineY+=Mr,Rr.xcoords=[],Rr.ycoords=[],Rr.tspan=this.svgFactory.createElement("svg:tspan"),Rr.tspan.setAttributeNS(null,"font-family",Rr.fontFamily),Rr.tspan.setAttributeNS(null,"font-size",`${Sr(Rr.fontSize)}px`),Rr.tspan.setAttributeNS(null,"y",Sr(-Rr.y))}showText(kr){const Mr=this.current,Rr=Mr.font,Nr=Mr.fontSize;if(Nr===0)return;const _r=Mr.fontSizeScale,Dr=Mr.charSpacing,Pr=Mr.wordSpacing,Ir=Mr.fontDirection,$r=Mr.textHScale*Ir,Zr=Rr.vertical,rs=Zr?1:-1,qr=Rr.defaultVMetrics,zr=Nr*Mr.fontMatrix[0];let Jr=0;for(const ys of kr){if(ys===null){Jr+=Ir*Pr;continue}else if(typeof ys=="number"){Jr+=rs*ys*Nr/1e3;continue}const Yr=(ys.isSpace?Pr:0)+Dr,Fr=ys.fontChar;let Br,Ur,Qr=ys.width;if(Zr){let Gr;const is=ys.vmetric||qr;Gr=ys.vmetric?is[1]:Qr*.5,Gr=-Gr*zr;const ps=is[2]*zr;Qr=is?-is[0]:Qr,Br=Gr/_r,Ur=(Jr+ps)/_r}else Br=Jr/_r,Ur=0;(ys.isInFont||Rr.missingFile)&&(Mr.xcoords.push(Mr.x+Br),Zr&&Mr.ycoords.push(-Mr.y+Ur),Mr.tspan.textContent+=Fr);const Vr=Zr?Qr*zr-Yr*Ir:Qr*zr+Yr*Ir;Jr+=Vr}Mr.tspan.setAttributeNS(null,"x",Mr.xcoords.map(Sr).join(" ")),Zr?Mr.tspan.setAttributeNS(null,"y",Mr.ycoords.map(Sr).join(" ")):Mr.tspan.setAttributeNS(null,"y",Sr(-Mr.y)),Zr?Mr.y-=Jr:Mr.x+=Jr*$r,Mr.tspan.setAttributeNS(null,"font-family",Mr.fontFamily),Mr.tspan.setAttributeNS(null,"font-size",`${Sr(Mr.fontSize)}px`),Mr.fontStyle!==dr.fontStyle&&Mr.tspan.setAttributeNS(null,"font-style",Mr.fontStyle),Mr.fontWeight!==dr.fontWeight&&Mr.tspan.setAttributeNS(null,"font-weight",Mr.fontWeight);const Hr=Mr.textRenderingMode&ur.TextRenderingMode.FILL_STROKE_MASK;if(Hr===ur.TextRenderingMode.FILL||Hr===ur.TextRenderingMode.FILL_STROKE?(Mr.fillColor!==dr.fillColor&&Mr.tspan.setAttributeNS(null,"fill",Mr.fillColor),Mr.fillAlpha<1&&Mr.tspan.setAttributeNS(null,"fill-opacity",Mr.fillAlpha)):Mr.textRenderingMode===ur.TextRenderingMode.ADD_TO_PATH?Mr.tspan.setAttributeNS(null,"fill","transparent"):Mr.tspan.setAttributeNS(null,"fill","none"),Hr===ur.TextRenderingMode.STROKE||Hr===ur.TextRenderingMode.FILL_STROKE){const ys=1/(Mr.textMatrixScale||1);this._setStrokeAttributes(Mr.tspan,ys)}let Kr=Mr.textMatrix;Mr.textRise!==0&&(Kr=Kr.slice(),Kr[5]+=Mr.textRise),Mr.txtElement.setAttributeNS(null,"transform",`${xr(Kr)} scale(${Sr($r)}, -1)`),Mr.txtElement.setAttributeNS(hr,"xml:space","preserve"),Mr.txtElement.append(Mr.tspan),Mr.txtgrp.append(Mr.txtElement),this._ensureTransformGroup().append(Mr.txtElement)}setLeadingMoveText(kr,Mr){this.setLeading(-Mr),this.moveText(kr,Mr)}addFontStyle(kr){if(!kr.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const Mr=gr(kr.data,kr.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${kr.loadedName}"; src: url(${Mr}); }
`}setFont(kr){const Mr=this.current,Rr=this.commonObjs.get(kr[0]);let Nr=kr[1];Mr.font=Rr,this.embedFonts&&!Rr.missingFile&&!this.embeddedFonts[Rr.loadedName]&&(this.addFontStyle(Rr),this.embeddedFonts[Rr.loadedName]=Rr),Mr.fontMatrix=Rr.fontMatrix||ur.FONT_IDENTITY_MATRIX;let _r="normal";Rr.black?_r="900":Rr.bold&&(_r="bold");const Dr=Rr.italic?"italic":"normal";Nr<0?(Nr=-Nr,Mr.fontDirection=-1):Mr.fontDirection=1,Mr.fontSize=Nr,Mr.fontFamily=Rr.loadedName,Mr.fontWeight=_r,Mr.fontStyle=Dr,Mr.tspan=this.svgFactory.createElement("svg:tspan"),Mr.tspan.setAttributeNS(null,"y",Sr(-Mr.y)),Mr.xcoords=[],Mr.ycoords=[]}endText(){var Mr;const kr=this.current;kr.textRenderingMode&ur.TextRenderingMode.ADD_TO_PATH_FLAG&&((Mr=kr.txtElement)!=null&&Mr.hasChildNodes())&&(kr.element=kr.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(kr){kr>0&&(this.current.lineWidth=kr)}setLineCap(kr){this.current.lineCap=pr[kr]}setLineJoin(kr){this.current.lineJoin=mr[kr]}setMiterLimit(kr){this.current.miterLimit=kr}setStrokeAlpha(kr){this.current.strokeAlpha=kr}setStrokeRGBColor(kr,Mr,Rr){this.current.strokeColor=ur.Util.makeHexColor(kr,Mr,Rr)}setFillAlpha(kr){this.current.fillAlpha=kr}setFillRGBColor(kr,Mr,Rr){this.current.fillColor=ur.Util.makeHexColor(kr,Mr,Rr),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(kr){this.current.strokeColor=this._makeColorN_Pattern(kr)}setFillColorN(kr){this.current.fillColor=this._makeColorN_Pattern(kr)}shadingFill(kr){const{width:Mr,height:Rr}=this.viewport,Nr=ur.Util.inverseTransform(this.transformMatrix),[_r,Dr,Pr,Ir]=ur.Util.getAxialAlignedBoundingBox([0,0,Mr,Rr],Nr),$r=this.svgFactory.createElement("svg:rect");$r.setAttributeNS(null,"x",_r),$r.setAttributeNS(null,"y",Dr),$r.setAttributeNS(null,"width",Pr-_r),$r.setAttributeNS(null,"height",Ir-Dr),$r.setAttributeNS(null,"fill",this._makeShadingPattern(kr)),this.current.fillAlpha<1&&$r.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append($r)}_makeColorN_Pattern(kr){return kr[0]==="TilingPattern"?this._makeTilingPattern(kr):this._makeShadingPattern(kr)}_makeTilingPattern(kr){const Mr=kr[1],Rr=kr[2],Nr=kr[3]||ur.IDENTITY_MATRIX,[_r,Dr,Pr,Ir]=kr[4],$r=kr[5],Zr=kr[6],rs=kr[7],qr=`shading${Ar++}`,[zr,Jr,Hr,Kr]=ur.Util.normalizeRect([...ur.Util.applyTransform([_r,Dr],Nr),...ur.Util.applyTransform([Pr,Ir],Nr)]),[ys,Yr]=ur.Util.singularValueDecompose2dScale(Nr),Fr=$r*ys,Br=Zr*Yr,Ur=this.svgFactory.createElement("svg:pattern");Ur.setAttributeNS(null,"id",qr),Ur.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Ur.setAttributeNS(null,"width",Fr),Ur.setAttributeNS(null,"height",Br),Ur.setAttributeNS(null,"x",`${zr}`),Ur.setAttributeNS(null,"y",`${Jr}`);const Qr=this.svg,Vr=this.transformMatrix,Gr=this.current.fillColor,is=this.current.strokeColor,ps=this.svgFactory.create(Hr-zr,Kr-Jr);if(this.svg=ps,this.transformMatrix=Nr,rs===2){const As=ur.Util.makeHexColor(...Mr);this.current.fillColor=As,this.current.strokeColor=As}return this.executeOpTree(this.convertOpList(Rr)),this.svg=Qr,this.transformMatrix=Vr,this.current.fillColor=Gr,this.current.strokeColor=is,Ur.append(ps.childNodes[0]),this.defs.append(Ur),`url(#${qr})`}_makeShadingPattern(kr){switch(typeof kr=="string"&&(kr=this.objs.get(kr)),kr[0]){case"RadialAxial":const Mr=`shading${Ar++}`,Rr=kr[3];let Nr;switch(kr[1]){case"axial":const _r=kr[4],Dr=kr[5];Nr=this.svgFactory.createElement("svg:linearGradient"),Nr.setAttributeNS(null,"id",Mr),Nr.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Nr.setAttributeNS(null,"x1",_r[0]),Nr.setAttributeNS(null,"y1",_r[1]),Nr.setAttributeNS(null,"x2",Dr[0]),Nr.setAttributeNS(null,"y2",Dr[1]);break;case"radial":const Pr=kr[4],Ir=kr[5],$r=kr[6],Zr=kr[7];Nr=this.svgFactory.createElement("svg:radialGradient"),Nr.setAttributeNS(null,"id",Mr),Nr.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Nr.setAttributeNS(null,"cx",Ir[0]),Nr.setAttributeNS(null,"cy",Ir[1]),Nr.setAttributeNS(null,"r",Zr),Nr.setAttributeNS(null,"fx",Pr[0]),Nr.setAttributeNS(null,"fy",Pr[1]),Nr.setAttributeNS(null,"fr",$r);break;default:throw new Error(`Unknown RadialAxial type: ${kr[1]}`)}for(const _r of Rr){const Dr=this.svgFactory.createElement("svg:stop");Dr.setAttributeNS(null,"offset",_r[0]),Dr.setAttributeNS(null,"stop-color",_r[1]),Nr.append(Dr)}return this.defs.append(Nr),`url(#${Mr})`;case"Mesh":return(0,ur.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${kr[0]}`)}}setDash(kr,Mr){this.current.dashArray=kr,this.current.dashPhase=Mr}constructPath(kr,Mr){const Rr=this.current;let Nr=Rr.x,_r=Rr.y,Dr=[],Pr=0;for(const Ir of kr)switch(Ir|0){case ur.OPS.rectangle:Nr=Mr[Pr++],_r=Mr[Pr++];const $r=Mr[Pr++],Zr=Mr[Pr++],rs=Nr+$r,qr=_r+Zr;Dr.push("M",Sr(Nr),Sr(_r),"L",Sr(rs),Sr(_r),"L",Sr(rs),Sr(qr),"L",Sr(Nr),Sr(qr),"Z");break;case ur.OPS.moveTo:Nr=Mr[Pr++],_r=Mr[Pr++],Dr.push("M",Sr(Nr),Sr(_r));break;case ur.OPS.lineTo:Nr=Mr[Pr++],_r=Mr[Pr++],Dr.push("L",Sr(Nr),Sr(_r));break;case ur.OPS.curveTo:Nr=Mr[Pr+4],_r=Mr[Pr+5],Dr.push("C",Sr(Mr[Pr]),Sr(Mr[Pr+1]),Sr(Mr[Pr+2]),Sr(Mr[Pr+3]),Sr(Nr),Sr(_r)),Pr+=6;break;case ur.OPS.curveTo2:Dr.push("C",Sr(Nr),Sr(_r),Sr(Mr[Pr]),Sr(Mr[Pr+1]),Sr(Mr[Pr+2]),Sr(Mr[Pr+3])),Nr=Mr[Pr+2],_r=Mr[Pr+3],Pr+=4;break;case ur.OPS.curveTo3:Nr=Mr[Pr+2],_r=Mr[Pr+3],Dr.push("C",Sr(Mr[Pr]),Sr(Mr[Pr+1]),Sr(Nr),Sr(_r),Sr(Nr),Sr(_r)),Pr+=4;break;case ur.OPS.closePath:Dr.push("Z");break}Dr=Dr.join(" "),Rr.path&&kr.length>0&&kr[0]!==ur.OPS.rectangle&&kr[0]!==ur.OPS.moveTo?Dr=Rr.path.getAttributeNS(null,"d")+Dr:(Rr.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(Rr.path)),Rr.path.setAttributeNS(null,"d",Dr),Rr.path.setAttributeNS(null,"fill","none"),Rr.element=Rr.path,Rr.setCurrentPoint(Nr,_r)}endPath(){const kr=this.current;if(kr.path=null,!this.pendingClip)return;if(!kr.element){this.pendingClip=null;return}const Mr=`clippath${Er++}`,Rr=this.svgFactory.createElement("svg:clipPath");Rr.setAttributeNS(null,"id",Mr),Rr.setAttributeNS(null,"transform",xr(this.transformMatrix));const Nr=kr.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Nr.setAttributeNS(null,"clip-rule","evenodd"):Nr.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,Rr.append(Nr),this.defs.append(Rr),kr.activeClipUrl){kr.clipGroup=null;for(const _r of this.extraStack)_r.clipGroup=null;Rr.setAttributeNS(null,"clip-path",kr.activeClipUrl)}kr.activeClipUrl=`url(#${Mr})`,this.tgrp=null}clip(kr){this.pendingClip=kr}closePath(){const kr=this.current;if(kr.path){const Mr=`${kr.path.getAttributeNS(null,"d")}Z`;kr.path.setAttributeNS(null,"d",Mr)}}setLeading(kr){this.current.leading=-kr}setTextRise(kr){this.current.textRise=kr}setTextRenderingMode(kr){this.current.textRenderingMode=kr}setHScale(kr){this.current.textHScale=kr/100}setRenderingIntent(kr){}setFlatness(kr){}setGState(kr){for(const[Mr,Rr]of kr)switch(Mr){case"LW":this.setLineWidth(Rr);break;case"LC":this.setLineCap(Rr);break;case"LJ":this.setLineJoin(Rr);break;case"ML":this.setMiterLimit(Rr);break;case"D":this.setDash(Rr[0],Rr[1]);break;case"RI":this.setRenderingIntent(Rr);break;case"FL":this.setFlatness(Rr);break;case"Font":this.setFont(Rr);break;case"CA":this.setStrokeAlpha(Rr);break;case"ca":this.setFillAlpha(Rr);break;default:(0,ur.warn)(`Unimplemented graphic state operator ${Mr}`);break}}fill(){const kr=this.current;kr.element&&(kr.element.setAttributeNS(null,"fill",kr.fillColor),kr.element.setAttributeNS(null,"fill-opacity",kr.fillAlpha),this.endPath())}stroke(){const kr=this.current;kr.element&&(this._setStrokeAttributes(kr.element),kr.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(kr,Mr=1){const Rr=this.current;let Nr=Rr.dashArray;Mr!==1&&Nr.length>0&&(Nr=Nr.map(function(_r){return Mr*_r})),kr.setAttributeNS(null,"stroke",Rr.strokeColor),kr.setAttributeNS(null,"stroke-opacity",Rr.strokeAlpha),kr.setAttributeNS(null,"stroke-miterlimit",Sr(Rr.miterLimit)),kr.setAttributeNS(null,"stroke-linecap",Rr.lineCap),kr.setAttributeNS(null,"stroke-linejoin",Rr.lineJoin),kr.setAttributeNS(null,"stroke-width",Sr(Mr*Rr.lineWidth)+"px"),kr.setAttributeNS(null,"stroke-dasharray",Nr.map(Sr).join(" ")),kr.setAttributeNS(null,"stroke-dashoffset",Sr(Mr*Rr.dashPhase)+"px")}eoFill(){var kr;(kr=this.current.element)==null||kr.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var kr;(kr=this.current.element)==null||kr.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const kr=this.svgFactory.createElement("svg:rect");kr.setAttributeNS(null,"x","0"),kr.setAttributeNS(null,"y","0"),kr.setAttributeNS(null,"width","1px"),kr.setAttributeNS(null,"height","1px"),kr.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(kr)}paintImageXObject(kr){const Mr=this.getObject(kr);if(!Mr){(0,ur.warn)(`Dependent image with object ID ${kr} is not ready yet`);return}this.paintInlineImageXObject(Mr)}paintInlineImageXObject(kr,Mr){const Rr=kr.width,Nr=kr.height,_r=yr(kr,this.forceDataSchema,!!Mr),Dr=this.svgFactory.createElement("svg:rect");Dr.setAttributeNS(null,"x","0"),Dr.setAttributeNS(null,"y","0"),Dr.setAttributeNS(null,"width",Sr(Rr)),Dr.setAttributeNS(null,"height",Sr(Nr)),this.current.element=Dr,this.clip("nonzero");const Pr=this.svgFactory.createElement("svg:image");Pr.setAttributeNS(fr,"xlink:href",_r),Pr.setAttributeNS(null,"x","0"),Pr.setAttributeNS(null,"y",Sr(-Nr)),Pr.setAttributeNS(null,"width",Sr(Rr)+"px"),Pr.setAttributeNS(null,"height",Sr(Nr)+"px"),Pr.setAttributeNS(null,"transform",`scale(${Sr(1/Rr)} ${Sr(-1/Nr)})`),Mr?Mr.append(Pr):this._ensureTransformGroup().append(Pr)}paintImageMaskXObject(kr){const Mr=this.getObject(kr.data,kr);if(Mr.bitmap){(0,ur.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const Rr=this.current,Nr=Mr.width,_r=Mr.height,Dr=Rr.fillColor;Rr.maskId=`mask${wr++}`;const Pr=this.svgFactory.createElement("svg:mask");Pr.setAttributeNS(null,"id",Rr.maskId);const Ir=this.svgFactory.createElement("svg:rect");Ir.setAttributeNS(null,"x","0"),Ir.setAttributeNS(null,"y","0"),Ir.setAttributeNS(null,"width",Sr(Nr)),Ir.setAttributeNS(null,"height",Sr(_r)),Ir.setAttributeNS(null,"fill",Dr),Ir.setAttributeNS(null,"mask",`url(#${Rr.maskId})`),this.defs.append(Pr),this._ensureTransformGroup().append(Ir),this.paintInlineImageXObject(Mr,Pr)}paintFormXObjectBegin(kr,Mr){if(Array.isArray(kr)&&kr.length===6&&this.transform(kr[0],kr[1],kr[2],kr[3],kr[4],kr[5]),Mr){const Rr=Mr[2]-Mr[0],Nr=Mr[3]-Mr[1],_r=this.svgFactory.createElement("svg:rect");_r.setAttributeNS(null,"x",Mr[0]),_r.setAttributeNS(null,"y",Mr[1]),_r.setAttributeNS(null,"width",Sr(Rr)),_r.setAttributeNS(null,"height",Sr(Nr)),this.current.element=_r,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(kr){const Mr=this.svgFactory.create(kr.width,kr.height),Rr=this.svgFactory.createElement("svg:defs");Mr.append(Rr),this.defs=Rr;const Nr=this.svgFactory.createElement("svg:g");return Nr.setAttributeNS(null,"transform",xr(kr.transform)),Mr.append(Nr),this.svg=Nr,Mr}_ensureClipGroup(){if(!this.current.clipGroup){const kr=this.svgFactory.createElement("svg:g");kr.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(kr),this.current.clipGroup=kr}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",xr(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}or.SVGGraphics=Tr},(ar,or)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.XfaText=void 0;class lr{static textContent(ur){const dr=[],hr={items:dr,styles:Object.create(null)};function fr(pr){var yr;if(!pr)return;let mr=null;const gr=pr.name;if(gr==="#text")mr=pr.value;else if(lr.shouldBuildText(gr))(yr=pr==null?void 0:pr.attributes)!=null&&yr.textContent?mr=pr.attributes.textContent:pr.value&&(mr=pr.value);else return;if(mr!==null&&dr.push({str:mr}),!!pr.children)for(const vr of pr.children)fr(vr)}return fr(ur),hr}static shouldBuildText(ur){return!(ur==="textarea"||ur==="input"||ur==="option"||ur==="select")}}or.XfaText=lr},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.TextLayerRenderTask=void 0,or.renderTextLayer=xr,or.updateTextLayer=Er;var cr=lr(1),ur=lr(6);const dr=1e5,hr=30,fr=.8,pr=new Map;function mr(wr,Ar){let Tr;if(Ar&&cr.FeatureTest.isOffscreenCanvasSupported)Tr=new OffscreenCanvas(wr,wr).getContext("2d",{alpha:!1});else{const Cr=document.createElement("canvas");Cr.width=Cr.height=wr,Tr=Cr.getContext("2d",{alpha:!1})}return Tr}function gr(wr,Ar){const Tr=pr.get(wr);if(Tr)return Tr;const Cr=mr(hr,Ar);Cr.font=`${hr}px ${wr}`;const kr=Cr.measureText("");let Mr=kr.fontBoundingBoxAscent,Rr=Math.abs(kr.fontBoundingBoxDescent);if(Mr){const _r=Mr/(Mr+Rr);return pr.set(wr,_r),Cr.canvas.width=Cr.canvas.height=0,_r}Cr.strokeStyle="red",Cr.clearRect(0,0,hr,hr),Cr.strokeText("g",0,0);let Nr=Cr.getImageData(0,0,hr,hr).data;Rr=0;for(let _r=Nr.length-1-3;_r>=0;_r-=4)if(Nr[_r]>0){Rr=Math.ceil(_r/4/hr);break}Cr.clearRect(0,0,hr,hr),Cr.strokeText("A",0,hr),Nr=Cr.getImageData(0,0,hr,hr).data,Mr=0;for(let _r=0,Dr=Nr.length;_r<Dr;_r+=4)if(Nr[_r]>0){Mr=hr-Math.floor(_r/4/hr);break}if(Cr.canvas.width=Cr.canvas.height=0,Mr){const _r=Mr/(Mr+Rr);return pr.set(wr,_r),_r}return pr.set(wr,fr),fr}function yr(wr,Ar,Tr){const Cr=document.createElement("span"),kr={angle:0,canvasWidth:0,hasText:Ar.str!=="",hasEOL:Ar.hasEOL,fontSize:0};wr._textDivs.push(Cr);const Mr=cr.Util.transform(wr._transform,Ar.transform);let Rr=Math.atan2(Mr[1],Mr[0]);const Nr=Tr[Ar.fontName];Nr.vertical&&(Rr+=Math.PI/2);const _r=Math.hypot(Mr[2],Mr[3]),Dr=_r*gr(Nr.fontFamily,wr._isOffscreenCanvasSupported);let Pr,Ir;Rr===0?(Pr=Mr[4],Ir=Mr[5]-Dr):(Pr=Mr[4]+Dr*Math.sin(Rr),Ir=Mr[5]-Dr*Math.cos(Rr));const $r="calc(var(--scale-factor)*",Zr=Cr.style;wr._container===wr._rootContainer?(Zr.left=`${(100*Pr/wr._pageWidth).toFixed(2)}%`,Zr.top=`${(100*Ir/wr._pageHeight).toFixed(2)}%`):(Zr.left=`${$r}${Pr.toFixed(2)}px)`,Zr.top=`${$r}${Ir.toFixed(2)}px)`),Zr.fontSize=`${$r}${_r.toFixed(2)}px)`,Zr.fontFamily=Nr.fontFamily,kr.fontSize=_r,Cr.setAttribute("role","presentation"),Cr.textContent=Ar.str,Cr.dir=Ar.dir,wr._fontInspectorEnabled&&(Cr.dataset.fontName=Ar.fontName),Rr!==0&&(kr.angle=Rr*(180/Math.PI));let rs=!1;if(Ar.str.length>1)rs=!0;else if(Ar.str!==" "&&Ar.transform[0]!==Ar.transform[3]){const qr=Math.abs(Ar.transform[0]),zr=Math.abs(Ar.transform[3]);qr!==zr&&Math.max(qr,zr)/Math.min(qr,zr)>1.5&&(rs=!0)}rs&&(kr.canvasWidth=Nr.vertical?Ar.height:Ar.width),wr._textDivProperties.set(Cr,kr),wr._isReadableStream&&wr._layoutText(Cr)}function vr(wr){const{div:Ar,scale:Tr,properties:Cr,ctx:kr,prevFontSize:Mr,prevFontFamily:Rr}=wr,{style:Nr}=Ar;let _r="";if(Cr.canvasWidth!==0&&Cr.hasText){const{fontFamily:Dr}=Nr,{canvasWidth:Pr,fontSize:Ir}=Cr;(Mr!==Ir||Rr!==Dr)&&(kr.font=`${Ir*Tr}px ${Dr}`,wr.prevFontSize=Ir,wr.prevFontFamily=Dr);const{width:$r}=kr.measureText(Ar.textContent);$r>0&&(_r=`scaleX(${Pr*Tr/$r})`)}Cr.angle!==0&&(_r=`rotate(${Cr.angle}deg) ${_r}`),_r.length>0&&(Nr.transform=_r)}function br(wr){if(wr._canceled)return;const Ar=wr._textDivs,Tr=wr._capability;if(Ar.length>dr){Tr.resolve();return}if(!wr._isReadableStream)for(const kr of Ar)wr._layoutText(kr);Tr.resolve()}class Sr{constructor({textContentSource:Ar,container:Tr,viewport:Cr,textDivs:kr,textDivProperties:Mr,textContentItemsStr:Rr,isOffscreenCanvasSupported:Nr}){var $r;this._textContentSource=Ar,this._isReadableStream=Ar instanceof ReadableStream,this._container=this._rootContainer=Tr,this._textDivs=kr||[],this._textContentItemsStr=Rr||[],this._isOffscreenCanvasSupported=Nr,this._fontInspectorEnabled=!!(($r=globalThis.FontInspector)!=null&&$r.enabled),this._reader=null,this._textDivProperties=Mr||new WeakMap,this._canceled=!1,this._capability=new cr.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:Cr.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:mr(0,Nr)};const{pageWidth:_r,pageHeight:Dr,pageX:Pr,pageY:Ir}=Cr.rawDims;this._transform=[1,0,0,-1,-Pr,Ir+Dr],this._pageWidth=_r,this._pageHeight=Dr,(0,ur.setLayerDimensions)(Tr,Cr),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new cr.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new cr.AbortException("TextLayer task cancelled."))}_processItems(Ar,Tr){for(const Cr of Ar){if(Cr.str===void 0){if(Cr.type==="beginMarkedContentProps"||Cr.type==="beginMarkedContent"){const kr=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),Cr.id!==null&&this._container.setAttribute("id",`${Cr.id}`),kr.append(this._container)}else Cr.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(Cr.str),yr(this,Cr,Tr)}}_layoutText(Ar){const Tr=this._layoutTextParams.properties=this._textDivProperties.get(Ar);if(this._layoutTextParams.div=Ar,vr(this._layoutTextParams),Tr.hasText&&this._container.append(Ar),Tr.hasEOL){const Cr=document.createElement("br");Cr.setAttribute("role","presentation"),this._container.append(Cr)}}_render(){const Ar=new cr.PromiseCapability;let Tr=Object.create(null);if(this._isReadableStream){const Cr=()=>{this._reader.read().then(({value:kr,done:Mr})=>{if(Mr){Ar.resolve();return}Object.assign(Tr,kr.styles),this._processItems(kr.items,Tr),Cr()},Ar.reject)};this._reader=this._textContentSource.getReader(),Cr()}else if(this._textContentSource){const{items:Cr,styles:kr}=this._textContentSource;this._processItems(Cr,kr),Ar.resolve()}else throw new Error('No "textContentSource" parameter specified.');Ar.promise.then(()=>{Tr=null,br(this)},this._capability.reject)}}or.TextLayerRenderTask=Sr;function xr(wr){!wr.textContentSource&&(wr.textContent||wr.textContentStream)&&((0,ur.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),wr.textContentSource=wr.textContent||wr.textContentStream);const{container:Ar,viewport:Tr}=wr,Cr=getComputedStyle(Ar),kr=Cr.getPropertyValue("visibility"),Mr=parseFloat(Cr.getPropertyValue("--scale-factor"));kr==="visible"&&(!Mr||Math.abs(Mr-Tr.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const Rr=new Sr(wr);return Rr._render(),Rr}function Er({container:wr,viewport:Ar,textDivs:Tr,textDivProperties:Cr,isOffscreenCanvasSupported:kr,mustRotate:Mr=!0,mustRescale:Rr=!0}){if(Mr&&(0,ur.setLayerDimensions)(wr,{rotation:Ar.rotation}),Rr){const Nr=mr(0,kr),Dr={prevFontSize:null,prevFontFamily:null,div:null,scale:Ar.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Nr};for(const Pr of Tr)Dr.properties=Cr.get(Pr),Dr.div=Pr,vr(Dr)}}},(ar,or,lr)=>{var gr,yr,vr,br,Sr,xr,Er,wr,Ar,Tr,Cr,ao,Oi,lo,co;Object.defineProperty(or,"__esModule",{value:!0}),or.AnnotationEditorLayer=void 0;var cr=lr(1),ur=lr(4),dr=lr(28),hr=lr(33),fr=lr(6),pr=lr(34);const _r=class _r{constructor({uiManager:Pr,pageIndex:Ir,div:$r,accessibilityManager:Zr,annotationLayer:rs,viewport:qr,l10n:zr}){_s(this,Cr);_s(this,gr);_s(this,yr,!1);_s(this,vr,null);_s(this,br,this.pointerup.bind(this));_s(this,Sr,this.pointerdown.bind(this));_s(this,xr,new Map);_s(this,Er,!1);_s(this,wr,!1);_s(this,Ar,!1);_s(this,Tr);const Jr=[dr.FreeTextEditor,hr.InkEditor,pr.StampEditor];if(!_r._initialized){_r._initialized=!0;for(const Hr of Jr)Hr.initialize(zr)}Pr.registerEditorTypes(Jr),Ms(this,Tr,Pr),this.pageIndex=Ir,this.div=$r,Ms(this,gr,Zr),Ms(this,vr,rs),this.viewport=qr,Or(this,Tr).addLayer(this)}get isEmpty(){return Or(this,xr).size===0}updateToolbar(Pr){Or(this,Tr).updateToolbar(Pr)}updateMode(Pr=Or(this,Tr).getMode()){Es(this,Cr,co).call(this),Pr===cr.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),Pr!==cr.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",Pr===cr.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",Pr===cr.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",Pr===cr.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(Pr){if(!Pr&&Or(this,Tr).getMode()!==cr.AnnotationEditorType.INK)return;if(!Pr){for(const $r of Or(this,xr).values())if($r.isEmpty()){$r.setInBackground();return}}Es(this,Cr,Oi).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(Pr){Or(this,Tr).setEditingState(Pr)}addCommands(Pr){Or(this,Tr).addCommands(Pr)}enable(){this.div.style.pointerEvents="auto";const Pr=new Set;for(const $r of Or(this,xr).values())$r.enableEditing(),$r.annotationElementId&&Pr.add($r.annotationElementId);if(!Or(this,vr))return;const Ir=Or(this,vr).getEditableAnnotations();for(const $r of Ir){if($r.hide(),Or(this,Tr).isDeletedAnnotationElement($r.data.id)||Pr.has($r.data.id))continue;const Zr=this.deserialize($r);Zr&&(this.addOrRebuild(Zr),Zr.enableEditing())}}disable(){var Ir;Ms(this,Ar,!0),this.div.style.pointerEvents="none";const Pr=new Set;for(const $r of Or(this,xr).values()){if($r.disableEditing(),!$r.annotationElementId||$r.serialize()!==null){Pr.add($r.annotationElementId);continue}(Ir=this.getEditableAnnotation($r.annotationElementId))==null||Ir.show(),$r.remove()}if(Or(this,vr)){const $r=Or(this,vr).getEditableAnnotations();for(const Zr of $r){const{id:rs}=Zr.data;Pr.has(rs)||Or(this,Tr).isDeletedAnnotationElement(rs)||Zr.show()}}Es(this,Cr,co).call(this),this.isEmpty&&(this.div.hidden=!0),Ms(this,Ar,!1)}getEditableAnnotation(Pr){var Ir;return((Ir=Or(this,vr))==null?void 0:Ir.getEditableAnnotation(Pr))||null}setActiveEditor(Pr){Or(this,Tr).getActive()!==Pr&&Or(this,Tr).setActiveEditor(Pr)}enableClick(){this.div.addEventListener("pointerdown",Or(this,Sr)),this.div.addEventListener("pointerup",Or(this,br))}disableClick(){this.div.removeEventListener("pointerdown",Or(this,Sr)),this.div.removeEventListener("pointerup",Or(this,br))}attach(Pr){Or(this,xr).set(Pr.id,Pr);const{annotationElementId:Ir}=Pr;Ir&&Or(this,Tr).isDeletedAnnotationElement(Ir)&&Or(this,Tr).removeDeletedAnnotationElement(Pr)}detach(Pr){var Ir;Or(this,xr).delete(Pr.id),(Ir=Or(this,gr))==null||Ir.removePointerInTextLayer(Pr.contentDiv),!Or(this,Ar)&&Pr.annotationElementId&&Or(this,Tr).addDeletedAnnotationElement(Pr)}remove(Pr){this.detach(Pr),Or(this,Tr).removeEditor(Pr),Pr.div.contains(document.activeElement)&&setTimeout(()=>{Or(this,Tr).focusMainContainer()},0),Pr.div.remove(),Pr.isAttachedToDOM=!1,Or(this,wr)||this.addInkEditorIfNeeded(!1)}changeParent(Pr){var Ir;Pr.parent!==this&&(Pr.annotationElementId&&(Or(this,Tr).addDeletedAnnotationElement(Pr.annotationElementId),ur.AnnotationEditor.deleteAnnotationElement(Pr),Pr.annotationElementId=null),this.attach(Pr),(Ir=Pr.parent)==null||Ir.detach(Pr),Pr.setParent(this),Pr.div&&Pr.isAttachedToDOM&&(Pr.div.remove(),this.div.append(Pr.div)))}add(Pr){if(this.changeParent(Pr),Or(this,Tr).addEditor(Pr),this.attach(Pr),!Pr.isAttachedToDOM){const Ir=Pr.render();this.div.append(Ir),Pr.isAttachedToDOM=!0}Pr.fixAndSetPosition(),Pr.onceAdded(),Or(this,Tr).addToAnnotationStorage(Pr)}moveEditorInDOM(Pr){var $r;if(!Pr.isAttachedToDOM)return;const{activeElement:Ir}=document;Pr.div.contains(Ir)&&(Pr._focusEventsAllowed=!1,setTimeout(()=>{Pr.div.contains(document.activeElement)?Pr._focusEventsAllowed=!0:(Pr.div.addEventListener("focusin",()=>{Pr._focusEventsAllowed=!0},{once:!0}),Ir.focus())},0)),Pr._structTreeParentId=($r=Or(this,gr))==null?void 0:$r.moveElementInDOM(this.div,Pr.div,Pr.contentDiv,!0)}addOrRebuild(Pr){Pr.needsToBeRebuilt()?Pr.rebuild():this.add(Pr)}addUndoableEditor(Pr){const Ir=()=>Pr._uiManager.rebuild(Pr),$r=()=>{Pr.remove()};this.addCommands({cmd:Ir,undo:$r,mustExec:!1})}getNextId(){return Or(this,Tr).getId()}pasteEditor(Pr,Ir){Or(this,Tr).updateToolbar(Pr),Or(this,Tr).updateMode(Pr);const{offsetX:$r,offsetY:Zr}=Es(this,Cr,lo).call(this),rs=this.getNextId(),qr=Es(this,Cr,ao).call(this,{parent:this,id:rs,x:$r,y:Zr,uiManager:Or(this,Tr),isCentered:!0,...Ir});qr&&this.add(qr)}deserialize(Pr){switch(Pr.annotationType??Pr.annotationEditorType){case cr.AnnotationEditorType.FREETEXT:return dr.FreeTextEditor.deserialize(Pr,this,Or(this,Tr));case cr.AnnotationEditorType.INK:return hr.InkEditor.deserialize(Pr,this,Or(this,Tr));case cr.AnnotationEditorType.STAMP:return pr.StampEditor.deserialize(Pr,this,Or(this,Tr))}return null}addNewEditor(){Es(this,Cr,Oi).call(this,Es(this,Cr,lo).call(this),!0)}setSelected(Pr){Or(this,Tr).setSelected(Pr)}toggleSelected(Pr){Or(this,Tr).toggleSelected(Pr)}isSelected(Pr){return Or(this,Tr).isSelected(Pr)}unselect(Pr){Or(this,Tr).unselect(Pr)}pointerup(Pr){const{isMac:Ir}=cr.FeatureTest.platform;if(!(Pr.button!==0||Pr.ctrlKey&&Ir)&&Pr.target===this.div&&Or(this,Er)){if(Ms(this,Er,!1),!Or(this,yr)){Ms(this,yr,!0);return}if(Or(this,Tr).getMode()===cr.AnnotationEditorType.STAMP){Or(this,Tr).unselectAll();return}Es(this,Cr,Oi).call(this,Pr,!1)}}pointerdown(Pr){if(Or(this,Er)){Ms(this,Er,!1);return}const{isMac:Ir}=cr.FeatureTest.platform;if(Pr.button!==0||Pr.ctrlKey&&Ir||Pr.target!==this.div)return;Ms(this,Er,!0);const $r=Or(this,Tr).getActive();Ms(this,yr,!$r||$r.isEmpty())}findNewParent(Pr,Ir,$r){const Zr=Or(this,Tr).findParent(Ir,$r);return Zr===null||Zr===this?!1:(Zr.changeParent(Pr),!0)}destroy(){var Pr,Ir;((Pr=Or(this,Tr).getActive())==null?void 0:Pr.parent)===this&&(Or(this,Tr).commitOrRemove(),Or(this,Tr).setActiveEditor(null));for(const $r of Or(this,xr).values())(Ir=Or(this,gr))==null||Ir.removePointerInTextLayer($r.contentDiv),$r.setParent(null),$r.isAttachedToDOM=!1,$r.div.remove();this.div=null,Or(this,xr).clear(),Or(this,Tr).removeLayer(this)}render({viewport:Pr}){this.viewport=Pr,(0,fr.setLayerDimensions)(this.div,Pr);for(const Ir of Or(this,Tr).getEditors(this.pageIndex))this.add(Ir);this.updateMode()}update({viewport:Pr}){Or(this,Tr).commitOrRemove(),this.viewport=Pr,(0,fr.setLayerDimensions)(this.div,{rotation:Pr.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:Pr,pageHeight:Ir}=this.viewport.rawDims;return[Pr,Ir]}};gr=new WeakMap,yr=new WeakMap,vr=new WeakMap,br=new WeakMap,Sr=new WeakMap,xr=new WeakMap,Er=new WeakMap,wr=new WeakMap,Ar=new WeakMap,Tr=new WeakMap,Cr=new WeakSet,ao=function(Pr){switch(Or(this,Tr).getMode()){case cr.AnnotationEditorType.FREETEXT:return new dr.FreeTextEditor(Pr);case cr.AnnotationEditorType.INK:return new hr.InkEditor(Pr);case cr.AnnotationEditorType.STAMP:return new pr.StampEditor(Pr)}return null},Oi=function(Pr,Ir){const $r=this.getNextId(),Zr=Es(this,Cr,ao).call(this,{parent:this,id:$r,x:Pr.offsetX,y:Pr.offsetY,uiManager:Or(this,Tr),isCentered:Ir});return Zr&&this.add(Zr),Zr},lo=function(){const{x:Pr,y:Ir,width:$r,height:Zr}=this.div.getBoundingClientRect(),rs=Math.max(0,Pr),qr=Math.max(0,Ir),zr=Math.min(window.innerWidth,Pr+$r),Jr=Math.min(window.innerHeight,Ir+Zr),Hr=(rs+zr)/2-Pr,Kr=(qr+Jr)/2-Ir,[ys,Yr]=this.viewport.rotation%180===0?[Hr,Kr]:[Kr,Hr];return{offsetX:ys,offsetY:Yr}},co=function(){Ms(this,wr,!0);for(const Pr of Or(this,xr).values())Pr.isEmpty()&&Pr.remove();Ms(this,wr,!1)},ii(_r,"_initialized",!1);let mr=_r;or.AnnotationEditorLayer=mr},(ar,or,lr)=>{var pr,mr,gr,yr,vr,br,Sr,xr,Er,wr,$o,Vo,jo,ki,uo,Ho,ho;Object.defineProperty(or,"__esModule",{value:!0}),or.FreeTextEditor=void 0;var cr=lr(1),ur=lr(5),dr=lr(4),hr=lr(29);const _r=class _r extends dr.AnnotationEditor{constructor(Ir){super({...Ir,name:"freeTextEditor"});_s(this,wr);_s(this,pr,this.editorDivBlur.bind(this));_s(this,mr,this.editorDivFocus.bind(this));_s(this,gr,this.editorDivInput.bind(this));_s(this,yr,this.editorDivKeydown.bind(this));_s(this,vr);_s(this,br,"");_s(this,Sr,`${this.id}-editor`);_s(this,xr);_s(this,Er,null);Ms(this,vr,Ir.color||_r._defaultColor||dr.AnnotationEditor._defaultLineColor),Ms(this,xr,Ir.fontSize||_r._defaultFontSize)}static get _keyboardManager(){const Ir=_r.prototype,$r=qr=>qr.isEmpty(),Zr=ur.AnnotationEditorUIManager.TRANSLATE_SMALL,rs=ur.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,cr.shadow)(this,"_keyboardManager",new ur.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Ir.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Ir.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Ir._translateEmpty,{args:[-Zr,0],checker:$r}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ir._translateEmpty,{args:[-rs,0],checker:$r}],[["ArrowRight","mac+ArrowRight"],Ir._translateEmpty,{args:[Zr,0],checker:$r}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ir._translateEmpty,{args:[rs,0],checker:$r}],[["ArrowUp","mac+ArrowUp"],Ir._translateEmpty,{args:[0,-Zr],checker:$r}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ir._translateEmpty,{args:[0,-rs],checker:$r}],[["ArrowDown","mac+ArrowDown"],Ir._translateEmpty,{args:[0,Zr],checker:$r}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ir._translateEmpty,{args:[0,rs],checker:$r}]]))}static initialize(Ir){dr.AnnotationEditor.initialize(Ir,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const $r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat($r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Ir,$r){switch(Ir){case cr.AnnotationEditorParamsType.FREETEXT_SIZE:_r._defaultFontSize=$r;break;case cr.AnnotationEditorParamsType.FREETEXT_COLOR:_r._defaultColor=$r;break}}updateParams(Ir,$r){switch(Ir){case cr.AnnotationEditorParamsType.FREETEXT_SIZE:Es(this,wr,$o).call(this,$r);break;case cr.AnnotationEditorParamsType.FREETEXT_COLOR:Es(this,wr,Vo).call(this,$r);break}}static get defaultPropertiesToUpdate(){return[[cr.AnnotationEditorParamsType.FREETEXT_SIZE,_r._defaultFontSize],[cr.AnnotationEditorParamsType.FREETEXT_COLOR,_r._defaultColor||dr.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[cr.AnnotationEditorParamsType.FREETEXT_SIZE,Or(this,xr)],[cr.AnnotationEditorParamsType.FREETEXT_COLOR,Or(this,vr)]]}_translateEmpty(Ir,$r){this._uiManager.translateSelectedEditors(Ir,$r,!0)}getInitialTranslation(){const Ir=this.parentScale;return[-_r._internalPadding*Ir,-(_r._internalPadding+Or(this,xr))*Ir]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(cr.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",Or(this,yr)),this.editorDiv.addEventListener("focus",Or(this,mr)),this.editorDiv.addEventListener("blur",Or(this,pr)),this.editorDiv.addEventListener("input",Or(this,gr)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Or(this,Sr)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",Or(this,yr)),this.editorDiv.removeEventListener("focus",Or(this,mr)),this.editorDiv.removeEventListener("blur",Or(this,pr)),this.editorDiv.removeEventListener("input",Or(this,gr)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Ir){this._focusEventsAllowed&&(super.focusin(Ir),Ir.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Ir;if(this.width){Es(this,wr,ho).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Ir=this._initialOptions)!=null&&Ir.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Ir=Or(this,br),$r=Ms(this,br,Es(this,wr,jo).call(this).trimEnd());if(Ir===$r)return;const Zr=rs=>{if(Ms(this,br,rs),!rs){this.remove();return}Es(this,wr,uo).call(this),this._uiManager.rebuild(this),Es(this,wr,ki).call(this)};this.addCommands({cmd:()=>{Zr($r)},undo:()=>{Zr(Ir)},mustExec:!1}),Es(this,wr,ki).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Ir){this.enterInEditMode()}keydown(Ir){Ir.target===this.div&&Ir.key==="Enter"&&(this.enterInEditMode(),Ir.preventDefault())}editorDivKeydown(Ir){_r._keyboardManager.exec(this,Ir)}editorDivFocus(Ir){this.isEditing=!0}editorDivBlur(Ir){this.isEditing=!1}editorDivInput(Ir){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Ir,$r;this.width&&(Ir=this.x,$r=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Or(this,Sr)),this.enableEditing(),dr.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(rs=>{var qr;return(qr=this.editorDiv)==null?void 0:qr.setAttribute("aria-label",rs)}),dr.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(rs=>{var qr;return(qr=this.editorDiv)==null?void 0:qr.setAttribute("default-content",rs)}),this.editorDiv.contentEditable=!0;const{style:Zr}=this.editorDiv;if(Zr.fontSize=`calc(${Or(this,xr)}px * var(--scale-factor))`,Zr.color=Or(this,vr),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,ur.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[rs,qr]=this.parentDimensions;if(this.annotationElementId){const{position:zr}=Or(this,Er);let[Jr,Hr]=this.getInitialTranslation();[Jr,Hr]=this.pageTranslationToScreen(Jr,Hr);const[Kr,ys]=this.pageDimensions,[Yr,Fr]=this.pageTranslation;let Br,Ur;switch(this.rotation){case 0:Br=Ir+(zr[0]-Yr)/Kr,Ur=$r+this.height-(zr[1]-Fr)/ys;break;case 90:Br=Ir+(zr[0]-Yr)/Kr,Ur=$r-(zr[1]-Fr)/ys,[Jr,Hr]=[Hr,-Jr];break;case 180:Br=Ir-this.width+(zr[0]-Yr)/Kr,Ur=$r-(zr[1]-Fr)/ys,[Jr,Hr]=[-Jr,-Hr];break;case 270:Br=Ir+(zr[0]-Yr-this.height*ys)/Kr,Ur=$r+(zr[1]-Fr-this.width*Kr)/ys,[Jr,Hr]=[-Hr,Jr];break}this.setAt(Br*rs,Ur*qr,Jr,Hr)}else this.setAt(Ir*rs,$r*qr,this.width*rs,this.height*qr);Es(this,wr,uo).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Ir,$r,Zr){let rs=null;if(Ir instanceof hr.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:zr,fontColor:Jr},rect:Hr,rotation:Kr,id:ys},textContent:Yr,textPosition:Fr,parent:{page:{pageNumber:Br}}}=Ir;if(!Yr||Yr.length===0)return null;rs=Ir={annotationType:cr.AnnotationEditorType.FREETEXT,color:Array.from(Jr),fontSize:zr,value:Yr.join(`
`),position:Fr,pageIndex:Br-1,rect:Hr,rotation:Kr,id:ys,deleted:!1}}const qr=super.deserialize(Ir,$r,Zr);return Ms(qr,xr,Ir.fontSize),Ms(qr,vr,cr.Util.makeHexColor(...Ir.color)),Ms(qr,br,Ir.value),qr.annotationElementId=Ir.id||null,Ms(qr,Er,rs),qr}serialize(Ir=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const $r=_r._internalPadding*this.parentScale,Zr=this.getRect($r,$r),rs=dr.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Or(this,vr)),qr={annotationType:cr.AnnotationEditorType.FREETEXT,color:rs,fontSize:Or(this,xr),value:Or(this,br),pageIndex:this.pageIndex,rect:Zr,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Ir?qr:this.annotationElementId&&!Es(this,wr,Ho).call(this,qr)?null:(qr.id=this.annotationElementId,qr)}};pr=new WeakMap,mr=new WeakMap,gr=new WeakMap,yr=new WeakMap,vr=new WeakMap,br=new WeakMap,Sr=new WeakMap,xr=new WeakMap,Er=new WeakMap,wr=new WeakSet,$o=function(Ir){const $r=rs=>{this.editorDiv.style.fontSize=`calc(${rs}px * var(--scale-factor))`,this.translate(0,-(rs-Or(this,xr))*this.parentScale),Ms(this,xr,rs),Es(this,wr,ki).call(this)},Zr=Or(this,xr);this.addCommands({cmd:()=>{$r(Ir)},undo:()=>{$r(Zr)},mustExec:!0,type:cr.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Vo=function(Ir){const $r=Or(this,vr);this.addCommands({cmd:()=>{Ms(this,vr,this.editorDiv.style.color=Ir)},undo:()=>{Ms(this,vr,this.editorDiv.style.color=$r)},mustExec:!0,type:cr.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},jo=function(){const Ir=this.editorDiv.getElementsByTagName("div");if(Ir.length===0)return this.editorDiv.innerText;const $r=[];for(const Zr of Ir)$r.push(Zr.innerText.replace(/\r\n?|\n/,""));return $r.join(`
`)},ki=function(){const[Ir,$r]=this.parentDimensions;let Zr;if(this.isAttachedToDOM)Zr=this.div.getBoundingClientRect();else{const{currentLayer:rs,div:qr}=this,zr=qr.style.display;qr.style.display="hidden",rs.div.append(this.div),Zr=qr.getBoundingClientRect(),qr.remove(),qr.style.display=zr}this.rotation%180===this.parentRotation%180?(this.width=Zr.width/Ir,this.height=Zr.height/$r):(this.width=Zr.height/Ir,this.height=Zr.width/$r),this.fixAndSetPosition()},uo=function(){if(this.editorDiv.replaceChildren(),!!Or(this,br))for(const Ir of Or(this,br).split(`
`)){const $r=document.createElement("div");$r.append(Ir?document.createTextNode(Ir):document.createElement("br")),this.editorDiv.append($r)}},Ho=function(Ir){const{value:$r,fontSize:Zr,color:rs,rect:qr,pageIndex:zr}=Or(this,Er);return Ir.value!==$r||Ir.fontSize!==Zr||Ir.rect.some((Jr,Hr)=>Math.abs(Jr-qr[Hr])>=1)||Ir.color.some((Jr,Hr)=>Jr!==rs[Hr])||Ir.pageIndex!==zr},ho=function(Ir=!1){if(!this.annotationElementId)return;if(Es(this,wr,ki).call(this),!Ir&&(this.width===0||this.height===0)){setTimeout(()=>Es(this,wr,ho).call(this,!0),0);return}const $r=_r._internalPadding*this.parentScale;Or(this,Er).rect=this.getRect($r,$r)},ii(_r,"_freeTextDefaultContent",""),ii(_r,"_internalPadding",0),ii(_r,"_defaultColor",null),ii(_r,"_defaultFontSize",10),ii(_r,"_type","freetext");let fr=_r;or.FreeTextEditor=fr},(ar,or,lr)=>{var Ur,Vr,fi,Uo,ps,As,Cs,jr,Wr,ds,ls,ss,Lr,Xr,cs,hs,ms,Ts,ks,fs,Is,Fs,zo,Di,fo,po,Ps,$s,Ws,Ns,vs,ws,Ls,mo,Us,as,Rs,js,Wo,go;Object.defineProperty(or,"__esModule",{value:!0}),or.StampAnnotationElement=or.InkAnnotationElement=or.FreeTextAnnotationElement=or.AnnotationLayer=void 0;var cr=lr(1),ur=lr(6),dr=lr(3),hr=lr(30),fr=lr(31),pr=lr(32);const mr=1e3,gr=9,yr=new WeakSet;function vr(Ks){return{width:Ks[2]-Ks[0],height:Ks[3]-Ks[1]}}class br{static create(us){switch(us.data.annotationType){case cr.AnnotationType.LINK:return new xr(us);case cr.AnnotationType.TEXT:return new Er(us);case cr.AnnotationType.WIDGET:switch(us.data.fieldType){case"Tx":return new Ar(us);case"Btn":return us.data.radioButton?new kr(us):us.data.checkBox?new Cr(us):new Mr(us);case"Ch":return new Rr(us);case"Sig":return new Tr(us)}return new wr(us);case cr.AnnotationType.POPUP:return new Nr(us);case cr.AnnotationType.FREETEXT:return new Dr(us);case cr.AnnotationType.LINE:return new Pr(us);case cr.AnnotationType.SQUARE:return new Ir(us);case cr.AnnotationType.CIRCLE:return new $r(us);case cr.AnnotationType.POLYLINE:return new Zr(us);case cr.AnnotationType.CARET:return new qr(us);case cr.AnnotationType.INK:return new zr(us);case cr.AnnotationType.POLYGON:return new rs(us);case cr.AnnotationType.HIGHLIGHT:return new Jr(us);case cr.AnnotationType.UNDERLINE:return new Hr(us);case cr.AnnotationType.SQUIGGLY:return new Kr(us);case cr.AnnotationType.STRIKEOUT:return new ys(us);case cr.AnnotationType.STAMP:return new Yr(us);case cr.AnnotationType.FILEATTACHMENT:return new Fr(us);default:return new Sr(us)}}}const Qr=class Qr{constructor(us,{isRenderable:ns=!1,ignoreBorder:bs=!1,createQuadrilaterals:Os=!1}={}){_s(this,Ur,!1);this.isRenderable=ns,this.data=us.data,this.layer=us.layer,this.linkService=us.linkService,this.downloadManager=us.downloadManager,this.imageResourcesPath=us.imageResourcesPath,this.renderForms=us.renderForms,this.svgFactory=us.svgFactory,this.annotationStorage=us.annotationStorage,this.enableScripting=us.enableScripting,this.hasJSActions=us.hasJSActions,this._fieldObjects=us.fieldObjects,this.parent=us.parent,ns&&(this.container=this._createContainer(bs)),Os&&this._createQuadrilaterals()}static _hasPopupData({titleObj:us,contentsObj:ns,richText:bs}){return!!(us!=null&&us.str||ns!=null&&ns.str||bs!=null&&bs.str)}get hasPopupData(){return Qr._hasPopupData(this.data)}_createContainer(us){const{data:ns,parent:{page:bs,viewport:Os}}=this,Ds=document.createElement("section");Ds.setAttribute("data-annotation-id",ns.id),this instanceof wr||(Ds.tabIndex=mr),Ds.style.zIndex=this.parent.zIndex++,this.data.popupRef&&Ds.setAttribute("aria-haspopup","dialog"),ns.noRotate&&Ds.classList.add("norotate");const{pageWidth:Bs,pageHeight:Vs,pageX:Js,pageY:Xs}=Os.rawDims;if(!ns.rect||this instanceof Nr){const{rotation:ei}=ns;return!ns.hasOwnCanvas&&ei!==0&&this.setRotation(ei,Ds),Ds}const{width:zs,height:ti}=vr(ns.rect),qs=cr.Util.normalizeRect([ns.rect[0],bs.view[3]-ns.rect[1]+bs.view[1],ns.rect[2],bs.view[3]-ns.rect[3]+bs.view[1]]);if(!us&&ns.borderStyle.width>0){Ds.style.borderWidth=`${ns.borderStyle.width}px`;const ei=ns.borderStyle.horizontalCornerRadius,ni=ns.borderStyle.verticalCornerRadius;if(ei>0||ni>0){const si=`calc(${ei}px * var(--scale-factor)) / calc(${ni}px * var(--scale-factor))`;Ds.style.borderRadius=si}else if(this instanceof kr){const si=`calc(${zs}px * var(--scale-factor)) / calc(${ti}px * var(--scale-factor))`;Ds.style.borderRadius=si}switch(ns.borderStyle.style){case cr.AnnotationBorderStyleType.SOLID:Ds.style.borderStyle="solid";break;case cr.AnnotationBorderStyleType.DASHED:Ds.style.borderStyle="dashed";break;case cr.AnnotationBorderStyleType.BEVELED:(0,cr.warn)("Unimplemented border style: beveled");break;case cr.AnnotationBorderStyleType.INSET:(0,cr.warn)("Unimplemented border style: inset");break;case cr.AnnotationBorderStyleType.UNDERLINE:Ds.style.borderBottomStyle="solid";break}const ri=ns.borderColor||null;ri?(Ms(this,Ur,!0),Ds.style.borderColor=cr.Util.makeHexColor(ri[0]|0,ri[1]|0,ri[2]|0)):Ds.style.borderWidth=0}Ds.style.left=`${100*(qs[0]-Js)/Bs}%`,Ds.style.top=`${100*(qs[1]-Xs)/Vs}%`;const{rotation:Zs}=ns;return ns.hasOwnCanvas||Zs===0?(Ds.style.width=`${100*zs/Bs}%`,Ds.style.height=`${100*ti/Vs}%`):this.setRotation(Zs,Ds),Ds}setRotation(us,ns=this.container){if(!this.data.rect)return;const{pageWidth:bs,pageHeight:Os}=this.parent.viewport.rawDims,{width:Ds,height:Bs}=vr(this.data.rect);let Vs,Js;us%180===0?(Vs=100*Ds/bs,Js=100*Bs/Os):(Vs=100*Bs/bs,Js=100*Ds/Os),ns.style.width=`${Vs}%`,ns.style.height=`${Js}%`,ns.setAttribute("data-main-rotation",(360-us)%360)}get _commonActions(){const us=(ns,bs,Os)=>{const Ds=Os.detail[ns],Bs=Ds[0],Vs=Ds.slice(1);Os.target.style[bs]=hr.ColorConverters[`${Bs}_HTML`](Vs),this.annotationStorage.setValue(this.data.id,{[bs]:hr.ColorConverters[`${Bs}_rgb`](Vs)})};return(0,cr.shadow)(this,"_commonActions",{display:ns=>{const{display:bs}=ns.detail,Os=bs%2===1;this.container.style.visibility=Os?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Os,noPrint:bs===1||bs===2})},print:ns=>{this.annotationStorage.setValue(this.data.id,{noPrint:!ns.detail.print})},hidden:ns=>{const{hidden:bs}=ns.detail;this.container.style.visibility=bs?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:bs,noView:bs})},focus:ns=>{setTimeout(()=>ns.target.focus({preventScroll:!1}),0)},userName:ns=>{ns.target.title=ns.detail.userName},readonly:ns=>{ns.target.disabled=ns.detail.readonly},required:ns=>{this._setRequired(ns.target,ns.detail.required)},bgColor:ns=>{us("bgColor","backgroundColor",ns)},fillColor:ns=>{us("fillColor","backgroundColor",ns)},fgColor:ns=>{us("fgColor","color",ns)},textColor:ns=>{us("textColor","color",ns)},borderColor:ns=>{us("borderColor","borderColor",ns)},strokeColor:ns=>{us("strokeColor","borderColor",ns)},rotation:ns=>{const bs=ns.detail.rotation;this.setRotation(bs),this.annotationStorage.setValue(this.data.id,{rotation:bs})}})}_dispatchEventFromSandbox(us,ns){const bs=this._commonActions;for(const Os of Object.keys(ns.detail)){const Ds=us[Os]||bs[Os];Ds==null||Ds(ns)}}_setDefaultPropertiesFromJS(us){if(!this.enableScripting)return;const ns=this.annotationStorage.getRawValue(this.data.id);if(!ns)return;const bs=this._commonActions;for(const[Os,Ds]of Object.entries(ns)){const Bs=bs[Os];if(Bs){const Vs={detail:{[Os]:Ds},target:us};Bs(Vs),delete ns[Os]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:us}=this.data;if(!us)return;const[ns,bs,Os,Ds]=this.data.rect;if(us.length===1){const[,{x:ni,y:ri},{x:si,y:ai}]=us[0];if(Os===ni&&Ds===ri&&ns===si&&bs===ai)return}const{style:Bs}=this.container;let Vs;if(Or(this,Ur)){const{borderColor:ni,borderWidth:ri}=Bs;Bs.borderWidth=0,Vs=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${ni}" stroke-width="${ri}">`],this.container.classList.add("hasBorder")}const Js=Os-ns,Xs=Ds-bs,{svgFactory:zs}=this,ti=zs.createElement("svg");ti.classList.add("quadrilateralsContainer"),ti.setAttribute("width",0),ti.setAttribute("height",0);const qs=zs.createElement("defs");ti.append(qs);const Zs=zs.createElement("clipPath"),ei=`clippath_${this.data.id}`;Zs.setAttribute("id",ei),Zs.setAttribute("clipPathUnits","objectBoundingBox"),qs.append(Zs);for(const[,{x:ni,y:ri},{x:si,y:ai}]of us){const oi=zs.createElement("rect"),ci=(si-ns)/Js,di=(Ds-ri)/Xs,hi=(ni-si)/Js,Ao=(ri-ai)/Xs;oi.setAttribute("x",ci),oi.setAttribute("y",di),oi.setAttribute("width",hi),oi.setAttribute("height",Ao),Zs.append(oi),Vs==null||Vs.push(`<rect vector-effect="non-scaling-stroke" x="${ci}" y="${di}" width="${hi}" height="${Ao}"/>`)}Or(this,Ur)&&(Vs.push("</g></svg>')"),Bs.backgroundImage=Vs.join("")),this.container.append(ti),this.container.style.clipPath=`url(#${ei})`}_createPopup(){const{container:us,data:ns}=this;us.setAttribute("aria-haspopup","dialog");const bs=new Nr({data:{color:ns.color,titleObj:ns.titleObj,modificationDate:ns.modificationDate,contentsObj:ns.contentsObj,richText:ns.richText,parentRect:ns.rect,borderStyle:0,id:`popup_${ns.id}`,rotation:ns.rotation},parent:this.parent,elements:[this]});this.parent.div.append(bs.render())}render(){(0,cr.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(us,ns=null){const bs=[];if(this._fieldObjects){const Os=this._fieldObjects[us];if(Os)for(const{page:Ds,id:Bs,exportValues:Vs}of Os){if(Ds===-1||Bs===ns)continue;const Js=typeof Vs=="string"?Vs:null,Xs=document.querySelector(`[data-element-id="${Bs}"]`);if(Xs&&!yr.has(Xs)){(0,cr.warn)(`_getElementsByName - element not allowed: ${Bs}`);continue}bs.push({id:Bs,exportValue:Js,domElement:Xs})}return bs}for(const Os of document.getElementsByName(us)){const{exportValue:Ds}=Os,Bs=Os.getAttribute("data-element-id");Bs!==ns&&yr.has(Os)&&bs.push({id:Bs,exportValue:Ds,domElement:Os})}return bs}show(){var us;this.container&&(this.container.hidden=!1),(us=this.popup)==null||us.maybeShow()}hide(){var us;this.container&&(this.container.hidden=!0),(us=this.popup)==null||us.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const us=this.getElementsToTriggerPopup();if(Array.isArray(us))for(const ns of us)ns.classList.add("highlightArea");else us.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:us,data:{id:ns}}=this;this.container.addEventListener("dblclick",()=>{var bs;(bs=this.linkService.eventBus)==null||bs.dispatch("switchannotationeditormode",{source:this,mode:us,editId:ns})})}};Ur=new WeakMap;let Sr=Qr;class xr extends Sr{constructor(ns,bs=null){super(ns,{isRenderable:!0,ignoreBorder:!!(bs!=null&&bs.ignoreBorder),createQuadrilaterals:!0});_s(this,Vr);this.isTooltipOnly=ns.data.isTooltipOnly}render(){const{data:ns,linkService:bs}=this,Os=document.createElement("a");Os.setAttribute("data-element-id",ns.id);let Ds=!1;return ns.url?(bs.addLinkAttributes(Os,ns.url,ns.newWindow),Ds=!0):ns.action?(this._bindNamedAction(Os,ns.action),Ds=!0):ns.attachment?(this._bindAttachment(Os,ns.attachment),Ds=!0):ns.setOCGState?(Es(this,Vr,Uo).call(this,Os,ns.setOCGState),Ds=!0):ns.dest?(this._bindLink(Os,ns.dest),Ds=!0):(ns.actions&&(ns.actions.Action||ns.actions["Mouse Up"]||ns.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(Os,ns),Ds=!0),ns.resetForm?(this._bindResetFormAction(Os,ns.resetForm),Ds=!0):this.isTooltipOnly&&!Ds&&(this._bindLink(Os,""),Ds=!0)),this.container.classList.add("linkAnnotation"),Ds&&this.container.append(Os),this.container}_bindLink(ns,bs){ns.href=this.linkService.getDestinationHash(bs),ns.onclick=()=>(bs&&this.linkService.goToDestination(bs),!1),(bs||bs==="")&&Es(this,Vr,fi).call(this)}_bindNamedAction(ns,bs){ns.href=this.linkService.getAnchorUrl(""),ns.onclick=()=>(this.linkService.executeNamedAction(bs),!1),Es(this,Vr,fi).call(this)}_bindAttachment(ns,bs){ns.href=this.linkService.getAnchorUrl(""),ns.onclick=()=>{var Os;return(Os=this.downloadManager)==null||Os.openOrDownloadData(this.container,bs.content,bs.filename),!1},Es(this,Vr,fi).call(this)}_bindJSAction(ns,bs){ns.href=this.linkService.getAnchorUrl("");const Os=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Ds of Object.keys(bs.actions)){const Bs=Os.get(Ds);Bs&&(ns[Bs]=()=>{var Vs;return(Vs=this.linkService.eventBus)==null||Vs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:bs.id,name:Ds}}),!1})}ns.onclick||(ns.onclick=()=>!1),Es(this,Vr,fi).call(this)}_bindResetFormAction(ns,bs){const Os=ns.onclick;if(Os||(ns.href=this.linkService.getAnchorUrl("")),Es(this,Vr,fi).call(this),!this._fieldObjects){(0,cr.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),Os||(ns.onclick=()=>!1);return}ns.onclick=()=>{var ti;Os==null||Os();const{fields:Ds,refs:Bs,include:Vs}=bs,Js=[];if(Ds.length!==0||Bs.length!==0){const qs=new Set(Bs);for(const Zs of Ds){const ei=this._fieldObjects[Zs]||[];for(const{id:ni}of ei)qs.add(ni)}for(const Zs of Object.values(this._fieldObjects))for(const ei of Zs)qs.has(ei.id)===Vs&&Js.push(ei)}else for(const qs of Object.values(this._fieldObjects))Js.push(...qs);const Xs=this.annotationStorage,zs=[];for(const qs of Js){const{id:Zs}=qs;switch(zs.push(Zs),qs.type){case"text":{const ni=qs.defaultValue||"";Xs.setValue(Zs,{value:ni});break}case"checkbox":case"radiobutton":{const ni=qs.defaultValue===qs.exportValues;Xs.setValue(Zs,{value:ni});break}case"combobox":case"listbox":{const ni=qs.defaultValue||"";Xs.setValue(Zs,{value:ni});break}default:continue}const ei=document.querySelector(`[data-element-id="${Zs}"]`);if(ei){if(!yr.has(ei)){(0,cr.warn)(`_bindResetFormAction - element not allowed: ${Zs}`);continue}}else continue;ei.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((ti=this.linkService.eventBus)==null||ti.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:zs,name:"ResetForm"}})),!1}}}Vr=new WeakSet,fi=function(){this.container.setAttribute("data-internal-link","")},Uo=function(ns,bs){ns.href=this.linkService.getAnchorUrl(""),ns.onclick=()=>(this.linkService.executeSetOCGState(bs),!1),Es(this,Vr,fi).call(this)};class Er extends Sr{constructor(us){super(us,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const us=document.createElement("img");return us.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",us.alt="[{{type}} Annotation]",us.dataset.l10nId="text_annotation_type",us.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(us),this.container}}class wr extends Sr{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(us){var ns;this.data.hasOwnCanvas&&(((ns=us.previousSibling)==null?void 0:ns.nodeName)==="CANVAS"&&(us.previousSibling.hidden=!0),us.hidden=!1)}_getKeyModifier(us){const{isWin:ns,isMac:bs}=cr.FeatureTest.platform;return ns&&us.ctrlKey||bs&&us.metaKey}_setEventListener(us,ns,bs,Os,Ds){bs.includes("mouse")?us.addEventListener(bs,Bs=>{var Vs;(Vs=this.linkService.eventBus)==null||Vs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Os,value:Ds(Bs),shift:Bs.shiftKey,modifier:this._getKeyModifier(Bs)}})}):us.addEventListener(bs,Bs=>{var Vs;if(bs==="blur"){if(!ns.focused||!Bs.relatedTarget)return;ns.focused=!1}else if(bs==="focus"){if(ns.focused)return;ns.focused=!0}Ds&&((Vs=this.linkService.eventBus)==null||Vs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Os,value:Ds(Bs)}}))})}_setEventListeners(us,ns,bs,Os){var Ds,Bs,Vs;for(const[Js,Xs]of bs)(Xs==="Action"||(Ds=this.data.actions)!=null&&Ds[Xs])&&((Xs==="Focus"||Xs==="Blur")&&(ns||(ns={focused:!1})),this._setEventListener(us,ns,Js,Xs,Os),Xs==="Focus"&&!((Bs=this.data.actions)!=null&&Bs.Blur)?this._setEventListener(us,ns,"blur","Blur",null):Xs==="Blur"&&!((Vs=this.data.actions)!=null&&Vs.Focus)&&this._setEventListener(us,ns,"focus","Focus",null))}_setBackgroundColor(us){const ns=this.data.backgroundColor||null;us.style.backgroundColor=ns===null?"transparent":cr.Util.makeHexColor(ns[0],ns[1],ns[2])}_setTextStyle(us){const ns=["left","center","right"],{fontColor:bs}=this.data.defaultAppearanceData,Os=this.data.defaultAppearanceData.fontSize||gr,Ds=us.style;let Bs;const Vs=2,Js=Xs=>Math.round(10*Xs)/10;if(this.data.multiLine){const Xs=Math.abs(this.data.rect[3]-this.data.rect[1]-Vs),zs=Math.round(Xs/(cr.LINE_FACTOR*Os))||1,ti=Xs/zs;Bs=Math.min(Os,Js(ti/cr.LINE_FACTOR))}else{const Xs=Math.abs(this.data.rect[3]-this.data.rect[1]-Vs);Bs=Math.min(Os,Js(Xs/cr.LINE_FACTOR))}Ds.fontSize=`calc(${Bs}px * var(--scale-factor))`,Ds.color=cr.Util.makeHexColor(bs[0],bs[1],bs[2]),this.data.textAlignment!==null&&(Ds.textAlign=ns[this.data.textAlignment])}_setRequired(us,ns){ns?us.setAttribute("required",!0):us.removeAttribute("required"),us.setAttribute("aria-required",ns)}}class Ar extends wr{constructor(us){const ns=us.renderForms||!us.data.hasAppearance&&!!us.data.fieldValue;super(us,{isRenderable:ns})}setPropertyOnSiblings(us,ns,bs,Os){const Ds=this.annotationStorage;for(const Bs of this._getElementsByName(us.name,us.id))Bs.domElement&&(Bs.domElement[ns]=bs),Ds.setValue(Bs.id,{[Os]:bs})}render(){var Os,Ds;const us=this.annotationStorage,ns=this.data.id;this.container.classList.add("textWidgetAnnotation");let bs=null;if(this.renderForms){const Bs=us.getValue(ns,{value:this.data.fieldValue});let Vs=Bs.value||"";const Js=us.getValue(ns,{charLimit:this.data.maxLen}).charLimit;Js&&Vs.length>Js&&(Vs=Vs.slice(0,Js));let Xs=Bs.formattedValue||((Os=this.data.textContent)==null?void 0:Os.join(`
`))||null;Xs&&this.data.comb&&(Xs=Xs.replaceAll(/\s+/g,""));const zs={userValue:Vs,formattedValue:Xs,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(bs=document.createElement("textarea"),bs.textContent=Xs??Vs,this.data.doNotScroll&&(bs.style.overflowY="hidden")):(bs=document.createElement("input"),bs.type="text",bs.setAttribute("value",Xs??Vs),this.data.doNotScroll&&(bs.style.overflowX="hidden")),this.data.hasOwnCanvas&&(bs.hidden=!0),yr.add(bs),bs.setAttribute("data-element-id",ns),bs.disabled=this.data.readOnly,bs.name=this.data.fieldName,bs.tabIndex=mr,this._setRequired(bs,this.data.required),Js&&(bs.maxLength=Js),bs.addEventListener("input",qs=>{us.setValue(ns,{value:qs.target.value}),this.setPropertyOnSiblings(bs,"value",qs.target.value,"value"),zs.formattedValue=null}),bs.addEventListener("resetform",qs=>{const Zs=this.data.defaultFieldValue??"";bs.value=zs.userValue=Zs,zs.formattedValue=null});let ti=qs=>{const{formattedValue:Zs}=zs;Zs!=null&&(qs.target.value=Zs),qs.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){bs.addEventListener("focus",Zs=>{if(zs.focused)return;const{target:ei}=Zs;zs.userValue&&(ei.value=zs.userValue),zs.lastCommittedValue=ei.value,zs.commitKey=1,zs.focused=!0}),bs.addEventListener("updatefromsandbox",Zs=>{this.showElementAndHideCanvas(Zs.target);const ei={value(ni){zs.userValue=ni.detail.value??"",us.setValue(ns,{value:zs.userValue.toString()}),ni.target.value=zs.userValue},formattedValue(ni){const{formattedValue:ri}=ni.detail;zs.formattedValue=ri,ri!=null&&ni.target!==document.activeElement&&(ni.target.value=ri),us.setValue(ns,{formattedValue:ri})},selRange(ni){ni.target.setSelectionRange(...ni.detail.selRange)},charLimit:ni=>{var oi;const{charLimit:ri}=ni.detail,{target:si}=ni;if(ri===0){si.removeAttribute("maxLength");return}si.setAttribute("maxLength",ri);let ai=zs.userValue;!ai||ai.length<=ri||(ai=ai.slice(0,ri),si.value=zs.userValue=ai,us.setValue(ns,{value:ai}),(oi=this.linkService.eventBus)==null||oi.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ns,name:"Keystroke",value:ai,willCommit:!0,commitKey:1,selStart:si.selectionStart,selEnd:si.selectionEnd}}))}};this._dispatchEventFromSandbox(ei,Zs)}),bs.addEventListener("keydown",Zs=>{var ri;zs.commitKey=1;let ei=-1;if(Zs.key==="Escape"?ei=0:Zs.key==="Enter"&&!this.data.multiLine?ei=2:Zs.key==="Tab"&&(zs.commitKey=3),ei===-1)return;const{value:ni}=Zs.target;zs.lastCommittedValue!==ni&&(zs.lastCommittedValue=ni,zs.userValue=ni,(ri=this.linkService.eventBus)==null||ri.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ns,name:"Keystroke",value:ni,willCommit:!0,commitKey:ei,selStart:Zs.target.selectionStart,selEnd:Zs.target.selectionEnd}}))});const qs=ti;ti=null,bs.addEventListener("blur",Zs=>{var ni;if(!zs.focused||!Zs.relatedTarget)return;zs.focused=!1;const{value:ei}=Zs.target;zs.userValue=ei,zs.lastCommittedValue!==ei&&((ni=this.linkService.eventBus)==null||ni.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ns,name:"Keystroke",value:ei,willCommit:!0,commitKey:zs.commitKey,selStart:Zs.target.selectionStart,selEnd:Zs.target.selectionEnd}})),qs(Zs)}),(Ds=this.data.actions)!=null&&Ds.Keystroke&&bs.addEventListener("beforeinput",Zs=>{var di;zs.lastCommittedValue=null;const{data:ei,target:ni}=Zs,{value:ri,selectionStart:si,selectionEnd:ai}=ni;let oi=si,ci=ai;switch(Zs.inputType){case"deleteWordBackward":{const hi=ri.substring(0,si).match(/\w*[^\w]*$/);hi&&(oi-=hi[0].length);break}case"deleteWordForward":{const hi=ri.substring(si).match(/^[^\w]*\w*/);hi&&(ci+=hi[0].length);break}case"deleteContentBackward":si===ai&&(oi-=1);break;case"deleteContentForward":si===ai&&(ci+=1);break}Zs.preventDefault(),(di=this.linkService.eventBus)==null||di.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ns,name:"Keystroke",value:ri,change:ei||"",willCommit:!1,selStart:oi,selEnd:ci}})}),this._setEventListeners(bs,zs,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Zs=>Zs.target.value)}if(ti&&bs.addEventListener("blur",ti),this.data.comb){const Zs=(this.data.rect[2]-this.data.rect[0])/Js;bs.classList.add("comb"),bs.style.letterSpacing=`calc(${Zs}px * var(--scale-factor) - 1ch)`}}else bs=document.createElement("div"),bs.textContent=this.data.fieldValue,bs.style.verticalAlign="middle",bs.style.display="table-cell";return this._setTextStyle(bs),this._setBackgroundColor(bs),this._setDefaultPropertiesFromJS(bs),this.container.append(bs),this.container}}class Tr extends wr{constructor(us){super(us,{isRenderable:!!us.data.hasOwnCanvas})}}class Cr extends wr{constructor(us){super(us,{isRenderable:us.renderForms})}render(){const us=this.annotationStorage,ns=this.data,bs=ns.id;let Os=us.getValue(bs,{value:ns.exportValue===ns.fieldValue}).value;typeof Os=="string"&&(Os=Os!=="Off",us.setValue(bs,{value:Os})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const Ds=document.createElement("input");return yr.add(Ds),Ds.setAttribute("data-element-id",bs),Ds.disabled=ns.readOnly,this._setRequired(Ds,this.data.required),Ds.type="checkbox",Ds.name=ns.fieldName,Os&&Ds.setAttribute("checked",!0),Ds.setAttribute("exportValue",ns.exportValue),Ds.tabIndex=mr,Ds.addEventListener("change",Bs=>{const{name:Vs,checked:Js}=Bs.target;for(const Xs of this._getElementsByName(Vs,bs)){const zs=Js&&Xs.exportValue===ns.exportValue;Xs.domElement&&(Xs.domElement.checked=zs),us.setValue(Xs.id,{value:zs})}us.setValue(bs,{value:Js})}),Ds.addEventListener("resetform",Bs=>{const Vs=ns.defaultFieldValue||"Off";Bs.target.checked=Vs===ns.exportValue}),this.enableScripting&&this.hasJSActions&&(Ds.addEventListener("updatefromsandbox",Bs=>{const Vs={value(Js){Js.target.checked=Js.detail.value!=="Off",us.setValue(bs,{value:Js.target.checked})}};this._dispatchEventFromSandbox(Vs,Bs)}),this._setEventListeners(Ds,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bs=>Bs.target.checked)),this._setBackgroundColor(Ds),this._setDefaultPropertiesFromJS(Ds),this.container.append(Ds),this.container}}class kr extends wr{constructor(us){super(us,{isRenderable:us.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const us=this.annotationStorage,ns=this.data,bs=ns.id;let Os=us.getValue(bs,{value:ns.fieldValue===ns.buttonValue}).value;typeof Os=="string"&&(Os=Os!==ns.buttonValue,us.setValue(bs,{value:Os}));const Ds=document.createElement("input");if(yr.add(Ds),Ds.setAttribute("data-element-id",bs),Ds.disabled=ns.readOnly,this._setRequired(Ds,this.data.required),Ds.type="radio",Ds.name=ns.fieldName,Os&&Ds.setAttribute("checked",!0),Ds.tabIndex=mr,Ds.addEventListener("change",Bs=>{const{name:Vs,checked:Js}=Bs.target;for(const Xs of this._getElementsByName(Vs,bs))us.setValue(Xs.id,{value:!1});us.setValue(bs,{value:Js})}),Ds.addEventListener("resetform",Bs=>{const Vs=ns.defaultFieldValue;Bs.target.checked=Vs!=null&&Vs===ns.buttonValue}),this.enableScripting&&this.hasJSActions){const Bs=ns.buttonValue;Ds.addEventListener("updatefromsandbox",Vs=>{const Js={value:Xs=>{const zs=Bs===Xs.detail.value;for(const ti of this._getElementsByName(Xs.target.name)){const qs=zs&&ti.id===bs;ti.domElement&&(ti.domElement.checked=qs),us.setValue(ti.id,{value:qs})}}};this._dispatchEventFromSandbox(Js,Vs)}),this._setEventListeners(Ds,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Vs=>Vs.target.checked)}return this._setBackgroundColor(Ds),this._setDefaultPropertiesFromJS(Ds),this.container.append(Ds),this.container}}class Mr extends xr{constructor(us){super(us,{ignoreBorder:us.data.hasAppearance})}render(){const us=super.render();us.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(us.title=this.data.alternativeText);const ns=us.lastChild;return this.enableScripting&&this.hasJSActions&&ns&&(this._setDefaultPropertiesFromJS(ns),ns.addEventListener("updatefromsandbox",bs=>{this._dispatchEventFromSandbox({},bs)})),us}}class Rr extends wr{constructor(us){super(us,{isRenderable:us.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const us=this.annotationStorage,ns=this.data.id,bs=us.getValue(ns,{value:this.data.fieldValue}),Os=document.createElement("select");yr.add(Os),Os.setAttribute("data-element-id",ns),Os.disabled=this.data.readOnly,this._setRequired(Os,this.data.required),Os.name=this.data.fieldName,Os.tabIndex=mr;let Ds=this.data.combo&&this.data.options.length>0;this.data.combo||(Os.size=this.data.options.length,this.data.multiSelect&&(Os.multiple=!0)),Os.addEventListener("resetform",zs=>{const ti=this.data.defaultFieldValue;for(const qs of Os.options)qs.selected=qs.value===ti});for(const zs of this.data.options){const ti=document.createElement("option");ti.textContent=zs.displayValue,ti.value=zs.exportValue,bs.value.includes(zs.exportValue)&&(ti.setAttribute("selected",!0),Ds=!1),Os.append(ti)}let Bs=null;if(Ds){const zs=document.createElement("option");zs.value=" ",zs.setAttribute("hidden",!0),zs.setAttribute("selected",!0),Os.prepend(zs),Bs=()=>{zs.remove(),Os.removeEventListener("input",Bs),Bs=null},Os.addEventListener("input",Bs)}const Vs=zs=>{const ti=zs?"value":"textContent",{options:qs,multiple:Zs}=Os;return Zs?Array.prototype.filter.call(qs,ei=>ei.selected).map(ei=>ei[ti]):qs.selectedIndex===-1?null:qs[qs.selectedIndex][ti]};let Js=Vs(!1);const Xs=zs=>{const ti=zs.target.options;return Array.prototype.map.call(ti,qs=>({displayValue:qs.textContent,exportValue:qs.value}))};return this.enableScripting&&this.hasJSActions?(Os.addEventListener("updatefromsandbox",zs=>{const ti={value(qs){Bs==null||Bs();const Zs=qs.detail.value,ei=new Set(Array.isArray(Zs)?Zs:[Zs]);for(const ni of Os.options)ni.selected=ei.has(ni.value);us.setValue(ns,{value:Vs(!0)}),Js=Vs(!1)},multipleSelection(qs){Os.multiple=!0},remove(qs){const Zs=Os.options,ei=qs.detail.remove;Zs[ei].selected=!1,Os.remove(ei),Zs.length>0&&Array.prototype.findIndex.call(Zs,ri=>ri.selected)===-1&&(Zs[0].selected=!0),us.setValue(ns,{value:Vs(!0),items:Xs(qs)}),Js=Vs(!1)},clear(qs){for(;Os.length!==0;)Os.remove(0);us.setValue(ns,{value:null,items:[]}),Js=Vs(!1)},insert(qs){const{index:Zs,displayValue:ei,exportValue:ni}=qs.detail.insert,ri=Os.children[Zs],si=document.createElement("option");si.textContent=ei,si.value=ni,ri?ri.before(si):Os.append(si),us.setValue(ns,{value:Vs(!0),items:Xs(qs)}),Js=Vs(!1)},items(qs){const{items:Zs}=qs.detail;for(;Os.length!==0;)Os.remove(0);for(const ei of Zs){const{displayValue:ni,exportValue:ri}=ei,si=document.createElement("option");si.textContent=ni,si.value=ri,Os.append(si)}Os.options.length>0&&(Os.options[0].selected=!0),us.setValue(ns,{value:Vs(!0),items:Xs(qs)}),Js=Vs(!1)},indices(qs){const Zs=new Set(qs.detail.indices);for(const ei of qs.target.options)ei.selected=Zs.has(ei.index);us.setValue(ns,{value:Vs(!0)}),Js=Vs(!1)},editable(qs){qs.target.disabled=!qs.detail.editable}};this._dispatchEventFromSandbox(ti,zs)}),Os.addEventListener("input",zs=>{var qs;const ti=Vs(!0);us.setValue(ns,{value:ti}),zs.preventDefault(),(qs=this.linkService.eventBus)==null||qs.dispatch("dispatcheventinsandbox",{source:this,detail:{id:ns,name:"Keystroke",value:Js,changeEx:ti,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Os,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],zs=>zs.target.value)):Os.addEventListener("input",function(zs){us.setValue(ns,{value:Vs(!0)})}),this.data.combo&&this._setTextStyle(Os),this._setBackgroundColor(Os),this._setDefaultPropertiesFromJS(Os),this.container.append(Os),this.container}}class Nr extends Sr{constructor(us){const{data:ns,elements:bs}=us;super(us,{isRenderable:Sr._hasPopupData(ns)}),this.elements=bs}render(){this.container.classList.add("popupAnnotation");const us=new _r({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),ns=[];for(const bs of this.elements)bs.popup=us,ns.push(bs.data.id),bs.addHighlightArea();return this.container.setAttribute("aria-controls",ns.map(bs=>`${cr.AnnotationPrefix}${bs}`).join(",")),this.container}}class _r{constructor({container:us,color:ns,elements:bs,titleObj:Os,modificationDate:Ds,contentsObj:Bs,richText:Vs,parent:Js,rect:Xs,parentRect:zs,open:ti}){_s(this,Fs);_s(this,ps,null);_s(this,As,Es(this,Fs,zo).bind(this));_s(this,Cs,Es(this,Fs,po).bind(this));_s(this,jr,Es(this,Fs,fo).bind(this));_s(this,Wr,Es(this,Fs,Di).bind(this));_s(this,ds,null);_s(this,ls,null);_s(this,ss,null);_s(this,Lr,null);_s(this,Xr,null);_s(this,cs,null);_s(this,hs,!1);_s(this,ms,null);_s(this,Ts,null);_s(this,ks,null);_s(this,fs,null);_s(this,Is,!1);var Zs;Ms(this,ls,us),Ms(this,fs,Os),Ms(this,ss,Bs),Ms(this,ks,Vs),Ms(this,Xr,Js),Ms(this,ds,ns),Ms(this,Ts,Xs),Ms(this,cs,zs),Ms(this,Lr,bs);const qs=ur.PDFDateString.toDateObject(Ds);qs&&Ms(this,ps,Js.l10n.get("annotation_date_string",{date:qs.toLocaleDateString(),time:qs.toLocaleTimeString()})),this.trigger=bs.flatMap(ei=>ei.getElementsToTriggerPopup());for(const ei of this.trigger)ei.addEventListener("click",Or(this,Wr)),ei.addEventListener("mouseenter",Or(this,jr)),ei.addEventListener("mouseleave",Or(this,Cs)),ei.classList.add("popupTriggerArea");for(const ei of bs)(Zs=ei.container)==null||Zs.addEventListener("keydown",Or(this,As));Or(this,ls).hidden=!0,ti&&Es(this,Fs,Di).call(this)}render(){if(Or(this,ms))return;const{page:{view:us},viewport:{rawDims:{pageWidth:ns,pageHeight:bs,pageX:Os,pageY:Ds}}}=Or(this,Xr),Bs=Ms(this,ms,document.createElement("div"));if(Bs.className="popup",Or(this,ds)){const oi=Bs.style.outlineColor=cr.Util.makeHexColor(...Or(this,ds));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Bs.style.backgroundColor=`color-mix(in srgb, ${oi} 30%, white)`:Bs.style.backgroundColor=cr.Util.makeHexColor(...Or(this,ds).map(di=>Math.floor(.7*(255-di)+di)))}const Vs=document.createElement("span");Vs.className="header";const Js=document.createElement("h1");if(Vs.append(Js),{dir:Js.dir,str:Js.textContent}=Or(this,fs),Bs.append(Vs),Or(this,ps)){const oi=document.createElement("span");oi.classList.add("popupDate"),Or(this,ps).then(ci=>{oi.textContent=ci}),Vs.append(oi)}const Xs=Or(this,ss),zs=Or(this,ks);if(zs!=null&&zs.str&&(!(Xs!=null&&Xs.str)||Xs.str===zs.str))pr.XfaLayer.render({xfaHtml:zs.html,intent:"richText",div:Bs}),Bs.lastChild.classList.add("richText","popupContent");else{const oi=this._formatContents(Xs);Bs.append(oi)}let ti=!!Or(this,cs),qs=ti?Or(this,cs):Or(this,Ts);for(const oi of Or(this,Lr))if(!qs||cr.Util.intersect(oi.data.rect,qs)!==null){qs=oi.data.rect,ti=!0;break}const Zs=cr.Util.normalizeRect([qs[0],us[3]-qs[1]+us[1],qs[2],us[3]-qs[3]+us[1]]),ni=ti?qs[2]-qs[0]+5:0,ri=Zs[0]+ni,si=Zs[1],{style:ai}=Or(this,ls);ai.left=`${100*(ri-Os)/ns}%`,ai.top=`${100*(si-Ds)/bs}%`,Or(this,ls).append(Bs)}_formatContents({str:us,dir:ns}){const bs=document.createElement("p");bs.classList.add("popupContent"),bs.dir=ns;const Os=us.split(/(?:\r\n?|\n)/);for(let Ds=0,Bs=Os.length;Ds<Bs;++Ds){const Vs=Os[Ds];bs.append(document.createTextNode(Vs)),Ds<Bs-1&&bs.append(document.createElement("br"))}return bs}forceHide(){Ms(this,Is,this.isVisible),Or(this,Is)&&(Or(this,ls).hidden=!0)}maybeShow(){Or(this,Is)&&(Ms(this,Is,!1),Or(this,ls).hidden=!1)}get isVisible(){return Or(this,ls).hidden===!1}}ps=new WeakMap,As=new WeakMap,Cs=new WeakMap,jr=new WeakMap,Wr=new WeakMap,ds=new WeakMap,ls=new WeakMap,ss=new WeakMap,Lr=new WeakMap,Xr=new WeakMap,cs=new WeakMap,hs=new WeakMap,ms=new WeakMap,Ts=new WeakMap,ks=new WeakMap,fs=new WeakMap,Is=new WeakMap,Fs=new WeakSet,zo=function(us){us.altKey||us.shiftKey||us.ctrlKey||us.metaKey||(us.key==="Enter"||us.key==="Escape"&&Or(this,hs))&&Es(this,Fs,Di).call(this)},Di=function(){Ms(this,hs,!Or(this,hs)),Or(this,hs)?(Es(this,Fs,fo).call(this),Or(this,ls).addEventListener("click",Or(this,Wr)),Or(this,ls).addEventListener("keydown",Or(this,As))):(Es(this,Fs,po).call(this),Or(this,ls).removeEventListener("click",Or(this,Wr)),Or(this,ls).removeEventListener("keydown",Or(this,As)))},fo=function(){Or(this,ms)||this.render(),this.isVisible?Or(this,hs)&&Or(this,ls).classList.add("focused"):(Or(this,ls).hidden=!1,Or(this,ls).style.zIndex=parseInt(Or(this,ls).style.zIndex)+1e3)},po=function(){Or(this,ls).classList.remove("focused"),!(Or(this,hs)||!this.isVisible)&&(Or(this,ls).hidden=!0,Or(this,ls).style.zIndex=parseInt(Or(this,ls).style.zIndex)-1e3)};class Dr extends Sr{constructor(us){super(us,{isRenderable:!0,ignoreBorder:!0}),this.textContent=us.data.textContent,this.textPosition=us.data.textPosition,this.annotationEditorType=cr.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const us=document.createElement("div");us.classList.add("annotationTextContent"),us.setAttribute("role","comment");for(const ns of this.textContent){const bs=document.createElement("span");bs.textContent=ns,us.append(bs)}this.container.append(us)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}or.FreeTextAnnotationElement=Dr;class Pr extends Sr{constructor(ns){super(ns,{isRenderable:!0,ignoreBorder:!0});_s(this,Ps,null)}render(){this.container.classList.add("lineAnnotation");const ns=this.data,{width:bs,height:Os}=vr(ns.rect),Ds=this.svgFactory.create(bs,Os,!0),Bs=Ms(this,Ps,this.svgFactory.createElement("svg:line"));return Bs.setAttribute("x1",ns.rect[2]-ns.lineCoordinates[0]),Bs.setAttribute("y1",ns.rect[3]-ns.lineCoordinates[1]),Bs.setAttribute("x2",ns.rect[2]-ns.lineCoordinates[2]),Bs.setAttribute("y2",ns.rect[3]-ns.lineCoordinates[3]),Bs.setAttribute("stroke-width",ns.borderStyle.width||1),Bs.setAttribute("stroke","transparent"),Bs.setAttribute("fill","transparent"),Ds.append(Bs),this.container.append(Ds),!ns.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Or(this,Ps)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ps=new WeakMap;class Ir extends Sr{constructor(ns){super(ns,{isRenderable:!0,ignoreBorder:!0});_s(this,$s,null)}render(){this.container.classList.add("squareAnnotation");const ns=this.data,{width:bs,height:Os}=vr(ns.rect),Ds=this.svgFactory.create(bs,Os,!0),Bs=ns.borderStyle.width,Vs=Ms(this,$s,this.svgFactory.createElement("svg:rect"));return Vs.setAttribute("x",Bs/2),Vs.setAttribute("y",Bs/2),Vs.setAttribute("width",bs-Bs),Vs.setAttribute("height",Os-Bs),Vs.setAttribute("stroke-width",Bs||1),Vs.setAttribute("stroke","transparent"),Vs.setAttribute("fill","transparent"),Ds.append(Vs),this.container.append(Ds),!ns.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Or(this,$s)}addHighlightArea(){this.container.classList.add("highlightArea")}}$s=new WeakMap;class $r extends Sr{constructor(ns){super(ns,{isRenderable:!0,ignoreBorder:!0});_s(this,Ws,null)}render(){this.container.classList.add("circleAnnotation");const ns=this.data,{width:bs,height:Os}=vr(ns.rect),Ds=this.svgFactory.create(bs,Os,!0),Bs=ns.borderStyle.width,Vs=Ms(this,Ws,this.svgFactory.createElement("svg:ellipse"));return Vs.setAttribute("cx",bs/2),Vs.setAttribute("cy",Os/2),Vs.setAttribute("rx",bs/2-Bs/2),Vs.setAttribute("ry",Os/2-Bs/2),Vs.setAttribute("stroke-width",Bs||1),Vs.setAttribute("stroke","transparent"),Vs.setAttribute("fill","transparent"),Ds.append(Vs),this.container.append(Ds),!ns.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Or(this,Ws)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ws=new WeakMap;class Zr extends Sr{constructor(ns){super(ns,{isRenderable:!0,ignoreBorder:!0});_s(this,Ns,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const ns=this.data,{width:bs,height:Os}=vr(ns.rect),Ds=this.svgFactory.create(bs,Os,!0);let Bs=[];for(const Js of ns.vertices){const Xs=Js.x-ns.rect[0],zs=ns.rect[3]-Js.y;Bs.push(Xs+","+zs)}Bs=Bs.join(" ");const Vs=Ms(this,Ns,this.svgFactory.createElement(this.svgElementName));return Vs.setAttribute("points",Bs),Vs.setAttribute("stroke-width",ns.borderStyle.width||1),Vs.setAttribute("stroke","transparent"),Vs.setAttribute("fill","transparent"),Ds.append(Vs),this.container.append(Ds),!ns.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Or(this,Ns)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ns=new WeakMap;class rs extends Zr{constructor(us){super(us),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class qr extends Sr{constructor(us){super(us,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class zr extends Sr{constructor(ns){super(ns,{isRenderable:!0,ignoreBorder:!0});_s(this,vs,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=cr.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const ns=this.data,{width:bs,height:Os}=vr(ns.rect),Ds=this.svgFactory.create(bs,Os,!0);for(const Bs of ns.inkLists){let Vs=[];for(const Xs of Bs){const zs=Xs.x-ns.rect[0],ti=ns.rect[3]-Xs.y;Vs.push(`${zs},${ti}`)}Vs=Vs.join(" ");const Js=this.svgFactory.createElement(this.svgElementName);Or(this,vs).push(Js),Js.setAttribute("points",Vs),Js.setAttribute("stroke-width",ns.borderStyle.width||1),Js.setAttribute("stroke","transparent"),Js.setAttribute("fill","transparent"),!ns.popupRef&&this.hasPopupData&&this._createPopup(),Ds.append(Js)}return this.container.append(Ds),this.container}getElementsToTriggerPopup(){return Or(this,vs)}addHighlightArea(){this.container.classList.add("highlightArea")}}vs=new WeakMap,or.InkAnnotationElement=zr;class Jr extends Sr{constructor(us){super(us,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Hr extends Sr{constructor(us){super(us,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Kr extends Sr{constructor(us){super(us,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class ys extends Sr{constructor(us){super(us,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Yr extends Sr{constructor(us){super(us,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}or.StampAnnotationElement=Yr;class Fr extends Sr{constructor(ns){var Ds;super(ns,{isRenderable:!0});_s(this,Ls);_s(this,ws,null);const{filename:bs,content:Os}=this.data.file;this.filename=(0,ur.getFilenameFromUrl)(bs,!0),this.content=Os,(Ds=this.linkService.eventBus)==null||Ds.dispatch("fileattachmentannotation",{source:this,filename:bs,content:Os})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:ns,data:bs}=this;let Os;bs.hasAppearance||bs.fillAlpha===0?Os=document.createElement("div"):(Os=document.createElement("img"),Os.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(bs.name)?"paperclip":"pushpin"}.svg`,bs.fillAlpha&&bs.fillAlpha<1&&(Os.style=`filter: opacity(${Math.round(bs.fillAlpha*100)}%);`)),Os.addEventListener("dblclick",Es(this,Ls,mo).bind(this)),Ms(this,ws,Os);const{isMac:Ds}=cr.FeatureTest.platform;return ns.addEventListener("keydown",Bs=>{Bs.key==="Enter"&&(Ds?Bs.metaKey:Bs.ctrlKey)&&Es(this,Ls,mo).call(this)}),!bs.popupRef&&this.hasPopupData?this._createPopup():Os.classList.add("popupTriggerArea"),ns.append(Os),ns}getElementsToTriggerPopup(){return Or(this,ws)}addHighlightArea(){this.container.classList.add("highlightArea")}}ws=new WeakMap,Ls=new WeakSet,mo=function(){var ns;(ns=this.downloadManager)==null||ns.openOrDownloadData(this.container,this.content,this.filename)};class Br{constructor({div:us,accessibilityManager:ns,annotationCanvasMap:bs,l10n:Os,page:Ds,viewport:Bs}){_s(this,js);_s(this,Us,null);_s(this,as,null);_s(this,Rs,new Map);this.div=us,Ms(this,Us,ns),Ms(this,as,bs),this.l10n=Os,this.page=Ds,this.viewport=Bs,this.zIndex=0,this.l10n||(this.l10n=fr.NullL10n)}async render(us){const{annotations:ns}=us,bs=this.div;(0,ur.setLayerDimensions)(bs,this.viewport);const Os=new Map,Ds={data:null,layer:bs,linkService:us.linkService,downloadManager:us.downloadManager,imageResourcesPath:us.imageResourcesPath||"",renderForms:us.renderForms!==!1,svgFactory:new ur.DOMSVGFactory,annotationStorage:us.annotationStorage||new dr.AnnotationStorage,enableScripting:us.enableScripting===!0,hasJSActions:us.hasJSActions,fieldObjects:us.fieldObjects,parent:this,elements:null};for(const Bs of ns){if(Bs.noHTML)continue;const Vs=Bs.annotationType===cr.AnnotationType.POPUP;if(Vs){const zs=Os.get(Bs.id);if(!zs)continue;Ds.elements=zs}else{const{width:zs,height:ti}=vr(Bs.rect);if(zs<=0||ti<=0)continue}Ds.data=Bs;const Js=br.create(Ds);if(!Js.isRenderable)continue;if(!Vs&&Bs.popupRef){const zs=Os.get(Bs.popupRef);zs?zs.push(Js):Os.set(Bs.popupRef,[Js])}Js.annotationEditorType>0&&Or(this,Rs).set(Js.data.id,Js);const Xs=Js.render();Bs.hidden&&(Xs.style.visibility="hidden"),Es(this,js,Wo).call(this,Xs,Bs.id)}Es(this,js,go).call(this),await this.l10n.translate(bs)}update({viewport:us}){const ns=this.div;this.viewport=us,(0,ur.setLayerDimensions)(ns,{rotation:us.rotation}),Es(this,js,go).call(this),ns.hidden=!1}getEditableAnnotations(){return Array.from(Or(this,Rs).values())}getEditableAnnotation(us){return Or(this,Rs).get(us)}}Us=new WeakMap,as=new WeakMap,Rs=new WeakMap,js=new WeakSet,Wo=function(us,ns){var Os;const bs=us.firstChild||us;bs.id=`${cr.AnnotationPrefix}${ns}`,this.div.append(us),(Os=Or(this,Us))==null||Os.moveElementInDOM(this.div,us,bs,!1)},go=function(){if(!Or(this,as))return;const us=this.div;for(const[ns,bs]of Or(this,as)){const Os=us.querySelector(`[data-annotation-id="${ns}"]`);if(!Os)continue;const{firstChild:Ds}=Os;Ds?Ds.nodeName==="CANVAS"?Ds.replaceWith(bs):Ds.before(bs):Os.append(bs)}Or(this,as).clear()},or.AnnotationLayer=Br},(ar,or)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.ColorConverters=void 0;function lr(dr){return Math.floor(Math.max(0,Math.min(1,dr))*255).toString(16).padStart(2,"0")}function cr(dr){return Math.max(0,Math.min(255,255*dr))}class ur{static CMYK_G([hr,fr,pr,mr]){return["G",1-Math.min(1,.3*hr+.59*pr+.11*fr+mr)]}static G_CMYK([hr]){return["CMYK",0,0,0,1-hr]}static G_RGB([hr]){return["RGB",hr,hr,hr]}static G_rgb([hr]){return hr=cr(hr),[hr,hr,hr]}static G_HTML([hr]){const fr=lr(hr);return`#${fr}${fr}${fr}`}static RGB_G([hr,fr,pr]){return["G",.3*hr+.59*fr+.11*pr]}static RGB_rgb(hr){return hr.map(cr)}static RGB_HTML(hr){return`#${hr.map(lr).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([hr,fr,pr,mr]){return["RGB",1-Math.min(1,hr+mr),1-Math.min(1,pr+mr),1-Math.min(1,fr+mr)]}static CMYK_rgb([hr,fr,pr,mr]){return[cr(1-Math.min(1,hr+mr)),cr(1-Math.min(1,pr+mr)),cr(1-Math.min(1,fr+mr))]}static CMYK_HTML(hr){const fr=this.CMYK_RGB(hr).slice(1);return this.RGB_HTML(fr)}static RGB_CMYK([hr,fr,pr]){const mr=1-hr,gr=1-fr,yr=1-pr,vr=Math.min(mr,gr,yr);return["CMYK",mr,gr,yr,vr]}}or.ColorConverters=ur},(ar,or)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.NullL10n=void 0,or.getL10nFallback=cr;const lr={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};lr.print_progress_percent="{{progress}}%";function cr(hr,fr){switch(hr){case"find_match_count":hr=`find_match_count[${fr.total===1?"one":"other"}]`;break;case"find_match_count_limit":hr=`find_match_count_limit[${fr.limit===1?"one":"other"}]`;break}return lr[hr]||""}function ur(hr,fr){return fr?hr.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(pr,mr)=>mr in fr?fr[mr]:"{{"+mr+"}}"):hr}const dr={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(hr,fr=null,pr=cr(hr,fr)){return ur(pr,fr)},async translate(hr){}};or.NullL10n=dr},(ar,or,lr)=>{Object.defineProperty(or,"__esModule",{value:!0}),or.XfaLayer=void 0;var cr=lr(25);class ur{static setupStorage(hr,fr,pr,mr,gr){const yr=mr.getValue(fr,{value:null});switch(pr.name){case"textarea":if(yr.value!==null&&(hr.textContent=yr.value),gr==="print")break;hr.addEventListener("input",vr=>{mr.setValue(fr,{value:vr.target.value})});break;case"input":if(pr.attributes.type==="radio"||pr.attributes.type==="checkbox"){if(yr.value===pr.attributes.xfaOn?hr.setAttribute("checked",!0):yr.value===pr.attributes.xfaOff&&hr.removeAttribute("checked"),gr==="print")break;hr.addEventListener("change",vr=>{mr.setValue(fr,{value:vr.target.checked?vr.target.getAttribute("xfaOn"):vr.target.getAttribute("xfaOff")})})}else{if(yr.value!==null&&hr.setAttribute("value",yr.value),gr==="print")break;hr.addEventListener("input",vr=>{mr.setValue(fr,{value:vr.target.value})})}break;case"select":if(yr.value!==null){hr.setAttribute("value",yr.value);for(const vr of pr.children)vr.attributes.value===yr.value?vr.attributes.selected=!0:vr.attributes.hasOwnProperty("selected")&&delete vr.attributes.selected}hr.addEventListener("input",vr=>{const br=vr.target.options,Sr=br.selectedIndex===-1?"":br[br.selectedIndex].value;mr.setValue(fr,{value:Sr})});break}}static setAttributes({html:hr,element:fr,storage:pr=null,intent:mr,linkService:gr}){const{attributes:yr}=fr,vr=hr instanceof HTMLAnchorElement;yr.type==="radio"&&(yr.name=`${yr.name}-${mr}`);for(const[br,Sr]of Object.entries(yr))if(Sr!=null)switch(br){case"class":Sr.length&&hr.setAttribute(br,Sr.join(" "));break;case"dataId":break;case"id":hr.setAttribute("data-element-id",Sr);break;case"style":Object.assign(hr.style,Sr);break;case"textContent":hr.textContent=Sr;break;default:(!vr||br!=="href"&&br!=="newWindow")&&hr.setAttribute(br,Sr)}vr&&gr.addLinkAttributes(hr,yr.href,yr.newWindow),pr&&yr.dataId&&this.setupStorage(hr,yr.dataId,fr,pr)}static render(hr){var xr;const fr=hr.annotationStorage,pr=hr.linkService,mr=hr.xfaHtml,gr=hr.intent||"display",yr=document.createElement(mr.name);mr.attributes&&this.setAttributes({html:yr,element:mr,intent:gr,linkService:pr});const vr=[[mr,-1,yr]],br=hr.div;if(br.append(yr),hr.viewport){const Er=`matrix(${hr.viewport.transform.join(",")})`;br.style.transform=Er}gr!=="richText"&&br.setAttribute("class","xfaLayer xfaFont");const Sr=[];for(;vr.length>0;){const[Er,wr,Ar]=vr.at(-1);if(wr+1===Er.children.length){vr.pop();continue}const Tr=Er.children[++vr.at(-1)[1]];if(Tr===null)continue;const{name:Cr}=Tr;if(Cr==="#text"){const Mr=document.createTextNode(Tr.value);Sr.push(Mr),Ar.append(Mr);continue}const kr=(xr=Tr==null?void 0:Tr.attributes)!=null&&xr.xmlns?document.createElementNS(Tr.attributes.xmlns,Cr):document.createElement(Cr);if(Ar.append(kr),Tr.attributes&&this.setAttributes({html:kr,element:Tr,storage:fr,intent:gr,linkService:pr}),Tr.children&&Tr.children.length>0)vr.push([Tr,-1,kr]);else if(Tr.value){const Mr=document.createTextNode(Tr.value);cr.XfaText.shouldBuildText(Cr)&&Sr.push(Mr),kr.append(Mr)}}for(const Er of br.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Er.setAttribute("readOnly",!0);return{textDivs:Sr}}static update(hr){const fr=`matrix(${hr.viewport.transform.join(",")})`;hr.div.style.transform=fr,hr.div.hidden=!1}}or.XfaLayer=ur},(ar,or,lr)=>{var mr,gr,yr,vr,br,Sr,xr,Er,wr,Ar,Tr,Cr,kr,Mr,Rr,Ko,Go,Yo,Xo,yo,qo,vo,Jo,Qo,Zo,ea,na,ui,bo,Ii,Fi,yi,So,Bi,Vr,ra,xo,sa,ia,Eo,Li,vi;Object.defineProperty(or,"__esModule",{value:!0}),or.InkEditor=void 0;var cr=lr(1),ur=lr(4),dr=lr(29),hr=lr(6),fr=lr(5);const ds=class ds extends ur.AnnotationEditor{constructor(Lr){super({...Lr,name:"inkEditor"});_s(this,Rr);_s(this,mr,0);_s(this,gr,0);_s(this,yr,this.canvasPointermove.bind(this));_s(this,vr,this.canvasPointerleave.bind(this));_s(this,br,this.canvasPointerup.bind(this));_s(this,Sr,this.canvasPointerdown.bind(this));_s(this,xr,new Path2D);_s(this,Er,!1);_s(this,wr,!1);_s(this,Ar,!1);_s(this,Tr,null);_s(this,Cr,0);_s(this,kr,0);_s(this,Mr,null);this.color=Lr.color||null,this.thickness=Lr.thickness||null,this.opacity=Lr.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(Lr){ur.AnnotationEditor.initialize(Lr,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(Lr,Xr){switch(Lr){case cr.AnnotationEditorParamsType.INK_THICKNESS:ds._defaultThickness=Xr;break;case cr.AnnotationEditorParamsType.INK_COLOR:ds._defaultColor=Xr;break;case cr.AnnotationEditorParamsType.INK_OPACITY:ds._defaultOpacity=Xr/100;break}}updateParams(Lr,Xr){switch(Lr){case cr.AnnotationEditorParamsType.INK_THICKNESS:Es(this,Rr,Ko).call(this,Xr);break;case cr.AnnotationEditorParamsType.INK_COLOR:Es(this,Rr,Go).call(this,Xr);break;case cr.AnnotationEditorParamsType.INK_OPACITY:Es(this,Rr,Yo).call(this,Xr);break}}static get defaultPropertiesToUpdate(){return[[cr.AnnotationEditorParamsType.INK_THICKNESS,ds._defaultThickness],[cr.AnnotationEditorParamsType.INK_COLOR,ds._defaultColor||ur.AnnotationEditor._defaultLineColor],[cr.AnnotationEditorParamsType.INK_OPACITY,Math.round(ds._defaultOpacity*100)]]}get propertiesToUpdate(){return[[cr.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||ds._defaultThickness],[cr.AnnotationEditorParamsType.INK_COLOR,this.color||ds._defaultColor||ur.AnnotationEditor._defaultLineColor],[cr.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??ds._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(Es(this,Rr,Ii).call(this),Es(this,Rr,Fi).call(this)),this.isAttachedToDOM||(this.parent.add(this),Es(this,Rr,yi).call(this)),Es(this,Rr,vi).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Or(this,Tr).disconnect(),Ms(this,Tr,null),super.remove())}setParent(Lr){!this.parent&&Lr?this._uiManager.removeShouldRescale(this):this.parent&&Lr===null&&this._uiManager.addShouldRescale(this),super.setParent(Lr)}onScaleChanging(){const[Lr,Xr]=this.parentDimensions,cs=this.width*Lr,hs=this.height*Xr;this.setDimensions(cs,hs)}enableEditMode(){Or(this,Er)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",Or(this,Sr)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",Or(this,Sr)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){Or(this,Er)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),Ms(this,Er,!0),this.div.classList.add("disabled"),Es(this,Rr,vi).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(Lr){this._focusEventsAllowed&&(super.focusin(Lr),this.enableEditMode())}canvasPointerdown(Lr){Lr.button!==0||!this.isInEditMode()||Or(this,Er)||(this.setInForeground(),Lr.preventDefault(),Lr.type!=="mouse"&&this.div.focus(),Es(this,Rr,qo).call(this,Lr.offsetX,Lr.offsetY))}canvasPointermove(Lr){Lr.preventDefault(),Es(this,Rr,vo).call(this,Lr.offsetX,Lr.offsetY)}canvasPointerup(Lr){Lr.preventDefault(),Es(this,Rr,bo).call(this,Lr)}canvasPointerleave(Lr){Es(this,Rr,bo).call(this,Lr)}get isResizable(){return!this.isEmpty()&&Or(this,Er)}render(){if(this.div)return this.div;let Lr,Xr;this.width&&(Lr=this.x,Xr=this.y),super.render(),ur.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(ks=>{var fs;return(fs=this.div)==null?void 0:fs.setAttribute("aria-label",ks)});const[cs,hs,ms,Ts]=Es(this,Rr,Xo).call(this);if(this.setAt(cs,hs,0,0),this.setDims(ms,Ts),Es(this,Rr,Ii).call(this),this.width){const[ks,fs]=this.parentDimensions;this.setAspectRatio(this.width*ks,this.height*fs),this.setAt(Lr*ks,Xr*fs,this.width*ks,this.height*fs),Ms(this,Ar,!0),Es(this,Rr,yi).call(this),this.setDims(this.width*ks,this.height*fs),Es(this,Rr,ui).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return Es(this,Rr,Fi).call(this),this.div}setDimensions(Lr,Xr){const cs=Math.round(Lr),hs=Math.round(Xr);if(Or(this,Cr)===cs&&Or(this,kr)===hs)return;Ms(this,Cr,cs),Ms(this,kr,hs),this.canvas.style.visibility="hidden";const[ms,Ts]=this.parentDimensions;this.width=Lr/ms,this.height=Xr/Ts,this.fixAndSetPosition(),Or(this,Er)&&Es(this,Rr,So).call(this,Lr,Xr),Es(this,Rr,yi).call(this),Es(this,Rr,ui).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(Lr,Xr,cs){var Ps,$s,Ws;if(Lr instanceof dr.InkAnnotationElement)return null;const hs=super.deserialize(Lr,Xr,cs);hs.thickness=Lr.thickness,hs.color=cr.Util.makeHexColor(...Lr.color),hs.opacity=Lr.opacity;const[ms,Ts]=hs.pageDimensions,ks=hs.width*ms,fs=hs.height*Ts,Is=hs.parentScale,Fs=Lr.thickness/2;Ms(hs,Er,!0),Ms(hs,Cr,Math.round(ks)),Ms(hs,kr,Math.round(fs));const{paths:Gs,rect:gs,rotation:xs}=Lr;for(let{bezier:Ns}of Gs){Ns=Es(Ps=ds,Vr,sa).call(Ps,Ns,gs,xs);const vs=[];hs.paths.push(vs);let ws=Is*(Ns[0]-Fs),Ls=Is*(Ns[1]-Fs);for(let Us=2,as=Ns.length;Us<as;Us+=6){const Rs=Is*(Ns[Us]-Fs),js=Is*(Ns[Us+1]-Fs),Ys=Is*(Ns[Us+2]-Fs),Qs=Is*(Ns[Us+3]-Fs),Ks=Is*(Ns[Us+4]-Fs),us=Is*(Ns[Us+5]-Fs);vs.push([[ws,Ls],[Rs,js],[Ys,Qs],[Ks,us]]),ws=Ks,Ls=us}const Hs=Es(this,Vr,ra).call(this,vs);hs.bezierPath2D.push(Hs)}const Ss=Es($s=hs,Rr,Eo).call($s);return Ms(hs,gr,Math.max(ur.AnnotationEditor.MIN_SIZE,Ss[2]-Ss[0])),Ms(hs,mr,Math.max(ur.AnnotationEditor.MIN_SIZE,Ss[3]-Ss[1])),Es(Ws=hs,Rr,So).call(Ws,ks,fs),hs}serialize(){if(this.isEmpty())return null;const Lr=this.getRect(0,0),Xr=ur.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:cr.AnnotationEditorType.INK,color:Xr,thickness:this.thickness,opacity:this.opacity,paths:Es(this,Rr,ia).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,Lr),pageIndex:this.pageIndex,rect:Lr,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};mr=new WeakMap,gr=new WeakMap,yr=new WeakMap,vr=new WeakMap,br=new WeakMap,Sr=new WeakMap,xr=new WeakMap,Er=new WeakMap,wr=new WeakMap,Ar=new WeakMap,Tr=new WeakMap,Cr=new WeakMap,kr=new WeakMap,Mr=new WeakMap,Rr=new WeakSet,Ko=function(Lr){const Xr=this.thickness;this.addCommands({cmd:()=>{this.thickness=Lr,Es(this,Rr,vi).call(this)},undo:()=>{this.thickness=Xr,Es(this,Rr,vi).call(this)},mustExec:!0,type:cr.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Go=function(Lr){const Xr=this.color;this.addCommands({cmd:()=>{this.color=Lr,Es(this,Rr,ui).call(this)},undo:()=>{this.color=Xr,Es(this,Rr,ui).call(this)},mustExec:!0,type:cr.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Yo=function(Lr){Lr/=100;const Xr=this.opacity;this.addCommands({cmd:()=>{this.opacity=Lr,Es(this,Rr,ui).call(this)},undo:()=>{this.opacity=Xr,Es(this,Rr,ui).call(this)},mustExec:!0,type:cr.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Xo=function(){const{parentRotation:Lr,parentDimensions:[Xr,cs]}=this;switch(Lr){case 90:return[0,cs,cs,Xr];case 180:return[Xr,cs,Xr,cs];case 270:return[Xr,0,cs,Xr];default:return[0,0,Xr,cs]}},yo=function(){const{ctx:Lr,color:Xr,opacity:cs,thickness:hs,parentScale:ms,scaleFactor:Ts}=this;Lr.lineWidth=hs*ms/Ts,Lr.lineCap="round",Lr.lineJoin="round",Lr.miterLimit=10,Lr.strokeStyle=`${Xr}${(0,fr.opacityToHex)(cs)}`},qo=function(Lr,Xr){this.canvas.addEventListener("contextmenu",hr.noContextMenu),this.canvas.addEventListener("pointerleave",Or(this,vr)),this.canvas.addEventListener("pointermove",Or(this,yr)),this.canvas.addEventListener("pointerup",Or(this,br)),this.canvas.removeEventListener("pointerdown",Or(this,Sr)),this.isEditing=!0,Or(this,Ar)||(Ms(this,Ar,!0),Es(this,Rr,yi).call(this),this.thickness||(this.thickness=ds._defaultThickness),this.color||(this.color=ds._defaultColor||ur.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=ds._defaultOpacity)),this.currentPath.push([Lr,Xr]),Ms(this,wr,!1),Es(this,Rr,yo).call(this),Ms(this,Mr,()=>{Es(this,Rr,Zo).call(this),Or(this,Mr)&&window.requestAnimationFrame(Or(this,Mr))}),window.requestAnimationFrame(Or(this,Mr))},vo=function(Lr,Xr){const[cs,hs]=this.currentPath.at(-1);if(this.currentPath.length>1&&Lr===cs&&Xr===hs)return;const ms=this.currentPath;let Ts=Or(this,xr);if(ms.push([Lr,Xr]),Ms(this,wr,!0),ms.length<=2){Ts.moveTo(...ms[0]),Ts.lineTo(Lr,Xr);return}ms.length===3&&(Ms(this,xr,Ts=new Path2D),Ts.moveTo(...ms[0])),Es(this,Rr,ea).call(this,Ts,...ms.at(-3),...ms.at(-2),Lr,Xr)},Jo=function(){if(this.currentPath.length===0)return;const Lr=this.currentPath.at(-1);Or(this,xr).lineTo(...Lr)},Qo=function(Lr,Xr){Ms(this,Mr,null),Lr=Math.min(Math.max(Lr,0),this.canvas.width),Xr=Math.min(Math.max(Xr,0),this.canvas.height),Es(this,Rr,vo).call(this,Lr,Xr),Es(this,Rr,Jo).call(this);let cs;if(this.currentPath.length!==1)cs=Es(this,Rr,na).call(this);else{const fs=[Lr,Xr];cs=[[fs,fs.slice(),fs.slice(),fs]]}const hs=Or(this,xr),ms=this.currentPath;this.currentPath=[],Ms(this,xr,new Path2D);const Ts=()=>{this.allRawPaths.push(ms),this.paths.push(cs),this.bezierPath2D.push(hs),this.rebuild()},ks=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(Es(this,Rr,Ii).call(this),Es(this,Rr,Fi).call(this)),Es(this,Rr,vi).call(this))};this.addCommands({cmd:Ts,undo:ks,mustExec:!0})},Zo=function(){if(!Or(this,wr))return;Ms(this,wr,!1);const Lr=Math.ceil(this.thickness*this.parentScale),Xr=this.currentPath.slice(-3),cs=Xr.map(Ts=>Ts[0]),hs=Xr.map(Ts=>Ts[1]);Math.min(...cs)-Lr,Math.max(...cs)+Lr,Math.min(...hs)-Lr,Math.max(...hs)+Lr;const{ctx:ms}=this;ms.save(),ms.clearRect(0,0,this.canvas.width,this.canvas.height);for(const Ts of this.bezierPath2D)ms.stroke(Ts);ms.stroke(Or(this,xr)),ms.restore()},ea=function(Lr,Xr,cs,hs,ms,Ts,ks){const fs=(Xr+hs)/2,Is=(cs+ms)/2,Fs=(hs+Ts)/2,Gs=(ms+ks)/2;Lr.bezierCurveTo(fs+2*(hs-fs)/3,Is+2*(ms-Is)/3,Fs+2*(hs-Fs)/3,Gs+2*(ms-Gs)/3,Fs,Gs)},na=function(){const Lr=this.currentPath;if(Lr.length<=2)return[[Lr[0],Lr[0],Lr.at(-1),Lr.at(-1)]];const Xr=[];let cs,[hs,ms]=Lr[0];for(cs=1;cs<Lr.length-2;cs++){const[gs,xs]=Lr[cs],[Ss,Ps]=Lr[cs+1],$s=(gs+Ss)/2,Ws=(xs+Ps)/2,Ns=[hs+2*(gs-hs)/3,ms+2*(xs-ms)/3],vs=[$s+2*(gs-$s)/3,Ws+2*(xs-Ws)/3];Xr.push([[hs,ms],Ns,vs,[$s,Ws]]),[hs,ms]=[$s,Ws]}const[Ts,ks]=Lr[cs],[fs,Is]=Lr[cs+1],Fs=[hs+2*(Ts-hs)/3,ms+2*(ks-ms)/3],Gs=[fs+2*(Ts-fs)/3,Is+2*(ks-Is)/3];return Xr.push([[hs,ms],Fs,Gs,[fs,Is]]),Xr},ui=function(){if(this.isEmpty()){Es(this,Rr,Bi).call(this);return}Es(this,Rr,yo).call(this);const{canvas:Lr,ctx:Xr}=this;Xr.setTransform(1,0,0,1,0,0),Xr.clearRect(0,0,Lr.width,Lr.height),Es(this,Rr,Bi).call(this);for(const cs of this.bezierPath2D)Xr.stroke(cs)},bo=function(Lr){this.canvas.removeEventListener("pointerleave",Or(this,vr)),this.canvas.removeEventListener("pointermove",Or(this,yr)),this.canvas.removeEventListener("pointerup",Or(this,br)),this.canvas.addEventListener("pointerdown",Or(this,Sr)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",hr.noContextMenu)},10),Es(this,Rr,Qo).call(this,Lr.offsetX,Lr.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Ii=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",ur.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(Lr=>{var Xr;return(Xr=this.canvas)==null?void 0:Xr.setAttribute("aria-label",Lr)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Fi=function(){Ms(this,Tr,new ResizeObserver(Lr=>{const Xr=Lr[0].contentRect;Xr.width&&Xr.height&&this.setDimensions(Xr.width,Xr.height)})),Or(this,Tr).observe(this.div)},yi=function(){if(!Or(this,Ar))return;const[Lr,Xr]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*Lr),this.canvas.height=Math.ceil(this.height*Xr),Es(this,Rr,Bi).call(this)},So=function(Lr,Xr){const cs=Es(this,Rr,Li).call(this),hs=(Lr-cs)/Or(this,gr),ms=(Xr-cs)/Or(this,mr);this.scaleFactor=Math.min(hs,ms)},Bi=function(){const Lr=Es(this,Rr,Li).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+Lr,this.translationY*this.scaleFactor+Lr)},Vr=new WeakSet,ra=function(Lr){const Xr=new Path2D;for(let cs=0,hs=Lr.length;cs<hs;cs++){const[ms,Ts,ks,fs]=Lr[cs];cs===0&&Xr.moveTo(...ms),Xr.bezierCurveTo(Ts[0],Ts[1],ks[0],ks[1],fs[0],fs[1])}return Xr},xo=function(Lr,Xr,cs){const[hs,ms,Ts,ks]=Xr;switch(cs){case 0:for(let fs=0,Is=Lr.length;fs<Is;fs+=2)Lr[fs]+=hs,Lr[fs+1]=ks-Lr[fs+1];break;case 90:for(let fs=0,Is=Lr.length;fs<Is;fs+=2){const Fs=Lr[fs];Lr[fs]=Lr[fs+1]+hs,Lr[fs+1]=Fs+ms}break;case 180:for(let fs=0,Is=Lr.length;fs<Is;fs+=2)Lr[fs]=Ts-Lr[fs],Lr[fs+1]+=ms;break;case 270:for(let fs=0,Is=Lr.length;fs<Is;fs+=2){const Fs=Lr[fs];Lr[fs]=Ts-Lr[fs+1],Lr[fs+1]=ks-Fs}break;default:throw new Error("Invalid rotation")}return Lr},sa=function(Lr,Xr,cs){const[hs,ms,Ts,ks]=Xr;switch(cs){case 0:for(let fs=0,Is=Lr.length;fs<Is;fs+=2)Lr[fs]-=hs,Lr[fs+1]=ks-Lr[fs+1];break;case 90:for(let fs=0,Is=Lr.length;fs<Is;fs+=2){const Fs=Lr[fs];Lr[fs]=Lr[fs+1]-ms,Lr[fs+1]=Fs-hs}break;case 180:for(let fs=0,Is=Lr.length;fs<Is;fs+=2)Lr[fs]=Ts-Lr[fs],Lr[fs+1]-=ms;break;case 270:for(let fs=0,Is=Lr.length;fs<Is;fs+=2){const Fs=Lr[fs];Lr[fs]=ks-Lr[fs+1],Lr[fs+1]=Ts-Fs}break;default:throw new Error("Invalid rotation")}return Lr},ia=function(Lr,Xr,cs,hs){var Is,Fs;const ms=[],Ts=this.thickness/2,ks=Lr*Xr+Ts,fs=Lr*cs+Ts;for(const Gs of this.paths){const gs=[],xs=[];for(let Ss=0,Ps=Gs.length;Ss<Ps;Ss++){const[$s,Ws,Ns,vs]=Gs[Ss],ws=Lr*$s[0]+ks,Ls=Lr*$s[1]+fs,Hs=Lr*Ws[0]+ks,Us=Lr*Ws[1]+fs,as=Lr*Ns[0]+ks,Rs=Lr*Ns[1]+fs,js=Lr*vs[0]+ks,Ys=Lr*vs[1]+fs;Ss===0&&(gs.push(ws,Ls),xs.push(ws,Ls)),gs.push(Hs,Us,as,Rs,js,Ys),xs.push(Hs,Us),Ss===Ps-1&&xs.push(js,Ys)}ms.push({bezier:Es(Is=ds,Vr,xo).call(Is,gs,hs,this.rotation),points:Es(Fs=ds,Vr,xo).call(Fs,xs,hs,this.rotation)})}return ms},Eo=function(){let Lr=1/0,Xr=-1/0,cs=1/0,hs=-1/0;for(const ms of this.paths)for(const[Ts,ks,fs,Is]of ms){const Fs=cr.Util.bezierBoundingBox(...Ts,...ks,...fs,...Is);Lr=Math.min(Lr,Fs[0]),cs=Math.min(cs,Fs[1]),Xr=Math.max(Xr,Fs[2]),hs=Math.max(hs,Fs[3])}return[Lr,cs,Xr,hs]},Li=function(){return Or(this,Er)?Math.ceil(this.thickness*this.parentScale):0},vi=function(Lr=!1){if(this.isEmpty())return;if(!Or(this,Er)){Es(this,Rr,ui).call(this);return}const Xr=Es(this,Rr,Eo).call(this),cs=Es(this,Rr,Li).call(this);Ms(this,gr,Math.max(ur.AnnotationEditor.MIN_SIZE,Xr[2]-Xr[0])),Ms(this,mr,Math.max(ur.AnnotationEditor.MIN_SIZE,Xr[3]-Xr[1]));const hs=Math.ceil(cs+Or(this,gr)*this.scaleFactor),ms=Math.ceil(cs+Or(this,mr)*this.scaleFactor),[Ts,ks]=this.parentDimensions;this.width=hs/Ts,this.height=ms/ks,this.setAspectRatio(hs,ms);const fs=this.translationX,Is=this.translationY;this.translationX=-Xr[0],this.translationY=-Xr[1],Es(this,Rr,yi).call(this),Es(this,Rr,ui).call(this),Ms(this,Cr,hs),Ms(this,kr,ms),this.setDims(hs,ms);const Fs=Lr?cs/this.scaleFactor/2:0;this.translate(fs-this.translationX-Fs,Is-this.translationY-Fs)},_s(ds,Vr),ii(ds,"_defaultColor",null),ii(ds,"_defaultOpacity",1),ii(ds,"_defaultThickness",1),ii(ds,"_type","ink");let pr=ds;or.InkEditor=pr},(ar,or,lr)=>{var pr,mr,gr,yr,vr,br,Sr,xr,Er,wr,Ar,Ai,Ci,$i,wo,oa,aa,ko,Vi,la;Object.defineProperty(or,"__esModule",{value:!0}),or.StampEditor=void 0;var cr=lr(1),ur=lr(4),dr=lr(6),hr=lr(29);const Ir=class Ir extends ur.AnnotationEditor{constructor(rs){super({...rs,name:"stampEditor"});_s(this,Ar);_s(this,pr,null);_s(this,mr,null);_s(this,gr,null);_s(this,yr,null);_s(this,vr,null);_s(this,br,null);_s(this,Sr,null);_s(this,xr,null);_s(this,Er,!1);_s(this,wr,!1);Ms(this,yr,rs.bitmapUrl),Ms(this,vr,rs.bitmapFile)}static initialize(rs){ur.AnnotationEditor.initialize(rs)}static get supportedTypes(){const rs=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,cr.shadow)(this,"supportedTypes",rs.map(qr=>`image/${qr}`))}static get supportedTypesStr(){return(0,cr.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(rs){return this.supportedTypes.includes(rs)}static paste(rs,qr){qr.pasteEditor(cr.AnnotationEditorType.STAMP,{bitmapFile:rs.getAsFile()})}remove(){var rs,qr;Or(this,mr)&&(Ms(this,pr,null),this._uiManager.imageManager.deleteId(Or(this,mr)),(rs=Or(this,br))==null||rs.remove(),Ms(this,br,null),(qr=Or(this,Sr))==null||qr.disconnect(),Ms(this,Sr,null)),super.remove()}rebuild(){if(!this.parent){Or(this,mr)&&Es(this,Ar,$i).call(this);return}super.rebuild(),this.div!==null&&(Or(this,mr)&&Es(this,Ar,$i).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(Or(this,gr)||Or(this,pr)||Or(this,yr)||Or(this,vr))}get isResizable(){return!0}render(){if(this.div)return this.div;let rs,qr;if(this.width&&(rs=this.x,qr=this.y),super.render(),this.div.hidden=!0,Or(this,pr)?Es(this,Ar,wo).call(this):Es(this,Ar,$i).call(this),this.width){const[zr,Jr]=this.parentDimensions;this.setAt(rs*zr,qr*Jr,this.width*zr,this.height*Jr)}return this.div}static deserialize(rs,qr,zr){if(rs instanceof hr.StampAnnotationElement)return null;const Jr=super.deserialize(rs,qr,zr),{rect:Hr,bitmapUrl:Kr,bitmapId:ys,isSvg:Yr,accessibilityData:Fr}=rs;ys&&zr.imageManager.isValidId(ys)?Ms(Jr,mr,ys):Ms(Jr,yr,Kr),Ms(Jr,Er,Yr);const[Br,Ur]=Jr.pageDimensions;return Jr.width=(Hr[2]-Hr[0])/Br,Jr.height=(Hr[3]-Hr[1])/Ur,Fr&&(Jr.altTextData=Fr),Jr}serialize(rs=!1,qr=null){if(this.isEmpty())return null;const zr={annotationType:cr.AnnotationEditorType.STAMP,bitmapId:Or(this,mr),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Or(this,Er),structTreeParentId:this._structTreeParentId};if(rs)return zr.bitmapUrl=Es(this,Ar,Vi).call(this,!0),zr.accessibilityData=this.altTextData,zr;const{decorative:Jr,altText:Hr}=this.altTextData;if(!Jr&&Hr&&(zr.accessibilityData={type:"Figure",alt:Hr}),qr===null)return zr;qr.stamps||(qr.stamps=new Map);const Kr=Or(this,Er)?(zr.rect[2]-zr.rect[0])*(zr.rect[3]-zr.rect[1]):null;if(!qr.stamps.has(Or(this,mr)))qr.stamps.set(Or(this,mr),{area:Kr,serialized:zr}),zr.bitmap=Es(this,Ar,Vi).call(this,!1);else if(Or(this,Er)){const ys=qr.stamps.get(Or(this,mr));Kr>ys.area&&(ys.area=Kr,ys.serialized.bitmap.close(),ys.serialized.bitmap=Es(this,Ar,Vi).call(this,!1))}return zr}};pr=new WeakMap,mr=new WeakMap,gr=new WeakMap,yr=new WeakMap,vr=new WeakMap,br=new WeakMap,Sr=new WeakMap,xr=new WeakMap,Er=new WeakMap,wr=new WeakMap,Ar=new WeakSet,Ai=function(rs,qr=!1){if(!rs){this.remove();return}Ms(this,pr,rs.bitmap),qr||(Ms(this,mr,rs.id),Ms(this,Er,rs.isSvg)),Es(this,Ar,wo).call(this)},Ci=function(){Ms(this,gr,null),this._uiManager.enableWaiting(!1),Or(this,br)&&this.div.focus()},$i=function(){if(Or(this,mr)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Or(this,mr)).then(qr=>Es(this,Ar,Ai).call(this,qr,!0)).finally(()=>Es(this,Ar,Ci).call(this));return}if(Or(this,yr)){const qr=Or(this,yr);Ms(this,yr,null),this._uiManager.enableWaiting(!0),Ms(this,gr,this._uiManager.imageManager.getFromUrl(qr).then(zr=>Es(this,Ar,Ai).call(this,zr)).finally(()=>Es(this,Ar,Ci).call(this)));return}if(Or(this,vr)){const qr=Or(this,vr);Ms(this,vr,null),this._uiManager.enableWaiting(!0),Ms(this,gr,this._uiManager.imageManager.getFromFile(qr).then(zr=>Es(this,Ar,Ai).call(this,zr)).finally(()=>Es(this,Ar,Ci).call(this)));return}const rs=document.createElement("input");rs.type="file",rs.accept=Ir.supportedTypesStr,Ms(this,gr,new Promise(qr=>{rs.addEventListener("change",async()=>{if(!rs.files||rs.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const zr=await this._uiManager.imageManager.getFromFile(rs.files[0]);Es(this,Ar,Ai).call(this,zr)}qr()}),rs.addEventListener("cancel",()=>{this.remove(),qr()})}).finally(()=>Es(this,Ar,Ci).call(this))),rs.click()},wo=function(){const{div:rs}=this;let{width:qr,height:zr}=Or(this,pr);const[Jr,Hr]=this.pageDimensions,Kr=.75;if(this.width)qr=this.width*Jr,zr=this.height*Hr;else if(qr>Kr*Jr||zr>Kr*Hr){const Br=Math.min(Kr*Jr/qr,Kr*Hr/zr);qr*=Br,zr*=Br}const[ys,Yr]=this.parentDimensions;this.setDims(qr*ys/Jr,zr*Yr/Hr),this._uiManager.enableWaiting(!1);const Fr=Ms(this,br,document.createElement("canvas"));rs.append(Fr),rs.hidden=!1,Es(this,Ar,ko).call(this,qr,zr),Es(this,Ar,la).call(this),Or(this,wr)||(this.parent.addUndoableEditor(this),Ms(this,wr,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},oa=function(rs,qr){var Kr;const[zr,Jr]=this.parentDimensions;this.width=rs/zr,this.height=qr/Jr,this.setDims(rs,qr),(Kr=this._initialOptions)!=null&&Kr.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,Or(this,xr)!==null&&clearTimeout(Or(this,xr)),Ms(this,xr,setTimeout(()=>{Ms(this,xr,null),Es(this,Ar,ko).call(this,rs,qr)},200))},aa=function(rs,qr){const{width:zr,height:Jr}=Or(this,pr);let Hr=zr,Kr=Jr,ys=Or(this,pr);for(;Hr>2*rs||Kr>2*qr;){const Yr=Hr,Fr=Kr;Hr>2*rs&&(Hr=Hr>=16384?Math.floor(Hr/2)-1:Math.ceil(Hr/2)),Kr>2*qr&&(Kr=Kr>=16384?Math.floor(Kr/2)-1:Math.ceil(Kr/2));const Br=new OffscreenCanvas(Hr,Kr);Br.getContext("2d").drawImage(ys,0,0,Yr,Fr,0,0,Hr,Kr),ys=Br.transferToImageBitmap()}return ys},ko=function(rs,qr){rs=Math.ceil(rs),qr=Math.ceil(qr);const zr=Or(this,br);if(!zr||zr.width===rs&&zr.height===qr)return;zr.width=rs,zr.height=qr;const Jr=Or(this,Er)?Or(this,pr):Es(this,Ar,aa).call(this,rs,qr),Hr=zr.getContext("2d");Hr.filter=this._uiManager.hcmFilter,Hr.drawImage(Jr,0,0,Jr.width,Jr.height,0,0,rs,qr)},Vi=function(rs){if(rs){if(Or(this,Er)){const Jr=this._uiManager.imageManager.getSvgUrl(Or(this,mr));if(Jr)return Jr}const qr=document.createElement("canvas");return{width:qr.width,height:qr.height}=Or(this,pr),qr.getContext("2d").drawImage(Or(this,pr),0,0),qr.toDataURL()}if(Or(this,Er)){const[qr,zr]=this.pageDimensions,Jr=Math.round(this.width*qr*dr.PixelsPerInch.PDF_TO_CSS_UNITS),Hr=Math.round(this.height*zr*dr.PixelsPerInch.PDF_TO_CSS_UNITS),Kr=new OffscreenCanvas(Jr,Hr);return Kr.getContext("2d").drawImage(Or(this,pr),0,0,Or(this,pr).width,Or(this,pr).height,0,0,Jr,Hr),Kr.transferToImageBitmap()}return structuredClone(Or(this,pr))},la=function(){Ms(this,Sr,new ResizeObserver(rs=>{const qr=rs[0].contentRect;qr.width&&qr.height&&Es(this,Ar,oa).call(this,qr.width,qr.height)})),Or(this,Sr).observe(this.div)},ii(Ir,"_type","stamp");let fr=Ir;or.StampEditor=fr}],__webpack_module_cache__={};function __w_pdfjs_require__(ar){var or=__webpack_module_cache__[ar];if(or!==void 0)return or.exports;var lr=__webpack_module_cache__[ar]={exports:{}};return __webpack_modules__[ar](lr,lr.exports,__w_pdfjs_require__),lr.exports}var __webpack_exports__={};return(()=>{var ar=__webpack_exports__;Object.defineProperty(ar,"__esModule",{value:!0}),Object.defineProperty(ar,"AbortException",{enumerable:!0,get:function(){return or.AbortException}}),Object.defineProperty(ar,"AnnotationEditorLayer",{enumerable:!0,get:function(){return dr.AnnotationEditorLayer}}),Object.defineProperty(ar,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return or.AnnotationEditorParamsType}}),Object.defineProperty(ar,"AnnotationEditorType",{enumerable:!0,get:function(){return or.AnnotationEditorType}}),Object.defineProperty(ar,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return hr.AnnotationEditorUIManager}}),Object.defineProperty(ar,"AnnotationLayer",{enumerable:!0,get:function(){return fr.AnnotationLayer}}),Object.defineProperty(ar,"AnnotationMode",{enumerable:!0,get:function(){return or.AnnotationMode}}),Object.defineProperty(ar,"CMapCompressionType",{enumerable:!0,get:function(){return or.CMapCompressionType}}),Object.defineProperty(ar,"DOMSVGFactory",{enumerable:!0,get:function(){return cr.DOMSVGFactory}}),Object.defineProperty(ar,"FeatureTest",{enumerable:!0,get:function(){return or.FeatureTest}}),Object.defineProperty(ar,"GlobalWorkerOptions",{enumerable:!0,get:function(){return pr.GlobalWorkerOptions}}),Object.defineProperty(ar,"ImageKind",{enumerable:!0,get:function(){return or.ImageKind}}),Object.defineProperty(ar,"InvalidPDFException",{enumerable:!0,get:function(){return or.InvalidPDFException}}),Object.defineProperty(ar,"MissingPDFException",{enumerable:!0,get:function(){return or.MissingPDFException}}),Object.defineProperty(ar,"OPS",{enumerable:!0,get:function(){return or.OPS}}),Object.defineProperty(ar,"PDFDataRangeTransport",{enumerable:!0,get:function(){return lr.PDFDataRangeTransport}}),Object.defineProperty(ar,"PDFDateString",{enumerable:!0,get:function(){return cr.PDFDateString}}),Object.defineProperty(ar,"PDFWorker",{enumerable:!0,get:function(){return lr.PDFWorker}}),Object.defineProperty(ar,"PasswordResponses",{enumerable:!0,get:function(){return or.PasswordResponses}}),Object.defineProperty(ar,"PermissionFlag",{enumerable:!0,get:function(){return or.PermissionFlag}}),Object.defineProperty(ar,"PixelsPerInch",{enumerable:!0,get:function(){return cr.PixelsPerInch}}),Object.defineProperty(ar,"PromiseCapability",{enumerable:!0,get:function(){return or.PromiseCapability}}),Object.defineProperty(ar,"RenderingCancelledException",{enumerable:!0,get:function(){return cr.RenderingCancelledException}}),Object.defineProperty(ar,"SVGGraphics",{enumerable:!0,get:function(){return lr.SVGGraphics}}),Object.defineProperty(ar,"UnexpectedResponseException",{enumerable:!0,get:function(){return or.UnexpectedResponseException}}),Object.defineProperty(ar,"Util",{enumerable:!0,get:function(){return or.Util}}),Object.defineProperty(ar,"VerbosityLevel",{enumerable:!0,get:function(){return or.VerbosityLevel}}),Object.defineProperty(ar,"XfaLayer",{enumerable:!0,get:function(){return mr.XfaLayer}}),Object.defineProperty(ar,"build",{enumerable:!0,get:function(){return lr.build}}),Object.defineProperty(ar,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return or.createValidAbsoluteUrl}}),Object.defineProperty(ar,"getDocument",{enumerable:!0,get:function(){return lr.getDocument}}),Object.defineProperty(ar,"getFilenameFromUrl",{enumerable:!0,get:function(){return cr.getFilenameFromUrl}}),Object.defineProperty(ar,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return cr.getPdfFilenameFromUrl}}),Object.defineProperty(ar,"getXfaPageViewport",{enumerable:!0,get:function(){return cr.getXfaPageViewport}}),Object.defineProperty(ar,"isDataScheme",{enumerable:!0,get:function(){return cr.isDataScheme}}),Object.defineProperty(ar,"isPdfFile",{enumerable:!0,get:function(){return cr.isPdfFile}}),Object.defineProperty(ar,"loadScript",{enumerable:!0,get:function(){return cr.loadScript}}),Object.defineProperty(ar,"noContextMenu",{enumerable:!0,get:function(){return cr.noContextMenu}}),Object.defineProperty(ar,"normalizeUnicode",{enumerable:!0,get:function(){return or.normalizeUnicode}}),Object.defineProperty(ar,"renderTextLayer",{enumerable:!0,get:function(){return ur.renderTextLayer}}),Object.defineProperty(ar,"setLayerDimensions",{enumerable:!0,get:function(){return cr.setLayerDimensions}}),Object.defineProperty(ar,"shadow",{enumerable:!0,get:function(){return or.shadow}}),Object.defineProperty(ar,"updateTextLayer",{enumerable:!0,get:function(){return ur.updateTextLayer}}),Object.defineProperty(ar,"version",{enumerable:!0,get:function(){return lr.version}});var or=__w_pdfjs_require__(1),lr=__w_pdfjs_require__(2),cr=__w_pdfjs_require__(6),ur=__w_pdfjs_require__(26),dr=__w_pdfjs_require__(27),hr=__w_pdfjs_require__(5),fr=__w_pdfjs_require__(29),pr=__w_pdfjs_require__(14),mr=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const _hoisted_1$7={class:"flex items-center justify-between mb-6"},_hoisted_2$5={class:"flex items-center"},_hoisted_3$5={key:0,class:"text-2xl font-bold text-gray-900 dark:text-white"},_hoisted_4$4={key:0,class:"text-center py-8"},_hoisted_5$3={key:1,class:"card"},_hoisted_6$3={key:0,class:"mb-3 flex items-center"},_hoisted_7$3={class:"text-sm text-gray-600 dark:text-gray-300"},_hoisted_8$3={class:"flex items-center justify-between mb-4 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg"},_hoisted_9$3={class:"flex items-center space-x-2"},_hoisted_10$2=["disabled"],_hoisted_11$2={class:"text-sm text-gray-700 dark:text-gray-300"},_hoisted_12$2=["disabled"],_hoisted_13$2={class:"flex items-center space-x-2"},_hoisted_14$2={class:"text-sm text-gray-700 dark:text-gray-300"},_hoisted_15$2={class:"overflow-auto bg-gray-200 dark:bg-gray-900 rounded-lg p-4 flex justify-center"},maxCacheSize=5,zoomStep=.1,preloadPages=2,_sfc_main$7={__name:"PdfViewer",async setup(ar){let or,lr;const cr=([or,lr]=withAsyncContext(()=>__vitePreload(()=>import("./pdf.worker.entry--OUT5Wab.js").then(zr=>zr.p),[])),or=await or,lr(),or);pdfExports.GlobalWorkerOptions.workerSrc=cr;const ur=useRoute(),dr=useRouter(),hr=usePdfsStore(),fr=useSubjectsStore(),pr=ref(Number(ur.params.id)),mr=ref(null),gr=ref(null),yr=ref(1),vr=ref(0),br=ref(!0),Sr=ref(null),xr=ref(1.5),Er=ref(new Map),wr=ref([]),Ar=ref(!1),Tr=ref(!1),Cr=ref({title:"",message:"",type:"info"});onMounted(async()=>{try{await fr.fetchSubjects(),await Mr()}catch(zr){console.error("Error inicializando PDF viewer:",zr),br.value=!1}}),onBeforeUnmount(()=>{mr.value&&mr.value.destroy(),Er.value.forEach(zr=>{zr.cleanup()}),Er.value.clear(),wr.value=[]});const kr=zr=>{Cr.value={title:"Error",message:zr,type:"error"},Tr.value=!0},Mr=async()=>{var zr;br.value=!0;try{console.log("Iniciando carga del PDF...");const Jr=await hr.getPdfById(pr.value);if(!Jr){console.error("No se encontró el PDF"),dr.push("/pdfs");return}console.log("PDF encontrado:",Jr),gr.value=Jr;let Hr;if(gr.value.file instanceof ArrayBuffer)console.log("PDF es ArrayBuffer"),Hr=gr.value.file;else if((zr=gr.value.file)!=null&&zr.data)console.log("PDF tiene propiedad data"),Hr=new Uint8Array(gr.value.file.data).buffer;else throw console.error("Formato de archivo no reconocido:",gr.value.file),new Error("Formato de archivo PDF no soportado");console.log("Tamaño del buffer:",Hr.byteLength);const Kr=pdfExports.getDocument({data:Hr,cMapUrl:"https://unpkg.com/pdfjs-dist@3.11.174/cmaps/",cMapPacked:!0,standardFontDataUrl:"https://unpkg.com/pdfjs-dist@3.11.174/standard_fonts/",disableStream:!0,disableAutoFetch:!0});console.log("Iniciando carga del documento PDF..."),mr.value=await Kr.promise,console.log("Documento PDF cargado:",mr.value),vr.value=mr.value.numPages,console.log("Número total de páginas:",vr.value),await Dr(yr.value)}catch(Jr){console.error("Error loading PDF:",Jr),kr("Error al cargar el PDF: "+Jr.message)}finally{br.value=!1}},Rr=async zr=>{const Jr=[];for(let Hr=Math.max(1,zr-preloadPages);Hr<zr;Hr++)Jr.push(Hr);for(let Hr=zr+1;Hr<=Math.min(vr.value,zr+preloadPages);Hr++)Jr.push(Hr);Jr.forEach(Hr=>{Er.value.has(Hr)||wr.value.push(Hr)}),Nr()},Nr=async()=>{if(!(Ar.value||wr.value.length===0)){Ar.value=!0;try{const zr=wr.value.shift();Er.value.has(zr)||await _r(zr)}finally{Ar.value=!1,wr.value.length>0&&requestAnimationFrame(Nr)}}},_r=async zr=>{if(mr.value)try{const Jr=await mr.value.getPage(zr),Hr=Jr.getViewport({scale:xr.value}),Kr=document.createElement("canvas");Kr.width=Hr.width,Kr.height=Hr.height;const Yr={canvasContext:Kr.getContext("2d"),viewport:Hr};if(await Jr.render(Yr).promise,Er.value.size>=maxCacheSize){const Fr=Er.value.keys().next().value;Er.value.get(Fr).cleanup(),Er.value.delete(Fr)}Er.value.set(zr,{page:Jr,viewport:Hr,canvas:Kr,cleanup:()=>{Jr.cleanup()}})}catch(Jr){console.error("Error al precargar página:",Jr)}},Dr=async zr=>{if(mr.value)try{const Jr=Sr.value;if(!Jr)return;const Hr=Jr.getContext("2d");if(Hr.clearRect(0,0,Jr.width,Jr.height),Er.value.has(zr)){const Br=Er.value.get(zr),Ur=Br.viewport;Jr.height=Ur.height,Jr.width=Ur.width,Hr.drawImage(Br.canvas,0,0),Rr(zr);return}const Kr=await mr.value.getPage(zr),ys=Kr.getViewport({scale:xr.value});Jr.height=ys.height,Jr.width=ys.width;const Yr={canvasContext:Hr,viewport:ys};if(await Kr.render(Yr).promise,Er.value.size>=maxCacheSize){const Br=Er.value.keys().next().value;Er.value.get(Br).cleanup(),Er.value.delete(Br)}const Fr=document.createElement("canvas");Fr.width=Jr.width,Fr.height=Jr.height,Fr.getContext("2d").drawImage(Jr,0,0),Er.value.set(zr,{page:Kr,viewport:ys,canvas:Fr,cleanup:()=>{Kr.cleanup()}}),Rr(zr)}catch(Jr){console.error("Error rendering PDF page:",Jr),kr("Error al renderizar la página del PDF: "+Jr.message)}},Pr=async()=>{xr.value=Math.min(xr.value+zoomStep,3),await Dr(yr.value)},Ir=async()=>{xr.value=Math.max(xr.value-zoomStep,.5),await Dr(yr.value)},$r=async()=>{yr.value>1&&(yr.value--,await Dr(yr.value))},Zr=async()=>{yr.value<vr.value&&(yr.value++,await Dr(yr.value))},rs=()=>{if(!gr.value)return;const zr=new Blob([gr.value.file],{type:"application/pdf"}),Jr=document.createElement("a");Jr.href=URL.createObjectURL(zr),Jr.download=`${gr.value.title}.pdf`,Jr.click(),URL.revokeObjectURL(Jr.href)},qr=zr=>fr.subjects.find(Jr=>Jr.id===zr)||{name:"Sin materia",color:"#94a3b8"};return(zr,Jr)=>{const Hr=resolveComponent("router-link");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$5,[createVNode(Hr,{to:"/pdfs",class:"mr-3 text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"},{default:withCtx(()=>Jr[1]||(Jr[1]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])),_:1,__:[1]}),gr.value?(openBlock(),createElementBlock("h1",_hoisted_3$5,toDisplayString(gr.value.title),1)):createCommentVNode("",!0)]),gr.value?(openBlock(),createElementBlock("button",{key:0,onClick:rs,class:"btn btn-primary flex items-center"},Jr[2]||(Jr[2]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),createTextVNode(" Descargar ")]))):createCommentVNode("",!0)]),br.value?(openBlock(),createElementBlock("div",_hoisted_4$4,Jr[3]||(Jr[3]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando documento...",-1)]))):gr.value?(openBlock(),createElementBlock("div",_hoisted_5$3,[gr.value.subjectId?(openBlock(),createElementBlock("div",_hoisted_6$3,[createBaseVNode("span",{class:"inline-block w-3 h-3 rounded-full mr-2",style:normalizeStyle({backgroundColor:qr(gr.value.subjectId).color})},null,4),createBaseVNode("span",_hoisted_7$3,toDisplayString(qr(gr.value.subjectId).name),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_8$3,[createBaseVNode("div",_hoisted_9$3,[createBaseVNode("button",{onClick:$r,class:"p-2 rounded-lg bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600 disabled:opacity-50",disabled:yr.value===1},Jr[4]||(Jr[4]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)]),8,_hoisted_10$2),createBaseVNode("span",_hoisted_11$2," Página "+toDisplayString(yr.value)+" de "+toDisplayString(vr.value),1),createBaseVNode("button",{onClick:Zr,class:"p-2 rounded-lg bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600 disabled:opacity-50",disabled:yr.value===vr.value},Jr[5]||(Jr[5]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)]),8,_hoisted_12$2)]),createBaseVNode("div",_hoisted_13$2,[createBaseVNode("button",{onClick:Ir,class:"p-2 rounded-lg bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"},Jr[6]||(Jr[6]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})],-1)])),createBaseVNode("span",_hoisted_14$2,toDisplayString(Math.round(xr.value*100))+"% ",1),createBaseVNode("button",{onClick:Pr,class:"p-2 rounded-lg bg-white dark:bg-slate-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-slate-600"},Jr[7]||(Jr[7]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})],-1)]))])]),createBaseVNode("div",_hoisted_15$2,[createBaseVNode("canvas",{ref_key:"canvasRef",ref:Sr},null,512)])])):createCommentVNode("",!0),createVNode(_sfc_main$e,{show:Tr.value,title:Cr.value.title,message:Cr.value.message,type:Cr.value.type,onClose:Jr[0]||(Jr[0]=Kr=>Tr.value=!1)},null,8,["show","title","message","type"])])}}},useThemeStore=defineStore("theme",()=>{const ar=()=>typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches:!1,or=localStorage.getItem("theme"),lr=ref(or?or==="dark":ar()),cr=hr=>{hr?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};cr(lr.value);function ur(hr){lr.value=hr,localStorage.setItem("theme",hr?"dark":"light"),cr(hr)}function dr(){ur(!lr.value)}return typeof window<"u"&&window.matchMedia&&!or&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",hr=>{localStorage.getItem("theme")||ur(hr.matches)}),{isDark:lr,setDarkMode:ur,toggleDarkMode:dr}}),useSettingsStore=defineStore("settings",()=>{const ar=ref({notifications:!0,darkMode:!1,language:"es"});function or(cr){ar.value={...ar.value,...cr},localStorage.setItem("appSettings",JSON.stringify(ar.value))}function lr(){const cr=localStorage.getItem("appSettings");cr&&(ar.value=JSON.parse(cr))}return lr(),{settings:ar,updateSettings:or,loadSettings:lr}}),_hoisted_1$6={class:"space-y-6"},_hoisted_2$4={class:"card"},_hoisted_3$4={class:"flex items-center justify-between"},_hoisted_4$3={class:"card"},_hoisted_5$2={key:0,class:"text-gray-500 dark:text-gray-400"},_hoisted_6$2={key:1,class:"space-y-4"},_hoisted_7$2={class:"flex items-center justify-between"},_hoisted_8$2=["disabled"],_hoisted_9$2={key:1,class:"text-sm text-gray-500 dark:text-gray-400"},_hoisted_10$1={class:"card"},_hoisted_11$1={class:"space-y-2"},_hoisted_12$1={class:"flex items-center"},_hoisted_13$1={class:"text-gray-900 dark:text-white"},_hoisted_14$1={class:"card"},_hoisted_15$1={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_hoisted_16$1=["disabled"],_hoisted_17$1=["disabled"],_sfc_main$6={__name:"SettingsPage",setup(ar){const or=useThemeStore(),lr=useSubjectsStore();useNotesStore();const cr=useTasksStore();usePlannerStore(),useGradesStore(),usePdfsStore();const ur=useSettingsStore(),dr=ref(!1),hr=ref(!1),fr=ref(!1),pr=ref(null),mr=ref(!1),gr=ref({title:"",message:"",type:"info"});onMounted(async()=>{await lr.fetchSubjects()});const yr=kr=>{gr.value={title:"Error",message:kr,type:"error"},mr.value=!0},vr=kr=>{gr.value={title:"Éxito",message:kr,type:"success"},mr.value=!0},br=async()=>{try{await ur.exportData()}catch(kr){console.error("Error exporting data:",kr),yr("Error al exportar los datos")}},Sr=()=>{pr.value&&pr.value.click()},xr=async kr=>{try{const Mr=kr.target.files[0];if(!Mr)return;const Rr=new FileReader;Rr.onload=async Nr=>{try{const _r=JSON.parse(Nr.target.result);await ur.importData(_r),vr("Datos importados correctamente")}catch(_r){console.error("Error importing data:",_r),yr("Error al importar los datos: formato de archivo inválido")}},Rr.readAsText(Mr)}catch(Mr){console.error("Error importing data:",Mr),yr("Error al importar los datos")}},Er=()=>{fr.value=!0},wr=()=>{fr.value=!1},Ar=async()=>{gr.value={title:"Confirmar eliminación",message:"¿Estás seguro de que quieres eliminar todos los datos? Esta acción no se puede deshacer.",type:"warning"},mr.value=!0;const kr=watch(mr,Mr=>{Mr||kr()})},Tr=async()=>{await cr.requestNotificationPermission()},Cr=()=>"Notification"in window?Notification.permission:"not-supported";return(kr,Mr)=>(openBlock(),createElementBlock("div",null,[Mr[15]||(Mr[15]=createBaseVNode("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-6"},"Configuración",-1)),createBaseVNode("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$4,[Mr[3]||(Mr[3]=createBaseVNode("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Apariencia",-1)),createBaseVNode("div",_hoisted_3$4,[Mr[2]||(Mr[2]=createBaseVNode("span",{class:"text-gray-700 dark:text-gray-300"},"Tema Oscuro",-1)),createBaseVNode("button",{onClick:Mr[0]||(Mr[0]=Rr=>unref(or).toggleDarkMode()),class:normalizeClass(["relative inline-flex items-center h-6 rounded-full w-11 transition-colors",unref(or).isDark?"bg-primary-600":"bg-gray-300 dark:bg-gray-600"])},[createBaseVNode("span",{class:normalizeClass(["inline-block w-4 h-4 transform rounded-full bg-white transition-transform",unref(or).isDark?"translate-x-6":"translate-x-1"])},null,2)],2)])]),createBaseVNode("div",_hoisted_4$3,[Mr[5]||(Mr[5]=createBaseVNode("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Notificaciones",-1)),Cr()==="not-supported"?(openBlock(),createElementBlock("div",_hoisted_5$2," Las notificaciones no están soportadas en este navegador. ")):(openBlock(),createElementBlock("div",_hoisted_6$2,[createBaseVNode("div",_hoisted_7$2,[Mr[4]||(Mr[4]=createBaseVNode("span",{class:"text-gray-700 dark:text-gray-300"},"Estado",-1)),createBaseVNode("span",{class:normalizeClass(["px-2 py-1 text-xs rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":Cr()==="granted","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":Cr()==="default","bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":Cr()==="denied"}])},toDisplayString(Cr()==="granted"?"Habilitadas":Cr()==="denied"?"Bloqueadas":"No configuradas"),3)]),Cr()!=="granted"?(openBlock(),createElementBlock("button",{key:0,onClick:Tr,class:"btn btn-primary w-full",disabled:Cr()==="denied"},toDisplayString(Cr()==="denied"?"Notificaciones bloqueadas en el navegador":"Habilitar Notificaciones"),9,_hoisted_8$2)):createCommentVNode("",!0),Cr()==="denied"?(openBlock(),createElementBlock("p",_hoisted_9$2," Para habilitar las notificaciones, debes cambiar la configuración en tu navegador. ")):createCommentVNode("",!0)]))]),createBaseVNode("div",_hoisted_10$1,[Mr[6]||(Mr[6]=createBaseVNode("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Materias",-1)),createBaseVNode("div",_hoisted_11$1,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(lr).subjects,Rr=>(openBlock(),createElementBlock("div",{key:Rr.id,class:"flex items-center justify-between p-3 bg-white dark:bg-slate-900 border border-gray-200 dark:border-gray-700 rounded-lg"},[createBaseVNode("div",_hoisted_12$1,[createBaseVNode("span",{class:"inline-block w-4 h-4 rounded-full mr-3",style:normalizeStyle({backgroundColor:Rr.color})},null,4),createBaseVNode("span",_hoisted_13$1,toDisplayString(Rr.name),1)])]))),128))])]),createBaseVNode("div",_hoisted_14$1,[Mr[11]||(Mr[11]=createBaseVNode("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Gestión de Datos",-1)),createBaseVNode("div",_hoisted_15$1,[createBaseVNode("button",{onClick:br,class:"btn bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500 flex items-center justify-center",disabled:dr.value},[Mr[7]||(Mr[7]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1)),createTextVNode(" "+toDisplayString(dr.value?"Exportando...":"Exportar Datos"),1)],8,_hoisted_16$1),createBaseVNode("button",{onClick:Sr,class:"btn bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 flex items-center justify-center",disabled:hr.value},[Mr[8]||(Mr[8]=createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})],-1)),createTextVNode(" "+toDisplayString(hr.value?"Importando...":"Importar Datos"),1)],8,_hoisted_17$1),createBaseVNode("input",{type:"file",ref_key:"fileInputRef",ref:pr,onChange:xr,accept:"application/json",class:"hidden"},null,544)]),createBaseVNode("div",{class:"card mb-6"},[Mr[9]||(Mr[9]=createBaseVNode("h2",{class:"text-xl font-bold text-gray-900 dark:text-white mb-4"},"Eliminar Datos",-1)),Mr[10]||(Mr[10]=createBaseVNode("p",{class:"text-gray-600 dark:text-gray-400 mb-4"}," Esta acción eliminará todos los datos de la aplicación, incluyendo materias, notas, tareas, planificador, calificaciones y PDFs. Esta acción no se puede deshacer. ",-1)),createBaseVNode("button",{onClick:Er,class:"btn bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"}," Eliminar Todos los Datos ")])]),Mr[12]||(Mr[12]=createStaticVNode('<div class="card"><h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-4">Acerca de</h2><div class="text-gray-700 dark:text-gray-300 space-y-2"><div class="mt-8 pt-8 border-t border-gray-200 dark:border-gray-700"><div class="flex items-center justify-center space-x-2"><img src="'+_imports_0+'" alt="Logo" class="w-6 h-6"><p>StudyLoop v1.0.0</p></div><p class="text-center text-sm text-gray-500 dark:text-gray-400 mt-2"> © 2025 StudyLoop. Todos los derechos reservados. </p></div></div></div>',1))]),fr.value?(openBlock(),createElementBlock("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:withModifiers(wr,["self"])},[createBaseVNode("div",{class:"bg-white dark:bg-slate-800 rounded-lg shadow-xl max-w-md w-full p-6"},[Mr[13]||(Mr[13]=createBaseVNode("h3",{class:"text-lg font-bold text-gray-900 dark:text-white mb-4"},"Confirmar Eliminación",-1)),Mr[14]||(Mr[14]=createBaseVNode("p",{class:"text-gray-600 dark:text-gray-300 mb-6"}," ¿Estás seguro de que deseas eliminar todos los datos de la aplicación? Esta acción no se puede deshacer. ",-1)),createBaseVNode("div",{class:"flex justify-end space-x-3"},[createBaseVNode("button",{onClick:wr,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Cancelar "),createBaseVNode("button",{onClick:Ar,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors"}," Eliminar Todo ")])])])):createCommentVNode("",!0),createVNode(_sfc_main$e,{show:mr.value,title:gr.value.title,message:gr.value.message,type:gr.value.type,onClose:Mr[1]||(Mr[1]=Rr=>mr.value=!1),onConfirm:kr.handleConfirmDelete},null,8,["show","title","message","type","onConfirm"])]))}},_hoisted_1$5={class:"flex flex-col items-center justify-center py-12"},_sfc_main$5={__name:"NotFoundPage",setup(ar){const or=useRouter(),lr=()=>{or.go(-1)},cr=()=>{or.push("/")};return(ur,dr)=>(openBlock(),createElementBlock("div",_hoisted_1$5,[dr[0]||(dr[0]=createBaseVNode("h1",{class:"text-6xl font-bold text-primary-600 dark:text-primary-400 mb-4"},"404",-1)),dr[1]||(dr[1]=createBaseVNode("p",{class:"text-xl text-gray-700 dark:text-gray-300 mb-8"},"Página no encontrada",-1)),createBaseVNode("div",{class:"flex space-x-4"},[createBaseVNode("button",{onClick:lr,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Volver "),createBaseVNode("button",{onClick:cr,class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"}," Ir al Inicio ")])]))}},useScheduleStore=defineStore("schedule",()=>{const ar=ref([]),or=ref(!1),lr=computed(()=>mr=>ar.value.filter(gr=>gr.day===mr)),cr=computed(()=>{const mr=format(new Date,"EEEE",{locale:es}).toLowerCase();return ar.value.filter(gr=>gr.day===mr)}),ur=computed(()=>{const gr=format(new Date,"HH:mm");return ar.value.find(yr=>{const vr=yr.startTime,br=yr.endTime;return isWithinInterval(parseISO(gr),{start:parseISO(vr),end:parseISO(br)})})}),dr=async mr=>{ar.value.push({id:Date.now().toString(),...mr})},hr=async(mr,gr)=>{const yr=ar.value.findIndex(vr=>vr.id===mr);yr!==-1&&(ar.value[yr]={...ar.value[yr],...gr})},fr=async mr=>{ar.value=ar.value.filter(gr=>gr.id!==mr)};return setInterval(()=>{const mr=ur.value;mr&&"Notification"in window&&Notification.permission==="granted"&&new Notification("¡Hora de clase!",{body:`Ahora tienes clase de ${mr.subjectName}`,icon:"/logo.svg"})},6e4),{schedules:ar,loading:or,getSchedulesByDay:lr,getTodaySchedules:cr,getCurrentSchedule:ur,addSchedule:dr,updateSchedule:hr,deleteSchedule:fr}}),_hoisted_1$4={class:"mb-6 flex overflow-x-auto pb-2"},_hoisted_2$3=["onClick"],_hoisted_3$3={key:0,class:"text-center py-8"},_hoisted_4$2={key:1,class:"card relative overflow-hidden"},_hoisted_5$1={class:"relative min-h-[900px]"},_hoisted_6$1={class:"absolute top-0 left-0 w-20 h-full border-r border-gray-200 dark:border-gray-700"},_hoisted_7$1={class:"ml-20 relative"},_hoisted_8$1={class:"absolute top-0 left-0 w-full h-full p-2"},_hoisted_9$1={class:"flex justify-between items-start h-full"},_hoisted_10={class:"font-medium text-gray-900 dark:text-white text-sm"},_hoisted_11={class:"text-xs text-gray-600 dark:text-gray-300 mt-1"},_hoisted_12=["onClick"],_hoisted_13={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},_hoisted_14={class:"bg-white dark:bg-slate-800 rounded-lg p-6 w-full max-w-md"},_hoisted_15={key:0,value:null,disabled:""},_hoisted_16=["value"],_hoisted_17=["value"],_hoisted_18={class:"grid grid-cols-2 gap-4"},_sfc_main$4={__name:"SchedulePage",setup(ar){const or=useScheduleStore(),lr=useSubjectsStore(),cr=[{value:"lunes",name:"Lunes"},{value:"martes",name:"Martes"},{value:"miercoles",name:"Miércoles"},{value:"jueves",name:"Jueves"},{value:"viernes",name:"Viernes"}],ur=ref(format(new Date,"EEEE",{locale:es}).toLowerCase());function dr(){const Cr=[];for(let kr=7;kr<=22;kr++){const Mr=kr.toString().padStart(2,"0")+":00";Cr.push(Mr)}return Cr}const hr=dr(),fr=ref(!1),pr=ref({subjectId:"",day:ur.value,startTime:"08:00",endTime:"09:00"}),mr=()=>{pr.value={subjectId:"",day:ur.value,startTime:"08:00",endTime:"09:00"},fr.value=!0},gr=()=>{fr.value=!1},yr=ref(!1),vr=ref({title:"",message:"",type:"info"}),br=Cr=>{vr.value={title:"Error",message:Cr,type:"error"},yr.value=!0},Sr=async()=>{try{if(!pr.value.subjectId){br("Por favor selecciona una materia");return}if(pr.value.startTime>=pr.value.endTime){br("La hora de inicio debe ser anterior a la hora de fin");return}const Cr=lr.subjects.find(kr=>kr.id===pr.value.subjectId);await or.addSchedule({...pr.value,subjectName:Cr.name}),gr()}catch(Cr){console.error("Error saving schedule:",Cr),br("Error al guardar el horario")}},xr=async Cr=>{vr.value={title:"Confirmar eliminación",message:"¿Estás seguro de que quieres eliminar este horario?",type:"warning"},yr.value=!0;const kr=watch(yr,Mr=>{Mr||kr()})},Er=Cr=>lr.subjects.find(kr=>kr.id===Cr)||{name:"Sin materia",color:"#94a3b8"},wr=Cr=>{const kr=Tr(Cr.startTime);return`${Tr(Cr.endTime)-kr}px`},Ar=Cr=>{const kr=Tr("07:00");return`${Tr(Cr.startTime)-kr}px`},Tr=Cr=>{const[kr,Mr]=Cr.split(":").map(Number);return kr*60+Mr};return(Cr,kr)=>(openBlock(),createElementBlock("div",null,[createBaseVNode("div",{class:"flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4"},[kr[6]||(kr[6]=createBaseVNode("h1",{class:"text-2xl font-bold text-gray-900 dark:text-white"},"Horario de Clases",-1)),createBaseVNode("button",{onClick:mr,class:"btn btn-primary flex items-center justify-center"},kr[5]||(kr[5]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),createTextVNode(" Nueva Clase ")]))]),createBaseVNode("div",_hoisted_1$4,[(openBlock(),createElementBlock(Fragment$1,null,renderList(cr,Mr=>createBaseVNode("button",{key:Mr.value,onClick:Rr=>ur.value=Mr.value,class:normalizeClass(["px-4 py-2 mx-1 rounded-lg text-center min-w-[100px] whitespace-nowrap transition-colors",ur.value===Mr.value?"bg-primary-100 dark:bg-primary-900 text-primary-800 dark:text-primary-200 font-medium":"bg-white dark:bg-slate-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},toDisplayString(Mr.name),11,_hoisted_2$3)),64))]),unref(or).loading?(openBlock(),createElementBlock("div",_hoisted_3$3,kr[7]||(kr[7]=[createBaseVNode("p",{class:"text-gray-500 dark:text-gray-400"},"Cargando horario...",-1)]))):(openBlock(),createElementBlock("div",_hoisted_4$2,[createBaseVNode("div",_hoisted_5$1,[createBaseVNode("div",_hoisted_6$1,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(hr),Mr=>(openBlock(),createElementBlock("div",{key:Mr,class:"h-[60px] flex items-start px-2 pt-2 text-sm text-gray-500 dark:text-gray-400 border-t border-gray-200 dark:border-gray-700"},toDisplayString(Mr),1))),128))]),createBaseVNode("div",_hoisted_7$1,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(hr),Mr=>(openBlock(),createElementBlock("div",{key:Mr,class:"h-[60px] border-t border-gray-200 dark:border-gray-700"}))),128)),createBaseVNode("div",_hoisted_8$1,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(or).getSchedulesByDay(ur.value),Mr=>(openBlock(),createElementBlock("div",{key:Mr.id,class:"absolute p-2 rounded-lg w-[calc(100%-16px)] cursor-pointer transition-all hover:shadow-md",style:normalizeStyle({top:Ar(Mr),height:wr(Mr),backgroundColor:Er(Mr.subjectId).color+"20",borderLeft:`4px solid ${Er(Mr.subjectId).color}`})},[createBaseVNode("div",_hoisted_9$1,[createBaseVNode("div",null,[createBaseVNode("h3",_hoisted_10,toDisplayString(Mr.subjectName),1),createBaseVNode("p",_hoisted_11,toDisplayString(Mr.startTime.substring(0,5))+" - "+toDisplayString(Mr.endTime.substring(0,5)),1)]),createBaseVNode("button",{onClick:withModifiers(Rr=>xr(Mr.id),["stop"]),class:"p-1 text-gray-500 dark:text-gray-400 hover:text-red-600 dark:hover:text-red-400 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700"},kr[8]||(kr[8]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]),8,_hoisted_12)])],4))),128))])])])])),fr.value?(openBlock(),createElementBlock("div",_hoisted_13,[createBaseVNode("div",_hoisted_14,[kr[14]||(kr[14]=createBaseVNode("h2",{class:"text-xl font-semibold text-gray-900 dark:text-white mb-4"},"Nueva Clase",-1)),createBaseVNode("form",{onSubmit:withModifiers(Sr,["prevent"]),class:"space-y-4"},[createBaseVNode("div",null,[kr[9]||(kr[9]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Materia "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":kr[0]||(kr[0]=Mr=>pr.value.subjectId=Mr),class:"input",required:""},[pr.value.subjectId?createCommentVNode("",!0):(openBlock(),createElementBlock("option",_hoisted_15,"Selecciona una materia")),(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(lr).subjects,Mr=>(openBlock(),createElementBlock("option",{key:Mr.id,value:Mr.id},toDisplayString(Mr.name),9,_hoisted_16))),128))],512),[[vModelSelect,pr.value.subjectId]])]),createBaseVNode("div",null,[kr[10]||(kr[10]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Día "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("select",{"onUpdate:modelValue":kr[1]||(kr[1]=Mr=>pr.value.day=Mr),class:"input",required:""},[(openBlock(),createElementBlock(Fragment$1,null,renderList(cr,Mr=>createBaseVNode("option",{key:Mr.value,value:Mr.value},toDisplayString(Mr.name),9,_hoisted_17)),64))],512),[[vModelSelect,pr.value.day]])]),createBaseVNode("div",_hoisted_18,[createBaseVNode("div",null,[kr[11]||(kr[11]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Hora de inicio "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"time","onUpdate:modelValue":kr[2]||(kr[2]=Mr=>pr.value.startTime=Mr),class:"input appearance-none",style:{"-webkit-appearance":"none","-moz-appearance":"none"}},null,512),[[vModelText,pr.value.startTime]])]),createBaseVNode("div",null,[kr[12]||(kr[12]=createBaseVNode("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},[createTextVNode(" Hora de fin "),createBaseVNode("span",{class:"text-red-500"},"*")],-1)),withDirectives(createBaseVNode("input",{type:"time","onUpdate:modelValue":kr[3]||(kr[3]=Mr=>pr.value.endTime=Mr),class:"input appearance-none",style:{"-webkit-appearance":"none","-moz-appearance":"none"}},null,512),[[vModelText,pr.value.endTime]])])]),createBaseVNode("div",{class:"flex justify-end space-x-3 mt-6"},[createBaseVNode("button",{type:"button",onClick:gr,class:"px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors"}," Cancelar "),kr[13]||(kr[13]=createBaseVNode("button",{type:"submit",class:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors"}," Guardar ",-1))])],32)])])):createCommentVNode("",!0),createVNode(_sfc_main$e,{show:yr.value,title:vr.value.title,message:vr.value.message,type:vr.value.type,onClose:kr[4]||(kr[4]=Mr=>yr.value=!1),onConfirm:Cr.handleConfirmDelete},null,8,["show","title","message","type","onConfirm"])]))}},routes=[{path:"/",name:"home",component:_sfc_main$i},{path:"/notes",name:"notes",component:_sfc_main$f},{path:"/notes/:id",name:"note-editor",component:_sfc_main$d,props:!0},{path:"/tasks",name:"tasks",component:_sfc_main$c},{path:"/tasks/:id",name:"task-editor",component:_sfc_main$b,props:!0},{path:"/planner",name:"planner",component:_sfc_main$a},{path:"/grades",name:"grades",component:_sfc_main$9},{path:"/pdfs",name:"pdfs",component:_sfc_main$8},{path:"/pdfs/:id",name:"pdf-viewer",component:_sfc_main$7,props:!0},{path:"/settings",name:"settings",component:_sfc_main$6},{path:"/schedule",name:"schedule",component:_sfc_main$4},{path:"/:pathMatch(.*)*",name:"not-found",component:_sfc_main$5}],router=createRouter({history:createWebHistory("/Focus-App/"),routes}),_hoisted_1$3={class:"bg-white dark:bg-slate-800 border-t border-gray-200 dark:border-gray-700 py-2 w-full fixed bottom-0 left-0 z-50 md:relative"},_hoisted_2$2={class:"max-w-lg mx-auto px-4"},_hoisted_3$2={class:"flex justify-around items-center"},_sfc_main$3={__name:"TheNavigation",setup(ar){const or=useRoute();useThemeStore();const lr=computed(()=>or.name);return(cr,ur)=>{const dr=resolveComponent("router-link");return openBlock(),createElementBlock("nav",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("div",_hoisted_3$2,[createVNode(dr,{to:"/",class:normalizeClass(["flex flex-col items-center py-1 px-3 text-sm rounded-lg transition-colors",lr.value==="home"?"text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"])},{default:withCtx(()=>ur[0]||(ur[0]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),createBaseVNode("span",null,"Inicio",-1)])),_:1,__:[0]},8,["class"]),createVNode(dr,{to:"/notes",class:normalizeClass(["flex flex-col items-center py-1 px-3 text-sm rounded-lg transition-colors",lr.value==="notes"?"text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"])},{default:withCtx(()=>ur[1]||(ur[1]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),createBaseVNode("span",null,"Apuntes",-1)])),_:1,__:[1]},8,["class"]),createVNode(dr,{to:"/tasks",class:normalizeClass(["flex flex-col items-center py-1 px-3 text-sm rounded-lg transition-colors",lr.value==="tasks"?"text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"])},{default:withCtx(()=>ur[2]||(ur[2]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),createBaseVNode("span",null,"Tareas",-1)])),_:1,__:[2]},8,["class"]),createVNode(dr,{to:"/planner",class:normalizeClass(["flex flex-col items-center py-1 px-3 text-sm rounded-lg transition-colors",lr.value==="planner"?"text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"])},{default:withCtx(()=>ur[3]||(ur[3]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),createBaseVNode("span",null,"Planner",-1)])),_:1,__:[3]},8,["class"]),createVNode(dr,{to:"/schedule",class:normalizeClass(["flex flex-col items-center py-1 px-3 text-sm rounded-lg transition-colors",lr.value==="schedule"?"text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"])},{default:withCtx(()=>ur[4]||(ur[4]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),createBaseVNode("span",null,"Horario",-1)])),_:1,__:[4]},8,["class"]),createVNode(dr,{to:"/settings",class:normalizeClass(["flex flex-col items-center py-1 px-3 text-sm rounded-lg transition-colors md:hidden",lr.value==="settings"?"text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400"])},{default:withCtx(()=>ur[5]||(ur[5]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),createBaseVNode("span",null,"Ajustes",-1)])),_:1,__:[5]},8,["class"])])])])}}},_hoisted_1$2={class:"w-64 flex-shrink-0 h-screen bg-white dark:bg-slate-800 border-r border-gray-200 dark:border-gray-700"},_hoisted_2$1={class:"flex flex-col h-full"},_hoisted_3$1={class:"flex-1 px-4 py-6 space-y-2 overflow-y-auto"},_hoisted_4$1={class:"p-4 border-t border-gray-200 dark:border-gray-700"},_sfc_main$2={__name:"TheSidebar",setup(ar){const or=useRoute(),lr=computed(()=>or.name);return(cr,ur)=>{const dr=resolveComponent("router-link");return openBlock(),createElementBlock("aside",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[ur[8]||(ur[8]=createBaseVNode("div",{class:"flex items-center space-x-2 px-4 py-3"},[createBaseVNode("img",{src:_imports_0,alt:"Logo",class:"w-8 h-8"}),createBaseVNode("span",{class:"text-lg font-semibold text-primary-600 dark:text-primary-400"},"StudyLoop")],-1)),createBaseVNode("nav",_hoisted_3$1,[createVNode(dr,{to:"/",class:normalizeClass(["flex items-center px-4 py-3 rounded-lg transition-colors",lr.value==="home"?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},{default:withCtx(()=>ur[0]||(ur[0]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),createBaseVNode("span",null,"Dashboard",-1)])),_:1,__:[0]},8,["class"]),createVNode(dr,{to:"/notes",class:normalizeClass(["flex items-center px-4 py-3 rounded-lg transition-colors",lr.value==="notes"||lr.value==="note-editor"?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},{default:withCtx(()=>ur[1]||(ur[1]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),createBaseVNode("span",null,"Apuntes",-1)])),_:1,__:[1]},8,["class"]),createVNode(dr,{to:"/tasks",class:normalizeClass(["flex items-center px-4 py-3 rounded-lg transition-colors",lr.value==="tasks"||lr.value==="task-editor"?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},{default:withCtx(()=>ur[2]||(ur[2]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),createBaseVNode("span",null,"Tareas",-1)])),_:1,__:[2]},8,["class"]),createVNode(dr,{to:"/planner",class:normalizeClass(["flex items-center px-4 py-3 rounded-lg transition-colors",lr.value==="planner"?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},{default:withCtx(()=>ur[3]||(ur[3]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),createBaseVNode("span",null,"Planificador",-1)])),_:1,__:[3]},8,["class"]),createVNode(dr,{to:"/schedule",class:normalizeClass(["flex items-center px-4 py-3 rounded-lg transition-colors",lr.value==="schedule"?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},{default:withCtx(()=>ur[4]||(ur[4]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),createBaseVNode("span",null,"Horario",-1)])),_:1,__:[4]},8,["class"]),createVNode(dr,{to:"/grades",class:normalizeClass(["flex items-center px-4 py-3 rounded-lg transition-colors",lr.value==="grades"?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},{default:withCtx(()=>ur[5]||(ur[5]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})],-1),createBaseVNode("span",null,"Calificaciones",-1)])),_:1,__:[5]},8,["class"]),createVNode(dr,{to:"/pdfs",class:normalizeClass(["flex items-center px-4 py-3 rounded-lg transition-colors",lr.value==="pdfs"||lr.value==="pdf-viewer"?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},{default:withCtx(()=>ur[6]||(ur[6]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1),createBaseVNode("span",null,"Documentos",-1)])),_:1,__:[6]},8,["class"])]),createBaseVNode("div",_hoisted_4$1,[createVNode(dr,{to:"/settings",class:normalizeClass(["flex items-center px-4 py-3 rounded-lg transition-colors",lr.value==="settings"?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400 font-medium":"text-gray-600 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-slate-700"])},{default:withCtx(()=>ur[7]||(ur[7]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),createBaseVNode("span",null,"Configuración",-1)])),_:1,__:[7]},8,["class"])])])])}}},_hoisted_1$1={key:0,class:"fixed bottom-20 md:bottom-4 right-4 z-50"},_sfc_main$1={__name:"InstallPrompt",setup(ar){const or=ref(null),lr=ref(!1),cr=hr=>{hr.preventDefault(),or.value=hr,lr.value=!0},ur=async()=>{or.value&&(or.value.prompt(),await or.value.userChoice,or.value=null,lr.value=!1)},dr=()=>{window.matchMedia("(display-mode: standalone)").matches&&(lr.value=!1)};return onMounted(()=>{window.addEventListener("beforeinstallprompt",cr),dr()}),onBeforeUnmount(()=>{window.removeEventListener("beforeinstallprompt",cr)}),(hr,fr)=>lr.value?(openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("button",{onClick:ur,class:"bg-accent-500 hover:bg-accent-600 text-white font-semibold rounded-lg shadow-lg px-4 py-3 flex items-center transition-colors duration-200"},fr[0]||(fr[0]=[createBaseVNode("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[createBaseVNode("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})],-1),createTextVNode(" Descargar App ")]))])):createCommentVNode("",!0)}},_hoisted_1={class:"min-h-screen flex flex-col md:flex-row transition-colors duration-300"},_hoisted_2={class:"flex-1 flex flex-col"},_hoisted_3={class:"bg-white dark:bg-slate-800 shadow-sm border-b border-gray-200 dark:border-gray-700"},_hoisted_4={class:"px-4 py-3 flex items-center justify-between"},_hoisted_5={class:"text-xl font-bold text-gray-900 dark:text-white"},_hoisted_6={class:"flex items-center space-x-2"},_hoisted_7={key:0,class:"i-heroicons-sun-20-solid text-white w-5 h-5"},_hoisted_8={key:1,class:"i-heroicons-moon-20-solid text-gray-700 w-5 h-5"},_hoisted_9={class:"flex-1 overflow-auto p-4 pb-20 md:pb-4"},_sfc_main={__name:"App",setup(ar){const or=useRoute(),lr=useThemeStore(),cr=computed(()=>({home:"Dashboard",notes:"Apuntes",tasks:"Tareas",planner:"Planificador",grades:"Calificaciones",pdfs:"Documentos",settings:"Configuración"})[or.name]||"EstudiaPlan");return watch(()=>lr.isDark,ur=>{ur?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},{immediate:!0}),onMounted(()=>{window.matchMedia("(prefers-color-scheme: dark)").matches&&lr.setDarkMode(!0)}),(ur,dr)=>{const hr=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(_sfc_main$2,{class:"hidden md:flex"}),createBaseVNode("div",_hoisted_2,[createBaseVNode("header",_hoisted_3,[createBaseVNode("div",_hoisted_4,[createBaseVNode("h1",_hoisted_5,toDisplayString(cr.value),1),createBaseVNode("div",_hoisted_6,[createBaseVNode("button",{class:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700",onClick:dr[0]||(dr[0]=fr=>unref(lr).toggleDarkMode())},[unref(lr).isDark?(openBlock(),createElementBlock("span",_hoisted_7)):(openBlock(),createElementBlock("span",_hoisted_8))])])])]),createBaseVNode("main",_hoisted_9,[createVNode(hr,null,{default:withCtx(({Component:fr})=>[createVNode(Transition,{name:"fade",mode:"out-in"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(fr)))]),_:2},1024)]),_:1})]),createVNode(_sfc_main$3,{class:"md:hidden"})]),createVNode(_sfc_main$1)])}}};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/studyloop/sw.js").then(ar=>{console.log("SW registered: ",ar)}).catch(ar=>{console.log("SW registration failed: ",ar)})});const pinia=createPinia(),app=createApp(_sfc_main);app.use(pinia);app.use(router);app.mount("#app");
